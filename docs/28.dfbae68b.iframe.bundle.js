(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{2830:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(26),__webpack_require__(0)),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1003),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(2832),__webpack_require__(1)),ControlPanel=function ControlPanel(props){var _props$styles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isHidden=_useState2[0],setIsHidden=_useState2[1];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"control-panel",style:Object.assign({},null!==(_props$styles=props.styles)&&void 0!==_props$styles?_props$styles:{}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"main-window__control-panel-wrapper",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"control-panel__buttons",children:[props.sorting||null,props.content?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"main-window__button main-window__button--inverted main-window__button--filter",onClick:function onClick(){return setIsHidden((function(isHidden){return!isHidden}))},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{children:props.panelName||"Фильтры"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_3__.a,{className:"main-window__img ".concat(isHidden?"":"main-window__img--rotated")})]}):null,props.buttons||null,props.itemsCount?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"main-window__amount_table",children:props.itemsCount}):null]}),isHidden?null:props.content]})})};ControlPanel.displayName="ControlPanel",ControlPanel.__docgenInfo={description:"",methods:[],displayName:"ControlPanel"},__webpack_exports__.a=ControlPanel,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/MainWindow/ControlPanel/ControlPanel.jsx"]={name:"ControlPanel",docgenInfo:ControlPanel.__docgenInfo,path:"src/utils/MainWindow/ControlPanel/ControlPanel.jsx"})},2832:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2833);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2833:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.control-panel{width:100%}.control-panel .main-window__control-panel-wrapper{padding-top:5px;padding-bottom:10px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__button{margin-top:5px;padding:8px 10px;font-size:85%}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .switch{margin-top:5px;margin-right:10px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .searchbar{max-width:50%;margin-right:auto;padding:0;align-self:center;margin-left:-15px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__amount_table{color:#666666;align-self:center;margin-top:5px;margin-left:auto}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window{padding:0}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel{width:max-content;margin-bottom:0;margin-right:10px;box-sizing:border-box;padding-top:calc(5px);position:relative;background-color:#ffffff}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel::before{width:100%;height:20px;position:absolute;content:\"Сортировка\";top:8px;left:10px;z-index:0;color:#777777;font-size:95%}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel select{padding-top:18px;padding-right:25px;padding-left:9px;height:100%;margin:0;box-sizing:border-box;min-width:150px;z-index:0;background-color:transparent;cursor:pointer;border:1px solid #cccccc;transition:background-color 100ms ease-in-out;-webkit-appearance:none;-moz-appearance:none;background:transparent;background-image:url(\"data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z'></path></svg>\");background-repeat:no-repeat;background-position-x:100%;background-position-y:calc(50% + 2px)}.control-panel .main-window__control-panel-wrapper .main-window__button--filter{border-color:#cccccc;justify-content:space-between;padding:8px 8px !important;padding-right:5px !important}.control-panel .main-window__control-panel-wrapper .main-window__button--filter span{margin-right:20px;font-size:95%}.control-panel .main-window__control-panel-wrapper .main-window__button--filter .main-window__img{filter:none;max-width:18px;margin-top:1px;margin-right:0;transition:200ms cubic-bezier(0.23, 1, 0.32, 1)}.control-panel .main-window__control-panel-wrapper .main-window__button--filter .main-window__img path:nth-child(1){transition:200ms cubic-bezier(0.23, 1, 0.32, 1);fill:#333333}@media (max-width: 768px){.control-panel .main-window__control-panel-wrapper{padding-left:15px;padding-right:15px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons{width:calc(100% + 30px);padding:0 15px;box-sizing:border-box;flex-wrap:nowrap;margin-left:-15px;overflow:auto;white-space:nowrap}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel select{padding-top:18px !important;padding-right:25px !important;padding-left:9px !important;max-width:240px}}\n",""]),module.exports=exports},2838:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/edit.efe0dc2a.svg"},2850:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/ok.2ad21b54.svg"},2854:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/delete.1ad59e4c.svg"},2858:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return getPackaging})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getPackagingById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addPackaging})),__webpack_require__.d(__webpack_exports__,"e",(function(){return editPackaging})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deletePackaging})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addPackagingToProduct})),__webpack_require__.d(__webpack_exports__,"d",(function(){return deletePackagingFromProduct}));var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);function getPackaging(signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/",method:"GET",signal:signal})}function getPackagingById(id,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/"+id,method:"GET",signal:signal})}function addPackaging(packaging,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/",method:"POST",body:JSON.stringify(packaging),signal:signal})}function editPackaging(id,packaging,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/"+id,method:"PUT",body:JSON.stringify(packaging),signal:signal})}function deletePackaging(id,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/"+id,method:"DELETE",signal:signal})}function addPackagingToProduct(newPackaging,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/product/add/"+id,method:"POST",body:JSON.stringify(newPackaging)})}function deletePackagingFromProduct(productId){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/product/add/"+productId,method:"POST",body:JSON.stringify({packings:[]})})}},2990:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(50),__webpack_require__(26),__webpack_require__(255),__webpack_require__(159),__webpack_require__(0)),react_router_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(147),Assets_tableview_add_item_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2991),Assets_tableview_add_item_png__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(Assets_tableview_add_item_png__WEBPACK_IMPORTED_MODULE_7__),Assets_tableview_add_cont_png__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2992),Assets_tableview_add_cont_png__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(Assets_tableview_add_cont_png__WEBPACK_IMPORTED_MODULE_8__),Utils_hooks__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(1760),__webpack_require__(1002)),Utils_Form_ImageView_ImageView_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1047),Components_App__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(132),styled_components__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(25),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1);__webpack_exports__.a=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_6__.j)((function TableView(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(!0),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1],userContext=Object(react__WEBPACK_IMPORTED_MODULE_5__.useContext)(Components_App__WEBPACK_IMPORTED_MODULE_12__.a);Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){var temp=[];props.categories.map((function(element){return temp.push({id:element.id,hidden:!0})})),props.closeWindow&&props.setShowWindow(!1),props.categories.length>0&&setIsLoading(!1)}),[props.categories,props.closeWindow]);var data=Object(react__WEBPACK_IMPORTED_MODULE_5__.useMemo)((function(){return props.categories.map((function(category){return Object.assign({},category,{products:props.products.filter((function(product){return product.category===category.category}))})}))}),[props.products,isLoading]),columns=[{text:"Категория",value:"category",itemsCount:function itemsCount(category){return props.products.filter((function(product){return product.category===category.category})).length}}],nestedColumns=[{text:"Фото",value:"photo",formatFn:function formatFn(_ref){var photo=_ref.photo;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(Utils_Form_ImageView_ImageView_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{file:photo,style:{maxPreviewWidth:"70px"}})},width:"100px",maxWidth:"100px"},{text:"Название",value:"name"},{text:"Вес",value:"weight"},{text:"Место производства",value:"workshop"},{text:"Комментарий",value:"comment"}],SelectAction=styled_components__WEBPACK_IMPORTED_MODULE_13__.b.div.withConfig({displayName:"TableView__SelectAction",componentId:"sc-1t2iqfh-0"})(["display:flex;align-items:center;background-color:",";padding:5px;border-radius:5px;cursor:pointer;&:hover{filter:brightness(1.1);}&:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0;}&:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0;}.main-window__img{max-height:15px;}"],(function(_ref2){return _ref2.close?"green":"#bbb"})),_useTable=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_10__.h)({data:data,isLoading:isLoading,columns:columns,actions:function actions(item){return[{elementType:"edit",title:"Редактирование категории",link:"/products/category/edit/".concat(item.id),isRendered:userContext.userHasAccess(["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"])},{elementType:"delete",title:"Удаление категории",onClick:null,isRendered:userContext.userHasAccess(["ROLE_ADMIN"])}]},nestedTable:{isLoading:isLoading,columns:nestedColumns,actions:props.selectProduct?function onSelectActions(_ref3){var id=_ref3.id,name=_ref3.name;return[{customElement:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(SelectAction,{title:"Выбрать и продолжить",onClick:function onClick(){return props.selectProduct(id,name,id)},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("img",{className:"main-window__img",src:Assets_tableview_add_cont_png__WEBPACK_IMPORTED_MODULE_8___default.a,alt:""})}),isOutside:!0},{customElement:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(SelectAction,{title:"Выбрать и закрыть",close:!0,onClick:function onClick(){props.selectProduct(id,name,id),props.setCloseWindow(!props.closeWindow)},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("img",{className:"main-window__img",src:Assets_tableview_add_item_png__WEBPACK_IMPORTED_MODULE_7___default.a,alt:""})}),isOutside:!0}]}:function actionsNested(item){return[{elementType:"view",title:"Просмотр продукции",link:"/products/view/".concat(item.id),isRendered:userContext.userHasAccess(["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"])},{elementType:"edit",title:"Редактирование продукции",link:"/products/edit/".concat(item.id),isRendered:userContext.userHasAccess(["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"])},{elementType:"delete",title:"Удаление продукции",onClick:function onClick(){return props.deleteItem(item)},isRendered:userContext.userHasAccess(["ROLE_ADMIN"])}]},fieldName:"products"},options:props.selectProduct?{fullSize:!0}:void 0});return _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useTable,1)[0]}))},2991:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/add_item.08eba0e6.png"},2992:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/add_cont.9bf680a8.png"},3025:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(255),__webpack_require__(657),__webpack_require__(658),__webpack_require__(79),__webpack_require__(465),__webpack_require__(197),__webpack_require__(50);var react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react_router_dom__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(44),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(1760),__webpack_require__(2838)),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10__),Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2854),Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11__),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2850),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12__),Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__(3026),__webpack_require__(298)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1),TableViewCategory=function TableViewCategory(props){return Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){props.setShowWindow&&props.setShowWindow(!1)}),[props.data,props.closeWindow]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"tableview-category",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("span",{children:"Название"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window__actions",children:"Действия"})]}),function sortProducts(data){return Object(Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_14__.a)(function searchQuery(data){var query=props.searchQuery.toLowerCase();return data.filter((function(item){return item.category.toLowerCase().includes(query)||item.id.toString().includes(query)}))}(data),{fieldName:"name",direction:"asc"})}(props.data).map((function(category,category_id){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__list-item",onClick:function onClick(){props.selectCategory(category.category),props.setCloseWindow(!props.closeWindow)},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("span",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window__mobile-text",children:"Название:"}),category.category]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__actions",children:[props.userHasAccess&&props.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_8__.a,{to:"/products/category/edit/"+category.id,className:"main-window__action",title:"Редактировать категорию",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("img",{className:"main-window__img",src:Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10___default.a})}),props.userHasAccess&&props.userHasAccess(["ROLE_ADMIN"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{"data-id":category.id,className:"main-window__action",title:"Удалить категорию",onClick:props.deleteItem,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("img",{className:"main-window__img",src:Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11___default.a})}),props.selectCategory&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{"data-id":category.id,className:"main-window__action",title:"Выбрать категорию",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("img",{className:"main-window__img",src:Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12___default.a})})]})]},category_id)}))]})})})};TableViewCategory.displayName="TableViewCategory",TableViewCategory.__docgenInfo={description:"",methods:[],displayName:"TableViewCategory"},__webpack_exports__.a=TableViewCategory,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Products/CategoryManagement/TableView/TableViewCategory.jsx"]={name:"TableViewCategory",docgenInfo:TableViewCategory.__docgenInfo,path:"src/components/MainPage/Products/CategoryManagement/TableView/TableViewCategory.jsx"})},3026:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3027);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3027:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.tableview-category{width:calc(100% + 30px);margin-left:-15px}.tableview-category .main-window__list-item span:nth-child(1){flex:0 1 80%}.tableview-category .main-window__list-item .main-window__actions{flex:0 1 20%}@media (max-width: 768px){.tableview-category .main-window__actions{display:none}}\n",""]),module.exports=exports},3408:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(255),__webpack_require__(657),__webpack_require__(658),__webpack_require__(159),__webpack_require__(79),__webpack_require__(465),__webpack_require__(197),__webpack_require__(0)),_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__(3409),__webpack_require__(1760),__webpack_require__(348)),_TableView_jsx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2990),API_Products_products__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(669),API_Products_Categories_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(470),API_Products_packaging_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(2858),Utils_Form_FormWindow_FormWindow_jsx__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(200),_CategoryManagement_TableView_TableViewCategory_jsx__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(3025),Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(662),Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2830),Utils_hooks_useProductsList_useProductsList_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1027),Utils_hooks_useSort_useSort__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(1012),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(1),Products=function Products(props){var _useProductsList=Object(Utils_hooks_useProductsList_useProductsList_js__WEBPACK_IMPORTED_MODULE_20__.a)(),products=_useProductsList.products,categories=_useProductsList.categories,isProductsLoading=_useProductsList.isProductsLoading,_useState=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(""),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(""),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState3,2),searchQueryCategory=_useState4[0],setSearchQueryCategory=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(!1),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState5,2),showWindow=_useState6[0],setShowWindow=_useState6[1],_useSort=Object(Utils_hooks_useSort_useSort__WEBPACK_IMPORTED_MODULE_21__.a)(function filterSearchQuery(data){var query=searchQuery.toLowerCase();return data.filter((function(item){return item.name.toLowerCase().includes(query)||item.id.toString().includes(query)||item.weight.toString().includes(query)||null!==item.comment&&item.comment.toLowerCase().includes(query)}))}(products),{ignoreURL:!0,sortOrder:{curSort:"name",name:"asc"},sortOptions:[{value:"name asc",text:"По алфавиту (А-Я)"},{value:"name desc",text:"По алфавиту (Я-А)"},{value:"weight desc",text:"По весу"}]},[products]),sortPanel=_useSort.sortPanel,sortedData=_useSort.sortedData;Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){document.title="Продукция"}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"products",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)("div",{className:"main-window",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_18__.a,{linkTo:"/products/new",visibility:["ROLE_ADMIN","ROLE_MANAGER"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"main-window__header main-window__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)("div",{className:"main-window__title",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("span",{children:"Продукция"}),props.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER","ROLE_ENGINEER"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"main-window__button",onClick:function onClick(){return setShowWindow(!showWindow)},children:"Категории"}),props.userHasAccess(["ROLE_ADMIN"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"main-window__button",onClick:function onClick(){return props.history.push("/packaging")},children:"Упаковки"})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_Form_FormWindow_FormWindow_jsx__WEBPACK_IMPORTED_MODULE_16__.a,{title:"Категории продукции",content:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_18__.a,{linkTo:"/products/category/new",visibility:["ROLE_ADMIN"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{fullSize:!0,placeholder:"Введите название категории для поиска...",setSearchQuery:setSearchQueryCategory}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_CategoryManagement_TableView_TableViewCategory_jsx__WEBPACK_IMPORTED_MODULE_17__.a,{data:categories,searchQuery:searchQueryCategory,userHasAccess:props.userHasAccess,deleteItem:function deleteItemCategory(event){var id=event.target.dataset.id;Object(API_Products_Categories_js__WEBPACK_IMPORTED_MODULE_14__.b)(id)}})]}),showWindow:showWindow,setShowWindow:setShowWindow}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{fullSize:!0,placeholder:"Введите название продукции для поиска...",setSearchQuery:setSearchQuery}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_19__.a,{sorting:sortPanel,itemsCount:"Всего: ".concat(products.length," записей")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_TableView_jsx__WEBPACK_IMPORTED_MODULE_12__.a,{products:sortedData,categories:categories,searchQuery:searchQuery,isLoading:isProductsLoading,userHasAccess:props.userHasAccess,deleteItem:function deleteItem(_ref){var id=_ref.id;return Object(API_Products_packaging_js__WEBPACK_IMPORTED_MODULE_15__.d)(id).then((function(){return Object(API_Products_products__WEBPACK_IMPORTED_MODULE_13__.b)(id)}))}})]})})};Products.displayName="Products",Products.__docgenInfo={description:"",methods:[],displayName:"Products"},__webpack_exports__.default=Products,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Products/Products.jsx"]={name:"Products",docgenInfo:Products.__docgenInfo,path:"src/components/MainPage/Products/Products.jsx"})},3409:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3410);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3410:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.products .main-window__header .main-window__title{display:flex;flex-direction:row;align-items:center}.products .main-window__header .main-window__title span{margin-right:15px}.products .main-window__header .main-window__title .main-window__button{font-size:60%}.products .main-window .form-window__content .form-window__body .searchbar{margin-bottom:0}@media (max-width: 768px){.products .main-window__header .main-window__title{flex-wrap:wrap;margin-bottom:15px !important}.products .main-window__header .main-window__title span{margin-top:5px;margin-right:10px}.products .main-window__header .main-window__title .main-window__button{width:fit-content;margin-top:5px;margin-left:0;margin-bottom:0}}\n",""]),module.exports=exports}}]);