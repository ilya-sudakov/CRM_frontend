(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{2824:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(26),__webpack_require__(35),__webpack_require__(50),__webpack_require__(0)),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2828),__webpack_require__(1)),PlaceholderLoading=function PlaceholderLoading(_ref){var _ref$items=_ref.items,items=void 0===_ref$items?3:_ref$items,itemClassName=_ref.itemClassName,_ref$minHeight=_ref.minHeight,minHeight=void 0===_ref$minHeight?"1.5rem":_ref$minHeight,placeholderContent=_ref.placeholderContent,wrapperClassName=_ref.wrapperClassName,_ref$itemStyles=_ref.itemStyles,itemStyles=void 0===_ref$itemStyles?{}:_ref$itemStyles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),elements=_useState2[0],setElements=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){for(var temp=[],count=items,i=1;i<=count;i++)temp.push(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading__item ".concat(itemClassName),style:Object.assign({minHeight:minHeight},itemStyles)}));setElements([].concat(temp))}),[]),placeholderContent?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:itemClassName,style:{minHeight:minHeight},children:placeholderContent},index)}))}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item){return item}))})};PlaceholderLoading.displayName="PlaceholderLoading",PlaceholderLoading.__docgenInfo={description:"",methods:[],displayName:"PlaceholderLoading",props:{items:{defaultValue:{value:"3",computed:!1},type:{name:"number"},required:!1,description:""},minHeight:{defaultValue:{value:"'1.5rem'",computed:!1},type:{name:"string"},required:!1,description:""},itemStyles:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},itemClassName:{type:{name:"string"},required:!1,description:""},wrapperClassName:{type:{name:"string"},required:!1,description:""},placeholderContent:{type:{name:"any"},required:!1,description:""}}},__webpack_exports__.a=PlaceholderLoading,PlaceholderLoading.propTypes={items:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number,minHeight:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,itemClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,wrapperClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,placeholderContent:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.any,itemStyles:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"]={name:"PlaceholderLoading",docgenInfo:PlaceholderLoading.__docgenInfo,path:"src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"})},2828:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2829);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2829:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,'@keyframes pulse-placeholder-loading{0%,100%{background-color:#e7e7e7}50%{background-color:#efefef}}@keyframes load{from{left:-150px}to{left:100%}}.placeholder-loading__item{height:1rem;background-color:#ddd;animation:pulse-placeholder-loading 1s infinite ease-in-out;position:relative;overflow:hidden;border-bottom:1px solid #bbb}.placeholder-loading__item::after{content:"";display:block;position:absolute;left:-150px;top:0;height:100%;width:150px;background:linear-gradient(to right, transparent 0%, #e8e8e8 50%, transparent 100%);animation:load 1s cubic-bezier(0.4, 0, 0.2, 1) infinite}\n',""]),module.exports=exports},2836:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(21),DESCRIPTORS=__webpack_require__(80),global=__webpack_require__(31),has=__webpack_require__(100),isObject=__webpack_require__(87),defineProperty=__webpack_require__(132).f,copyConstructorProperties=__webpack_require__(1760),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function description(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},2858:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(35);var prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react_router_dom__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2859),__webpack_require__(44)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),Widget=function Widget(_ref){var _ref$title=_ref.title,title=void 0===_ref$title?"":_ref$title,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$content=_ref.content,content=void 0===_ref$content?null:_ref$content,linkTo=_ref.linkTo,_ref$subTitle=_ref.subTitle,subTitle=void 0===_ref$subTitle?"":_ref$subTitle,_ref$customHeader=_ref.customHeader,customHeader=void 0===_ref$customHeader?null:_ref$customHeader,_ref$miniWidget=_ref.miniWidget,miniWidget=void 0!==_ref$miniWidget&&_ref$miniWidget,_ref$icon=_ref.icon,icon=void 0===_ref$icon?null:_ref$icon;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"widget ".concat(null!=className?className:""," ").concat(miniWidget?"widget--mini":""),children:[null!=customHeader?customHeader:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"widget__title",children:[!miniWidget&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"widget__sub-title",children:subTitle}),linkTo?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_3__.a,{to:linkTo.address,title:linkTo.text,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("span",{children:[icon,title]})}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("span",{children:[icon,title]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"widget__content",children:content})]})};Widget.displayName="Widget",Widget.__docgenInfo={description:"",methods:[],displayName:"Widget",props:{title:{defaultValue:{value:"''",computed:!1},required:!1},className:{defaultValue:{value:"''",computed:!1},required:!1},content:{defaultValue:{value:"null",computed:!1},required:!1},subTitle:{defaultValue:{value:"''",computed:!1},required:!1},customHeader:{defaultValue:{value:"null",computed:!1},required:!1},miniWidget:{defaultValue:{value:"false",computed:!1},required:!1},icon:{defaultValue:{value:"null",computed:!1},required:!1}}},__webpack_exports__.a=Widget,Widget.proptypes={title:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,linkTo:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,subTitle:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,customHeader:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,miniWidget:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,icon:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.any},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/GeneralPage/Widget/Widget.jsx"]={name:"Widget",docgenInfo:Widget.__docgenInfo,path:"src/components/MainPage/GeneralPage/Widget/Widget.jsx"})},2859:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2860);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2860:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.widget{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;box-sizing:border-box;position:relative;width:100%;background-color:#fff;border:1px solid #cccccc;border-radius:10px;padding:9px 26px;padding-top:15px;min-width:300px;max-width:600px;max-height:360px;margin-bottom:15px;margin-right:15px}.widget--mini{max-width:none;height:fit-content;max-height:Max(calc(33.33vh - 62px), 120px)}.widget--mini .widget__content{height:fit-content}.widget--mini:last-child{margin-bottom:0}.widget__title{display:flex;flex-direction:row-reverse;justify-content:flex-start;align-items:center;font-size:1.25rem;position:relative;margin-bottom:5px;width:100%}.widget__title .widget__sub-title{font-size:0.9rem;color:#444}.widget__title>a{color:#333;margin-right:auto;transition:100ms ease-in-out;font-weight:500}.widget__title>a:hover{color:#bbb}.widget__title>span{display:flex;align-items:center;margin-right:auto;font-weight:500}.widget__title>span .main-window__img{filter:none !important}.widget__content{width:100%;height:100%;overflow-y:auto;box-sizing:border-box;padding-right:4px}.widget__content::-webkit-scrollbar-track,.widget__content *::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0.3);border-radius:10px;background-color:#f9f9f9}.widget__content::-webkit-scrollbar,.widget__content *::-webkit-scrollbar{width:8px;border-radius:10px;background-color:#f9f9f9}.widget__content::-webkit-scrollbar-thumb,.widget__content *::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0.3);background-color:#ddd}@media (max-width: 1350px){.widget{max-width:500px}}@media (max-width: 768px){.widget{max-width:100%;width:100%;margin-right:0;padding:15px 20px;padding-bottom:10px}}@media (max-width: 500px){.widget{max-height:calc(360px + 50px)}.widget__title{margin-top:2px;position:initial}.widget__title .main-window__button{position:absolute;margin-top:0;bottom:9px;left:20px}}\n",""]),module.exports=exports},2882:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return getMainTasks})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getMainTaskById})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteMainTask})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addMainTask})),__webpack_require__.d(__webpack_exports__,"c",(function(){return editMainTask})),__webpack_require__.d(__webpack_exports__,"d",(function(){return editTaskStatus}));var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);function getMainTasks(signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/mainTask/",method:"GET",signal:signal})}function getMainTaskById(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/mainTask/"+id,method:"GET"})}function deleteMainTask(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/mainTask/"+id,method:"DELETE"})}function addMainTask(newTask){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/mainTask/",method:"POST",body:JSON.stringify(newTask)})}function editMainTask(newTask,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/mainTask/"+id,method:"PUT",body:JSON.stringify(newTask)})}function editTaskStatus(newStatus,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/mainTask/condition/"+id,method:"PUT",body:JSON.stringify(newStatus)})}},3562:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3563);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3563:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,'.tasks-widget{font-size:1rem}.tasks-widget__content{width:100%}.tasks-widget .widget__title .widget__sub-title{font-size:1rem}.tasks-widget__date{font-size:0.8rem;color:#888888;display:flex;flex-direction:row;max-width:100%}.tasks-widget__date--expired{color:#770f0f}.tasks-widget__date-wrapper{display:flex;flex-direction:column}.tasks-widget__date-wrapper--expired{margin-bottom:10px;border-radius:10px;padding:10px 15px 5px 15px;background-color:#e0b5b541}.tasks-widget__list{width:100%}.tasks-widget__list .list__item{display:flex;flex-direction:row;align-items:center;min-width:100%;padding:5px 0px;box-sizing:border-box;margin-bottom:5px;padding-left:20px;position:relative}.tasks-widget__list .list__item::before{content:"";background-color:#bbbbbb;border-radius:999px;width:8px;height:8px;position:absolute;left:0;top:calc(50% - 4px)}.tasks-widget__list .list__item--placeholder::before{left:10px}.tasks-widget__list .list__item--in-progress::before{background-color:#94bbe2}.tasks-widget__list .list__item--in-progress .list-item__conditions span:first-child{color:#2a629a}.tasks-widget__list .list__item--completed::before{background-color:#52d66c}.tasks-widget__list .list__item--completed .list-item__conditions span:first-child{color:#175f25}.tasks-widget__list .list__item--delayed::before{background-color:#e79ecb}.tasks-widget__list .list__item--delayed .list-item__conditions span:first-child{color:#bd2f87}.tasks-widget__list .list__item--problem::before{background-color:#da756e}.tasks-widget__list .list__item--problem .list-item__conditions span:first-child{color:#a03029}.tasks-widget__list .list__item--materials::before{background-color:#d4ad5e}.tasks-widget__list .list__item--materials .list-item__conditions span:first-child{color:#8d6b26}.tasks-widget__list .list__item .list-item__general-info{display:flex;flex-direction:column;color:#000000;width:fit-content;max-width:100%;cursor:pointer;font-size:0.9rem}.tasks-widget__list .list__item .list-item__general-info:hover .list-item__description{text-decoration:underline}.tasks-widget__list .list__item .list-item__conditions{font-size:0.8rem;color:#888888;display:flex;flex-direction:row;max-width:100%}.tasks-widget__list .list__item .list-item__conditions .condition{position:relative;white-space:nowrap;margin-left:15px}.tasks-widget__list .list__item .list-item__conditions .condition::before{content:"";background-color:#dddddd;width:2px;height:80%;position:absolute;right:-10px;top:15%;border-radius:999px}.tasks-widget__list .list__item .list-item__conditions .condition:first-child{margin-left:0}.tasks-widget__list .list__item .list-item__conditions .condition--description{overflow:hidden;text-overflow:ellipsis}.tasks-widget__list .list__item .list-item__conditions .condition--hidden::before{display:none}.tasks-widget__list .list__item .list-item__description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 768px){.tasks-widget__date-wrapper--expired{margin-right:0px}}\n',""]),module.exports=exports},3594:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _conditions,toConsumableArray=__webpack_require__(18),toConsumableArray_default=__webpack_require__.n(toConsumableArray),asyncToGenerator=__webpack_require__(36),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),slicedToArray=__webpack_require__(7),slicedToArray_default=__webpack_require__.n(slicedToArray),regenerator=__webpack_require__(20),regenerator_default=__webpack_require__.n(regenerator),react=(__webpack_require__(130),__webpack_require__(79),__webpack_require__(0)),Widget=__webpack_require__(2858),defineProperty=(__webpack_require__(3562),__webpack_require__(15)),defineProperty_default=__webpack_require__.n(defineProperty),MainTasks=(__webpack_require__(256),__webpack_require__(50),__webpack_require__(464),__webpack_require__(196),__webpack_require__(26),__webpack_require__(35),__webpack_require__(2882)),filterTasks=function filterTasks(tasks){return tasks.filter((function(task){return"Выполнено"!==task.condition}))},filterTasksByUser=function filterTasksByUser(tasks){var userRole=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"admin";return tasks.filter((function(task){return task.responsible===userRole}))},getTasksList=function(){var _ref=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var tasks;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return tasks=[],_context.next=3,Object(MainTasks.f)().then((function(res){return res.json()})).then((function(res){return tasks=res})).catch((function(err){return console.error(err)}));case 3:return _context.abrupt("return",tasks);case 4:case"end":return _context.stop()}}),_callee)})));return function getTasksList(){return _ref.apply(this,arguments)}}(),functions_getTasksControlDatesList=function getTasksControlDatesList(tasks){var controlDates={};return tasks.sort((function(a,b){return a.dateControl<b.dateControl?-1:a.dateControl>b.dateControl?1:0})).map((function(task){var curDate=new Date(task.dateControl);return curDate=new Date(curDate.getFullYear(),curDate.getMonth(),curDate.getDate()),controlDates=Object.assign({},controlDates,defineProperty_default()({},curDate,void 0===controlDates[curDate]?[task]:[].concat(toConsumableArray_default()(controlDates[curDate]),[task])))})),controlDates},App=__webpack_require__(131),PlaceholderLoading=(__webpack_require__(1004),__webpack_require__(1759),__webpack_require__(2836),__webpack_require__(2824)),functions=__webpack_require__(61),conditions=(_conditions={},defineProperty_default()(_conditions,"Выполнено","completed"),defineProperty_default()(_conditions,"Материалы","materials"),defineProperty_default()(_conditions,"В процессе","in-progress"),defineProperty_default()(_conditions,"Отложено","delayed"),defineProperty_default()(_conditions,"Проблема","problem"),_conditions),react_router=__webpack_require__(147),prop_types=__webpack_require__(2),prop_types_default=__webpack_require__.n(prop_types),jsx_runtime=__webpack_require__(1),TasksList_TasksList=function TasksList(_ref){var _ref$tasks=_ref.tasks,tasks=void 0===_ref$tasks?[]:_ref$tasks,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,_ref$controlDates=_ref.controlDates,controlDates=void 0===_ref$controlDates?{}:_ref$controlDates,_ref$userHasAccess=_ref.userHasAccess,userHasAccess=void 0===_ref$userHasAccess?function(){}:_ref$userHasAccess;return Object(jsx_runtime.jsx)("div",{className:"tasks-widget__list",children:isLoading?Object(jsx_runtime.jsx)(PlaceholderLoading.a,{itemClassName:"list__item list__item--placeholder",minHeight:"2rem",items:3}):Object.entries(controlDates).map((function(date,index){var isExpired=new Date(date[0])<new Date;return Object(jsx_runtime.jsx)(TasksList_ListWrapper,{isExpired:isExpired,date:date,tasks:tasks,userHasAccess:userHasAccess},index)}))})};TasksList_TasksList.displayName="TasksList",TasksList_TasksList.__docgenInfo={description:"",methods:[],displayName:"TasksList",props:{tasks:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},isLoading:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},controlDates:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},userHasAccess:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""}}};var TasksWidget_TasksList_TasksList=TasksList_TasksList;TasksList_TasksList.propTypes={tasks:prop_types_default.a.array,isLoading:prop_types_default.a.bool,controlDates:prop_types_default.a.object,userHasAccess:prop_types_default.a.func};var TasksList_ListWrapper=function ListWrapper(_ref2){var _ref2$isExpired=_ref2.isExpired,isExpired=void 0!==_ref2$isExpired&&_ref2$isExpired,_ref2$date=_ref2.date,date=void 0===_ref2$date?[new Date]:_ref2$date,_ref2$tasks=_ref2.tasks,tasks=void 0===_ref2$tasks?[]:_ref2$tasks,userHasAccess=_ref2.userHasAccess;return Object(jsx_runtime.jsxs)("div",{className:"tasks-widget__date-wrapper ".concat(isExpired?"tasks-widget__date-wrapper--expired":""),children:[Object(jsx_runtime.jsx)("div",{className:"tasks-widget__date ".concat(isExpired?"tasks-widget__date--expired":""),children:"до ".concat(Object(functions.h)(date[0])," ").concat(isExpired?"- опоздание ".concat(Object(functions.f)(new Date(date[0]),new Date)," дн."):"")}),tasks.filter((function(task){return Object(functions.g)(task.dateControl)===Object(functions.g)(date[0])})).map((function(task){return Object(jsx_runtime.jsx)(TasksList_ListItem,{task:task,userHasAccess:userHasAccess},task.id)}))]})};TasksList_ListWrapper.displayName="ListWrapper",TasksList_ListWrapper.propTypes={tasks:prop_types_default.a.array,index:prop_types_default.a.number,isExpired:prop_types_default.a.bool,date:prop_types_default.a.array,userHasAccess:prop_types_default.a.func};var TasksList_ListItem=function ListItem(_ref3){var _ref3$task=_ref3.task,task=void 0===_ref3$task?{id:1,description:"",condition:"",status:"",dateCreated:new Date,dateControl:new Date}:_ref3$task,userHasAccess=_ref3.userHasAccess,history=Object(react_router.h)();return Object(jsx_runtime.jsx)("div",{className:"list__item list__item--".concat(conditions[task.condition]),children:Object(jsx_runtime.jsxs)("div",{className:"list-item__general-info",onClick:function onClick(){return history.push("/dispatcher/general-tasks/edit/".concat(task.id))},children:[Object(jsx_runtime.jsx)("span",{className:"list-item__description",children:task.description}),Object(jsx_runtime.jsxs)("span",{className:"list-item__conditions",children:[Object(jsx_runtime.jsx)("span",{className:"condition condition--status",children:task.condition}),Object(jsx_runtime.jsx)("span",{className:"condition condition--date ".concat(userHasAccess(["ROLE_ADMIN"])||""!==task.status&&null!==task.status?"":"condition--hidden"),children:"от ".concat(Object(functions.h)(task.dateCreated))}),Object(jsx_runtime.jsx)("span",{className:"condition condition--description",children:userHasAccess(["ROLE_ADMIN"])?task.responsible:task.status})]})]})},task.id)};TasksList_ListItem.displayName="ListItem",TasksList_ListItem.propTypes={task:prop_types_default.a.object,userHasAccess:prop_types_default.a.func},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/GeneralPage/TasksWidget/TasksList/TasksList.jsx"]={name:"TasksList",docgenInfo:TasksList_TasksList.__docgenInfo,path:"src/components/MainPage/GeneralPage/TasksWidget/TasksList/TasksList.jsx"});var TasksWidget_TasksWidget_TasksWidget=function TasksWidget(){var _useState=Object(react.useState)([]),_useState2=slicedToArray_default()(_useState,2),tasks=_useState2[0],setTasks=_useState2[1],_useState3=Object(react.useState)({}),_useState4=slicedToArray_default()(_useState3,2),controlDates=_useState4[0],setControlDates=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1],userContext=Object(react.useContext)(App.a),loadTasks=function(){var _ref=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setIsLoading(!0),_context.next=3,getTasksList().then((function(tasks){var filteredCompletedTasks=filterTasks(tasks),filteredTasksByUser=userContext.userHasAccess(["ROLE_ADMIN"])?filteredCompletedTasks:filterTasksByUser(filteredCompletedTasks,userContext.userData.username),controlDates=functions_getTasksControlDatesList(filteredTasksByUser);return setControlDates(controlDates),console.log(tasks,controlDates),setTasks(toConsumableArray_default()(filteredTasksByUser)),setIsLoading(!1)}));case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})));return function loadTasks(){return _ref.apply(this,arguments)}}();return Object(react.useEffect)((function(){loadTasks()}),[]),tasks.length>0||isLoading?Object(jsx_runtime.jsx)(Widget.a,{className:"tasks-widget",title:userContext.userHasAccess(["ROLE_ADMIN"])?"Все задачи":"Ваши задачи",subTitle:userContext.userData.username,linkTo:{address:"/dispatcher/general-tasks",text:"Открыть"},content:Object(jsx_runtime.jsx)(TasksWidget_TasksList_TasksList,{tasks:tasks,isLoading:isLoading,controlDates:controlDates,userHasAccess:userContext.userHasAccess})}):null};TasksWidget_TasksWidget_TasksWidget.__docgenInfo={description:"",methods:[],displayName:"TasksWidget"};__webpack_exports__.default=TasksWidget_TasksWidget_TasksWidget;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/GeneralPage/TasksWidget/TasksWidget.jsx"]={name:"TasksWidget",docgenInfo:TasksWidget_TasksWidget_TasksWidget.__docgenInfo,path:"src/components/MainPage/GeneralPage/TasksWidget/TasksWidget.jsx"})}}]);