(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{2874:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return getPackaging})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getPackagingById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addPackaging})),__webpack_require__.d(__webpack_exports__,"e",(function(){return editPackaging})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deletePackaging})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addPackagingToProduct})),__webpack_require__.d(__webpack_exports__,"d",(function(){return deletePackagingFromProduct}));var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);function getPackaging(signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/",method:"GET",signal:signal})}function getPackagingById(id,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/"+id,method:"GET",signal:signal})}function addPackaging(packaging,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/",method:"POST",body:JSON.stringify(packaging),signal:signal})}function editPackaging(id,packaging,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/"+id,method:"PUT",body:JSON.stringify(packaging),signal:signal})}function deletePackaging(id,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/packing/"+id,method:"DELETE",signal:signal})}function addPackagingToProduct(newPackaging,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/product/add/"+id,method:"POST",body:JSON.stringify(newPackaging)})}function deletePackagingFromProduct(productId){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/product/add/"+productId,method:"POST",body:JSON.stringify({packings:[]})})}},2961:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(258),__webpack_require__(671),__webpack_require__(672),__webpack_require__(165),__webpack_require__(83),__webpack_require__(474),__webpack_require__(201);var Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(356),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0),Components_App__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(135),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1),TableView=function TableView(_ref){var data=_ref.data,isLoading=_ref.isLoading,deleteItem=_ref.deleteItem,onSelect=_ref.onSelect,searchQuery=_ref.searchQuery,userContext=Object(react__WEBPACK_IMPORTED_MODULE_8__.useContext)(Components_App__WEBPACK_IMPORTED_MODULE_9__.a);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_7__.a,{data:function filterData(data){return data.filter((function(item){return item.name.toLowerCase().includes(searchQuery.toLowerCase())||item.quantity.toString().toLowerCase().includes(searchQuery.toLowerCase())||item.size.toLowerCase().includes(searchQuery.toLowerCase())||item.comment.toLowerCase().includes(searchQuery.toLowerCase())}))}(data),columns:[{text:"Название",value:"name"},{text:"Кол-во",value:"quantity"},{text:"Размер",value:"size"},{text:"Комментарий",value:"comment"}],actions:onSelect?void 0:function actions(item){return[{elementType:"edit",title:"Редактировать запись",link:"/packaging/edit/".concat(item.id)},{elementType:"delete",title:"Удаление записи",onClick:function onClick(){return deleteItem(item.id)},isRendered:userContext.userHasAccess(["ROLE_ADMIN"])}]},loading:{isLoading:isLoading},onClick:onSelect?function(item){return onSelect(item)}:void 0,options:onSelect?{fullSize:!0}:void 0})};TableView.displayName="TableView",TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"},__webpack_exports__.a=TableView,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PackagingPage/TableView.jsx"]={name:"TableView",docgenInfo:TableView.__docgenInfo,path:"src/components/MainPage/PackagingPage/TableView.jsx"})},3511:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(472),__webpack_require__(302),__webpack_require__(475),__webpack_require__(0)),_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(3512),__webpack_require__(1782),__webpack_require__(355)),API_Products_packaging_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2874),Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(675),Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(674),_TableView_jsx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2961),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1),PackagingPage=function PackagingPage(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),packages=_useState2[0],setPackages=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(!1),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(""),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5,2),searchQuery=_useState6[0],setSearchQuery=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)({curSort:"name",name:"asc",nextDateContact:"asc"}),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState7,2),sortOrder=_useState8[0],setSortOrder=_useState8[1];Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){setIsLoading(!0);var abortController=new AbortController;return loadData(abortController.signal),function cancel(){abortController.abort()}}),[]);var loadData=function loadData(signal){return Object(API_Products_packaging_js__WEBPACK_IMPORTED_MODULE_9__.f)(signal).then((function(res){return res.json()})).then((function(res){setPackages(res),setIsLoading(!1)}))};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"packaging-page",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"main-window",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_10__.a,{linkTo:"/packaging/new",visibility:["ROLE_ADMIN"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"main-window__header main-window__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"main-window__title",children:"Упаковки"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_8__.a,{fullSize:!0,placeholder:"Введите запрос для поиска...",setSearchQuery:setSearchQuery}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{sorting:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"main-window__sort-panel",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("select",{onChange:function changeSortOrder(event){var name=event.target.value.split(" ")[0],order=event.target.value.split(" ")[1];setSortOrder(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({curSort:name},name,order))},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("option",{value:"name asc",children:"По алфавиту (А-Я)"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("option",{value:"name desc",children:"По алфавиту (Я-А)"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("option",{value:"quantity desc",children:"По штукам"})]})}),itemsCount:"Всего: ".concat(packages.length," записей")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_TableView_jsx__WEBPACK_IMPORTED_MODULE_12__.a,{data:packages.sort((function(a,b){return a[sortOrder.curSort]<b[sortOrder.curSort]?"desc"===sortOrder[sortOrder.curSort]?1:-1:a[sortOrder.curSort]>b[sortOrder.curSort]?"desc"===sortOrder[sortOrder.curSort]?-1:1:0})),isLoading:isLoading,searchQuery:searchQuery,deleteItem:function deleteItem(_ref){var id=_ref.id;return Object(API_Products_packaging_js__WEBPACK_IMPORTED_MODULE_9__.c)(id).then((function(){return loadData()})).catch((function(error){console.log(error),alert("Ошибка при удалении")}))}})]})})};PackagingPage.displayName="PackagingPage",PackagingPage.__docgenInfo={description:"",methods:[],displayName:"PackagingPage"},__webpack_exports__.default=PackagingPage,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PackagingPage/PackagingPage.jsx"]={name:"PackagingPage",docgenInfo:PackagingPage.__docgenInfo,path:"src/components/MainPage/PackagingPage/PackagingPage.jsx"})},3512:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3513);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3513:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.packaging-page .main-window__list .main-window__actions{flex-direction:row}\n",""]),module.exports=exports}}]);