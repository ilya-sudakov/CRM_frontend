(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{2647:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(282),__webpack_require__(40),__webpack_require__(2)),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(2649),__webpack_require__(1)),InputText=function InputText(_ref){var inputName=_ref.inputName,required=_ref.required,error=_ref.error,type=_ref.type,name=_ref.name,handleInputChange=_ref.handleInputChange,defaultValue=_ref.defaultValue,readOnly=_ref.readOnly,disabled=_ref.disabled,setErrorsArr=_ref.setErrorsArr,errorsArr=_ref.errorsArr;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__input_name",children:inputName+(required?"*":"")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:!0===error?"input_text__input_field input_text__input_field--error":"input_text__input_field",children:"textarea"===type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("textarea",{name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("input",{type:type||"text",name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled})})]}),error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__error",onClick:setErrorsArr?function(){return setErrorsArr(Object.assign({},errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,!1)))}:null,children:"Поле не заполнено!"})]})};InputText.displayName="InputText",InputText.__docgenInfo={description:"",methods:[],displayName:"InputText",props:{inputName:{type:{name:"string"},required:!1,description:""},required:{type:{name:"bool"},required:!1,description:""},error:{type:{name:"bool"},required:!1,description:""},type:{type:{name:"string"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},handleInputChange:{type:{name:"func"},required:!1,description:""},defaultValue:{type:{name:"string"},required:!1,description:""},readOnly:{type:{name:"bool"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},setErrorsArr:{type:{name:"func"},required:!1,description:""},errorsArr:{type:{name:"object"},required:!1,description:""}}},__webpack_exports__.a=InputText,InputText.propTypes={inputName:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,required:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,error:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,type:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,name:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,handleInputChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,defaultValue:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,setErrorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,errorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\Form\\InputText\\InputText.jsx"]={name:"InputText",docgenInfo:InputText.__docgenInfo,path:"src\\utils\\Form\\InputText\\InputText.jsx"})},2649:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(2650);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2650:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.input_text{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:20px}.input_text .input_text__error{width:100%;margin-top:1px;font-size:0.75rem;box-sizing:border-box;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.input_text .input_text__input{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;width:100%}.input_text .input_text__input .input_text__input_name{color:#666;padding-right:10px;flex:0 1 calc(20% - 10px);width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{display:flex;justify-content:center;width:calc(90% - 20px);position:relative;min-height:2rem;width:100%}.input_text .input_text__input .input_text__input_field input[type="text"],.input_text .input_text__input .input_text__input_field input[type="password"],.input_text .input_text__input .input_text__input_field input[type="number"],.input_text .input_text__input .input_text__input_field textarea{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;transition:100ms ease-in-out;box-sizing:border-box}.input_text .input_text__input .input_text__input_field input[type="text"]:hover,.input_text .input_text__input .input_text__input_field input[type="password"]:hover,.input_text .input_text__input .input_text__input_field input[type="number"]:hover,.input_text .input_text__input .input_text__input_field textarea:hover{border-color:#888888}.input_text .input_text__input .input_text__input_field input[type="text"]:focus,.input_text .input_text__input .input_text__input_field input[type="password"]:focus,.input_text .input_text__input .input_text__input_field input[type="number"]:focus,.input_text .input_text__input .input_text__input_field textarea:focus{border:1px solid #4293b6}.input_text .input_text__input .input_text__input_field input::-webkit-outer-spin-button,.input_text .input_text__input .input_text__input_field input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input_text .input_text__input .input_text__input_field textarea{min-width:calc(100% - 20px);outline:none;min-height:100px;max-height:150px;resize:vertical}.input_text .input_text__input .input_text__input_field input[type="number"]{-moz-appearance:textfield}.input_text .input_text__input .input_text__input_field--error input[type="text"],.input_text .input_text__input .input_text__input_field--error input[type="number"],.input_text .input_text__input .input_text__input_field--error input[type="password"],.input_text .input_text__input .input_text__input_field--error textarea{border:1px solid #d48282 !important}@media (max-width: 768px){.input_text .input_text__input{flex-wrap:wrap;align-items:flex-start;flex-direction:column}.input_text .input_text__input .input_text__input_name{width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{width:calc(100% - 0px)}.input_text .input_text__input .input_text__input_field input{padding:10px !important}}\n',""]),module.exports=exports},2661:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(18),$reduce=__webpack_require__(2668).left,arrayMethodIsStrict=__webpack_require__(990),CHROME_VERSION=__webpack_require__(443),IS_NODE=__webpack_require__(442);$({target:"Array",proto:!0,forced:!arrayMethodIsStrict("reduce")||!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2665:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return workshops})),__webpack_require__.d(__webpack_exports__,"b",(function(){return requestStatuses})),__webpack_require__.d(__webpack_exports__,"a",(function(){return productsStatuses}));var workshops={requests:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"},lemz:{name:"ЛЭМЗ",title:"ЛЭМЗ",redirectURL:"/lemz/workshop-lemz",ordersRedirectURL:"/lemz/workshop-orders",storageRedirectURL:"/lemz/workshop-storage",type:"lemz",fullName:"ЦехЛЭМЗ"},lepsari:{name:"Лепсари",title:"Лепсари",redirectURL:"/lepsari/workshop-lepsari",ordersRedirectURL:"/lepsari/workshop-orders",storageRedirectURL:"/lepsari/workshop-storage",type:"lepsari",fullName:"ЦехЛепсари"},ligovskiy:{name:"Лиговский",title:"Лиговский",redirectURL:"/ligovskiy/workshop",ordersRedirectURL:"/ligovskiy/workshop-orders",storageRedirectURL:"/ligovskiy/workshop-storage",type:"ligovskiy",fullName:"ЦехЛиговский"},null:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"}},requestStatuses=[{name:"Проблема/Материалы",oldName:"Проблема-материалы",className:"materials",access:["ROLE_ADMIN","ROLE_WORKSHOP"],visible:!1},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Отгружено",className:"shipped",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Частично отгружено",className:"shipped-in-parts",access:[]},{name:"Готово к отгрузке",oldName:"Готово",className:"ready",access:["ROLE_ADMIN","ROLE_WORKSHOP"]},{name:"В производстве",className:"in-production",access:[]},{name:"Ожидание",className:"waiting",access:["ROLE_ADMIN","ROLE_MANAGER","ROLE_WORKSHOP"]},{name:"Приоритет",className:"priority",access:["ROLE_ADMIN"]}],productsStatuses=[{name:"В работе",oldName:null,className:"production",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Приоритет",className:"defect",access:["ROLE_ADMIN"]}]},2667:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultStylesPDF})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createPDF})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getPDFTitleObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getInputElementTextPDF})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getTransportationListPdfText})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getRequestPdfText})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProductsFromRequestsListPdfText}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(213),__webpack_require__(241),__webpack_require__(282),__webpack_require__(987),__webpack_require__(2662),__webpack_require__(1584),__webpack_require__(2703)),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__),pdfmake__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2704),pdfmake__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(pdfmake__WEBPACK_IMPORTED_MODULE_8__),_functions_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(982),_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(985),defaultStylesPDF={title:{fontSize:18,alignment:"left"},subheader:{fontSize:14,alignment:"left"},regularText:{fontSize:11,alignment:"left"},tableHeader:{fontSize:11,color:"#555",alignment:"left"}},createPDF=function createPDF(data){var print=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,print?pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).print():pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).open()},getPDFTitleObject=function getPDFTitleObject(name){return{text:"".concat(name,"\n"),alignment:"center",style:"title"}},getInputElementTextPDF=function getInputElementTextPDF(title,value){return{text:[{text:"\n".concat(title,": \n"),style:"regularText",fontSize:12},{text:"".concat(value,"\n\n"),style:"subheader"}]}},getTransportationListPdfText=function getTransportationListPdfText(transportation){var transportationList=[],transportationInfo=[];transportation.map((function(item){return transportationInfo.push([{text:Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.g)(item.date),style:"regularText"},{text:item.cargo,style:"regularText"},{text:item.quantity,style:"regularText"},{text:item.sender,style:"regularText"},{text:item.recipient,style:"regularText"},{text:item.driver,style:"regularText"}])})),transportationList.push({table:{widths:[60,140,40,80,80,"*"],body:[[{text:"Дата",style:"tableHeader"},{text:"Товар",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Откуда",style:"tableHeader"},{text:"Куда",style:"tableHeader"},{text:"Водитель",style:"tableHeader"}]].concat(transportationInfo)}});var dd={info:{title:"Реестр транспортировок"},content:[getPDFTitleObject("Реестр транспортировок")].concat(transportationList),styles:defaultStylesPDF};return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,dd},getRequestPdfText=function getRequestPdfText(date,requestProducts,codeWord,workshopName,itemId){var productsArr=Object(_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__.a)(requestProducts,{fieldName:"name",direction:"asc"}).map((function(item){return[item.name,item.quantity,item.packaging,"",""]})),dd={info:{title:"Очередь производства №"+itemId},content:[getPDFTitleObject("Очередь производства  №".concat(itemId)),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",getInputElementTextPDF("Дата",Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.g)(date)),{text:"Продукция: ",style:"regularText",fontSize:12,margin:[0,0,0,5]},{table:{widths:["*",70,70,70,70],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Фасовка",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(productsArr))}},"\n",getInputElementTextPDF("Кодовое слово",codeWord)],styles:defaultStylesPDF};createPDF(dd)},sortRequestProducts=function sortRequestProducts(data){return data.sort((function(a,b){return a[0].localeCompare(b[0],void 0,{numeric:!0})<0?-1:a[0].localeCompare(b[0],void 0,{numeric:!0})>0?1:0}))},getProductsFromRequestsListPdfText=function getProductsFromRequestsListPdfText(products,workshopName){var dd={info:{title:"Очередь производства - список"},content:[getPDFTitleObject("Очередь производства - список"),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",sortRequestProducts(Object.entries(products)).map((function(category){if(Object.values(category[1]).length>0)return[{text:[{text:"".concat(category[0]," \n"),fontSize:12,style:"regularText",margin:[5,5,5,5]}]}].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(function formatProducts(products){return[{table:{margin:[0,5,0,5],widths:["*",100,80,80],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(sortRequestProducts(Object.entries(products)).map((function(product){return[product[0],product[1],"",""]}))))}}]}(category[1])),["\n"])}))],styles:defaultStylesPDF};createPDF(dd)}},2668:function(module,exports,__webpack_require__){var aFunction=__webpack_require__(285),toObject=__webpack_require__(148),IndexedObject=__webpack_require__(637),toLength=__webpack_require__(182),createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction(callbackfn);var O=toObject(that),self=IndexedObject(O),length=toLength(O.length),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}},2674:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return getClients})),__webpack_require__.d(__webpack_exports__,"j",(function(){return searchClients})),__webpack_require__.d(__webpack_exports__,"d",(function(){return editNextContactDateClient})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getClientsByCategoryAndType})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getClientById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addClient})),__webpack_require__.d(__webpack_exports__,"c",(function(){return editClient})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteClient})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getInfoByINN})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getBIKByINN}));__webpack_require__(2678),__webpack_require__(632),__webpack_require__(241);var axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(991),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(633);function getClients(elements){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/?size="+elements,method:"GET"})}function searchClients(query,fields){var formattedFields=fields.filter((function(cur){return""!==cur&&cur})).join("&");return console.log("formatted",formattedFields,fields),Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"".concat("http://localhost:8443","/api/v1/client/search/").concat(formattedFields&&""!==formattedFields?"".concat(formattedFields,"/"):""),method:"POST",body:JSON.stringify(query)})}function editNextContactDateClient(date){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/date/",method:"POST",body:JSON.stringify(date)})}function getClientsByCategoryAndType(category_type,curPage,itemsPerPage,sortOrder,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/category_type/client/?page="+(curPage-1)+"&sort="+sortOrder.curSort+","+sortOrder[sortOrder.curSort]+"&size="+itemsPerPage,method:"POST",body:JSON.stringify(category_type),signal:signal})}function getClientById(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/"+id,method:"GET"})}function addClient(newClient){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.a)();return axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("".concat("http://localhost:8443","/api/v1/client"),newClient,headers)}function editClient(newClient,id){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.a)();return axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("".concat("http://localhost:8443","/api/v1/client/").concat(id),newClient,headers)}function deleteClient(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/"+id,method:"DELETE"})}function getInfoByINN(INN){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.c)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party",method:"POST",body:JSON.stringify(INN)})}function getBIKByINN(INN){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.c)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/bank",method:"POST",body:JSON.stringify(INN)})}},2675:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return getUsers})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getUserById})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteUser})),__webpack_require__.d(__webpack_exports__,"c",(function(){return editUser})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addUser}));var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(633);function getUsers(signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/admin/user/",method:"GET",signal:signal})}function getUserById(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/admin/user/"+id,method:"GET"})}function deleteUser(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/admin/user/"+id,method:"DELETE"})}function editUser(newUser,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/admin/user/"+id,method:"PUT",body:JSON.stringify(newUser)})}function addUser(newUser){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/admin/user/",method:"POST",body:JSON.stringify(newUser)})}},2678:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(18),IndexedObject=__webpack_require__(637),toIndexedObject=__webpack_require__(183),arrayMethodIsStrict=__webpack_require__(990),nativeJoin=[].join,ES3_STRINGS=IndexedObject!=Object,STRICT_METHOD=arrayMethodIsStrict("join",",");$({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD},{join:function join(separator){return nativeJoin.call(toIndexedObject(this),void 0===separator?",":separator)}})},2696:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(2697);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2697:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.input_user{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:20px}.input_user .input_user__error{width:100%;margin-top:1px;font-size:0.75rem;box-sizing:border-box;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;cursor:pointer;transition:0.2s ease-in-out}.input_user .input_user__input{display:flex;justify-content:space-between;flex-direction:column;align-items:flex-start;width:100%}.input_user .input_user__input .input_user__input_name{color:#666;flex:0 1 calc(20% - 10px);padding-right:10px;width:100%;margin-bottom:5px}.input_user .input_user__input .input_user__input_field{display:flex;justify-content:center;width:calc(90% - 20px);position:relative;width:100%}.input_user .input_user__input .input_user__input_field input[type="text"],.input_user .input_user__input .input_user__input_field input[type="password"]{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;transition:100ms ease-in-out;box-sizing:border-box}.input_user .input_user__input .input_user__input_field input[type="text"]:hover,.input_user .input_user__input .input_user__input_field input[type="password"]:hover{border-color:#888888}.input_user .input_user__input .input_user__input_field input[type="text"]:focus,.input_user .input_user__input .input_user__input_field input[type="password"]:focus{border:1px solid #4293b6}.input_user .input_user__input .input_user__input_field--error input[type="text"],.input_user .input_user__input .input_user__input_field--error input[type="password"]{border:1px solid #d48282 !important}.input_user .input_user__input .input_user__input_field:focus{border:1px solid #4293b6}@media (max-width: 768px){.input_user .input_user__input{flex-wrap:wrap;flex-direction:column;align-items:flex-start}.input_user .input_user__input .input_user__input_name{width:100%}.input_user .input_user__input .input_user__input_field{width:100%}.input_user .input_user__input .input_user__input_field input{padding:10px !important}.input_user .input_user__error{margin-top:1px}}\n',""]),module.exports=exports},2698:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(2699);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2699:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select_user{width:100%;height:max-content;position:relative;box-sizing:border-box}.select_user .select_user__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select_user .select_user__overlay--hidden{display:none}.select_user__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:5px;z-index:2;min-height:2rem}.select_user__input:focus{border:1px solid #4293b6}.select_user__options{position:absolute;width:100%;max-height:200px;overflow-y:auto;background-color:#fff;display:flex;flex-direction:column;font-size:80%;z-index:2;transform:scaleX(1);transition:0.1s ease-in-out;box-shadow:0 4px 4px rgba(0,0,0,0.22),0 0px 5px rgba(0,0,0,0.24);transform-origin:0 0;padding:5px 0}.select_user__options--hidden{transform:scaleY(0)}.select_user__options .select_user__option_item{padding:10px 10px;cursor:pointer;background-color:#ffffff;transition:0.1s ease-in-out;display:flex;flex-direction:row;align-items:center}.select_user__options .select_user__option_item:hover{color:#fff;background-color:#4293b6}.select_user__select_usered{font-size:80%;display:flex;flex-direction:column}.select_user__select_usered_title{margin-top:10px;margin-left:15px;font-size:85%;color:#666}.select_user__select_usered_row{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:10px}.select_user__select_usered_row:first-of-type{margin-top:5px}.select_user__select_usered_row .select_user__select_usered_item{display:flex;padding:5px 10px;border-radius:5px;width:50%;margin-right:30px;position:relative;font-size:90%;align-items:center;border:1px solid #4293b6;cursor:pointer;background-color:#ffffff}.select_user__select_usered_row .select_user__select_usered_item:last-child{margin-bottom:0}.select_user__select_usered_row .select_user__select_usered_item .select_user__img{position:absolute;left:calc(100% + 10px);width:30px}@media (max-width: 768px){.select_user{width:100% !important}.select_user__select_usered_row{flex-direction:column}}\n",""]),module.exports=exports},2702:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return getPageByRequest})),__webpack_require__.d(__webpack_exports__,"c",(function(){return filterRequestsByPage})),__webpack_require__.d(__webpack_exports__,"e",(function(){return filterRequestsByStatuses})),__webpack_require__.d(__webpack_exports__,"d",(function(){return filterRequestsBySearchQuery})),__webpack_require__.d(__webpack_exports__,"k",(function(){return printRequest})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteItem})),__webpack_require__.d(__webpack_exports__,"l",(function(){return printRequestsList})),__webpack_require__.d(__webpack_exports__,"a",(function(){return copySelectedRequest})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getRequestsDefaultInputs})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getRequestsEditingDefaultInputs})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getRequestRedirectUrl})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getWorkshopOrdersDefaultInputs}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__),Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_20__=(__webpack_require__(632),__webpack_require__(213),__webpack_require__(282),__webpack_require__(983),__webpack_require__(984),__webpack_require__(242),__webpack_require__(635),__webpack_require__(332),__webpack_require__(440),__webpack_require__(283),__webpack_require__(243),__webpack_require__(333),__webpack_require__(40),__webpack_require__(2662),__webpack_require__(989),__webpack_require__(241),__webpack_require__(634),__webpack_require__(441),__webpack_require__(982)),Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2667),Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2681),_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2665),Utils_RequestsAPI_Products_Categories_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(2709),getPageByRequest=function getPageByRequest(item){return"Завершено"===item.status?"completed":"Отгружено"===item.status||"Частично отгружено"===item.status?"shipped":("Завершено"!==item.status&&"Отгружено"!==item.status&&item.status,"open")},filterRequestsByPage=function filterRequestsByPage(data,page){return data.filter((function(item){return"Завершено"===page&&"Завершено"===item.status||("Отгружено"===page&&("Отгружено"===item.status||"Частично отгружено"===item.status)||"Открытые"===page&&"Завершено"!==item.status&&"Отгружено"!==item.status&&"Частично отгружено"!==item.status)}))},filterRequestsByStatuses=function filterRequestsByStatuses(data,statuses){return data.filter((function(item){var check=!1,noActiveStatuses=!0;return statuses.map((function(status){statuses.map((function(status){status.visible&&(noActiveStatuses=!1)})),(!0===noActiveStatuses||status.visible&&(status.name===item.status||status.oldName===item.status))&&(check=!0)})),check}))},filterRequestsBySearchQuery=function filterRequestsBySearchQuery(data,searchQuery){var query=searchQuery.toLowerCase();return data.filter((function(item){return 0!==item.requestProducts.length&&null!==item.requestProducts[0].name?item.requestProducts[0].name.toLowerCase().includes(query)||item.id.toString().includes(query)||Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_20__.g)(item.date).includes(query)||(item.codeWord||"").toLowerCase().includes(query)||item.status.toLowerCase().includes(query)||item.responsible.toLowerCase().includes(query)||Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_20__.g)(item.shippingDate).includes(query):item.status.toLowerCase().includes(query)}))},printRequest=function printRequest(request){var _request$client$name,_request$client;Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_21__.f)(request.date,request.requestProducts,null!==(_request$client$name=null===(_request$client=request.client)||void 0===_request$client?void 0:_request$client.name)&&void 0!==_request$client$name?_request$client$name:request.codeWord,_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.c[request.factory].name,request.id)},deleteItem=function deleteItem(id,loadRequests){Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_22__.j)(id).then((function(res){return res.json()})).then((function(res){return Promise.all(res.requestProducts.map((function(product){return Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_22__.d)(product.id)})))})).then((function(){return Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_22__.e)(id)})).then((function(){return loadRequests()})).catch((function(error){console.log(error)}))},printRequestsList=function printRequestsList(setIsLoading,productsQuantities,fullName){var categories={};setIsLoading(!0),Object(Utils_RequestsAPI_Products_Categories_js__WEBPACK_IMPORTED_MODULE_24__.d)().then((function(res){return res.json()})).then((function(res){res.map((function(category){void 0===categories[category.category]&&(categories=Object.assign({},categories,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({},category.category,{}))),Object.entries(productsQuantities).map((function(product){category.products.map((function(categoryProduct){product[0]===categoryProduct.name&&(categories=Object.assign({},categories,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({},category.category,Object.assign({},categories[category.category],_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({},product[0],product[1])))))}))}))}))})).then((function(){setIsLoading(!1),Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_21__.e)(categories,fullName)})).catch((function(error){console.log(error),setIsLoading(!1)}))},copySelectedRequest=function copySelectedRequest(id,requests,setIsLoading,loadData){var _requestToBeCopied$cl,_requestToBeCopied$sh;setIsLoading(!0);var requestToBeCopied=requests.find((function(item){return item.id===id})),newId=0;Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_22__.b)({date:requestToBeCopied.date,products:requestToBeCopied.requestProducts,quantity:requestToBeCopied.quantity,clientId:null===(_requestToBeCopied$cl=requestToBeCopied.client)||void 0===_requestToBeCopied$cl?void 0:_requestToBeCopied$cl.id,sum:requestToBeCopied.sum,responsible:requestToBeCopied.responsible,status:requestToBeCopied.status,shippingDate:null!==(_requestToBeCopied$sh=requestToBeCopied.shippingDate)&&void 0!==_requestToBeCopied$sh?_requestToBeCopied$sh:new Date,comment:requestToBeCopied.comment,factory:requestToBeCopied.factory}).then((function(res){return res.json()})).then((function(res){return newId=res.id,Promise.all(requestToBeCopied.requestProducts.map((function(item){return Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_22__.a)({requestId:res.id,quantity:item.quantity,packaging:item.packaging,status:item.status,name:item.name})})))})).then((function(){var _requestToBeCopied$cl2;return Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_22__.c)(newId,null===(_requestToBeCopied$cl2=requestToBeCopied.client)||void 0===_requestToBeCopied$cl2?void 0:_requestToBeCopied$cl2.id)})).then((function(){setIsLoading(!1),loadData()})).catch((function(error){setIsLoading(!1),console.log(error)}))},getRequestsDefaultInputs=function getRequestsDefaultInputs(username,type){return[{name:"date",defaultValue:new Date,isRequired:!0,isValid:!0},{name:"responsible",defaultValue:username,isRequired:!0,isValid:!0},{name:"status",defaultValue:"Ожидание",isRequired:!0,isValid:!0},{name:"requestProducts",defaultValue:[],isRequired:!0},{name:"shippingDate",defaultValue:new Date((new Date).setDate((new Date).getDate()+7)),isRequired:!0,isValid:!0},{name:"comment",defaultValue:""},{name:"factory",defaultValue:type},{name:"sum",defaultValue:0},{name:"clientId",defaultValue:0,isRequired:!0}]},getRequestsEditingDefaultInputs=function getRequestsEditingDefaultInputs(username,type){var defaultInputs=getRequestsDefaultInputs(username,type);return defaultInputs=defaultInputs.map((function(input){return Object.assign({},input,{isValid:!0})})),defaultInputs=[].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(defaultInputs),[{name:"client",defaultValue:null,isRequired:!0,isValid:!0},{name:"oldProducts",defaultValue:[],isRequired:!0,isValid:!0}])},getRequestRedirectUrl=function getRequestRedirectUrl(history,splitPoint,type,inputs){var id=history.location.pathname.split(splitPoint)[1];return"".concat(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.c[type].redirectURL,"/").concat(getPageByRequest(inputs),"#").concat(id)},getWorkshopOrdersDefaultInputs=function getWorkshopOrdersDefaultInputs(factory){return[{name:"name",defaultValue:"",isRequired:!0},{name:"status",defaultValue:"ordered"},{name:"date",defaultValue:new Date,isRequired:!0,isValid:!0},{name:"deliverBy",defaultValue:new Date((new Date).setDate((new Date).getDate()+7)),isRequired:!0,isValid:!0},{name:"assembly",defaultValue:"ordered"},{name:"products",defaultValue:[{name:"",quantity:""}]},{name:"factoryName",defaultValue:factory}]}},2706:function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(23),defineProperty_default=__webpack_require__.n(defineProperty),slicedToArray=(__webpack_require__(40),__webpack_require__(282),__webpack_require__(2696),__webpack_require__(15)),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(632),__webpack_require__(2661),__webpack_require__(213),__webpack_require__(983),__webpack_require__(984),__webpack_require__(0)),Users=(__webpack_require__(2698),__webpack_require__(2675)),jsx_runtime=__webpack_require__(1),SelectUser_SelectUser_SelectUser=function SelectUser(props){var _useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1],_useState3=Object(react.useState)([]),_useState4=slicedToArray_default()(_useState3,2),options=_useState4[0],setOptions=_useState4[1],_useState5=Object(react.useState)(""),_useState6=slicedToArray_default()(_useState5,2),selectedUser=_useState6[0],setSelectedUser=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),showOptions=_useState8[0],setShowOptions=_useState8[1],search=function search(){return options.filter((function(item){return(!props.filteredRoles||item.roles.reduce((function(prevRole,curRole){var check=!1;return props.filteredRoles.map((function(filteredRole){filteredRole!==curRole.name||(check=!0)})),check}),!1))&&item.username.toLowerCase().includes(searchQuery.toLowerCase())}))},clickOnInput=function clickOnInput(){showOptions||0==search().length?0!=search().length&&setShowOptions(!1):setShowOptions(!0)},pressEscKey=Object(react.useCallback)((function(event){27===event.keyCode&&showOptions&&setShowOptions(!showOptions)}),[]);return Object(react.useEffect)((function(){return 0===options.length&&Object(Users.e)().then((function(res){return res.json()})).then((function(res){setOptions(res)})).catch((function(){!props.defaultValue&&setSelectedUser(props.userData.username)})),props.defaultValue&&setSelectedUser(props.defaultValue),document.addEventListener("keydown",pressEscKey,!1),function(){document.removeEventListener("keydown",pressEscKey,!1)}}),[props.defaultValue]),Object(jsx_runtime.jsxs)("div",{className:"select_user",children:[0!=search().length&&Object(jsx_runtime.jsx)("div",{className:showOptions?"select_user__overlay":"select_user__overlay select_user__overlay--hidden",onClick:function onClick(){return setShowOptions(!showOptions)}}),Object(jsx_runtime.jsx)("input",{type:"text",className:"select_user__input",onChange:function handleInputChange(event){var value=event.target.value;setSearchQuery(value),setSelectedUser(value),props.onChange(value)},onClick:props.readOnly?null:clickOnInput,value:props.readOnly?props.defaultValue:selectedUser,placeholder:props.searchPlaceholder,readOnly:props.readOnly||0===options.length}),options&&Object(jsx_runtime.jsx)("div",{className:showOptions?"select_user__options":"select_user__options select_user__options--hidden",children:search().map((function(item){return Object(jsx_runtime.jsx)("div",{className:"select_user__option_item",onClick:function onClick(){return function clickOnOption(name,id){clickOnInput(),setSelectedUser(name),props.onChange(name,id)}(item.username,item.id)},children:item.username},item.id)}))})]})};SelectUser_SelectUser_SelectUser.displayName="SelectUser",SelectUser_SelectUser_SelectUser.__docgenInfo={description:"",methods:[],displayName:"SelectUser"};var MainPage_SelectUser_SelectUser=SelectUser_SelectUser_SelectUser;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\SelectUser\\SelectUser.jsx"]={name:"SelectUser",docgenInfo:SelectUser_SelectUser_SelectUser.__docgenInfo,path:"src\\components\\MainPage\\SelectUser\\SelectUser.jsx"});var InputUser_InputUser_InputUser=function InputUser(props){return Object(jsx_runtime.jsxs)("div",{className:"input_user",children:[Object(jsx_runtime.jsxs)("div",{className:"input_user__input",children:[Object(jsx_runtime.jsx)("div",{className:"input_user__input_name",children:props.inputName+(props.required?"*":"")}),Object(jsx_runtime.jsx)("div",{className:!0===props.error?"input_user__input_field input_user__input_field--error":"input_user__input_field",children:Object(jsx_runtime.jsx)(MainPage_SelectUser_SelectUser,{onChange:props.handleUserChange,searchPlaceholder:props.searchPlaceholder,defaultValue:props.defaultValue,readOnly:props.readOnly,userData:props.userData,filteredRoles:props.filteredRoles})})]}),!0===props.error&&Object(jsx_runtime.jsx)("div",{className:"input_user__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,defineProperty_default()({},props.name,!1)))}:null,children:"Поле не заполнено!"})]})};InputUser_InputUser_InputUser.displayName="InputUser",InputUser_InputUser_InputUser.__docgenInfo={description:"",methods:[],displayName:"InputUser"};__webpack_exports__.a=InputUser_InputUser_InputUser;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\Form\\InputUser\\InputUser.jsx"]={name:"InputUser",docgenInfo:InputUser_InputUser_InputUser.__docgenInfo,path:"src\\utils\\Form\\InputUser\\InputUser.jsx"})},2780:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(282),__webpack_require__(634),__webpack_require__(441),__webpack_require__(40),__webpack_require__(0)),Utils_Form_FormWindow_FormWindow_jsx__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(2781),__webpack_require__(334)),Utils_RequestsAPI_Clients_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2674),Utils_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2669),Utils_hooks_useSearchBar__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2772),Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(208),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1),SelectClient=function SelectClient(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),showWindow=_useState2[0],setShowWindow=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3,2),closeWindow=_useState4[0],setCloseWindow=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5,2),clients=_useState6[0],setClients=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(0),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState7,2),id=_useState8[0],setId=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState10=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState9,2),name=_useState10[0],setName=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState12=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState11,2),isLoading=_useState12[0],setIsLoading=_useState12[1];Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){}),[]);var _useSearchBar=Object(Utils_hooks_useSearchBar__WEBPACK_IMPORTED_MODULE_11__.a)(void 0,[],(function(query){""===query&&setClients([]),query.length>2&&function loadClients(query){setIsLoading(!0),Object(Utils_RequestsAPI_Clients_jsx__WEBPACK_IMPORTED_MODULE_9__.j)({name:query,city:query,type:null},[selectedOption]).then((function(response){return response.json()})).then((function(response){console.log(response),setIsLoading(!1),setClients(response)})).catch((function(error){setIsLoading(!1),console.log(error)}))}(query)}),[{text:"Везде",value:""},{text:"Город",value:"city"}]),searchBar=_useSearchBar.searchBar,selectedOption=_useSearchBar.selectedOption,columns=[{text:"Название",value:"name"},{text:"Сайт",value:"site",link:{getURL:function getURL(site){var _site$split;return site&&(null==site||null===(_site$split=site.split("//"))||void 0===_site$split?void 0:_site$split.length)>1?site:"https://".concat(site)},isOutside:!0,newTab:!0},formatFn:function formatFn(site){return site&&site.split("//").length>1?site.split("//")[1]:site}},{text:"Контакты",value:"contacts",formatFn:function formatContacts(contacts){return(null==contacts?void 0:contacts.length)>0?(""!==contacts[0].name?"".concat(contacts[0].name,", "):"")+contacts[0].phoneNumber:"Не указаны контакт. данные"}},{text:"Комментарий",value:"comment"}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"select-client",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"select-client__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"select-client__input_name main-form__input_name--header",children:[props.inputName+(props.required?"*":""),!props.readonly&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Utils_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_10__.a,{text:"Выбрать клиента",onClick:function onClick(){return setShowWindow(!showWindow)}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"select-client__input_field",children:(0!==id||props.defaultValue)&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"select-client__searchbar",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("input",{type:"text",className:!0===props.error?"select-client__input select-client__input--error":"select-client__input",value:props.defaultValue&&""===name?props.defaultValue:name,placeholder:"Выберите клиента, нажав на кнопку 'Выбрать клиента'",disabled:!0})})})]}),!0===props.error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"select-client__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Utils_Form_FormWindow_FormWindow_jsx__WEBPACK_IMPORTED_MODULE_8__.a,{title:"Клиенты",content:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.Fragment,{children:[searchBar,0===clients.length?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{style:{padding:"10px 25px"},children:"Введите не менее 3 символа для начала поиска"}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_12__.c,{columns:columns,data:clients,loading:{isLoading:isLoading},onClick:function clickClient(_ref){var id=_ref.id,name=_ref.name;setId(id),setName(name),console.log(id),props.onChange(id),setShowWindow(!showWindow),setCloseWindow(!closeWindow)}})]}),showWindow:showWindow,setShowWindow:setShowWindow})]})};SelectClient.displayName="SelectClient",SelectClient.__docgenInfo={description:"",methods:[],displayName:"SelectClient"},__webpack_exports__.a=SelectClient,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Clients\\SelectClients\\SelectClients.jsx"]={name:"SelectClient",docgenInfo:SelectClient.__docgenInfo,path:"src\\components\\MainPage\\Clients\\SelectClients\\SelectClients.jsx"})},2781:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(2782);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2782:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-client{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:25px}.select-client .select-client__input{display:flex;width:100%;justify-content:space-between;flex-direction:column;align-items:flex-start}.select-client .select-client__input .select-client__input_name{color:#666;flex:0 1 20%;width:100%}.select-client .select-client__input .select-client__input_name--row{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.select-client .select-client__input .select-client__input_name--row .main-form__link{margin-left:20px}.select-client .select-client__input .select-client__input_field{width:calc(90% - 20px);width:100%}.select-client .select-client__error{width:100%;box-sizing:border-box;margin-top:1px;font-size:0.75rem;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.select-client .select-client__error--hidden{display:none}.select-client .main-form__button{font-size:0.8rem}.select-client .select-client__searchbar{display:flex;flex-direction:row;margin-top:5px;position:relative;min-height:2rem}.select-client .select-client__searchbar .select-client__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;z-index:0;transition:100ms ease-in-out}.select-client .select-client__searchbar .select-client__input:hover{border-color:#888888}.select-client .select-client__searchbar .select-client__input:focus{border:1px solid #4293b6}.select-client .select-client__searchbar .select-client__input--error{border:1px solid #f73434 !important}.select-client .select-client__searchbar .select-client__search_button{border:0;flex:0 1 15%;background-color:#4293b6;color:#fff;border-radius:5px;outline:none;cursor:pointer;padding:5px 10px;font-size:80%;transition:0.2s ease-in-out}.select-client .select-client__searchbar .select-client__search_button:hover{background-color:#519fc0}.select-client .main-window__list{position:relative;width:calc(100% + 30px) !important;margin-left:-15px}.select-client .main-window__list .main-window__list-item{cursor:pointer}.select-client .main-window__list .main-window__list-item span{align-items:center}.select-client .main-window__list .main-window__list-item span:nth-child(1){flex:0 1 15%}.select-client .main-window__list .main-window__list-item span:nth-child(2){flex:0 1 10%;max-width:120px;overflow:hidden;text-overflow:ellipsis}.select-client .main-window__list .main-window__list-item span:nth-child(3){flex:0 1 15%}.select-client .main-window__list .main-window__list-item span:nth-child(4){flex:0 1 30%;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.select-client .searchbar{padding-bottom:10px;margin-bottom:0px}@media (max-width: 768px){.select-client .select-client__input{flex-wrap:wrap;flex-direction:column}.select-client .select-client__input .select-client__input_name{width:100%}.select-client .select-client__input .select-client__input_field{width:100%}.select-client .select-client__input .select-client__input_field input{padding:10px !important}}\n",""]),module.exports=exports},3273:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(440),__webpack_require__(242),__webpack_require__(283),__webpack_require__(243),__webpack_require__(333),__webpack_require__(213),__webpack_require__(282),__webpack_require__(241),__webpack_require__(332),__webpack_require__(0)),Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__(3274),__webpack_require__(2655),__webpack_require__(2663)),Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2647),Utils_Form_InputUser_InputUser_jsx__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(2706),Utils_Form_InputProducts_InputProducts_jsx__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2799),Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(181),_App_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(214),Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2681),_workshopVariables_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2665),_Clients_SelectClients_SelectClients_jsx__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2780),_functions_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2702),Utils_hooks__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2656),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(1),NewRequest=function NewRequest(props){var userContext=Object(react__WEBPACK_IMPORTED_MODULE_10__.useContext)(_App_js__WEBPACK_IMPORTED_MODULE_18__.a),requestsDefaultInputs=Object(_functions_js__WEBPACK_IMPORTED_MODULE_22__.h)(userContext.userData.username,props.type),_useForm=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_23__.a)(requestsDefaultInputs),_handleInputChange=_useForm.handleInputChange,formInputs=_useForm.formInputs,formErrors=_useForm.formErrors,setFormErrors=_useForm.setFormErrors,formIsValid=_useForm.formIsValid,errorWindow=_useForm.errorWindow,_useState=Object(react__WEBPACK_IMPORTED_MODULE_10__.useState)(!1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_10__.useEffect)((function(){document.title="Создание заявки"}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"new-request",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"main-form",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("form",{className:"main-form__form",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"main-form__header main-form__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"main-form__title",children:"Новая заявка ".concat(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_20__.c[props.type].title)})}),errorWindow,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"main-form__row",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_13__.a,{inputName:"Дата заявки",required:!0,error:formErrors.date,name:"date",selected:Date.parse(formInputs.date),handleDateChange:function handleDateChange(value){return _handleInputChange("date",value)},errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_13__.a,{inputName:"Дата отгрузки",name:"shippingDate",selected:formInputs.shippingDate,handleDateChange:function handleDateChange(value){return _handleInputChange("shippingDate",value)},errorsArr:formErrors,setErrorsArr:setFormErrors})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_InputProducts_InputProducts_jsx__WEBPACK_IMPORTED_MODULE_16__.a,{inputName:"Продукция",userHasAccess:userContext.userHasAccess,required:!0,options:!0,name:"requestProducts",onChange:function onChange(products){return _handleInputChange("requestProducts",products)},defaultValue:formInputs.requestProducts,error:formErrors.requestProducts,searchPlaceholder:"Введите название продукта для поиска...",errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_InputUser_InputUser_jsx__WEBPACK_IMPORTED_MODULE_15__.a,{inputName:"Ответственный",userData:userContext.userData,required:!0,error:formErrors.responsible,defaultValue:formInputs.responsible,name:"responsible",handleUserChange:function handleUserChange(user){return _handleInputChange("responsible",user)},searchPlaceholder:"Введите имя пользователя для поиска...",errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"main-form__item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"main-form__input_name",children:"Статус*"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"main-form__input_field",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("select",{name:"status",onChange:function onChange(_ref){var target=_ref.target;return _handleInputChange("status",target.value)},value:formInputs.status,children:_workshopVariables_js__WEBPACK_IMPORTED_MODULE_20__.b.map((function(status){return userContext.userHasAccess(status.access)?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("option",{value:status.oldName===formInputs.status?status.oldName:status.name,children:status.name}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("option",{style:{display:"none"},children:status.name})}))})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_14__.a,{inputName:"Комментарий",name:"comment",defaultValue:formInputs.comment,handleInputChange:function handleInputChange(_ref2){var target=_ref2.target;return _handleInputChange("comment",target.value)},errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_14__.a,{inputName:"Сумма",name:"sum",type:"number",defaultValue:formInputs.sum,handleInputChange:function handleInputChange(_ref3){var target=_ref3.target;return _handleInputChange("sum",target.value)},errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_Clients_SelectClients_SelectClients_jsx__WEBPACK_IMPORTED_MODULE_21__.a,{inputName:"Клиент",userHasAccess:userContext.userHasAccess,required:!0,onChange:function onChange(value){return _handleInputChange("clientId",value)},error:formErrors.clientId,errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_17__.a,{text:"Вернуться назад",className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){return props.history.push("".concat(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_20__.c[props.type].redirectURL,"/open"))}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_17__.a,{text:"Оформить заявку",isLoading:isLoading,className:"main-form__submit",onClick:function handleSubmit(){if(console.log(formInputs),formIsValid()){setIsLoading(!0);var id=0;Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_19__.b)(formInputs).then((function(res){return res.json()})).then((function(res){return id=res.id})).then((function(){return Promise.all(formInputs.requestProducts.map((function(item){return Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_19__.a)({requestId:id,quantity:item.quantity,packaging:item.packaging,status:item.status,name:item.name})})))})).then((function(){return Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_19__.c)(id,formInputs.clientId)})).then((function(){return props.history.push("".concat(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_20__.c[props.type].redirectURL,"/").concat(Object(_functions_js__WEBPACK_IMPORTED_MODULE_22__.f)(formInputs),"#").concat(id))})).catch((function(error){setIsLoading(!1),console.log(error)}))}}})]})]})})})};NewRequest.displayName="NewRequest",NewRequest.__docgenInfo={description:"",methods:[],displayName:"NewRequest"},__webpack_exports__.default=NewRequest,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\WorkshopsComponents\\Forms\\NewRequest\\NewRequest.jsx"]={name:"NewRequest",docgenInfo:NewRequest.__docgenInfo,path:"src\\components\\MainPage\\WorkshopsComponents\\Forms\\NewRequest\\NewRequest.jsx"})},3274:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(3275);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3275:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}\n",""]),module.exports=exports}}]);