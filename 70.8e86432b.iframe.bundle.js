(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{2677:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/ok.2ad21b54.svg"},2695:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return getPackaging})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getPackagingById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addPackaging})),__webpack_require__.d(__webpack_exports__,"e",(function(){return editPackaging})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deletePackaging})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addPackagingToProduct})),__webpack_require__.d(__webpack_exports__,"d",(function(){return deletePackagingFromProduct}));var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(637);function getPackaging(signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/packing/",method:"GET",signal:signal})}function getPackagingById(id,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/packing/"+id,method:"GET",signal:signal})}function addPackaging(packaging,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/packing/",method:"POST",body:JSON.stringify(packaging),signal:signal})}function editPackaging(id,packaging,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/packing/"+id,method:"PUT",body:JSON.stringify(packaging),signal:signal})}function deletePackaging(id,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/packing/"+id,method:"DELETE",signal:signal})}function addPackagingToProduct(newPackaging,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/product/add/"+id,method:"POST",body:JSON.stringify(newPackaging)})}function deletePackagingFromProduct(productId){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_0__.b)({url:"http://localhost:8443/api/v1/product/add/"+productId,method:"POST",body:JSON.stringify({packings:[]})})}},2883:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(636),__webpack_require__(638),__webpack_require__(639),__webpack_require__(241),__webpack_require__(641),__webpack_require__(333),__webpack_require__(181);var react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react_router_dom__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(53),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(1586),__webpack_require__(2663)),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10__),Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2676),Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11__),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2677),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12__),Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__(2884),__webpack_require__(990)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1),TableViewCategory=function TableViewCategory(props){return Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){props.setShowWindow&&props.setShowWindow(!1)}),[props.data,props.closeWindow]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"tableview-category",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("span",{children:"Название"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window__actions",children:"Действия"})]}),function sortProducts(data){return Object(Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_14__.a)(function searchQuery(data){var query=props.searchQuery.toLowerCase();return data.filter((function(item){return item.category.toLowerCase().includes(query)||item.id.toString().includes(query)}))}(data),{fieldName:"name",direction:"asc"})}(props.data).map((function(category,category_id){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__list-item",onClick:function onClick(){props.selectCategory(category.category),props.setCloseWindow(!props.closeWindow)},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("span",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window__mobile-text",children:"Название:"}),category.category]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"main-window__actions",children:[props.userHasAccess&&props.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_8__.a,{to:"/products/category/edit/"+category.id,className:"main-window__action",title:"Редактировать категорию",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("img",{className:"main-window__img",src:Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_10___default.a})}),props.userHasAccess&&props.userHasAccess(["ROLE_ADMIN"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{"data-id":category.id,className:"main-window__action",title:"Удалить категорию",onClick:props.deleteItem,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("img",{className:"main-window__img",src:Assets_tableview_delete_svg__WEBPACK_IMPORTED_MODULE_11___default.a})}),props.selectCategory&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{"data-id":category.id,className:"main-window__action",title:"Выбрать категорию",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("img",{className:"main-window__img",src:Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_12___default.a})})]})]},category_id)}))]})})})};TableViewCategory.displayName="TableViewCategory",TableViewCategory.__docgenInfo={description:"",methods:[],displayName:"TableViewCategory"},__webpack_exports__.a=TableViewCategory,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Products\\CategoryManagement\\TableView\\TableViewCategory.jsx"]={name:"TableViewCategory",docgenInfo:TableViewCategory.__docgenInfo,path:"src\\components\\MainPage\\Products\\CategoryManagement\\TableView\\TableViewCategory.jsx"})},2884:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2885);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2885:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.tableview-category{width:calc(100% + 30px);margin-left:-15px}.tableview-category .main-window__list-item span:nth-child(1){flex:0 1 80%}.tableview-category .main-window__list-item .main-window__actions{flex:0 1 20%}@media (max-width: 768px){.tableview-category .main-window__actions{display:none}}\n",""]),module.exports=exports},3378:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(636),__webpack_require__(638),__webpack_require__(639),__webpack_require__(281),__webpack_require__(241),__webpack_require__(641),__webpack_require__(333),__webpack_require__(0)),_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__(3379),__webpack_require__(1586),__webpack_require__(642)),_TableView_TableView_jsx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2784),Utils_RequestsAPI_Products_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2777),Utils_RequestsAPI_Products_Categories_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2708),Utils_RequestsAPI_Products_packaging_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(2695),Utils_Form_FormWindow_FormWindow_jsx__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(335),_CategoryManagement_TableView_TableViewCategory_jsx__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2883),Utils_MainWindow_FloatingPlus_FloatingPlus_jsx__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(644),Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2658),Utils_hooks_useProductsList_useProductsList_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2711),Utils_hooks_useSort_useSort__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2682),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(1),Products=function Products(props){var _useProductsList=Object(Utils_hooks_useProductsList_useProductsList_js__WEBPACK_IMPORTED_MODULE_20__.a)(),products=_useProductsList.products,categories=_useProductsList.categories,isProductsLoading=_useProductsList.isProductsLoading,_useState=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(""),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(""),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState3,2),searchQueryCategory=_useState4[0],setSearchQueryCategory=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(!1),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState5,2),showWindow=_useState6[0],setShowWindow=_useState6[1],_useSort=Object(Utils_hooks_useSort_useSort__WEBPACK_IMPORTED_MODULE_21__.a)(function filterSearchQuery(data){var query=searchQuery.toLowerCase();return data.filter((function(item){return item.name.toLowerCase().includes(query)||item.id.toString().includes(query)||item.weight.toString().includes(query)||null!==item.comment&&item.comment.toLowerCase().includes(query)}))}(products),{ignoreURL:!0,sortOrder:{curSort:"name",name:"asc"},sortOptions:[{value:"name asc",text:"По алфавиту (А-Я)"},{value:"name desc",text:"По алфавиту (Я-А)"},{value:"weight desc",text:"По весу"}]},[products]),sortPanel=_useSort.sortPanel,sortedData=_useSort.sortedData;Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){document.title="Продукция"}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"products",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)("div",{className:"main-window",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_MainWindow_FloatingPlus_FloatingPlus_jsx__WEBPACK_IMPORTED_MODULE_18__.a,{linkTo:"/products/new",visibility:["ROLE_ADMIN","ROLE_MANAGER"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"main-window__header main-window__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)("div",{className:"main-window__title",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("span",{children:"Продукция"}),props.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER","ROLE_ENGINEER"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"main-window__button",onClick:function onClick(){return setShowWindow(!showWindow)},children:"Категории"}),props.userHasAccess(["ROLE_ADMIN"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div",{className:"main-window__button",onClick:function onClick(){return props.history.push("/packaging")},children:"Упаковки"})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_Form_FormWindow_FormWindow_jsx__WEBPACK_IMPORTED_MODULE_16__.a,{title:"Категории продукции",content:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_MainWindow_FloatingPlus_FloatingPlus_jsx__WEBPACK_IMPORTED_MODULE_18__.a,{linkTo:"/products/category/new",visibility:["ROLE_ADMIN"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{fullSize:!0,placeholder:"Введите название категории для поиска...",setSearchQuery:setSearchQueryCategory}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_CategoryManagement_TableView_TableViewCategory_jsx__WEBPACK_IMPORTED_MODULE_17__.a,{data:categories,searchQuery:searchQueryCategory,userHasAccess:props.userHasAccess,deleteItem:function deleteItemCategory(event){var id=event.target.dataset.id;Object(Utils_RequestsAPI_Products_Categories_js__WEBPACK_IMPORTED_MODULE_14__.b)(id)}})]}),showWindow:showWindow,setShowWindow:setShowWindow}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{fullSize:!0,placeholder:"Введите название продукции для поиска...",setSearchQuery:setSearchQuery}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_19__.a,{sorting:sortPanel,itemsCount:"Всего: ".concat(products.length," записей")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_TableView_TableView_jsx__WEBPACK_IMPORTED_MODULE_12__.a,{products:sortedData,categories:categories,searchQuery:searchQuery,isLoading:isProductsLoading,userHasAccess:props.userHasAccess,deleteItem:function deleteItem(event){var id=event.target.dataset.id;return Object(Utils_RequestsAPI_Products_packaging_js__WEBPACK_IMPORTED_MODULE_15__.d)(id).then((function(){return Object(Utils_RequestsAPI_Products_js__WEBPACK_IMPORTED_MODULE_13__.b)(id)}))}})]})})};Products.displayName="Products",Products.__docgenInfo={description:"",methods:[],displayName:"Products"},__webpack_exports__.default=Products,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Products\\Products.jsx"]={name:"Products",docgenInfo:Products.__docgenInfo,path:"src\\components\\MainPage\\Products\\Products.jsx"})},3379:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3380);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3380:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.products .main-window__header .main-window__title{display:flex;flex-direction:row;align-items:center}.products .main-window__header .main-window__title span{margin-right:15px}.products .main-window__header .main-window__title .main-window__button{font-size:60%}.products .main-window .form-window__content .form-window__body .searchbar{margin-bottom:0}@media (max-width: 768px){.products .main-window__header .main-window__title{flex-wrap:wrap;margin-bottom:15px !important}.products .main-window__header .main-window__title span{margin-top:5px;margin-right:10px}.products .main-window__header .main-window__title .main-window__button{width:fit-content;margin-top:5px;margin-left:0;margin-bottom:0}}\n",""]),module.exports=exports}}]);