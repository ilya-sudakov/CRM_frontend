(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{2653:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(40),__webpack_require__(213),__webpack_require__(147),__webpack_require__(0)),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2657),__webpack_require__(1)),PlaceholderLoading=function PlaceholderLoading(_ref){var _ref$items=_ref.items,items=void 0===_ref$items?3:_ref$items,itemClassName=_ref.itemClassName,_ref$minHeight=_ref.minHeight,minHeight=void 0===_ref$minHeight?"1.5rem":_ref$minHeight,placeholderContent=_ref.placeholderContent,wrapperClassName=_ref.wrapperClassName,_ref$itemStyles=_ref.itemStyles,itemStyles=void 0===_ref$itemStyles?{}:_ref$itemStyles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),elements=_useState2[0],setElements=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){for(var temp=[],count=items,i=1;i<=count;i++)temp.push(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading__item ".concat(itemClassName),style:Object.assign({minHeight:minHeight},itemStyles)}));setElements([].concat(temp))}),[]),placeholderContent?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:itemClassName,style:{minHeight:minHeight},children:placeholderContent},index)}))}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item){return item}))})};PlaceholderLoading.displayName="PlaceholderLoading",PlaceholderLoading.__docgenInfo={description:"",methods:[],displayName:"PlaceholderLoading",props:{items:{defaultValue:{value:"3",computed:!1},type:{name:"number"},required:!1,description:""},minHeight:{defaultValue:{value:"'1.5rem'",computed:!1},type:{name:"string"},required:!1,description:""},itemStyles:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},itemClassName:{type:{name:"string"},required:!1,description:""},wrapperClassName:{type:{name:"string"},required:!1,description:""},placeholderContent:{type:{name:"any"},required:!1,description:""}}},__webpack_exports__.a=PlaceholderLoading,PlaceholderLoading.propTypes={items:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number,minHeight:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,itemClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,wrapperClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,placeholderContent:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.any,itemStyles:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"]={name:"PlaceholderLoading",docgenInfo:PlaceholderLoading.__docgenInfo,path:"src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"})},2656:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(40),__webpack_require__(0)),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(985),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(2661),__webpack_require__(1)),ControlPanel=function ControlPanel(props){var _props$styles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isHidden=_useState2[0],setIsHidden=_useState2[1];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"control-panel",style:Object.assign({},null!==(_props$styles=props.styles)&&void 0!==_props$styles?_props$styles:{}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"main-window__control-panel-wrapper",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"control-panel__buttons",children:[props.sorting||null,props.content?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"main-window__button main-window__button--inverted main-window__button--filter",onClick:function onClick(){return setIsHidden((function(isHidden){return!isHidden}))},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{children:props.panelName||"Фильтры"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_3__.a,{className:"main-window__img ".concat(isHidden?"":"main-window__img--rotated")})]}):null,props.buttons||null,props.itemsCount?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"main-window__amount_table",children:props.itemsCount}):null]}),isHidden?null:props.content]})})};ControlPanel.displayName="ControlPanel",ControlPanel.__docgenInfo={description:"",methods:[],displayName:"ControlPanel"},__webpack_exports__.a=ControlPanel,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/MainWindow/ControlPanel/ControlPanel.jsx"]={name:"ControlPanel",docgenInfo:ControlPanel.__docgenInfo,path:"src/utils/MainWindow/ControlPanel/ControlPanel.jsx"})},2657:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(2658);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2658:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,'@keyframes pulse-placeholder-loading{0%,100%{background-color:#e7e7e7}50%{background-color:#efefef}}@keyframes load{from{left:-150px}to{left:100%}}.placeholder-loading__item{height:1rem;background-color:#ddd;animation:pulse-placeholder-loading 1s infinite ease-in-out;position:relative;overflow:hidden;border-bottom:1px solid #bbb}.placeholder-loading__item::after{content:"";display:block;position:absolute;left:-150px;top:0;height:100%;width:150px;background:linear-gradient(to right, transparent 0%, #e8e8e8 50%, transparent 100%);animation:load 1s cubic-bezier(0.4, 0, 0.2, 1) infinite}\n',""]),module.exports=exports},2661:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(2662);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2662:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.control-panel{width:100%}.control-panel .main-window__control-panel-wrapper{padding-top:5px;padding-bottom:10px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__button{margin-top:5px;padding:8px 10px;font-size:85%}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .switch{margin-top:5px;margin-right:10px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .searchbar{max-width:50%;margin-right:auto;padding:0;align-self:center;margin-left:-15px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__amount_table{color:#666666;align-self:center;margin-top:5px;margin-left:auto}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window{padding:0}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel{width:max-content;margin-bottom:0;margin-right:10px;box-sizing:border-box;padding-top:calc(5px);position:relative;background-color:#ffffff}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel::before{width:100%;height:20px;position:absolute;content:\"Сортировка\";top:8px;left:10px;z-index:0;color:#777777;font-size:95%}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel select{padding-top:18px;padding-right:25px;padding-left:9px;height:100%;margin:0;box-sizing:border-box;min-width:150px;z-index:0;background-color:transparent;cursor:pointer;border:1px solid #cccccc;transition:background-color 100ms ease-in-out;-webkit-appearance:none;-moz-appearance:none;background:transparent;background-image:url(\"data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z'></path></svg>\");background-repeat:no-repeat;background-position-x:100%;background-position-y:calc(50% + 2px)}.control-panel .main-window__control-panel-wrapper .main-window__button--filter{border-color:#cccccc;justify-content:space-between;padding:8px 8px !important;padding-right:5px !important}.control-panel .main-window__control-panel-wrapper .main-window__button--filter span{margin-right:20px;font-size:95%}.control-panel .main-window__control-panel-wrapper .main-window__button--filter .main-window__img{filter:none;max-width:18px;margin-top:1px;margin-right:0;transition:200ms cubic-bezier(0.23, 1, 0.32, 1)}.control-panel .main-window__control-panel-wrapper .main-window__button--filter .main-window__img path:nth-child(1){transition:200ms cubic-bezier(0.23, 1, 0.32, 1);fill:#333333}@media (max-width: 768px){.control-panel .main-window__control-panel-wrapper{padding-left:15px;padding-right:15px}.control-panel .main-window__control-panel-wrapper .control-panel__buttons{width:calc(100% + 30px);padding:0 15px;box-sizing:border-box;flex-wrap:nowrap;margin-left:-15px;overflow:auto;white-space:nowrap}.control-panel .main-window__control-panel-wrapper .control-panel__buttons .main-window__sort-panel select{padding-top:18px !important;padding-right:25px !important;padding-left:9px !important;max-width:240px}}\n",""]),module.exports=exports},2665:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/edit.efe0dc2a.svg"},2670:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return workshops})),__webpack_require__.d(__webpack_exports__,"b",(function(){return requestStatuses})),__webpack_require__.d(__webpack_exports__,"a",(function(){return productsStatuses}));var workshops={requests:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"},lemz:{name:"ЛЭМЗ",title:"ЛЭМЗ",redirectURL:"/lemz/workshop-lemz",ordersRedirectURL:"/lemz/workshop-orders",storageRedirectURL:"/lemz/workshop-storage",type:"lemz",fullName:"ЦехЛЭМЗ"},lepsari:{name:"Лепсари",title:"Лепсари",redirectURL:"/lepsari/workshop-lepsari",ordersRedirectURL:"/lepsari/workshop-orders",storageRedirectURL:"/lepsari/workshop-storage",type:"lepsari",fullName:"ЦехЛепсари"},ligovskiy:{name:"Лиговский",title:"Лиговский",redirectURL:"/ligovskiy/workshop",ordersRedirectURL:"/ligovskiy/workshop-orders",storageRedirectURL:"/ligovskiy/workshop-storage",type:"ligovskiy",fullName:"ЦехЛиговский"},null:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"}},requestStatuses=[{name:"Проблема/Материалы",oldName:"Проблема-материалы",className:"materials",access:["ROLE_ADMIN","ROLE_WORKSHOP"],visible:!1},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Отгружено",className:"shipped",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Частично отгружено",className:"shipped-in-parts",access:[]},{name:"Готово к отгрузке",oldName:"Готово",className:"ready",access:["ROLE_ADMIN","ROLE_WORKSHOP"]},{name:"В производстве",className:"in-production",access:[]},{name:"Ожидание",className:"waiting",access:["ROLE_ADMIN","ROLE_MANAGER","ROLE_WORKSHOP"]},{name:"Приоритет",className:"priority",access:["ROLE_ADMIN"]}],productsStatuses=[{name:"В работе",oldName:null,className:"production",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Приоритет",className:"defect",access:["ROLE_ADMIN"]}]},2819:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return getOrdersByName})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getOrderById})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deleteOrder})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addOrder})),__webpack_require__.d(__webpack_exports__,"e",(function(){return editOrder})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addProductToOrder})),__webpack_require__.d(__webpack_exports__,"f",(function(){return editProductInOrder})),__webpack_require__.d(__webpack_exports__,"d",(function(){return deleteProductFromOrder}));__webpack_require__(40);var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(632);function getOrdersByName(orderName,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment/name/",method:"POST",body:JSON.stringify(Object.assign({},orderName,{signal:signal}))})}function getOrderById(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment/"+id,method:"GET"})}function deleteOrder(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment/"+id,method:"DELETE"})}function addOrder(order){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment/",method:"POST",body:JSON.stringify(order)})}function editOrder(order,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment/"+id,method:"PUT",body:JSON.stringify(order)})}function addProductToOrder(product){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment_product/",method:"POST",body:JSON.stringify(product)})}function editProductInOrder(product,id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment_product/"+id,method:"PUT",body:JSON.stringify(product)})}function deleteProductFromOrder(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/equipment_product/"+id,method:"DELETE"})}},3444:function(module,exports,__webpack_require__){var api=__webpack_require__(47),content=__webpack_require__(3445);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3445:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.workshop-orders{--ordered: #3ecaca;--completed: #399639;--sent: #bdbd41;--problem: #c23737}.workshop-orders .control-panel{margin-top:-10px;border-top:1px solid #dddddd;width:calc(100% + 25px)}.workshop-orders .control-panel .main-window__control-panel-wrapper .main-window__info-panel{margin-bottom:0}.workshop-orders .control-panel .main-window__control-panel-wrapper .main-window__status-panel{margin-bottom:0}.workshop-orders .searchbar{width:calc(100% + 25px) !important}.workshop-orders .main-window__status-panel .main-window__button::before{content:"";display:inline-block;position:absolute;width:10px;height:10px;left:5px;-moz-border-radius:7.5px;-webkit-border-radius:7.5px;border-radius:7.5px;background-color:#cccccc}.workshop-orders .main-window__status-panel .main-window__list-item--ordered::before{background-color:var(--ordered)}.workshop-orders .main-window__status-panel .main-window__list-item--sent::before{background-color:var(--sent)}.workshop-orders .main-window__status-panel .main-window__list-item--completed::before{background-color:var(--completed)}.workshop-orders .main-window__status-panel .main-window__list-item--problem::before{background-color:var(--problem)}.workshop-orders .main-window__status-panel .main-window__button--inverted{color:#555555}.workshop-orders .main-window__list{width:calc(100% + 25px) !important}.workshop-orders .main-window__list .main-window__list-item{padding-left:25px;position:relative}.workshop-orders .main-window__list .main-window__list-item:not(.main-window__list-item--header)::before{content:"";display:inline-block;position:absolute;width:7px;height:calc(100% - 10px);left:10px;background-color:#cccccc;border-radius:999px}.workshop-orders .main-window__list .main-window__list-item:not(.main-window__list-item--header) span:nth-child(5)::before{content:"";display:inline-block;position:absolute;width:10px;height:30px;top:calc(50% - 15px);border-radius:5px;left:0px;background-color:#cccccc;background-color:#cccccc}.workshop-orders .main-window__list .main-window__list-item .main-window__list-col{display:flex;flex-direction:column}.workshop-orders .main-window__list .main-window__list-item .main-window__list-col .workshop-orders__products{display:flex;flex-direction:row;align-items:center;margin-bottom:5px}.workshop-orders .main-window__list .main-window__list-item .main-window__list-col .workshop-orders__products div:nth-child(1){margin-right:10px}.workshop-orders .main-window__list .main-window__list-item .main-window__list-col .workshop-orders__products div:nth-child(2){font-size:90%;font-style:italic}.workshop-orders .main-window__list .main-window__list-item .main-window__list-col .workshop-orders__products:last-child{margin-bottom:0}.workshop-orders .main-window__list .main-window__list-item span:nth-child(1){flex:0 1 10%;max-width:80px}.workshop-orders .main-window__list .main-window__list-item span:nth-child(3){flex:0 1 30%}.workshop-orders .main-window__list .main-window__list-item span:nth-child(4){flex:0 1 15%;font-size:90%}.workshop-orders .main-window__list .main-window__list-item span:nth-child(5){flex:0 1 10%;min-height:100%;align-self:stretch;display:flex;font-size:90%;max-width:100px;position:relative;padding-left:20px}.workshop-orders .main-window__list .main-window__list-item span:nth-child(6){max-width:100px;margin-right:10px}.workshop-orders .main-window__list .main-window__list-item .main-window__actions{flex-direction:row}.workshop-orders .main-window__list .main-window__list-item--ordered:not(.main-window__list-item--header)::before{background-color:var(--ordered) !important}.workshop-orders .main-window__list .main-window__list-item--sent:not(.main-window__list-item--header)::before{background-color:var(--sent) !important}.workshop-orders .main-window__list .main-window__list-item--completed:not(.main-window__list-item--header)::before{background-color:var(--completed) !important}.workshop-orders .main-window__list .main-window__list-item--problem:not(.main-window__list-item--header)::before{background-color:var(--problem) !important}@media (max-width: 768px){.workshop-orders .main-window__info-panel{flex-direction:column}.workshop-orders .main-window__info-panel .main-window__amount_table{width:100%;text-align:right}.workshop-orders .main-window__list .main-window__list-item span:nth-child(1){max-width:100% !important}.workshop-orders .main-window__list .main-window__list-item span:nth-child(3) .main-window__list-col{align-items:flex-end}.workshop-orders .main-window__list .main-window__list-item span:nth-child(4){font-size:100% !important}.workshop-orders .main-window__list .main-window__list-item span:nth-child(5){max-width:100% !important;padding-left:0 !important;padding-right:20px;font-size:100% !important;width:calc(100% - 15px)}.workshop-orders .main-window__list .main-window__list-item span:nth-child(5)::before{top:calc(50% - 10px) !important;height:20px !important;border-radius:5px !important;left:auto !important;right:5px}.workshop-orders .main-window__list .main-window__list-item span:nth-child(6){max-width:100% !important;margin-right:0 !important}}\n',""]),module.exports=exports},3603:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var toConsumableArray=__webpack_require__(65),toConsumableArray_default=__webpack_require__.n(toConsumableArray),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(443),__webpack_require__(241),__webpack_require__(283),__webpack_require__(242),__webpack_require__(334),__webpack_require__(147),__webpack_require__(631),__webpack_require__(633),__webpack_require__(634),__webpack_require__(281),__webpack_require__(983),__webpack_require__(40),__webpack_require__(213),__webpack_require__(0)),SearchBar=(__webpack_require__(3444),__webpack_require__(637)),functions=__webpack_require__(982),Orders=__webpack_require__(2819),FloatingPlus=__webpack_require__(639),ControlPanel=__webpack_require__(2656),App=__webpack_require__(214),PlaceholderLoading=(__webpack_require__(640),__webpack_require__(987),__webpack_require__(333),__webpack_require__(2653)),edit=__webpack_require__(2665),edit_default=__webpack_require__.n(edit),TableActions=__webpack_require__(990),DeleteItemAction=__webpack_require__(642),jsx_runtime=__webpack_require__(1),Table_Tableview=function Tableview(_ref){var data=_ref.data,isLoading=_ref.isLoading,statuses=_ref.statuses,deleteItem=_ref.deleteItem,userHasAccess=_ref.userHasAccess,link=_ref.link;return Object(jsx_runtime.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)("span",{children:"Дата создания"}),Object(jsx_runtime.jsx)("span",{children:"Название"}),Object(jsx_runtime.jsx)("span",{children:"Продукция"}),Object(jsx_runtime.jsx)("span",{children:"Комплектация"}),Object(jsx_runtime.jsx)("span",{children:"Статус"}),Object(jsx_runtime.jsx)("span",{children:"Дата поставки"}),Object(jsx_runtime.jsx)("div",{className:"main-window__table-actions"})]}),isLoading&&Object(jsx_runtime.jsx)(PlaceholderLoading.a,{itemClassName:"main-window__list-item",minHeight:"35px",items:3}),data.map((function(order){var _statuses$find;return Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--"+order.status,children:[Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Дата создания: "}),Object(functions.g)(order.date)]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Название: "}),order.name]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Продукция: "}),Object(jsx_runtime.jsx)("div",{className:"main-window__list-col",children:order.products.map((function(product){return Object(jsx_runtime.jsxs)("div",{className:"workshop-orders__products",children:[Object(jsx_runtime.jsx)("div",{children:product.name}),Object(jsx_runtime.jsxs)("div",{children:[" (",Object(functions.a)(product.quantity)," шт.)"]})]},product.id)}))})]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Назначение: "}),order.assembly]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--"+order.status,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Статус: "}),null===(_statuses$find=statuses.find((function(item){return item.className===order.status})))||void 0===_statuses$find?void 0:_statuses$find.name]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Дата поставки: "}),new Date(order.deliverBy)<new Date&&"completed"!==order.status?Object(jsx_runtime.jsxs)("div",{className:"main-window__reminder",children:[Object(jsx_runtime.jsx)("div",{children:"!"}),Object(jsx_runtime.jsx)("div",{children:Object(functions.g)(order.deliverBy)})]}):Object(functions.g)(order.deliverBy)]}),Object(jsx_runtime.jsx)(TableActions.a,{actionsList:[{link:"".concat(link,"/edit/").concat(order.id),imgSrc:edit_default.a,title:"Редактирование заказа"},{customElement:Object(jsx_runtime.jsx)(DeleteItemAction.a,{title:"Удаление заказа",onClick:function onClick(){return deleteItem(order)}}),isRendered:userHasAccess(["ROLE_ADMIN"])}]})]},order.id)}))]})};Table_Tableview.displayName="Tableview",Table_Tableview.__docgenInfo={description:"",methods:[],displayName:"Tableview"};var Table=Table_Tableview;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/WorkshopsComponents/WorkshopOrders/Table.jsx"]={name:"Tableview",docgenInfo:Table_Tableview.__docgenInfo,path:"src/components/MainPage/WorkshopsComponents/WorkshopOrders/Table.jsx"});var sorting=__webpack_require__(984),workshopVariables=__webpack_require__(2670),WorkshopOrders_WorkshopOrders_WorkshopOrders=function WorkshopOrders(props){var _useState=Object(react.useState)(!0),_useState2=slicedToArray_default()(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1],_useState3=Object(react.useState)(""),_useState4=slicedToArray_default()(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),orders=_useState6[0],setOrders=_useState6[1],userContext=Object(react.useContext)(App.a),_useState7=Object(react.useState)([{className:"sent",name:"Отправлено",visible:!0},{className:"completed",name:"Завершено",visible:!1},{className:"ordered",name:"Заказано",visible:!0},{className:"problem",name:"Проблема",visible:!0}]),_useState8=slicedToArray_default()(_useState7,2),statuses=_useState8[0],setStatuses=_useState8[1],loadData=function loadData(signal){return setIsLoading(!0),Object(Orders.h)({name:workshopVariables.c[props.type].fullName},signal).then((function(res){return res.json()})).then((function(res){setOrders(res),setIsLoading(!1)})).catch((function(error){console.log(error),setIsLoading(!1)}))};return Object(react.useState)((function(){document.title="Комплектация ".concat(workshopVariables.c[props.type].name);var abortController=new AbortController;return loadData(abortController.signal),setIsLoading(!1),function cancel(){abortController.abort()}}),[]),Object(jsx_runtime.jsx)("div",{className:"workshop-orders",children:Object(jsx_runtime.jsxs)("div",{className:"main-window",children:[Object(jsx_runtime.jsx)(SearchBar.a,{fullSize:!0,placeholder:"Введите запрос для поиска...",setSearchQuery:setSearchQuery}),Object(jsx_runtime.jsx)(FloatingPlus.a,{linkTo:"".concat(workshopVariables.c[props.type].ordersRedirectURL,"/new"),visibility:["ROLE_ADMIN","ROLE_ENGINEER","ROLE_LEMZ"]}),Object(jsx_runtime.jsx)(ControlPanel.a,{itemsCount:"Всего: ".concat(orders.length," записей"),content:Object(jsx_runtime.jsx)("div",{className:"main-window__info-panel",children:Object(jsx_runtime.jsxs)("div",{className:"main-window__status-panel",children:[Object(jsx_runtime.jsx)("div",{children:"Фильтр по статусам: "}),statuses.map((function(status,index){return Object(jsx_runtime.jsx)("div",{className:"main-window__button ".concat(status.visible?"":"main-window__button--inverted"," main-window__list-item--").concat(status.className),onClick:function onClick(){return function handleStatusClick(index,status){var temp=statuses;temp.splice(index,1,Object.assign({},status,{visible:!status.visible})),setStatuses(toConsumableArray_default()(temp))}(index,status)},children:status.name},index)}))]})})}),Object(jsx_runtime.jsx)(Table,{data:Object(sorting.a)(function filterOrders(data){return data.filter((function(item){if(item.name.toLowerCase().includes(searchQuery.toLowerCase())||Object(functions.g)(item.deliverBy).toLowerCase().includes(searchQuery.toLowerCase())||item.assembly.toLowerCase().includes(searchQuery.toLowerCase())){var check=!1;return statuses.map((function(status){status.visible&&status.className===item.status&&(check=!0)})),check}}))}(orders),{fieldName:"date",direction:"asc"}),link:workshopVariables.c[props.type].ordersRedirectURL,isLoading:isLoading,statuses:statuses,deleteItem:function deleteItem(item){Promise.all(item.products.map((function(product){return Object(Orders.d)(product.id)}))).then((function(){return Object(Orders.c)(item.id)})).then((function(){return loadData()}))},userHasAccess:userContext.userHasAccess})]})})};WorkshopOrders_WorkshopOrders_WorkshopOrders.displayName="WorkshopOrders",WorkshopOrders_WorkshopOrders_WorkshopOrders.__docgenInfo={description:"",methods:[],displayName:"WorkshopOrders"};__webpack_exports__.default=WorkshopOrders_WorkshopOrders_WorkshopOrders;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/WorkshopsComponents/WorkshopOrders/WorkshopOrders.jsx"]={name:"WorkshopOrders",docgenInfo:WorkshopOrders_WorkshopOrders_WorkshopOrders.__docgenInfo,path:"src/components/MainPage/WorkshopsComponents/WorkshopOrders/WorkshopOrders.jsx"})}}]);