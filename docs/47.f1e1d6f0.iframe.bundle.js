(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{2867:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return months})),__webpack_require__.d(__webpack_exports__,"b",(function(){return days})),__webpack_require__.d(__webpack_exports__,"a",(function(){return customSelectStyles}));__webpack_require__(23);var months=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],days=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],customSelectStyles={container:function container(provided){return Object.assign({},provided,{width:"100%",borderColor:"1px solid #247fa7"})},option:function option(provided){return Object.assign({},provided,{borderColor:"1px solid #247fa7"})}}},2879:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return rigTypes})),__webpack_require__.d(__webpack_exports__,"b",(function(){return rigStatuses})),__webpack_require__.d(__webpack_exports__,"a",(function(){return checkRiggingTypesInputs})),__webpack_require__.d(__webpack_exports__,"d",(function(){return workshopsLocations}));var rigTypes={stamp:{name:"штамп",redirectURL:"/dispatcher/rigging/stamp",type:"stamp",title:"Штамп"},machine:{name:"станок",redirectURL:"/dispatcher/rigging/machine",type:"machine",title:"Станок"},pressForm:{name:"пресс-форма",redirectURL:"/dispatcher/rigging/press-form",type:"pressForm",title:"Пресс-форма"},parts:{name:"запчасти",redirectURL:"/dispatcher/rigging/parts",type:"parts",title:"Запчасти"}},rigStatuses={production:{name:"В производстве",className:"production"},completed:{name:"Завершено",className:"completed"},defect:{name:"Приоритет",className:"defect"}},riggingTypeList={cuttingDimensions:{prev:null},milling:{prev:"cuttingDimensions"},harding:{prev:"milling"},grinding:{prev:"harding"},erosion:{prev:"grinding"},controll:{prev:"erosion"}},checkRiggingTypesInputs=function checkRiggingTypesInputs(inputs){for(var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"controll",check=!0,curType=riggingTypeList[type].prev;null!==curType;){if(""===inputs[curType]||null===inputs[curType])return void(check=!1);curType=riggingTypeList[curType].prev}return check},workshopsLocations={lemz:{name:"ЦехЛЭМЗ"},lepsari:{name:"ЦехЛепсари"},ligovskiy:{name:"ЦехЛиговский"}}},2904:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getPreviousQuarterDates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getPreviousMonthDates})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getDaysArray}));__webpack_require__(201);var getPreviousQuarterDates=function getPreviousQuarterDates(date,value){var startDate,endDate,today=date,quarter=Math.floor(today.getMonth()/3);switch(value){case"current":startDate=new Date(today.getFullYear(),3*quarter,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+3,0);break;default:startDate=new Date(today.getFullYear(),3*quarter-3,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+3,0)}return{startDate:startDate,endDate:endDate}},getPreviousMonthDates=function getPreviousMonthDates(date,value){var startDate,endDate,today=date,month=today.getMonth();switch(value){case"current":startDate=new Date(today.getFullYear(),month,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+1,0);break;default:startDate=new Date(today.getFullYear(),month-1,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+1,0)}return{startDate:startDate,endDate:endDate}},getDaysArray=function getDaysArray(start,end){for(var arr=[],dt=new Date(start);dt<=end;dt.setDate(dt.getDate()+1))arr.push(new Date(dt));return arr}},3180:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3181);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3181:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.statistics{padding:0 15px;box-sizing:border-box;--max-chart-width: 800px;background-color:#f4f4f4}@keyframes pulse-statistics-page{0%{border-color:#dbdbdb;background-color:#dbdbdb}50%{border-color:#c5c5c5;background-color:#c5c5c5}100%{border-color:#dbdbdb;background-color:#dbdbdb}}.statistics .title-header{width:calc(100% + 30px)}.statistics .control-panel{width:calc(100% + 30px);margin-bottom:15px}.statistics .control-panel .main-window__button{font-size:0.825rem !important;padding:5px 10px !important}.statistics .control-panel .main-window__select{margin-top:5px;margin-right:15px;font-size:0.9rem}.statistics .control-panel .main-window__amount_table{margin-left:5px !important;font-size:1.2rem;color:#777 !important}.statistics .main-window__header{width:calc(100% + 30px);margin-bottom:0}.statistics .main-window .statistics__row{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;margin-bottom:5px}.statistics .main-window .statistics__row--full{border:1px solid #cccccc;border-radius:3px;width:fit-content;padding:10px 10px;background-color:#ffffff;margin-bottom:15px}.statistics .main-window .statistics__row--full .panel{border:none;border-radius:0;border-right:1px solid #bbbbbb;margin-bottom:0;padding-right:25px;margin-right:10px}.statistics .main-window .statistics__row--full .panel:last-child{padding-right:15px;margin-right:0;border:none}.statistics .main-window .statistics__row--full .panel__icon{display:none}.statistics .main-window .statistics__wrapper{width:100%;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start}.statistics .main-window .statistics__page-wrapper{width:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.statistics .main-window .statistics__column{width:100%;max-width:calc(50% - 0px);display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:stretch;margin-bottom:5px}.statistics .main-window .panel{display:flex;flex-direction:column;align-items:flex-start;font-size:1rem;background-color:#ffffff;border-radius:3px;border:1px solid #cccccc;padding:15px 20px;box-sizing:border-box;margin-right:10px;margin-bottom:10px;cursor:pointer;color:#000000;overflow-x:hidden}.statistics .main-window .panel:hover{background-color:rgba(255,255,255,0.4)}.statistics .main-window .panel .form-window .panel__chart-wrapper{max-width:var(--max-chart-width);margin-top:10px}.statistics .main-window .panel .form-window .main-window__title{margin-top:20px;width:fit-content}.statistics .main-window .panel .form-window__content{--form-window__size: calc(90% - (var(--padding-left-right) * 2))}.statistics .main-window .panel .form-window__content .window-message{--form-window__size: calc(100% - (var(--padding-left-right) * 2));width:var(--form-window__size);height:var(--form-window__size)}.statistics .main-window .panel__img{width:25px;margin:0 auto}.statistics .main-window .panel__img--requests g{fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__img--money path:nth-child(1){fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__img--employee g{fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__img--list path:nth-child(1){fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__img--default path:nth-child(1){fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__img--wrench path:nth-child(1),.statistics .main-window .panel__img--wrench circle{fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__img--time path:nth-child(1){fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__img--time path:nth-child(2){fill:rgba(66,147,182,0.7)}.statistics .main-window .panel__icon{background-color:rgba(66,147,182,0.2);padding:8px;border-radius:5px;max-width:25px;max-height:25px;display:flex;justify-content:center;align-items:center}.statistics .main-window .panel__category{color:#666666;margin-bottom:10px;display:flex;flex-direction:row;width:100%;justify-content:space-between;align-items:flex-start}.statistics .main-window .panel__category span{padding-right:10px;padding-left:1.7rem;position:relative}.statistics .main-window .panel__category span::before{display:flex;flex-direction:row;justify-content:center;align-items:center;content:"i";position:absolute;left:0px;top:calc(50% - 11px);border:1px solid #bbbbbb;border-radius:999px;width:20px;height:20px;font-size:0.8rem;transition:200ms ease-in-out;color:#999999}.statistics .main-window .panel__category:hover{text-decoration:underline}.statistics .main-window .panel__category:hover span::before{border-color:#777777;color:#777777}.statistics .main-window .panel__value{display:flex;flex-direction:row;flex-wrap:nowrap;font-size:200%;margin-bottom:10px;position:relative}.statistics .main-window .panel__value span{display:flex;font-size:50%;color:#666666;margin-top:-4px;margin-left:4px}.statistics .main-window .panel__value--positive span{color:#0acf97}.statistics .main-window .panel__value--negative span{color:#fa5c7c}.statistics .main-window .panel__difference{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-end}.statistics .main-window .panel__difference .panel__arrow{display:flex;margin-right:6px;border:8px solid transparent}.statistics .main-window .panel__difference .panel__percentage{font-size:125%;margin-right:10px;color:#bbbbbb}.statistics .main-window .panel__difference--positive .panel__arrow{margin-top:1px;margin-bottom:auto;border-bottom:10px solid #0acf97}.statistics .main-window .panel__difference--positive .panel__percentage{color:#0acf97}.statistics .main-window .panel__difference--equal .panel__arrow{margin-bottom:5px;border:8px solid #cccccc;border-radius:999px}.statistics .main-window .panel__difference--negative .panel__arrow{margin-top:auto;margin-bottom:1px;border-top:10px solid #fa5c7c}.statistics .main-window .panel__difference--negative .panel__percentage{color:#fa5c7c}.statistics .main-window .panel__difference .panel__time-period{color:#999999;margin-bottom:1px;white-space:nowrap}.statistics .main-window .panel--chart{width:100%;height:100%;flex:0 1 calc(50% - 25px);max-width:700px}.statistics .main-window .panel--chart .panel__category{font-size:125%}.statistics .main-window .panel--chart .panel__chart-wrapper{width:100%;box-sizing:border-box;transition:200ms cubic-bezier(0.23, 1, 0.32, 1)}.statistics .main-window .panel--big{width:100%;height:100%;max-width:700px}.statistics .main-window .panel--big .panel__charts-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.statistics .main-window .panel--big .panel__charts-wrapper .bar-chart{--max-chart-width: 700px;max-width:var(--max-chart-width);margin-right:15px;margin-bottom:15px;border:1px solid #dddddd;border-radius:3px;padding:10px 15px;background-color:#ffffff}.statistics .main-window .panel--big .panel__charts-wrapper .main-window__title{margin-top:0;padding-left:5px}.statistics .main-window .panel--big .panel__category{font-size:1.1rem}.statistics .main-window .panel--big .panel__chart-wrapper,.statistics .main-window .panel--big .panel__chart-wrapper--content{margin-top:15px;width:100%;box-sizing:border-box;transition:200ms cubic-bezier(0.23, 1, 0.32, 1)}.statistics .main-window .panel--big .panel__chart-wrapper--content{margin:0 auto}.statistics .main-window .panel--big .panel__values{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;margin:0 auto}.statistics .main-window .panel--big .panel__values .panel__value{flex-direction:column;align-items:center}.statistics .main-window .panel--big .panel__values .panel__value:not(:last-child){margin-right:20%}.statistics .main-window .panel--big .panel__values .panel__value span{margin-left:0}.statistics .main-window .panel--big .panel__values .panel__value div{position:relative;font-size:1.8rem}.statistics .main-window .panel--big .panel__values .panel__value div::before{content:"";position:absolute;left:-20px;border-radius:999px;top:calc(50% - 3px);width:10px;height:10px;background-color:#bbbbbb}.statistics .main-window .panel--big .panel__values .panel__value--current div::before{background-color:#16c79a}.statistics .main-window .panel--big .panel__values .panel__value--previous div::before{background-color:#4293b6}.statistics .main-window .panel--placeholder .panel__chart-wrapper{height:200px;border-radius:5px;animation:pulse-statistics-page 1s infinite ease-in-out}.statistics .main-window .panel--placeholder .panel__value{animation:pulse-statistics-page 1s infinite ease-in-out;content:"";min-width:200px;height:1.5rem;border-radius:5px}.statistics .main-window .panel--placeholder .panel__values .panel__value span{display:none}.statistics .main-window .panel--placeholder .panel__values .panel__value div{display:none}.statistics .main-window .panel--placeholder .panel__values .panel__value div::before{display:none}.statistics .main-window .panel--placeholder .panel__difference .panel__arrow{animation:pulse-statistics-page 1s infinite ease-in-out;border-radius:999px}.statistics .main-window .panel--placeholder .panel__difference .panel__percentage{animation:pulse-statistics-page 1s infinite ease-in-out;border-radius:5px;min-width:150px;height:1.5rem}@media (max-width: 768px){.statistics .main-window .statistics__row--full{flex-direction:column}.statistics .main-window .statistics__row--full .panel{border-right:none;border-bottom:1px solid #bbbbbb;margin-right:0;margin-bottom:5px}.statistics .main-window .statistics__row--full .panel:last-child{margin-bottom:0}.statistics .main-window .statistics__row .panel__difference{flex-wrap:wrap}.statistics .main-window .statistics__row .panel--chart{font-size:90%;width:100%;flex:0 1 100%;margin-right:0}.statistics .main-window .statistics__row .panel--chart .panel__chart-wrapper{min-height:250px}}@media (max-width: 576px){.statistics .main-window .statistics__row .panel{font-size:90%;width:100%;margin-right:0}.statistics .main-window .statistics__row .panel__value{font-size:180%}}\n',""]),module.exports=exports},3224:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3225);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3225:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,".requests-list{width:100%}.requests-list .main-window__title{width:fit-content;margin-top:0 !important;margin-bottom:20px}.requests-list .main-window__info-text{padding-left:15px}@media (max-width: 768px){.requests-list .main-window__title{margin-bottom:40px}}\n",""]),module.exports=exports},3226:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3227);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3227:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,".bar-chart{width:100%}.bar-chart .main-window__title{font-size:1.2rem}\n",""]),module.exports=exports},3547:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(7),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(201),__webpack_require__(36),__webpack_require__(0)),functions=(__webpack_require__(3180),__webpack_require__(63)),dataObjects=__webpack_require__(2867),ControlPanel=__webpack_require__(674),StatisticsPage_functions=__webpack_require__(1020),useTitleHeader=__webpack_require__(1024),useDraftsList=__webpack_require__(1064),work_control=__webpack_require__(479),defineProperty=__webpack_require__(15),defineProperty_default=__webpack_require__.n(defineProperty),wrench_inline=(__webpack_require__(51),__webpack_require__(1017),__webpack_require__(258),__webpack_require__(23),__webpack_require__(3067)),rigsVariables=__webpack_require__(2879),getStatsticsGraphWidgetOptions=function getStatsticsGraphWidgetOptions(dataset){return{type:"pie",data:{labels:Object.entries(dataset).map((function(item){return item[0]})),datasets:[{backgroundColor:["#3e95cd","#8e5ea2","#3cba9f","#e8c3b9","#c45850","#bbbbbb","#bbbbbb","#bbbbbb"],data:Object.entries(dataset).map((function(item){var _item$1$data;return null!==(_item$1$data=item[1].data)&&void 0!==_item$1$data?_item$1$data:item[1]}))}]},options:{responsive:!0,maintainAspectRatio:(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>500,animation:{easing:"easeInOutCirc"},tooltips:{mode:"index"}}}},useBarChartStatPanel=__webpack_require__(1031),jsx_runtime=__webpack_require__(1),Graphs_RiggingItemsQuantityForType=function RiggingItemsQuantityForType(_ref){var data=_ref.data,_useBarChart=Object(useBarChartStatPanel.a)({category:"Кол-во деталей оснастки в производстве",chartName:"rigging-items-quantity-graph",timePeriod:"За все время",renderIcon:Object(jsx_runtime.jsx)(wrench_inline.a,{className:"panel__img panel__img--wrench"})},data,(function(data){return getStats(data)}),"За все время"),graphPanel=_useBarChart.graphPanel,setIsLoading=_useBarChart.setIsLoading,renderGraph=_useBarChart.renderGraph,_useState=Object(react.useState)({cuttingDimensions:{name:"Распил/Габариты",previous:null,data:0},milling:{name:"Фрезеровка/Точение",previous:"cuttingDimensions",data:0},harding:{name:"Закалка",previous:"milling",data:0},grinding:{name:"Шлифовка",previous:"harding",data:0},erosion:{name:"Эрозия",previous:"grinding",data:0}}),_useState2=slicedToArray_default()(_useState,2),statuses=_useState2[0],setStatuses=_useState2[1],getStats=function getStats(data){setIsLoading(!0);var newStatuses=statuses;Object.entries(statuses).map((function(status){var temp;return temp=data.filter((function(draft){return!(""!==draft[status[0]]&&null!==draft[status[0]]||!Object(rigsVariables.a)(draft,status[0]))})).length,newStatuses=Object.assign({},newStatuses,defineProperty_default()({},status[0],Object.assign({},newStatuses[status[0]],{data:temp})))})),setStatuses(Object.assign({},newStatuses));var options=getStatsticsGraphWidgetOptions(newStatuses);renderGraph(options)};return graphPanel},ProductionPage_ProductionPage=function ProductionPage(_ref){var curDate=_ref.curDate,drafts=Object(useDraftsList.a)().drafts;return Object(react.useEffect)((function(){var abortController=new AbortController;return function getDataForTwoWeeks(signal){var curMonday=curDate,prevMonday=curDate;prevMonday=new Date(prevMonday.setDate(prevMonday.getDate()-(prevMonday.getDay()+6)%7-7)),Object(work_control.h)(prevMonday.getDate(),prevMonday.getMonth()+1,prevMonday.getFullYear(),curMonday.getDate(),curMonday.getMonth()+1,curMonday.getFullYear(),signal).then((function(res){return res.json()}))}(abortController.signal),function cancel(){abortController.abort()}}),[curDate]),Object(jsx_runtime.jsxs)("div",{className:"statistics__page-wrapper",children:[Object(jsx_runtime.jsx)("div",{className:"statistics__row"}),Object(jsx_runtime.jsx)("div",{className:"statistics__row",children:Object(jsx_runtime.jsx)(Graphs_RiggingItemsQuantityForType,{data:drafts})})]})};ProductionPage_ProductionPage.displayName="ProductionPage",ProductionPage_ProductionPage.__docgenInfo={description:"",methods:[],displayName:"ProductionPage"};var Pages_ProductionPage=ProductionPage_ProductionPage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/StatisticsPage/Pages/ProductionPage.jsx"]={name:"ProductionPage",docgenInfo:ProductionPage_ProductionPage.__docgenInfo,path:"src/components/MainPage/StatisticsPage/Pages/ProductionPage.jsx"});var _g,_path,toConsumableArray=__webpack_require__(18),toConsumableArray_default=__webpack_require__.n(toConsumableArray);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var play_list_inline=function SvgPlayListinline(props){return react.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",style:{msTransform:"rotate(360deg)",WebkitTransform:"rotate(360deg)"},transform:"rotate(360)"},props),_g||(_g=react.createElement("g",{fill:"#626262"},react.createElement("circle",{cx:4,cy:7,r:1}),react.createElement("circle",{cx:4,cy:12,r:1}),react.createElement("circle",{cx:4,cy:17,r:1}),react.createElement("rect",{x:7,y:11,width:14,height:2,rx:.94,ry:.94}),react.createElement("rect",{x:7,y:16,width:14,height:2,rx:.94,ry:.94}),react.createElement("rect",{x:7,y:6,width:14,height:2,rx:.94,ry:.94}))),_path||(_path=react.createElement("path",{fill:"rgba(0, 0, 0, 0)",d:"M0 0h24v24H0z"})))},usePagination=__webpack_require__(1030),TableView_functions=__webpack_require__(2903),TableView=__webpack_require__(2982),RequestsList_RequestsList_RequestsList=(__webpack_require__(3224),function RequestsList(_ref){var _ref$data=_ref.data,data=void 0===_ref$data?[]:_ref$data,_ref$sortBy=_ref.sortBy,sortBy=void 0===_ref$sortBy?{curSort:"id",id:"asc"}:_ref$sortBy,_ref$title=_ref.title,title=void 0===_ref$title?"":_ref$title,loadData=_ref.loadData,pages=Object(usePagination.a)((function(){return Object(TableView_functions.e)(data,sortBy)}),[data],"static",{size:10,ignoreURL:!0});return Object(jsx_runtime.jsxs)("div",{className:"requests-list",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__title",children:title}),pages.data.length>0?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(TableView.a,{data:pages.data,isLoading:!1,workshopName:"requests",sortOrder:sortBy,loadData:loadData,isMinimized:!0}),pages.pagination]}):Object(jsx_runtime.jsx)("div",{className:"main-window__info-text",children:"Нет заявок за выбранный период"})]})});RequestsList_RequestsList_RequestsList.displayName="RequestsList",RequestsList_RequestsList_RequestsList.__docgenInfo={description:"",methods:[],displayName:"RequestsList",props:{data:{defaultValue:{value:"[]",computed:!1},required:!1},sortBy:{defaultValue:{value:"{ curSort: 'id', id: 'asc' }",computed:!1},required:!1},title:{defaultValue:{value:"''",computed:!1},required:!1}}};var Lists_RequestsList_RequestsList=RequestsList_RequestsList_RequestsList;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/StatisticsPage/Lists/RequestsList/RequestsList.jsx"]={name:"RequestsList",docgenInfo:RequestsList_RequestsList_RequestsList.__docgenInfo,path:"src/components/MainPage/StatisticsPage/Lists/RequestsList/RequestsList.jsx"});var bx_ruble_inline_path,_path2,useSmallStatPanel=__webpack_require__(1027),Panels_RequestsQuantityPanel=function RequestsQuantityPanel(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,_useSmallStatPanel=Object(useSmallStatPanel.a)({category:"Заявки",linkTo:"/requests",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(play_list_inline,{className:"panel__img panel__img--requests"})},requests,(function(requests){return getRequests(requests)}),timeText,[currDate]),smallPanel=_useSmallStatPanel.smallPanel,setStats=_useSmallStatPanel.setStats,updateStats=_useSmallStatPanel.updateStats,getRequests=function getRequests(requests){setStats((function(stats){return Object.assign({},stats,{isLoading:!0,isLoaded:!1})}));var prevMonth=getPrevData(currDate.startDate),_getRequestQuantitySt=Object(StatisticsPage_functions.g)(requests,currDate,prevMonth),_getRequestQuantitySt2=slicedToArray_default()(_getRequestQuantitySt,3),prevMonthQuantity=_getRequestQuantitySt2[0],curMonthQuantity=_getRequestQuantitySt2[1],data=_getRequestQuantitySt2[2];updateStats(prevMonthQuantity,curMonthQuantity),setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:data,sortBy:{curSort:"sum",sum:"desc"}})})}))};return smallPanel};__webpack_require__(1022),__webpack_require__(673);function bx_ruble_inline_extends(){return(bx_ruble_inline_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var time_inline_path,time_inline_path2,_path3,bx_ruble_inline=function SvgBxRubleinline(props){return react.createElement("svg",bx_ruble_inline_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",style:{msTransform:"rotate(360deg)",WebkitTransform:"rotate(360deg)"},transform:"rotate(360)"},props),bx_ruble_inline_path||(bx_ruble_inline_path=react.createElement("path",{d:"M8 21h2v-3h6v-2h-6v-2h4.5c2.757 0 5-2.243 5-5s-2.243-5-5-5H9a1 1 0 00-1 1v7H5v2h3v2H5v2h3v3zm2-15h4.5c1.654 0 3 1.346 3 3s-1.346 3-3 3H10V6z",fill:"#626262"})),_path2||(_path2=react.createElement("path",{fill:"rgba(0, 0, 0, 0)",d:"M0 0h24v24H0z"})))},Panels_AverageSumStatsPanel=function AverageSumStatsPanel(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,_useSmallStatPanel=Object(useSmallStatPanel.a)({category:"Средняя сумма заказа",linkTo:"/requests",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(bx_ruble_inline,{className:"panel__img panel__img--money"})},requests,(function(requests){return getStats(requests)}),timeText,[currDate]),smallPanel=_useSmallStatPanel.smallPanel,setStats=_useSmallStatPanel.setStats,filterRequests=function filterRequests(requests,curDate){var monthLength=0,averageMonth=0;return[requests.filter((function(request){var date=new Date(request.date);return Object(StatisticsPage_functions.a)(date,curDate.startDate,curDate.endDate)&&"Завершено"===request.status?(monthLength++,averageMonth+=Number.parseFloat(request.sum||0),!1):"Завершено"===request.status})),monthLength,averageMonth]},getStats=function getStats(requests){setStats((function(stats){return Object.assign({},stats,{isLoading:!0,isLoaded:!1})}));var prevMonth=getPrevData(currDate.startDate),_filterRequests=filterRequests(requests,prevMonth),_filterRequests2=slicedToArray_default()(_filterRequests,3),temp=_filterRequests2[0],prevMonthLength=_filterRequests2[1],prevMonthAverage=_filterRequests2[2],_filterRequests3=filterRequests(temp,currDate),_filterRequests4=slicedToArray_default()(_filterRequests3,3),filteredRequests=_filterRequests4[0],curMonthLength=_filterRequests4[1],curMonthAverage=_filterRequests4[2];curMonthAverage/=0!==curMonthLength?curMonthLength:1,prevMonthAverage/=0!==prevMonthLength?prevMonthLength:1,setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"}}),isLoaded:!0,isLoading:!1,value:"".concat(Object(functions.a)(Math.floor(100*curMonthAverage)/100)," ₽"),difference:curMonthAverage-prevMonthAverage,percentage:Math.floor((curMonthAverage-prevMonthAverage)/(0===prevMonthAverage?1:prevMonthAverage)*100*100)/100})}))};return smallPanel},client_inline=__webpack_require__(2968),functions_statisticsFindNewClients=function statisticsFindNewClients(requests,clients,currDate){var keepOld=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],newClients=0,data=requests.filter((function(request){return null!==request.client&&Object(StatisticsPage_functions.a)(request.date,currDate.startDate,currDate.endDate)&&void 0===clients[request.client.id]?(newClients++,clients=Object.assign({},clients,defineProperty_default()({},request.client.id,"")),!keepOld):null!==request.client&&keepOld}));return[data,newClients]},Panels_NewClientsStatsPanel=function NewClientsStatsPanel(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,_useSmallStatPanel=Object(useSmallStatPanel.a)({category:"Новые клиенты",linkTo:"/clients/categories",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(client_inline.a,{className:"panel__img panel__img--money"})},requests,(function(data){return getStats(data)}),timeText,[currDate]),smallPanel=_useSmallStatPanel.smallPanel,setStats=_useSmallStatPanel.setStats,updateStats=_useSmallStatPanel.updateStats,getStats=function getStats(requests){setStats((function(stats){return Object.assign({},stats,{isLoading:!0,isLoaded:!1})}));var clients={},prevMonth=getPrevData(currDate.startDate),filteredRequests=requests.filter((function(request){return!(null!==request.client&&!Object(StatisticsPage_functions.a)(request.date,prevMonth.startDate,prevMonth.endDate)&&!Object(StatisticsPage_functions.a)(request.date,currDate.startDate,currDate.endDate)&&void 0===clients[request.client.id])||(clients=Object.assign({},clients,defineProperty_default()({},request.client.id,"")),!1)})),_statisticsFindNewCli=functions_statisticsFindNewClients(filteredRequests,clients,prevMonth),prevMonthNewClients=slicedToArray_default()(_statisticsFindNewCli,2)[1],_statisticsFindNewCli3=functions_statisticsFindNewClients(requests,clients,currDate,!1),_statisticsFindNewCli4=slicedToArray_default()(_statisticsFindNewCli3,2),filteredRequestsNew=_statisticsFindNewCli4[0],curMonthNewClients=_statisticsFindNewCli4[1];setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequestsNew,sortBy:{curSort:"sum",sum:"desc"}})})})),updateStats(prevMonthNewClients,curMonthNewClients)};return smallPanel},Panels_NewOldClientsStatsPanel=function NewOldClientsStatsPanel(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,_useSmallStatPanel=Object(useSmallStatPanel.a)({category:"Старые новые клиенты",linkTo:"/clients/categories",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(client_inline.a,{className:"panel__img panel__img--money"})},requests,(function(data){return getStats(data)}),timeText,[currDate]),smallPanel=_useSmallStatPanel.smallPanel,setStats=_useSmallStatPanel.setStats,updateStats=_useSmallStatPanel.updateStats,getStats=function getStats(requests){setStats((function(stats){return Object.assign({},stats,{isLoading:!0,isLoaded:!1})}));var clients={},prevMonth=getPrevData(currDate.startDate),_statisticsFindNewCli=functions_statisticsFindNewClients(requests,clients,prevMonth),_statisticsFindNewCli2=slicedToArray_default()(_statisticsFindNewCli,2),filteredRequests=_statisticsFindNewCli2[0],prevMonthNewClients=_statisticsFindNewCli2[1],_statisticsFindNewCli3=functions_statisticsFindNewClients(filteredRequests,clients,currDate,!1),_statisticsFindNewCli4=slicedToArray_default()(_statisticsFindNewCli3,2),filteredRequestsNew=_statisticsFindNewCli4[0],curMonthNewClients=_statisticsFindNewCli4[1];setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequestsNew,sortBy:{curSort:"sum",sum:"desc"}})})})),updateStats(prevMonthNewClients,curMonthNewClients)};return smallPanel},employee_inline=__webpack_require__(3068),Graphs_ManagerEfficiencyGraphPanel=function ManagerEfficiencyGraphPanel(_ref){var data=_ref.data,currDate=_ref.currDate,timeText=_ref.timeText,_useBarChart=Object(useBarChartStatPanel.a)({category:"Статистика по менеджерам (заказы)",chartName:"manager-efficiency-graph",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(employee_inline.a,{className:"panel__img panel__img--employee"})},data,(function(data){return getStats(data)}),timeText,[currDate]),graphPanel=_useBarChart.graphPanel,setIsLoading=_useBarChart.setIsLoading,setStats=_useBarChart.setStats,renderGraph=_useBarChart.renderGraph,getStats=function getStats(data){setIsLoading(!0);var managers={},filteredRequests=data.filter((function(request){return!!Object(StatisticsPage_functions.a)(request.date,currDate.startDate,currDate.endDate)&&(managers=Object.assign({},managers,defineProperty_default()({},request.responsible,void 0!==managers[request.responsible]?managers[request.responsible]+1:1)),!0)}));setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"}})})})),renderGraph(getStatsticsGraphWidgetOptions(managers))};return graphPanel},Graphs_ManagerMoneyGraphPanel=function ManagerMoneyGraphPanel(_ref){var data=_ref.data,currDate=_ref.currDate,timeText=_ref.timeText,_useBarChart=Object(useBarChartStatPanel.a)({category:"Статистика по менеджерам (доходы)",chartName:"manager-money-graph",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(bx_ruble_inline,{className:"panel__img panel__img--list"})},data,(function(data){return getStats(data)}),timeText,[currDate]),graphPanel=_useBarChart.graphPanel,setIsLoading=_useBarChart.setIsLoading,setStats=_useBarChart.setStats,renderGraph=_useBarChart.renderGraph,getStats=function getStats(data){setIsLoading(!0);var managers={},filteredRequests=data.filter((function(request){return!(!Object(StatisticsPage_functions.a)(request.date,currDate.startDate,currDate.endDate)||"Завершено"!==request.status)&&(managers=Object.assign({},managers,defineProperty_default()({},request.responsible,void 0!==managers[request.responsible]?managers[request.responsible]+Number.parseFloat(request.sum||0):request.sum||0)),!0)}));setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"}})})}));var options=getStatsticsGraphWidgetOptions(managers);renderGraph(options)};return graphPanel};function time_inline_extends(){return(time_inline_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var time_inline=function SvgTimeinline(props){return react.createElement("svg",time_inline_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",style:{msTransform:"rotate(360deg)",WebkitTransform:"rotate(360deg)"},transform:"rotate(360)"},props),time_inline_path||(time_inline_path=react.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",fill:"#626262"})),time_inline_path2||(time_inline_path2=react.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z",fill:"#626262"})),_path3||(_path3=react.createElement("path",{fill:"rgba(0, 0, 0, 0)",d:"M0 0h24v24H0z"})))},Panels_RequestsAverageTimeCompletionPanel=function RequestsAverageTimeCompletionPanel(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,_useSmallStatPanel=Object(useSmallStatPanel.a)({category:"Средняя прод. выполнения заказа",linkTo:"/requests",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(time_inline,{className:"panel__img panel__img--time"}),invertedStats:!0},requests,(function(requests){return getStats(requests)}),timeText,[currDate]),smallPanel=_useSmallStatPanel.smallPanel,setStats=_useSmallStatPanel.setStats,getStats=function getStats(requests){setStats((function(stats){return Object.assign({},stats,{isLoading:!0,isLoaded:!1})}));var curMonthQuantity=0,prevMonthQuantity=0,curMonthAverage=0,prevMonthAverage=0,filteredRequests=requests.filter((function(request){var date=new Date(request.date),prevMonth=getPrevData(currDate.startDate);return!Object(StatisticsPage_functions.a)(date,prevMonth.startDate,prevMonth.endDate)||"Завершено"!==request.status||(prevMonthAverage+=Object(functions.e)(new Date(request.date),new Date(request.shippingDate||new Date)),prevMonthQuantity++,!1)})).filter((function(request){var date=new Date(request.date);return!(!Object(StatisticsPage_functions.a)(date,currDate.startDate,currDate.endDate)||"Завершено"!==request.status)&&(curMonthAverage+=Object(functions.e)(new Date(request.date),new Date(request.shippingDate||new Date)),curMonthQuantity++,!0)}));curMonthAverage/=0!==curMonthQuantity?curMonthQuantity:1,prevMonthAverage/=0!==prevMonthQuantity?prevMonthQuantity:1,setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"}}),isLoaded:!0,isLoading:!1,value:Math.floor(100*curMonthAverage)/100==0?"Нет данных":"".concat(Math.floor(100*curMonthAverage)/100," дн."),difference:Math.floor(100*curMonthAverage)/100==0?0:curMonthAverage-prevMonthAverage,percentage:Math.floor(100*curMonthAverage)/100==0?0:Math.floor((curMonthAverage-prevMonthAverage)/(0!==prevMonthAverage?prevMonthAverage:1)*100*100)/100})}))};return smallPanel},Panels_ProductQuantityInRequest=function ProductQuantityInRequest(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,_useSmallStatPanel=Object(useSmallStatPanel.a)({category:"Среднее кол-во позиций в заказе",linkTo:"/requests",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(play_list_inline,{className:"panel__img panel__img--requests"})},requests,(function(requests){return getStats(requests)}),timeText,[currDate]),smallPanel=_useSmallStatPanel.smallPanel,setStats=_useSmallStatPanel.setStats,updateStats=_useSmallStatPanel.updateStats,getStats=function getStats(requests){setStats((function(stats){return Object.assign({},stats,{isLoading:!0,isLoaded:!1})}));var curMonthAverage=0,prevMonthAverage=0,curMonthQuantity=0,prevMonthQuantity=0,filteredRequests=requests.filter((function(request){var date=request.date,prevMonth=getPrevData(currDate.startDate);return!Object(StatisticsPage_functions.a)(date,prevMonth.startDate,prevMonth.endDate)||(prevMonthAverage+=request.requestProducts.length,prevMonthQuantity++,!1)})).filter((function(request){var date=request.date;return!!Object(StatisticsPage_functions.a)(date,currDate.startDate,currDate.endDate)&&(curMonthAverage+=request.requestProducts.length,curMonthQuantity++,!0)}));curMonthAverage/=0!==curMonthQuantity?curMonthQuantity:1,prevMonthAverage/=0!==prevMonthQuantity?prevMonthQuantity:1,setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"}})})})),updateStats(prevMonthAverage,curMonthAverage)};return smallPanel},Graphs_ClientTypeDistributionInRequests=function ClientTypeDistributionInRequests(_ref){var data=_ref.data,currDate=_ref.currDate,timeText=_ref.timeText,_useBarChart=Object(useBarChartStatPanel.a)({category:"Типы клиентов по заказам",chartName:"client-type-distribution-graph",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(client_inline.a,{className:"panel__img panel__img--money"})},data,(function(data){return getStats(data)}),timeText,[currDate]),graphPanel=_useBarChart.graphPanel,setIsLoading=_useBarChart.setIsLoading,setStats=_useBarChart.setStats,renderGraph=_useBarChart.renderGraph,getStats=function getStats(data){setIsLoading(!0);var clientTypes={"Активные":0,"Потенциальные":0,"В разработке":0},filteredRequests=data.filter((function(request){return!(!Object(StatisticsPage_functions.a)(request.date,currDate.startDate,currDate.endDate)||null===request.client||void 0===clientTypes[request.client.clientType])&&(clientTypes=Object.assign({},clientTypes,defineProperty_default()({},request.client.clientType,clientTypes[request.client.clientType]+1)),!0)}));setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"}})})}));var options=getStatsticsGraphWidgetOptions(clientTypes);renderGraph(options)};return graphPanel},Panels_OnTimeRequestsDistribution=function OnTimeRequestsDistribution(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,_useSmallStatPanel=Object(useSmallStatPanel.a)({category:"Вовремя выполненные заказы",linkTo:"/requests",timePeriod:timeText,renderIcon:Object(jsx_runtime.jsx)(time_inline,{className:"panel__img panel__img--time"})},requests,(function(requests){return getStats(requests)}),timeText,[currDate]),smallPanel=_useSmallStatPanel.smallPanel,setStats=_useSmallStatPanel.setStats,filterRequests=function filterRequests(requests,currDate){var monthOnTime=0,monthAllQuantity=0;return[requests.filter((function(request){var date=new Date(request.date);return!Object(StatisticsPage_functions.a)(date,currDate.startDate,currDate.endDate)||"Завершено"!==request.status&&"Отгружено"!==request.status||(Math.abs(Object(functions.e)(new Date(request.date),new Date(request.shippingDate)))<=7&&monthOnTime++,monthAllQuantity++,!1)})),monthOnTime,monthAllQuantity]},getStats=function getStats(requests){setStats((function(stats){return Object.assign({},stats,{isLoading:!0,isLoaded:!1})}));var prevMonth=getPrevData(currDate.startDate),_filterRequests=filterRequests(requests,prevMonth),_filterRequests2=slicedToArray_default()(_filterRequests,3),temp=_filterRequests2[0],prevMonthOnTimeQuantity=_filterRequests2[1],prevMonthAllQuantity=_filterRequests2[2],_filterRequests3=filterRequests(temp,currDate),_filterRequests4=slicedToArray_default()(_filterRequests3,3),filteredRequests=_filterRequests4[0],curMonthOnTimeQuantity=_filterRequests4[1],curMonthAllQuantity=_filterRequests4[2],curMonthValue=Math.floor(curMonthOnTimeQuantity/(0!==curMonthAllQuantity?curMonthAllQuantity:1)*100)/100,prevMonthValue=Math.floor(prevMonthOnTimeQuantity/(0!==prevMonthAllQuantity?prevMonthAllQuantity:1)*100)/100;setStats((function(stats){return Object.assign({},stats,{windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"}}),isLoaded:!0,isLoading:!1,value:"".concat(Math.floor(100*curMonthValue*100)/100,"%"),difference:Math.floor(100*(curMonthValue-prevMonthValue)*100)/100,percentage:Math.floor((curMonthValue-prevMonthValue)/(0!==prevMonthValue?prevMonthValue:1)*100*100)/100})}))};return smallPanel},FormWindow=(__webpack_require__(1784),__webpack_require__(165),__webpack_require__(473),__webpack_require__(475),__webpack_require__(1019),__webpack_require__(1016),__webpack_require__(203)),BigPanel_BigPanel=function BigPanel(_ref){var isLoaded=_ref.isLoaded,isLoading=_ref.isLoading,renderIcon=_ref.renderIcon,value=_ref.value,prevValue=_ref.prevValue,category=_ref.category,invertedStats=_ref.invertedStats,percentage=_ref.percentage,timePeriod=_ref.timePeriod,windowCharts=_ref.windowCharts,windowContent=_ref.windowContent,content=_ref.content,curPeriod=_ref.curPeriod,currDate=_ref.currDate,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),showWindow=_useState2[0],setShowWindow=_useState2[1];return Object(react.useEffect)((function(){}),[isLoaded]),Object(react.useEffect)((function(){console.log(currDate)}),[showWindow,setShowWindow,windowContent,content]),Object(jsx_runtime.jsxs)("div",{className:"panel panel--big ".concat(isLoaded&&!isLoading?"":"panel--placeholder"),children:[Object(jsx_runtime.jsxs)("div",{className:"panel__category",onClick:function onClick(){return setShowWindow(!0)},children:[Object(jsx_runtime.jsx)("span",{children:category||"Категория"}),renderIcon?Object(jsx_runtime.jsx)("div",{className:"panel__icon",children:renderIcon}):null]}),windowContent||windowCharts?Object(jsx_runtime.jsx)(FormWindow.a,{title:category,content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[windowContent,windowCharts?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__title",children:"Графики"}),Object(jsx_runtime.jsx)("div",{className:"panel__charts-wrapper",children:windowCharts})]}):null]}),showWindow:showWindow,setShowWindow:setShowWindow}):null,Object(jsx_runtime.jsxs)("div",{className:"panel__values",children:["Месяц"===curPeriod.name&&0===currDate.startDate.getMonth()?null:Object(jsx_runtime.jsx)(BigPanel_PanelValue,{curPeriod:curPeriod,type:"previous",value:prevValue,isLoaded:isLoaded}),Object(jsx_runtime.jsx)(BigPanel_PanelValue,{curPeriod:curPeriod,type:"current",value:value,isLoaded:isLoaded})]}),"Месяц"===curPeriod.name&&0===currDate.startDate.getMonth()?null:Object(jsx_runtime.jsxs)("div",{className:"panel__difference panel__difference--".concat(!0===invertedStats?0!==percentage&&isLoaded?percentage>=0?"negative":"positive":"equal":0!==percentage&&isLoaded?percentage<0?"negative":"positive":"equal"),children:[Object(jsx_runtime.jsx)("div",{className:"panel__arrow"}),Object(jsx_runtime.jsx)("div",{className:"panel__percentage",children:isLoaded?"".concat(Math.abs(percentage),"%"):""}),Object(jsx_runtime.jsx)("div",{className:"panel__time-period",children:isLoaded?timePeriod:""})]}),Object(jsx_runtime.jsx)("div",{className:"panel__difference panel__difference--".concat(0!==percentage&&isLoaded?percentage<0?"negative":"positive":"equal")}),content]})};BigPanel_BigPanel.displayName="BigPanel",BigPanel_BigPanel.__docgenInfo={description:"",methods:[],displayName:"BigPanel"};var BigPanels_BigPanel=BigPanel_BigPanel,BigPanel_PanelValue=function PanelValue(_ref2){var curPeriod=_ref2.curPeriod,isLoaded=_ref2.isLoaded,value=_ref2.value,_ref2$type=_ref2.type,type=void 0===_ref2$type?"current":_ref2$type;return Object(jsx_runtime.jsxs)("div",{className:"panel__value panel__value--".concat(type),children:[Object(jsx_runtime.jsx)("span",{children:"".concat("current"===type?"Текущ":"Пред",". ").concat(curPeriod.name.toLowerCase())}),Object(jsx_runtime.jsx)("div",{children:isLoaded?value||0:null})]})};BigPanel_PanelValue.displayName="PanelValue","undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/StatisticsPage/BigPanels/BigPanel.jsx"]={name:"BigPanel",docgenInfo:BigPanel_BigPanel.__docgenInfo,path:"src/components/MainPage/StatisticsPage/BigPanels/BigPanel.jsx"});var prop_types=__webpack_require__(2),prop_types_default=__webpack_require__.n(prop_types),Chart=__webpack_require__(667),Chart_default=__webpack_require__.n(Chart),screenWidthLessThan500PX=(__webpack_require__(3226),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>500),chartConfig={responsive:!0,maintainAspectRatio:!!screenWidthLessThan500PX,animation:{easing:"easeInOutCirc"}},BarChart_BarChart_BarChart=function BarChart(_ref){var _options$tooltips$cal,_options$tooltips,_options$tooltips$cal2,_options$scales$yAxes,_options$scales,_options$scales$yAxes2,_options$scales$yAxes3,_options$scales$yAxes4,_options$scales2,_options$scales2$yAxe,_options$scales2$yAxe2,_options$scales$xAxes,_options$scales3,_options$scales3$xAxe,_options$scales3$xAxe2,_ref$data=_ref.data,data=void 0===_ref$data?[]:_ref$data,_ref$labels=_ref.labels,labels=void 0===_ref$labels?[]:_ref$labels,_ref$title=_ref.title,title=void 0===_ref$title?"":_ref$title,color=_ref.color,_ref$chartClassName=_ref.chartClassName,chartClassName=void 0===_ref$chartClassName?"":_ref$chartClassName,_ref$wrapperClassName=_ref.wrapperClassName,wrapperClassName=void 0===_ref$wrapperClassName?"":_ref$wrapperClassName,_ref$isStacked=_ref.isStacked,isStacked=void 0!==_ref$isStacked&&_ref$isStacked,_ref$options=_ref.options,options=void 0===_ref$options?{}:_ref$options,chartContainer=Object(react.useRef)(null),_useState=Object(react.useState)(null),_useState2=slicedToArray_default()(_useState,2),chartInstance=_useState2[0],setChartInstance=_useState2[1],defaultTooltips={mode:"index",callbacks:{label:null!==(_options$tooltips$cal=null==options||null===(_options$tooltips=options.tooltips)||void 0===_options$tooltips||null===(_options$tooltips$cal2=_options$tooltips.callbacks)||void 0===_options$tooltips$cal2?void 0:_options$tooltips$cal2.label)&&void 0!==_options$tooltips$cal?_options$tooltips$cal:function(tooltipItem,data){var label=data.datasets[tooltipItem.datasetIndex].label||"";return label&&(label+=": "),label+=Math.round(100*tooltipItem.yLabel)/100}}},defaultScales={yAxes:[{gridLines:{display:null===(_options$scales$yAxes=null==options||null===(_options$scales=options.scales)||void 0===_options$scales||null===(_options$scales$yAxes2=_options$scales.yAxes)||void 0===_options$scales$yAxes2||null===(_options$scales$yAxes3=_options$scales$yAxes2.gridLines)||void 0===_options$scales$yAxes3?void 0:_options$scales$yAxes3.display)||void 0===_options$scales$yAxes||_options$scales$yAxes},stacked:isStacked,ticks:{display:!0,callback:null!==(_options$scales$yAxes4=null==options||null===(_options$scales2=options.scales)||void 0===_options$scales2||null===(_options$scales2$yAxe=_options$scales2.yAxes)||void 0===_options$scales2$yAxe||null===(_options$scales2$yAxe2=_options$scales2$yAxe.ticks)||void 0===_options$scales2$yAxe2?void 0:_options$scales2$yAxe2.callback)&&void 0!==_options$scales$yAxes4?_options$scales$yAxes4:function(value){return value},min:0,beginAtZero:!0}}],xAxes:[{gridLines:{display:null===(_options$scales$xAxes=null==options||null===(_options$scales3=options.scales)||void 0===_options$scales3||null===(_options$scales3$xAxe=_options$scales3.xAxes)||void 0===_options$scales3$xAxe||null===(_options$scales3$xAxe2=_options$scales3$xAxe.gridLines)||void 0===_options$scales3$xAxe2?void 0:_options$scales3$xAxe2.display)||void 0===_options$scales$xAxes||_options$scales$xAxes},stacked:isStacked,ticks:{display:!!screenWidthLessThan500PX}}]},getDatasets=function getDatasets(data){return isStacked?data.map((function(d){return{label:d.label,data:d.data,backgroundColor:d.color,maxBarThickness:80}})):[{label:title,data:data.map((function(d){return d.value})),backgroundColor:null!=color?color:data.map((function(d){return d.color})),maxBarThickness:80}]};return Object(react.useEffect)((function(){var _options$legend$posit,_options$legend,_options$legend$displ,_options$legend2,_options$onClick;if(chartContainer&&chartContainer.current){null!==chartInstance&&chartInstance.destroy();var newChartInstance=new Chart_default.a(chartContainer.current,{type:screenWidthLessThan500PX?"bar":"horizontalBar",data:{labels:labels,datasets:getDatasets(data)},options:Object.assign({},chartConfig,{legend:{position:null!==(_options$legend$posit=null==options||null===(_options$legend=options.legend)||void 0===_options$legend?void 0:_options$legend.position)&&void 0!==_options$legend$posit?_options$legend$posit:"top",display:null===(_options$legend$displ=null==options||null===(_options$legend2=options.legend)||void 0===_options$legend2?void 0:_options$legend2.display)||void 0===_options$legend$displ||_options$legend$displ},onClick:null!==(_options$onClick=null==options?void 0:options.onClick)&&void 0!==_options$onClick?_options$onClick:function(){},tooltips:defaultTooltips,scales:defaultScales})});setChartInstance(newChartInstance)}}),[chartContainer]),Object(react.useEffect)((function(){chartContainer&&chartContainer.current&&chartInstance&&data&&(console.log(data),function updateDataset(datasetIndex,newData){if(isStacked){var _values=data.map((function(d){return{label:d.label,data:d.data,backgroundColor:d.color}}));return chartInstance.data.datasets=_values,chartInstance.data.labels=labels,chartInstance.update()}var values=newData.map((function(d){return d.value})),colors=newData.map((function(d){return d.color}));chartInstance.data.datasets[datasetIndex].data=values,chartInstance.data.datasets[datasetIndex].backgroundColor=null!=color?color:colors,chartInstance.data.labels=labels,chartInstance.update()}(0,data))}),[data]),Object(jsx_runtime.jsxs)("div",{className:"bar-chart",children:[title&&Object(jsx_runtime.jsx)("div",{className:"main-window__title",children:title}),Object(jsx_runtime.jsx)("div",{className:wrapperClassName,style:{width:"100%"},children:Object(jsx_runtime.jsx)("canvas",{className:chartClassName,ref:chartContainer})})]})};BarChart_BarChart_BarChart.displayName="BarChart",BarChart_BarChart_BarChart.__docgenInfo={description:"",methods:[],displayName:"BarChart",props:{data:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},labels:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},title:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},chartClassName:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},wrapperClassName:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},isStacked:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},options:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},color:{type:{name:"string"},required:!1,description:""}}};var Charts_BarChart_BarChart=BarChart_BarChart_BarChart;BarChart_BarChart_BarChart.propTypes={data:prop_types_default.a.array,title:prop_types_default.a.string,labels:prop_types_default.a.array,isStacked:prop_types_default.a.bool,chartClassName:prop_types_default.a.string,wrapperClassName:prop_types_default.a.string,color:prop_types_default.a.string,options:prop_types_default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Charts/BarChart/BarChart.jsx"]={name:"BarChart",docgenInfo:BarChart_BarChart_BarChart.__docgenInfo,path:"src/components/Charts/BarChart/BarChart.jsx"});var IncomeStatsBigPanel_IncomeStatsBigPanel=function IncomeStatsBigPanel(_ref){var requests=_ref.requests,currDate=_ref.currDate,timeText=_ref.timeText,getPrevData=_ref.getPrevData,loadData=_ref.loadData,curPeriod=_ref.curPeriod,_useState=Object(react.useState)({category:"Доход",percentage:0,value:null,linkTo:"/requests",chartName:"IncomeStatsBigPanel",isLoaded:!1,timePeriod:timeText,difference:0,curPeriod:curPeriod,currDate:currDate,renderIcon:Object(jsx_runtime.jsx)(bx_ruble_inline,{className:"panel__img panel__img--money"})}),_useState2=slicedToArray_default()(_useState,2),stats=_useState2[0],setStats=_useState2[1],filterRequests=function filterRequests(requests,currDate){var keepOld=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],monthIncome=0,data=requests.filter((function(request){var date=new Date(request.shippingDate);return Object(StatisticsPage_functions.a)(date,currDate.startDate,currDate.endDate)&&"Завершено"===request.status?(monthIncome+=Number.parseFloat(request.sum||0),!keepOld):"Завершено"===request.status&&keepOld}));return[data,monthIncome]},getFullYearData=function getFullYearData(requests,currDate){for(var monthsIncome=[],curYear=currDate.startDate.getFullYear(),curMonth=currDate.startDate.getMonth(),i=0;i<12;i++){var totalIncome=Object(StatisticsPage_functions.b)(requests,new Date(curYear,i,1)).reduce((function(prev,cur){var _cur$sum;return prev+Number.parseFloat(null!==(_cur$sum=cur.sum)&&void 0!==_cur$sum?_cur$sum:0)}),0),color=curMonth===i?"#16c79a":curMonth-1===i?"#247fa7":"#cccccc";monthsIncome.push({value:totalIncome,label:dataObjects.c[i],color:color})}return monthsIncome},colors=["#F1B5CB","#E88EED","#CC3F0C","#9A6D38","#33673B","#DB8A74","#444054","#FFB7FF","#3B8EA5","#F4C3C2","#2D728F","#F3DAD8","#D6D9CE"],getStats=function getStats(requests){setStats((function(stats){return Object.assign({},stats,{isLoaded:!1})}));var prevMonth=getPrevData(currDate.startDate),_filterRequests=filterRequests(requests,prevMonth),_filterRequests2=slicedToArray_default()(_filterRequests,2),temp=_filterRequests2[0],prevMonthIncome=_filterRequests2[1],_filterRequests3=filterRequests(temp,currDate,!1),_filterRequests4=slicedToArray_default()(_filterRequests3,2),filteredRequests=_filterRequests4[0],curMonthIncome=_filterRequests4[1],monthsIncome=getFullYearData(requests,currDate),monthsAccumilationIncome=function getFullYearAccumilationData(requests,currDate){for(var monthsIncome=[],totalSum=0,curYear=currDate.startDate.getFullYear(),isFutureMonth=function isFutureMonth(curMonth){return curYear===(new Date).getFullYear()&&curMonth>(new Date).getMonth()},i=0;i<12;i++){var curMonthIncome=Object(StatisticsPage_functions.b)(requests,new Date(curYear,i,1)).reduce((function(prev,cur){return prev+Number.parseFloat(cur.sum||0)}),0);isFutureMonth(i)||(totalSum+=curMonthIncome),monthsIncome.push({value:isFutureMonth(i)?0:totalSum,label:dataObjects.c[i],color:"#3e95cd"})}return monthsIncome}(requests,currDate),incomeByClients=function getIncomeByClients(requests,currDate){var clients={};requests.map((function(request){var _request$client,curId=null==request||null===(_request$client=request.client)||void 0===_request$client?void 0:_request$client.id;if(curId&&void 0===clients[curId]){var filteredRequests=requests.filter((function(item){var _item$client;return(null===(_item$client=item.client)||void 0===_item$client?void 0:_item$client.id)===curId})),dataset=getFullYearData(filteredRequests,currDate).map((function(item){return item.value}));if(0===dataset.reduce((function(prev,cur){return prev+cur}),0))return;return clients=Object.assign({},clients,defineProperty_default()({},curId,{data:dataset,label:request.client.name,color:Object(functions.q)()}))}}));var topIds={},newClients=Object.values(clients).sort((function(a,b){var sumA=a.data.reduce((function(prev,cur){return prev+cur}),0),sumB=b.data.reduce((function(prev,cur){return prev+cur}),0);return sumA<sumB?1:sumA>sumB?-1:0})).splice(0,10);newClients.map((function(item){return topIds=Object.assign({},topIds,defineProperty_default()({},item.label,""))}));var restOfClientsDataset=[];return dataObjects.c.map((function(item,index){var curYear=currDate.startDate.getFullYear(),sum=Object(StatisticsPage_functions.b)(requests.filter((function(request){var _request$client2,_request$client3;return(null==request||null===(_request$client2=request.client)||void 0===_request$client2?void 0:_request$client2.name)&&void 0===topIds[null==request||null===(_request$client3=request.client)||void 0===_request$client3?void 0:_request$client3.name]})),new Date(curYear,index,1)).reduce((function(prev,cur){var _cur$sum2;return prev+Number.parseFloat(null!==(_cur$sum2=cur.sum)&&void 0!==_cur$sum2?_cur$sum2:0)}),0);return restOfClientsDataset.push(sum)})),[].concat(toConsumableArray_default()(newClients.map((function(item,index){return Object.assign({},item,{color:colors[index]})}))),[{data:restOfClientsDataset,label:"Остальные",color:"#CCCCCC"}])}(requests,currDate),defaultOptions={legend:{display:!1},tooltips:{callbacks:{label:function label(tooltipItem,data){return function tooltipLabelRubles(tooltipItem,data){var label=data.datasets[tooltipItem.datasetIndex].label||"";return label&&(label+=": "),label+="".concat(Object(functions.a)(Number.parseInt(Math.round(100*tooltipItem.yLabel)/100))," ₽")}(tooltipItem,data)}}},scales:{xAxes:{gridLines:{display:!1}},yAxes:{ticks:{callback:function callback(value){return"".concat(Object(functions.a)(value)," ₽")}}}}};setStats((function(stats){return Object.assign({},stats,{isLoaded:!0,windowContent:Object(jsx_runtime.jsx)(Lists_RequestsList_RequestsList,{title:"Заявки за выбранный период",data:filteredRequests,sortBy:{curSort:"sum",sum:"desc"},loadData:loadData}),windowCharts:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(Charts_BarChart_BarChart,{data:monthsIncome,labels:dataObjects.c,options:defaultOptions,color:"#3e95cd",chartClassName:"panel__chart",wrapperClassName:"panel__chart-wrapper",title:"Доход за год"}),Object(jsx_runtime.jsx)(Charts_BarChart_BarChart,{data:incomeByClients,labels:dataObjects.c,chartClassName:"panel__chart",wrapperClassName:"panel__chart-wrapper",title:"Доход за год (по клиентам)",isStacked:!0,options:Object.assign({},defaultOptions,{legend:{position:"right"}})}),Object(jsx_runtime.jsx)(Charts_BarChart_BarChart,{data:monthsAccumilationIncome,labels:dataObjects.c,options:defaultOptions,chartClassName:"panel__chart",wrapperClassName:"panel__chart-wrapper",title:"График накопления"})]}),content:Object(jsx_runtime.jsx)(Charts_BarChart_BarChart,{data:monthsIncome,labels:dataObjects.c,options:defaultOptions,chartClassName:"panel__chart",wrapperClassName:"panel__chart-wrapper"}),value:"".concat(Object(functions.a)(Number.parseInt(Math.floor(100*curMonthIncome)/100))," ₽"),prevValue:"".concat(Object(functions.a)(Number.parseInt(Math.floor(100*prevMonthIncome)/100))," ₽"),difference:curMonthIncome-prevMonthIncome,percentage:Math.floor((curMonthIncome-prevMonthIncome)/(0===prevMonthIncome?1:prevMonthIncome)*100*100)/100})}))};return Object(react.useEffect)((function(){!stats.isLoaded&&requests.length>1&&getStats(requests)}),[requests]),Object(react.useEffect)((function(){stats.isLoaded&&requests.length>1&&(setStats((function(stats){return Object.assign({},stats,{timePeriod:timeText,curPeriod:curPeriod,currDate:currDate})})),getStats(requests))}),[currDate]),Object(jsx_runtime.jsx)(BigPanels_BigPanel,Object.assign({},stats))};IncomeStatsBigPanel_IncomeStatsBigPanel.displayName="IncomeStatsBigPanel",IncomeStatsBigPanel_IncomeStatsBigPanel.__docgenInfo={description:"",methods:[],displayName:"IncomeStatsBigPanel"};var BigPanels_IncomeStatsBigPanel=IncomeStatsBigPanel_IncomeStatsBigPanel;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/StatisticsPage/BigPanels/IncomeStatsBigPanel.jsx"]={name:"IncomeStatsBigPanel",docgenInfo:IncomeStatsBigPanel_IncomeStatsBigPanel.__docgenInfo,path:"src/components/MainPage/StatisticsPage/BigPanels/IncomeStatsBigPanel.jsx"});var API_requests=__webpack_require__(1021),RequestsPage_RequestsPage=function RequestsPage(_ref){var currDate=_ref.currDate,timePeriod=_ref.timePeriod,_useState=Object(react.useState)([]),_useState2=slicedToArray_default()(_useState,2),requests=_useState2[0],setRequests=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),requestsLoaded=_useState4[0],setRequestsLoaded=_useState4[1],_useState5=Object(react.useState)(!1),_useState6=slicedToArray_default()(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1],loadRequests=function loadRequests(signal){requestsLoaded||isLoading||(setIsLoading(!0),Object(API_requests.k)(signal).then((function(res){return res.json()})).then((function(res){setRequestsLoaded(!0),setRequests(toConsumableArray_default()(res)),setIsLoading(!1)})).catch((function(error){setIsLoading(!1),setRequestsLoaded(!0),console.log(error)})))};return Object(react.useEffect)((function(){var abortController=new AbortController;return loadRequests(abortController.signal),function cancel(){abortController.abort()}}),[]),Object(jsx_runtime.jsxs)("div",{className:"statistics__page-wrapper",children:[Object(jsx_runtime.jsxs)("div",{className:"statistics__row",children:[Object(jsx_runtime.jsx)("div",{className:"statistics__column",style:{maxWidth:"700px"},children:Object(jsx_runtime.jsx)(BigPanels_IncomeStatsBigPanel,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData,loadData:loadRequests,curPeriod:timePeriod})}),Object(jsx_runtime.jsxs)("div",{className:"statistics__column",children:[Object(jsx_runtime.jsx)(Panels_RequestsQuantityPanel,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData}),Object(jsx_runtime.jsx)(Panels_OnTimeRequestsDistribution,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData}),Object(jsx_runtime.jsxs)("div",{className:"statistics__row statistics__row--full",children:[Object(jsx_runtime.jsx)(Panels_NewClientsStatsPanel,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData}),Object(jsx_runtime.jsx)(Panels_NewOldClientsStatsPanel,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData})]})]})]}),Object(jsx_runtime.jsxs)("div",{className:"statistics__row",children:[Object(jsx_runtime.jsx)(Graphs_ManagerEfficiencyGraphPanel,{currDate:currDate,data:requests,timeText:timePeriod.timeTextGraphPanel}),Object(jsx_runtime.jsx)(Graphs_ManagerMoneyGraphPanel,{currDate:currDate,data:requests,timeText:timePeriod.timeTextGraphPanel})]}),Object(jsx_runtime.jsxs)("div",{className:"statistics__row statistics__row--full",children:[Object(jsx_runtime.jsx)(Panels_ProductQuantityInRequest,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData}),Object(jsx_runtime.jsx)(Panels_AverageSumStatsPanel,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData}),Object(jsx_runtime.jsx)(Panels_RequestsAverageTimeCompletionPanel,{currDate:currDate,requests:requests,timeText:timePeriod.timeTextSmallPanel,getPrevData:timePeriod.getPrevData})]}),Object(jsx_runtime.jsx)("div",{className:"statistics__row",children:Object(jsx_runtime.jsx)(Graphs_ClientTypeDistributionInRequests,{currDate:currDate,data:requests,timeText:timePeriod.timeTextGraphPanel})})]})};RequestsPage_RequestsPage.displayName="RequestsPage",RequestsPage_RequestsPage.__docgenInfo={description:"",methods:[],displayName:"RequestsPage"};var Pages_RequestsPage=RequestsPage_RequestsPage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/StatisticsPage/Pages/RequestsPage.jsx"]={name:"RequestsPage",docgenInfo:RequestsPage_RequestsPage.__docgenInfo,path:"src/components/MainPage/StatisticsPage/Pages/RequestsPage.jsx"});var time=__webpack_require__(2904),StatisticsPage_StatisticsPage_StatisticsPage=function StatisticsPage(){var _useState=Object(react.useState)("month"),_useState2=slicedToArray_default()(_useState,2),curPeriod=_useState2[0],setCurPeriod=_useState2[1],_useTitleHeader=Object(useTitleHeader.a)("Статистика",[{pageTitle:"Заявки",pageName:"requests"},{pageTitle:"Производство",pageName:"production"}],"requests"),titleHeader=_useTitleHeader.titleHeader,curPage=_useTitleHeader.curPage,_useState3=Object(react.useState)({startDate:Object(time.b)(new Date,"current").startDate,endDate:Object(time.b)(new Date,"current").endDate}),_useState4=slicedToArray_default()(_useState3,2),currDate=_useState4[0],setCurrDate=_useState4[1],timePeriod={month:{name:"Месяц",prevButton:{text:"Пред. месяц",onClick:function onClick(){return setCurrDate({startDate:Object(time.b)(currDate.startDate).startDate,endDate:Object(time.b)(currDate.startDate).endDate})}},nextButton:{text:"Тек. месяц",onClick:function onClick(){return setCurrDate({startDate:Object(time.b)(new Date,"current").startDate,endDate:Object(time.b)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(currDate.startDate,currDate.endDate)},displayDates:function displayDates(){return currDate.startDate.getMonth()},initData:function initData(){return setCurrDate({startDate:Object(time.b)(new Date,"current").startDate,endDate:Object(time.b)(new Date,"current").endDate})},timeTextSmallPanel:"От прошлого месяца",timeTextGraphPanel:dataObjects.c[currDate.startDate.getMonth()],itemsCount:"".concat(dataObjects.c[currDate.startDate.getMonth()]),getPrevData:function getPrevData(date,value){return Object(time.b)(date,value)}},week:{name:"Неделя",prevButton:{text:"Пред. неделя",onClick:function onClick(){return setCurrDate({startDate:Object(StatisticsPage_functions.d)(currDate.startDate).startDate,endDate:Object(StatisticsPage_functions.d)(currDate.startDate).endDate})}},nextButton:{text:"Тек. неделя",onClick:function onClick(){return setCurrDate({startDate:Object(StatisticsPage_functions.d)(new Date,"current").startDate,endDate:Object(StatisticsPage_functions.d)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(currDate.startDate,currDate.endDate)},displayDates:function displayDates(){return currDate.startDate.getMonth()},initData:function initData(){return setCurrDate({startDate:Object(StatisticsPage_functions.d)(new Date,"current").startDate,endDate:Object(StatisticsPage_functions.d)(new Date,"current").endDate})},timeTextSmallPanel:"От прошлой недели",timeTextGraphPanel:"".concat(Object(functions.g)(currDate.startDate)," - ").concat(Object(functions.g)(currDate.endDate)),itemsCount:"".concat(Object(functions.g)(currDate.startDate)," - ").concat(Object(functions.g)(currDate.endDate)),getPrevData:function getPrevData(date,value){return Object(StatisticsPage_functions.d)(date,value)}},quarter:{name:"Квартал",prevButton:{text:"Пред. квартал",onClick:function onClick(){return setCurrDate({startDate:Object(time.c)(currDate.startDate).startDate,endDate:Object(time.c)(currDate.startDate).endDate})}},nextButton:{text:"Тек. квартал",onClick:function onClick(){return setCurrDate({startDate:Object(time.c)(new Date,"current").startDate,endDate:Object(time.c)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(currDate.startDate,currDate.endDate)},displayDates:function displayDates(){return currDate.startDate.getMonth()},initData:function initData(){return setCurrDate({startDate:Object(time.c)(new Date,"current").startDate,endDate:Object(time.c)(new Date,"current").endDate})},timeTextSmallPanel:"От прошлого квартала",timeTextGraphPanel:"".concat(Object(functions.g)(currDate.startDate)," - ").concat(Object(functions.g)(currDate.endDate)),itemsCount:"".concat(Object(functions.g)(currDate.startDate)," - ").concat(Object(functions.g)(currDate.endDate)),getPrevData:function getPrevData(date,value){return Object(time.c)(date,value)}},year:{name:"Год",prevButton:{text:"Пред. год",onClick:function onClick(){return setCurrDate({startDate:Object(StatisticsPage_functions.e)(currDate.startDate).startDate,endDate:Object(StatisticsPage_functions.e)(currDate.startDate).endDate})}},nextButton:{text:"Тек. год",onClick:function onClick(){return setCurrDate({startDate:Object(StatisticsPage_functions.e)(new Date,"current").startDate,endDate:Object(StatisticsPage_functions.e)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(currDate.startDate,currDate.endDate)},displayDates:function displayDates(){return currDate.startDate.getMonth()},initData:function initData(){return setCurrDate({startDate:Object(StatisticsPage_functions.e)(new Date,"current").startDate,endDate:Object(StatisticsPage_functions.e)(new Date,"current").endDate})},timeTextSmallPanel:"От прошлого года",timeTextGraphPanel:currDate.startDate.getFullYear(),itemsCount:currDate.startDate.getFullYear(),getPrevData:function getPrevData(date,value){return Object(StatisticsPage_functions.e)(date,value)}}},pages={requests:Object(jsx_runtime.jsx)(Pages_RequestsPage,{currDate:currDate,timePeriod:timePeriod[curPeriod]}),production:Object(jsx_runtime.jsx)(Pages_ProductionPage,{curDate:new Date,timePeriod:timePeriod[curPeriod]})};return Object(react.useEffect)((function(){}),[currDate]),Object(jsx_runtime.jsx)("div",{className:"statistics",children:Object(jsx_runtime.jsxs)("div",{className:"main-window",children:[titleHeader,Object(jsx_runtime.jsx)(ControlPanel.a,{buttons:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("select",{className:"main-window__select",onChange:function onChange(_ref){var target=_ref.target;setCurPeriod(target.value),timePeriod[target.value].initData()},children:[Object(jsx_runtime.jsx)("option",{value:"month",children:"Месяц"}),Object(jsx_runtime.jsx)("option",{value:"week",children:"Неделя"}),Object(jsx_runtime.jsx)("option",{value:"quarter",children:"Квартал"}),Object(jsx_runtime.jsx)("option",{value:"year",children:"Год"})]}),Object(jsx_runtime.jsx)("div",{className:"main-window__button main-window__button--inverted",onClick:function onClick(){return timePeriod[curPeriod].prevButton.onClick()},children:timePeriod[curPeriod].prevButton.text}),Object(jsx_runtime.jsx)("div",{className:"main-window__button main-window__button--inverted",onClick:function onClick(){return timePeriod[curPeriod].nextButton.onClick()},children:timePeriod[curPeriod].nextButton.text})]}),itemsCount:timePeriod[curPeriod].itemsCount}),pages[curPage]]})})};StatisticsPage_StatisticsPage_StatisticsPage.displayName="StatisticsPage",StatisticsPage_StatisticsPage_StatisticsPage.__docgenInfo={description:"",methods:[],displayName:"StatisticsPage"};__webpack_exports__.default=StatisticsPage_StatisticsPage_StatisticsPage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/StatisticsPage/StatisticsPage.jsx"]={name:"StatisticsPage",docgenInfo:StatisticsPage_StatisticsPage_StatisticsPage.__docgenInfo,path:"src/components/MainPage/StatisticsPage/StatisticsPage.jsx"})}}]);