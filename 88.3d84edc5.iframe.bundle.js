(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{3381:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3382);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3382:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,".employee-page{display:flex;flex-direction:column;align-items:flex-start;width:100%;background-color:#f4f4f4;min-height:calc(100vh - 60px)}.employee-page .main-form{background-color:#f4f4f4;padding:0}.employee-page .select-employee{margin-top:15px;margin-bottom:15px;padding-left:25px;box-sizing:border-box}.employee-page .select-employee__searchbar{display:none}.employee-page .select-employee__employee-info{background-color:#fff}.employee-page .employee-page__button--loading{margin-top:15px;margin-bottom:15px;margin-left:25px;margin-right:auto;box-sizing:border-box}.employee-page .main-window__select{margin-top:5px;margin-right:15px;font-size:0.9rem}.employee-page .employee-page__employee-wrapper{padding-left:0}.employee-page .employee-info__employee-wrapper{padding:0 25px;max-width:600px}\n",""]),module.exports=exports},3595:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(333),__webpack_require__(181),__webpack_require__(636),__webpack_require__(213),__webpack_require__(41),__webpack_require__(0)),SelectEmployee=__webpack_require__(2902),Button=__webpack_require__(182),EmployeeInfo=__webpack_require__(3094),ControlPanel=__webpack_require__(2656),functions=__webpack_require__(988),useWorkReportByRange=__webpack_require__(2827),App=__webpack_require__(214),dataObjects=(__webpack_require__(3381),__webpack_require__(2678)),getWeekDays=function getWeekDays(date){for(var week=[],curDate=new Date(date),i=1;i<=7;i++){var first=curDate.getDate()-curDate.getDay()+i,day=new Date(curDate.setDate(first));week.push(day)}return{week:week,startDate:week[0],endDate:week[6]}},time=__webpack_require__(2770),jsx_runtime=__webpack_require__(1),EmployeeReportPage_EmployeeReportPage_EmployeeReportPage=function EmployeeReportPage(){var _useState=Object(react.useState)(null),_useState2=slicedToArray_default()(_useState,2),selectedInfo=_useState2[0],setSelectedInfo=_useState2[1],_useState3=Object(react.useState)({startDate:getWeekDays(new Date).startDate,endDate:getWeekDays(new Date).endDate}),_useState4=slicedToArray_default()(_useState3,2),selectedDate=_useState4[0],setSelectedDate=_useState4[1],_useState5=Object(react.useState)("week"),_useState6=slicedToArray_default()(_useState5,2),curPeriod=_useState6[0],setCurPeriod=_useState6[1],userContext=Object(react.useContext)(App.a),timePeriods={week:{name:"Неделя",prevButton:{text:"Пред. неделя",onClick:function onClick(){return setSelectedDate((function(selectedDate){var newDate=new Date(new Date(selectedDate.startDate).setTime(selectedDate.startDate.getTime()-6048e5));return{startDate:newDate,endDate:getWeekDays(newDate).endDate}}))}},nextButton:{text:"Тек. неделя",onClick:function onClick(){return setSelectedDate({startDate:getWeekDays(new Date).startDate,endDate:getWeekDays(new Date).endDate})}},getDateList:function getDateList(){return Object(time.a)(selectedDate.startDate,selectedDate.endDate)},displayDates:function displayDates(){return"".concat(Object(functions.g)(selectedDate.startDate)," - ").concat(Object(functions.g)(selectedDate.endDate))},initData:function initData(){return setSelectedDate({startDate:getWeekDays(new Date).startDate,endDate:getWeekDays(new Date).endDate})}},month:{name:"Месяц",prevButton:{text:"Пред. месяц",onClick:function onClick(){return setSelectedDate((function(selectedDate){return{startDate:Object(time.b)(selectedDate.startDate).startDate,endDate:Object(time.b)(selectedDate.startDate).endDate}}))}},nextButton:{text:"Тек. месяц",onClick:function onClick(){return setSelectedDate({startDate:Object(time.b)(new Date,"current").startDate,endDate:Object(time.b)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(selectedDate.startDate,selectedDate.endDate)},displayDates:function displayDates(){return dataObjects.c[selectedDate.startDate.getMonth()]},initData:function initData(){return setSelectedDate({startDate:Object(time.b)(new Date,"current").startDate,endDate:Object(time.b)(new Date,"current").endDate})}},quarter:{name:"Квартал",prevButton:{text:"Пред. квартал",onClick:function onClick(){return setSelectedDate((function(selectedDate){return{startDate:Object(time.c)(selectedDate.endDate).startDate,endDate:Object(time.c)(selectedDate.endDate).endDate}}))}},nextButton:{text:"Тек. квартал",onClick:function onClick(){return setSelectedDate({startDate:Object(time.c)(new Date,"current").startDate,endDate:Object(time.c)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(selectedDate.startDate,selectedDate.endDate)},displayDates:function displayDates(){return"".concat(Object(functions.g)(selectedDate.startDate)," - ").concat(Object(functions.g)(selectedDate.endDate))},initData:function initData(){return setSelectedDate({startDate:Object(time.c)(new Date,"current").startDate,endDate:Object(time.c)(new Date,"current").endDate})}}},_useWorkReportByRange=Object(useWorkReportByRange.a)(timePeriods[curPeriod].getDateList()),_useWorkReportByRange2=slicedToArray_default()(_useWorkReportByRange,2),workData=_useWorkReportByRange2[0],isLoadingWorkData=_useWorkReportByRange2[1];return Object(react.useEffect)((function(){var _workData$filter$map2,_workData$filter2;null!==selectedInfo&&setSelectedInfo(Object.assign({},selectedInfo,{worksId:null!==(_workData$filter$map2=workData.filter((function(item){return item.employee.id===selectedInfo.employeeId})).map((function(item){return item.id})))&&void 0!==_workData$filter$map2?_workData$filter$map2:[],works:null!==(_workData$filter2=workData.filter((function(item){return item.employee.id===selectedInfo.employeeId})))&&void 0!==_workData$filter2?_workData$filter2:[]}))}),[workData,selectedDate]),Object(jsx_runtime.jsx)("div",{className:"employee-page",children:Object(jsx_runtime.jsxs)("div",{className:"main-window",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__header main-window__header--full",children:Object(jsx_runtime.jsx)("div",{className:"main-window__title",children:"Отчет сотрудника"})}),Object(jsx_runtime.jsx)(ControlPanel.a,{styles:{marginTop:"-5px"},itemsCount:timePeriods[curPeriod].displayDates(),buttons:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("select",{className:"main-window__select",onChange:function onChange(_ref){var target=_ref.target;setCurPeriod(target.value),timePeriods[target.value].initData()},children:[Object(jsx_runtime.jsx)("option",{value:"week",children:"Неделя"}),Object(jsx_runtime.jsx)("option",{value:"month",children:"Месяц"}),Object(jsx_runtime.jsx)("option",{value:"quarter",children:"Квартал"})]}),Object(jsx_runtime.jsx)(Button.a,{text:timePeriods[curPeriod].prevButton.text,className:"main-window__button main-window__button--inverted",inverted:!0,isLoading:isLoadingWorkData,onClick:timePeriods[curPeriod].prevButton.onClick}),Object(jsx_runtime.jsx)(Button.a,{text:timePeriods[curPeriod].nextButton.text,className:"main-window__button main-window__button--inverted",inverted:!0,isLoading:isLoadingWorkData,onClick:timePeriods[curPeriod].nextButton.onClick})]})}),isLoadingWorkData?Object(jsx_runtime.jsx)(Button.a,{text:"Идет загрузка",className:"main-window__button employee-page__button--loading",isLoading:!0}):Object(jsx_runtime.jsx)("div",{className:"main-form",children:Object(jsx_runtime.jsx)(SelectEmployee.a,{userHasAccess:userContext.userHasAccess,inputName:"Выбор сотрудника",name:"employee",handleEmployeeChange:function handleEmployeeChange(value,name,employee){var _workData$filter$map,_workData$filter;return setSelectedInfo({employeeId:value,employeeName:name,employee:employee,worksId:null!==(_workData$filter$map=workData.filter((function(item){return item.employee.id===value})).map((function(item){return item.id})))&&void 0!==_workData$filter$map?_workData$filter$map:[],works:null!==(_workData$filter=workData.filter((function(item){return item.employee.id===value})))&&void 0!==_workData$filter?_workData$filter:[]})}})}),null===selectedInfo||isLoadingWorkData?null:Object(jsx_runtime.jsx)(EmployeeInfo.a,{selectedInfo:selectedInfo,dates:timePeriods[curPeriod].getDateList()})]})})};EmployeeReportPage_EmployeeReportPage_EmployeeReportPage.displayName="EmployeeReportPage",EmployeeReportPage_EmployeeReportPage_EmployeeReportPage.__docgenInfo={description:"",methods:[],displayName:"EmployeeReportPage"};__webpack_exports__.default=EmployeeReportPage_EmployeeReportPage_EmployeeReportPage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\ReportsPage\\EmployeeReportPage\\EmployeeReportPage.jsx"]={name:"EmployeeReportPage",docgenInfo:EmployeeReportPage_EmployeeReportPage_EmployeeReportPage.__docgenInfo,path:"src\\components\\MainPage\\ReportsPage\\EmployeeReportPage\\EmployeeReportPage.jsx"})}}]);