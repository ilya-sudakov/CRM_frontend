(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{2858:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(21),DESCRIPTORS=__webpack_require__(84),global=__webpack_require__(32),has=__webpack_require__(103),isObject=__webpack_require__(90),defineProperty=__webpack_require__(136).f,copyConstructorProperties=__webpack_require__(1785),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function description(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},3229:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3230);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3230:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.log-list .main-window__header--full{margin-bottom:0 !important}\n",""]),module.exports=exports},3557:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(7),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(51),__webpack_require__(1019),__webpack_require__(165),__webpack_require__(0)),functions=(__webpack_require__(3229),__webpack_require__(1782),__webpack_require__(36),__webpack_require__(472),__webpack_require__(302),__webpack_require__(1783),__webpack_require__(2858),__webpack_require__(63)),logItemsTypes={requests:{name:"Заявки",originalName:"request"},clients:{name:"Клиенты",originalName:"clients"},login:{name:"Входы",originalName:"login"},rigging:{name:"Оснастка",originalName:"rigging"},riggingPart:{name:"Детали",originalName:"riggingPart"}},logItemsRedirectLinks={request:"/requests/edit",clients:"/clients/edit",rigging:"/dispatcher/rigging/stamp/edit",riggingPart:"/dispatcher/rigging/stamp/edit"},Table=__webpack_require__(356),jsx_runtime=__webpack_require__(1),TableView_TableView=function TableView(_ref){var _ref$data=_ref.data,data=void 0===_ref$data?[]:_ref$data,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,columns=[{text:"Время",value:"date",formatFn:function formatFn(_ref2){var date=_ref2.date;return"".concat(Object(functions.g)(date)," ").concat(Object(functions.h)(date)," ")}},{text:"Пользователь",value:"author"},{text:"Действие",value:"action"},{text:"Описание",value:"description",link:{getURL:function getURL(item){var _item$elementId,itemId=item.description.split("№")[1];return"".concat(logItemsRedirectLinks[item.type],"/").concat(null!==(_item$elementId=item.elementId)&&void 0!==_item$elementId?_item$elementId:itemId)},newTab:!0}}];return Object(jsx_runtime.jsx)(Table.a,{columns:columns,data:data,loading:{isLoading:isLoading}})};TableView_TableView.displayName="TableView",TableView_TableView.__docgenInfo={description:"",methods:[],displayName:"TableView",props:{data:{defaultValue:{value:"[]",computed:!1},required:!1},isLoading:{defaultValue:{value:"false",computed:!1},required:!1}}};var LogListPage_TableView=TableView_TableView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/LogListPage/TableView.jsx"]={name:"TableView",docgenInfo:TableView_TableView.__docgenInfo,path:"src/components/MainPage/LogListPage/TableView.jsx"});var ControlPanel=__webpack_require__(674),utilsAPI=__webpack_require__(10);var usePagination=__webpack_require__(1031),useSort=__webpack_require__(1023),hooks=__webpack_require__(1015),LogListPage_LogListPage_LogListPage=function LogListPage(){var _query$get,_useQuery=Object(hooks.e)(),query=_useQuery.query,pushParamToURL=_useQuery.pushParamToURL,_useState=Object(react.useState)(null!==(_query$get=query.get("category"))&&void 0!==_query$get?_query$get:"request"),_useState2=slicedToArray_default()(_useState,2),curCategory=_useState2[0],setCurCategory=_useState2[1],_useSort=Object(useSort.a)(data,{},[data]),sortOrder=_useSort.sortOrder,sortPanel=_useSort.sortPanel,_usePagination=Object(usePagination.a)((function(){return function getLogsListByType(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request",size=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,page=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,sort=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{curSort:"date",date:"DESC"};return Object(utilsAPI.b)({url:"".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/log/").concat(type,"/?size=").concat(size,"&page=").concat(page,"&sort=").concat(sort.curSort,",").concat(sort[sort.curSort]),method:"GET"})}(curCategory,itemsPerPage,curPage-1,sortOrder)}),[curCategory,sortOrder,setCurPage,curPage],"dynamic"),curPage=_usePagination.curPage,setCurPage=_usePagination.setCurPage,itemsPerPage=_usePagination.itemsPerPage,data=_usePagination.data,isLoading=_usePagination.isLoading,pagination=_usePagination.pagination;return Object(jsx_runtime.jsx)("div",{className:"log-list",children:Object(jsx_runtime.jsxs)("div",{className:"main-window",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__header main-window__header--full",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__title",children:"Логи"}),Object(jsx_runtime.jsx)("div",{className:"main-window__menu",children:Object.values(logItemsTypes).map((function(item){return Object(jsx_runtime.jsx)("div",{className:curCategory===item.originalName?"main-window__item--active main-window__item":"main-window__item",onClick:function onClick(){return function handleCategoryChange(item){setCurPage(1),pushParamToURL("page",1),pushParamToURL("category",item.originalName),setCurCategory(item.originalName)}(item)},children:item.name},item.id)}))})]}),Object(jsx_runtime.jsx)(ControlPanel.a,{sorting:sortPanel}),Object(jsx_runtime.jsx)(LogListPage_TableView,{data:data,isLoading:isLoading}),pagination]})})};LogListPage_LogListPage_LogListPage.displayName="LogListPage",LogListPage_LogListPage_LogListPage.__docgenInfo={description:"",methods:[],displayName:"LogListPage"};__webpack_exports__.default=LogListPage_LogListPage_LogListPage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/LogListPage/LogListPage.jsx"]={name:"LogListPage",docgenInfo:LogListPage_LogListPage_LogListPage.__docgenInfo,path:"src/components/MainPage/LogListPage/LogListPage.jsx"})}}]);