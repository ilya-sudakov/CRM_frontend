(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{2548:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(72),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(604),__webpack_require__(100),__webpack_require__(2)),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(2550),__webpack_require__(1)),InputText=function InputText(_ref){var inputName=_ref.inputName,required=_ref.required,error=_ref.error,type=_ref.type,name=_ref.name,handleInputChange=_ref.handleInputChange,defaultValue=_ref.defaultValue,readOnly=_ref.readOnly,disabled=_ref.disabled,setErrorsArr=_ref.setErrorsArr,errorsArr=_ref.errorsArr;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__input_name",children:inputName+(required?"*":"")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:!0===error?"input_text__input_field input_text__input_field--error":"input_text__input_field",children:"textarea"===type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("textarea",{name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("input",{type:type||"text",name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled})})]}),error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__error",onClick:setErrorsArr?function(){return setErrorsArr(Object.assign({},errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,!1)))}:null,children:"Поле не заполнено!"})]})};InputText.displayName="InputText",InputText.__docgenInfo={description:"",methods:[],displayName:"InputText",props:{inputName:{type:{name:"string"},required:!1,description:""},required:{type:{name:"bool"},required:!1,description:""},error:{type:{name:"bool"},required:!1,description:""},type:{type:{name:"string"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},handleInputChange:{type:{name:"func"},required:!1,description:""},defaultValue:{type:{name:"string"},required:!1,description:""},readOnly:{type:{name:"bool"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},setErrorsArr:{type:{name:"func"},required:!1,description:""},errorsArr:{type:{name:"object"},required:!1,description:""}}},__webpack_exports__.a=InputText,InputText.propTypes={inputName:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,required:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,error:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,type:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,name:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,handleInputChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,defaultValue:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,setErrorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,errorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\Form\\InputText\\InputText.jsx"]={name:"InputText",docgenInfo:InputText.__docgenInfo,path:"src\\utils\\Form\\InputText\\InputText.jsx"})},2550:function(module,exports,__webpack_require__){var api=__webpack_require__(64),content=__webpack_require__(2551);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2551:function(module,exports,__webpack_require__){(exports=__webpack_require__(65)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.input_text{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:20px}.input_text .input_text__error{width:100%;margin-top:1px;font-size:0.75rem;box-sizing:border-box;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.input_text .input_text__input{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;width:100%}.input_text .input_text__input .input_text__input_name{color:#666;padding-right:10px;flex:0 1 calc(20% - 10px);width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{display:flex;justify-content:center;width:calc(90% - 20px);position:relative;min-height:2rem;width:100%}.input_text .input_text__input .input_text__input_field input[type="text"],.input_text .input_text__input .input_text__input_field input[type="password"],.input_text .input_text__input .input_text__input_field input[type="number"],.input_text .input_text__input .input_text__input_field textarea{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;transition:100ms ease-in-out;box-sizing:border-box}.input_text .input_text__input .input_text__input_field input[type="text"]:hover,.input_text .input_text__input .input_text__input_field input[type="password"]:hover,.input_text .input_text__input .input_text__input_field input[type="number"]:hover,.input_text .input_text__input .input_text__input_field textarea:hover{border-color:#888888}.input_text .input_text__input .input_text__input_field input[type="text"]:focus,.input_text .input_text__input .input_text__input_field input[type="password"]:focus,.input_text .input_text__input .input_text__input_field input[type="number"]:focus,.input_text .input_text__input .input_text__input_field textarea:focus{border:1px solid #4293b6}.input_text .input_text__input .input_text__input_field input::-webkit-outer-spin-button,.input_text .input_text__input .input_text__input_field input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input_text .input_text__input .input_text__input_field textarea{min-width:calc(100% - 20px);outline:none;min-height:100px;max-height:150px;resize:vertical}.input_text .input_text__input .input_text__input_field input[type="number"]{-moz-appearance:textfield}.input_text .input_text__input .input_text__input_field--error input[type="text"],.input_text .input_text__input .input_text__input_field--error input[type="number"],.input_text .input_text__input .input_text__input_field--error input[type="password"],.input_text .input_text__input .input_text__input_field--error textarea{border:1px solid #d48282 !important}@media (max-width: 768px){.input_text .input_text__input{flex-wrap:wrap;align-items:flex-start;flex-direction:column}.input_text .input_text__input .input_text__input_name{width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{width:calc(100% - 0px)}.input_text .input_text__input .input_text__input_field input{padding:10px !important}}\n',""]),module.exports=exports},2587:function(module,__webpack_exports__,__webpack_require__){"use strict";var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),Assets_sidemenu_plus_inline_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2622),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2607),__webpack_require__(1)),AddToButton=function AddToButton(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"Добавить":_ref$text,_onClick=_ref.onClick;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"add-to-button",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"add-to-button__link",onClick:function onClick(event){event.preventDefault(),_onClick()},children:[text,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Assets_sidemenu_plus_inline_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"add-to-button__img add-to-button__img--plus"})]})})};AddToButton.displayName="AddToButton",AddToButton.__docgenInfo={description:"",methods:[],displayName:"AddToButton",props:{text:{defaultValue:{value:"'Добавить'",computed:!1},required:!1},onClick:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=AddToButton,AddToButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\Form\\AddToButton\\AddToButton.jsx"]={name:"AddToButton",docgenInfo:AddToButton.__docgenInfo,path:"src\\utils\\Form\\AddToButton\\AddToButton.jsx"})},2607:function(module,exports,__webpack_require__){var api=__webpack_require__(64),content=__webpack_require__(2608);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2608:function(module,exports,__webpack_require__){(exports=__webpack_require__(65)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.add-to-button__link{display:flex;align-items:center;transition:100ms ease-in-out;color:#777777 !important;border-radius:3px;cursor:pointer;font-size:0.9rem;padding:2px 8px;padding-right:3px;margin-top:2px;width:fit-content;margin-left:10px}.add-to-button__link .add-to-button__img{width:20px;transition:margin-left 200ms ease-in-out}.add-to-button__link .add-to-button__img--plus{margin-left:7px}.add-to-button__link .add-to-button__img--plus path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.add-to-button__link .add-to-button__img--more path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.add-to-button__link:hover{color:#333333 !important}.add-to-button__link:hover .add-to-button__img--more{margin-left:8px}.add-to-button__link:hover .add-to-button__img--more path:first-child{fill:#55a1c1}.add-to-button__link:hover .add-to-button__img--plus path:first-child{fill:#55a1c1}\n",""]),module.exports=exports},2609:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(263),__webpack_require__(100),__webpack_require__(604),__webpack_require__(0)),Assets_tableview_delete_inline_svg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(955),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2642),__webpack_require__(2566)),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_hooks_useMessageForUser_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2636),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1),NestedFormItem=function NestedFormItem(_ref){var _formRef$current,readOnly=_ref.readOnly,index=_ref.index,headerItems=_ref.headerItems,_ref$formInputs=_ref.formInputs,formInputs=void 0===_ref$formInputs?[]:_ref$formInputs,bottomButton=_ref.bottomButton,_ref$itemsLength=_ref.itemsLength,itemsLength=void 0===_ref$itemsLength?0:_ref$itemsLength,_ref$isMinimizedDefau=_ref.isMinimizedDefault,isMinimizedDefault=void 0!==_ref$isMinimizedDefau&&_ref$isMinimizedDefau,handleDeleteItem=_ref.handleDeleteItem,_ref$id=_ref.id,id=void 0===_ref$id?0:_ref$id,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(isMinimizedDefault),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isMinimized=_useState2[0],setIsMinimized=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(0),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState3,2),selectedIndex=_useState4[0],setSelectedIndex=_useState4[1],formRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null),_useMessageForUser=Object(_hooks_useMessageForUser_js__WEBPACK_IMPORTED_MODULE_9__.a)({title:"Удаление элемента",message:"Вы действительно хотите удалить этот элемент?",onClick:function onClick(){return handleDeleteItem(selectedIndex)},buttonText:"ОК"}),messageForUser=_useMessageForUser.messageForUser,showMessage=_useMessageForUser.showMessage,setShowMessage=_useMessageForUser.setShowMessage,_useState5=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(null==formRef||null===(_formRef$current=formRef.current)||void 0===_formRef$current?void 0:_formRef$current.clientHeight),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState5,2),formHeight=_useState6[0],setFormHeight=_useState6[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){setFormHeight("".concat(formRef.current.clientHeight,"px"))}),[formRef.current]),Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){isMinimized||"0px"!==formHeight||setFormHeight("".concat(formRef.current.clientHeight,"px"))}),[isMinimized]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:!readOnly&&itemsLength>1?"form-item form-item--minimized":"form-item",children:[headerItems?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"form-item__header",index:index,onClick:function onClick(){return setIsMinimized(!isMinimized)},id:id,children:[headerItems.map((function(headerItem,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"form-item__name",style:Object.assign({},headerItem.style),children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:headerItem.text}),""!==headerItem.value?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:headerItem.value}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"form-item__name--placeholder",children:headerItem.placeholder})]},index)})),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_7__.a,{className:"main-form__img ".concat(isMinimized?"":"main-form__img--rotated")})]}):null,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:isMinimized?"form-item__form form-item__form--hidden":"form-item__form",style:{height:isMinimized?"0px":"auto",transition:"0s ease-in"},ref:formRef,children:[formInputs.map((function(input,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"form-item__item",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"form-item__input_field",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"form-item__input_name",children:input.name}),input.element]})},index)})),!readOnly&&bottomButton&&bottomButton]}),messageForUser,!readOnly&&itemsLength>1&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(Assets_tableview_delete_inline_svg__WEBPACK_IMPORTED_MODULE_5__.a,{onClick:function onClick(){setSelectedIndex(index),setShowMessage(!showMessage)},className:"form-item__img"})]})};NestedFormItem.displayName="NestedFormItem",NestedFormItem.__docgenInfo={description:"",methods:[],displayName:"NestedFormItem",props:{formInputs:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},itemsLength:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},isMinimizedDefault:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},id:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},readOnly:{type:{name:"bool"},required:!1,description:""},index:{type:{name:"number"},required:!1,description:""},headerItems:{type:{name:"array"},required:!1,description:""},bottomButton:{type:{name:"custom",raw:"PropTypes"},required:!1,description:""},handleDeleteItem:{type:{name:"element"},required:!1,description:""}}},__webpack_exports__.a=NestedFormItem,NestedFormItem.propTypes={readOnly:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,index:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number,headerItems:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.array,formInputs:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.array,bottomButton:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a,itemsLength:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number,id:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number,isMinimizedDefault:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,handleDeleteItem:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.element},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\Form\\NestedForm\\NestedFormItem\\NestedFormItem.jsx"]={name:"NestedFormItem",docgenInfo:NestedFormItem.__docgenInfo,path:"src\\utils\\Form\\NestedForm\\NestedFormItem\\NestedFormItem.jsx"})},2619:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return rigTypes})),__webpack_require__.d(__webpack_exports__,"b",(function(){return rigStatuses})),__webpack_require__.d(__webpack_exports__,"a",(function(){return checkRiggingTypesInputs})),__webpack_require__.d(__webpack_exports__,"d",(function(){return workshopsLocations}));var rigTypes={stamp:{name:"штамп",redirectURL:"/dispatcher/rigging/stamp",type:"stamp",title:"Штамп"},machine:{name:"станок",redirectURL:"/dispatcher/rigging/machine",type:"machine",title:"Станок"},pressForm:{name:"пресс-форма",redirectURL:"/dispatcher/rigging/press-form",type:"pressForm",title:"Пресс-форма"},parts:{name:"запчасти",redirectURL:"/dispatcher/rigging/parts",type:"parts",title:"Запчасти"}},rigStatuses={production:{name:"В производстве",className:"production"},completed:{name:"Завершено",className:"completed"},defect:{name:"Приоритет",className:"defect"}},riggingTypeList={cuttingDimensions:{prev:null},milling:{prev:"cuttingDimensions"},harding:{prev:"milling"},grinding:{prev:"harding"},erosion:{prev:"grinding"},controll:{prev:"erosion"}},checkRiggingTypesInputs=function checkRiggingTypesInputs(inputs){for(var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"controll",check=!0,curType=riggingTypeList[type].prev;null!==curType;){if(""===inputs[curType]||null===inputs[curType])return void(check=!1);curType=riggingTypeList[curType].prev}return check},workshopsLocations={lemz:{name:"ЦехЛЭМЗ"},lepsari:{name:"ЦехЛепсари"},ligovskiy:{name:"ЦехЛиговский"}}},2642:function(module,exports,__webpack_require__){var api=__webpack_require__(64),content=__webpack_require__(2643);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2643:function(module,exports,__webpack_require__){(exports=__webpack_require__(65)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.form-item{background-color:#eeeeee;border:1px solid #cccccc;border-radius:3px;padding:0px 15px;margin-top:5px;width:calc(100% - 30px);position:relative;transition:100ms ease-in-out}.form-item--minimized{width:calc(100% - 50px)}.form-item .form-item__img{position:absolute;right:-35px;cursor:pointer;top:25%}.form-item .form-item__header{display:flex;align-items:center;cursor:pointer;padding:10px 0px}.form-item .form-item__header .form-item__name{display:flex;flex-direction:column;margin-right:10px;flex:0 1 33.333%;min-width:0}.form-item .form-item__header .form-item__name:nth-last-child(2){margin-right:0}.form-item .form-item__header .form-item__name span:first-child{font-size:0.8rem;color:#777777}.form-item .form-item__header .form-item__name span:nth-child(2){font-size:1rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.form-item .form-item__header .form-item__name--placeholder{color:#999999;white-space:nowrap;font-size:0.9rem !important;line-height:1.2rem}.form-item .form-item__header .main-form__img{flex:0 1 20px;transform-origin:50% 50%;margin-left:auto}.form-item .button{font-size:0.8rem}.form-item .form-item__form{width:calc(100%);padding-bottom:10px}.form-item .form-item__form--hidden{padding:0;height:0;margin:0;transform:scaleY(0)}.form-item .form-item__form--hidden .form-item__item{margin-top:0 !important}.form-item .form-item__form .button{margin-top:10px}.form-item .form-item__form .form-item__item{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;margin-top:10px;box-sizing:border-box}.form-item .form-item__form .form-item__item .form-item__input_name{color:#888888;flex:0 1 20%;font-size:80%;position:absolute;top:4px;left:5px;padding:0 5px;border-radius:3px;font-size:0.85rem;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.form-item .form-item__form .form-item__item .form-item__input_field{width:100%}.form-item .form-item__form .form-item__item .form-item__input_field input,.form-item .form-item__form .form-item__item .form-item__input_field select,.form-item .form-item__form .form-item__item .form-item__input_field textarea{border:1px solid #cccccc;width:100%;padding:5px 10px;padding-top:22px;padding-bottom:7px;border-radius:3px;font-size:0.9rem;transition:100ms ease-in-out;box-sizing:border-box;line-height:2rem;height:3rem;min-width:0;max-width:100%}.form-item .form-item__form .form-item__item .form-item__input_field input:hover,.form-item .form-item__form .form-item__item .form-item__input_field select:hover,.form-item .form-item__form .form-item__item .form-item__input_field textarea:hover{border:1px solid #bbbbbb}.form-item .form-item__form .form-item__item .form-item__input_field input:focus,.form-item .form-item__form .form-item__item .form-item__input_field select:focus,.form-item .form-item__form .form-item__item .form-item__input_field textarea:focus{border:1px solid #4293b6}.form-item .form-item__form .form-item__item .form-item__input_field input:not(select):read-only,.form-item .form-item__form .form-item__item .form-item__input_field select:not(select):read-only,.form-item .form-item__form .form-item__item .form-item__input_field textarea:not(select):read-only{opacity:1;background-color:#f7f7f7}.form-item .form-item__form .form-item__item .form-item__input_field input:disabled,.form-item .form-item__form .form-item__item .form-item__input_field select:disabled,.form-item .form-item__form .form-item__item .form-item__input_field textarea:disabled{opacity:1;background-color:#f4f4f4}.form-item .form-item__form .form-item__item .form-item__input_field select{padding-left:5px}.form-item .form-item__form .form-item__item .form-item__input_field textarea{resize:vertical;min-height:4rem;max-height:5rem;line-height:unset}.form-item .form-item__form .form-item__item .form-item__input_field .input_date{width:100%;margin-bottom:0}.form-item .form-item__form .form-item__item .form-item__input_field .input_date__input_name{font-size:0.9rem;padding-left:5px}.form-item .form-item__form .form-item__item .form-item__input_field .input_date input{padding:5px 10px;line-height:normal;height:auto}@media (max-width: 768px){.form-item__header{flex-direction:column;justify-content:flex-start;align-items:flex-start}.form-item__header .form-item__name{width:100%;max-width:none !important;flex:0 1 100% !important;margin-right:0 !important}.form-item__header .main-form__img{margin-left:0 !important;flex:none !important}}\n",""]),module.exports=exports},2703:function(module,__webpack_exports__,__webpack_require__){"use strict";var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(57),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),FormErrorMessage=function FormErrorMessage(_ref){var _ref$error=_ref.error,error=void 0!==_ref$error&&_ref$error,hideError=_ref.hideError,Message=styled_components__WEBPACK_IMPORTED_MODULE_0__.b.div.withConfig({displayName:"FormErrorMessage__Message",componentId:"m52cp5-0"})(["border:1px solid #d48282;border-radius:3px;box-sizing:border-box;margin-top:1px;width:100%;height:1.6rem;padding:5px 10px;font-size:0.8rem;background-color:#fadada;cursor:pointer;text-align:left;color:#ad1c1c;"]);return error?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Message,{onClick:function onClick(event){event.preventDefault(),hideError()},children:"Поле не заполнено!"}):null};FormErrorMessage.displayName="FormErrorMessage",FormErrorMessage.__docgenInfo={description:"",methods:[],displayName:"FormErrorMessage",props:{error:{defaultValue:{value:"false",computed:!1},required:!1}}},__webpack_exports__.a=FormErrorMessage,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\FormErrorMessage\\FormErrorMessage.jsx"]={name:"FormErrorMessage",docgenInfo:FormErrorMessage.__docgenInfo,path:"src\\utils\\FormErrorMessage\\FormErrorMessage.jsx"})},2743:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isPartHidden})),__webpack_require__.d(__webpack_exports__,"c",(function(){return searchQuery})),__webpack_require__.d(__webpack_exports__,"d",(function(){return sortStampParts})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getRigsDefaultInputs}));__webpack_require__(2562),__webpack_require__(2555),__webpack_require__(263),__webpack_require__(945),__webpack_require__(1517),__webpack_require__(1518),__webpack_require__(946),__webpack_require__(2570),__webpack_require__(944),__webpack_require__(604),__webpack_require__(2641),__webpack_require__(2552),__webpack_require__(2567);var isPartHidden=function isPartHidden(list,index){index=Number.parseInt(index);var check=!0;return list.map((function(element){element.id===index&&(check=element.hidden)})),check},searchQuery=function searchQuery(data,query){var re=/[.,_-\s]/gi,newQuery=query.toLowerCase();return data.filter((function(item){return item.id.toString().includes(newQuery)||item.comment.toLowerCase().includes(newQuery)||item.name.toLowerCase().includes(newQuery)||item.number.toLowerCase().replace(re,"").includes(newQuery.replace(re,""))}))},sortStampParts=function sortStampParts(data){return data.sort((function(a,b){return a.number<b.number?-1:a.number>b.number?1:a.number===b.number&&a.id<b.id?-1:a.number===b.number&&a.id>b.id?1:0}))},getRigsDefaultInputs=function getRigsDefaultInputs(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stamp";return[{name:"name",defaultValue:"",isRequired:!0},{name:"number",defaultValue:"",isRequired:!0},{name:"comment",defaultValue:""},{name:"parts",defaultValue:[],isRequired:!0},{name:"lastEdited",defaultValue:new Date},{name:"color",defaultValue:"production"},{name:"status",defaultValue:type}]}},3411:function(module,exports,__webpack_require__){var api=__webpack_require__(64),content=__webpack_require__(3412);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3412:function(module,exports,__webpack_require__){(exports=__webpack_require__(65)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.rigging .main-window__header--hidden{transform:scaleY(0);height:0;margin-bottom:0}.rigging .searchbar{margin-bottom:10px}.rigging .main-window__content{display:flex;flex-direction:column;align-items:flex-start;padding-top:0;width:100%}.rigging .main-window__content .main-window{padding-top:0}.rigging .main-window__content .main-form .main-form__form{width:calc(100% - 40px)}@media (max-width: 768px){.rigging .main-window__content{width:calc(100% - 10px)}}\n",""]),module.exports=exports},3413:function(module,exports,__webpack_require__){var api=__webpack_require__(64),content=__webpack_require__(3414);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3414:function(module,exports,__webpack_require__){(exports=__webpack_require__(65)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.new-rig{width:100%}\n",""]),module.exports=exports},3415:function(module,exports,__webpack_require__){var api=__webpack_require__(64),content=__webpack_require__(3416);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3416:function(module,exports,__webpack_require__){(exports=__webpack_require__(65)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select_parts{width:calc(100% - 20px);position:relative}.select_parts .main-form__item{width:100%}.select_parts .select_parts__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:999}.select_parts .select_parts__overlay--hidden{display:none}.select_parts .button{font-size:0.8rem}.select_parts__selected{width:100%}.select_parts__selected_item{background-color:#dddddd;border-radius:5px;padding:0px 15px;margin-top:5px;width:calc(100% - 30px);position:relative;transition:0.2s ease-in-out;background-color:rgba(187,187,187,0.3);border:1px solid #dddddd}.select_parts__selected_item--minimized{width:calc(100% - 80px)}.select_parts__selected_item:hover{background-color:rgba(187,187,187,0.4)}.select_parts__selected_item .select_parts__img{position:absolute;right:-35px;cursor:pointer;top:25%}.select_parts__selected_item .select_parts__selected_header{display:flex;cursor:pointer;padding:10px 0px}.select_parts__selected_item .select_parts__selected_header .select_parts__selected_name{flex:0 1 33.3%;display:flex;font-size:90%;flex-direction:column}.select_parts__selected_item .select_parts__selected_header .select_parts__selected_name span:first-child{font-size:90%;color:#666666}.select_parts__selected_item .select_parts__selected_form{transform-origin:0 0;height:100%;padding-bottom:10px;transition:0.2s ease-in-out}.select_parts__selected_item .select_parts__selected_form--hidden{transform:scaleY(0);height:0;padding:0}.select_parts__selected_item .select_parts__selected_form .select_parts__item{width:calc(100% - 10px);margin:0 auto;display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-top:5px}.select_parts__selected_item .select_parts__selected_form .select_parts__item .select_parts__input_name{color:#666666;flex:0 1 calc(30% - 10px);font-size:85%;padding-right:10px}.select_parts__selected_item .select_parts__selected_form .select_parts__item .select_parts__input_field{flex:0 1 70%}.select_parts__selected_item .select_parts__selected_form .select_parts__item .select_parts__input_field input{font-size:85%}.select_parts__button{border:0;cursor:pointer;outline:none;font-size:70%;padding:10px 10px;border-radius:5px;background-color:#4293b6;color:#ffffff;transition:0.2s ease-in-out}.select_parts__button:hover{background-color:#519fc0;box-shadow:0 4px 4px rgba(0,0,0,0.22),0 0px 5px rgba(0,0,0,0.24)}.select_parts__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:10px;z-index:2}.select_parts__input:focus{border:1px solid #4293b6}@media (max-width: 768px){.select_parts{width:100% !important}.select_parts .select_parts__selected .select_parts__selected_item .select_parts__selected_header .select_parts__selected_name:not(:first-child){display:none}.select_parts .select_parts__selected .select_parts__selected_item .select_parts__selected_form .select_parts__item{flex-direction:column;width:100%;margin-top:10px}.select_parts .select_parts__selected .select_parts__selected_item .select_parts__selected_form .select_parts__item .select_parts__input_name{width:100%;padding-right:0}.select_parts .select_parts__selected .select_parts__selected_item .select_parts__selected_form .select_parts__item .select_parts__input_field{width:100%}}\n",""]),module.exports=exports},3417:function(module,exports,__webpack_require__){var api=__webpack_require__(64),content=__webpack_require__(3418);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3418:function(module,exports,__webpack_require__){(exports=__webpack_require__(65)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.edit-rig{width:100%}\n",""]),module.exports=exports},3583:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var defineProperty=__webpack_require__(72),defineProperty_default=__webpack_require__.n(defineProperty),slicedToArray=__webpack_require__(17),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(1517),__webpack_require__(1518),__webpack_require__(100),__webpack_require__(0)),lazyImports=__webpack_require__(2640),PrivateRoute=__webpack_require__(963),react_router_dom=__webpack_require__(73),react_router=__webpack_require__(169),plus_inline=__webpack_require__(2622),PageNotFound=(__webpack_require__(3411),__webpack_require__(1521),__webpack_require__(2720)),PageLoading=__webpack_require__(962),toConsumableArray=(__webpack_require__(947),__webpack_require__(946),__webpack_require__(1519),__webpack_require__(948),__webpack_require__(1520),__webpack_require__(263),__webpack_require__(604),__webpack_require__(3413),__webpack_require__(2560),__webpack_require__(419)),toConsumableArray_default=__webpack_require__.n(toConsumableArray),rigsVariables=(__webpack_require__(310),__webpack_require__(1522),__webpack_require__(2756),__webpack_require__(2562),__webpack_require__(2555),__webpack_require__(2571),__webpack_require__(3415),__webpack_require__(2619)),NestedFormItem=__webpack_require__(2609),functions=__webpack_require__(2546),AddToButton=__webpack_require__(2587),FormErrorMessage=__webpack_require__(2703),jsx_runtime=__webpack_require__(1),SelectParts_SelectParts_SelectParts=function SelectParts(props){var _useState=Object(react.useState)([]),_useState2=slicedToArray_default()(_useState,2),selected=_useState2[0],setSelected=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),defaultValueLoaded=_useState4[0],setDefaultValueLoaded=_useState4[1],_useState5=Object(react.useState)(!1),_useState6=slicedToArray_default()(_useState5,2),hasScrolled=_useState6[0],setHasScrolled=_useState6[1];Object(react.useEffect)((function(){console.log(props.defaultValue),void 0!==props.defaultValue&&(defaultValueLoaded&&props.defaultValue===selected||(setSelected(toConsumableArray_default()(props.defaultValue)),setDefaultValueLoaded(!0)))}),[props.defaultValue]),Object(react.useEffect)((function(){var titleElement=document.getElementById(props.scrollToId);titleElement&&!hasScrolled&&(Object(functions.w)(titleElement,-10),setHasScrolled(!0))}),[props.scrollToId,selected]);var deletePart=function deletePart(id){var temp=selected;temp.splice(id,1),setSelected(toConsumableArray_default()(temp)),props.handlePartsChange(toConsumableArray_default()(temp))},handleInputChange=function handleInputChange(item,name,value){var temp=selected,id=selected.indexOf(item);temp.splice(id,1,Object.assign({},item,defineProperty_default()({},name,value))),setSelected(toConsumableArray_default()(temp)),props.handlePartsChange(toConsumableArray_default()(temp))},getInputElement=function getInputElement(name,item){var disabled=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(jsx_runtime.jsx)("input",{type:"text",name:name,autoComplete:"off",onChange:function onChange(_ref){var target=_ref.target;return handleInputChange(item,name,target.value)},defaultValue:item[name],readOnly:props.readOnly,disabled:disabled})};return Object(jsx_runtime.jsx)("div",{className:"select_parts",children:Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsxs)("div",{className:"main-form__input_name main-form__input_name--header",children:["Детали*",!props.readOnly&&Object(jsx_runtime.jsx)(AddToButton.a,{text:"Добавить деталь",onClick:function handleNewPart(){var newPart={number:"",name:"",amount:"",location:"lemz",comment:"",cuttingDimensions:"",milling:"",harding:"",grinding:"",erosion:"",controll:"",color:"production",isMinimized:!0};setSelected([].concat(toConsumableArray_default()(selected),[newPart])),props.handlePartsChange([].concat(toConsumableArray_default()(selected),[newPart]))}})]}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_field",children:Object(jsx_runtime.jsx)("div",{className:"select_parts__selected",children:selected.map((function(item,index){return Object(jsx_runtime.jsx)(NestedFormItem.a,{readOnly:props.readOnly,index:index,id:item.id,itemsLength:selected.length,isMinimizedDefault:item.id!==Number.parseInt(props.scrollToId)&&props.isMinimizedDefault,handleDeleteItem:deletePart,headerItems:[{text:"Название",value:item.name,placeholder:"Введите название..."},{text:"Артикул",value:item.number,placeholder:"Введите артикул..."},{text:"Комментарий",value:item.comment,placeholder:"Введите комментарий..."}],formInputs:[{name:"Название",element:getInputElement("name",item)},{name:"Артикул",element:getInputElement("number",item)},{name:"Кол-во",element:getInputElement("amount",item)},{name:"Местоположение",element:Object(jsx_runtime.jsx)("select",{name:"location",onChange:function onChange(_ref2){var target=_ref2.target;return handleInputChange(item,"location",target.value)},value:item.location,disabled:props.readOnly,children:Object.entries(rigsVariables.d).map((function(workshop,index){return Object(jsx_runtime.jsx)("option",{value:workshop[0],children:workshop[1].name},index)}))})},{name:"Комментарий",element:getInputElement("comment",item)},{name:"Распил/Габариты",element:getInputElement("cuttingDimensions",item,!props.readOnly&&!Object(rigsVariables.a)(item,"cuttingDimensions"))},{name:"Фрезеровка/Точение",element:getInputElement("milling",item,!props.readOnly&&!Object(rigsVariables.a)(item,"milling"))},{name:"Закалка",element:getInputElement("harding",item,!props.readOnly&&!Object(rigsVariables.a)(item,"harding"))},{name:"Шлифовка",element:getInputElement("grinding",item,!props.readOnly&&!Object(rigsVariables.a)(item,"grinding"))},{name:"Эрозия",element:getInputElement("erosion",item,!props.readOnly&&!Object(rigsVariables.a)(item,"erosion"))},{name:"Проверка",element:getInputElement("controll",item,!props.readOnly&&!Object(rigsVariables.a)(item,"controll"))}]},item.id)}))})}),Object(jsx_runtime.jsx)(FormErrorMessage.a,{error:props.error,hideError:function hideError(){return props.hideError()}})]})})};SelectParts_SelectParts_SelectParts.displayName="SelectParts",SelectParts_SelectParts_SelectParts.__docgenInfo={description:"",methods:[],displayName:"SelectParts"};var Rigging_SelectParts_SelectParts=SelectParts_SelectParts_SelectParts;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Rigging\\SelectParts\\SelectParts.jsx"]={name:"SelectParts",docgenInfo:SelectParts_SelectParts_SelectParts.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Rigging\\SelectParts\\SelectParts.jsx"});var InputText=__webpack_require__(2548),hooks=__webpack_require__(2561),Button=__webpack_require__(264),Stamp=__webpack_require__(2628),TableView_functions=__webpack_require__(2743),NewRig_NewRig_NewRig=function NewRig(props){var _useForm=Object(hooks.a)(Object(TableView_functions.a)(props.type)),_handleInputChange=_useForm.handleInputChange,formInputs=_useForm.formInputs,formErrors=_useForm.formErrors,setFormErrors=_useForm.setFormErrors,formIsValid=_useForm.formIsValid,errorWindow=_useForm.errorWindow,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];return Object(react.useEffect)((function(){document.title="Создание ".concat(rigsVariables.c[props.type].name)}),[props.type]),Object(jsx_runtime.jsx)("div",{className:"new-rig",children:Object(jsx_runtime.jsx)("div",{className:"main-form",children:Object(jsx_runtime.jsxs)("form",{className:"main-form__form",children:[Object(jsx_runtime.jsx)("div",{className:"main-form__header main-form__header--full",children:Object(jsx_runtime.jsx)("div",{className:"main-form__title",children:"Новый ".concat(rigsVariables.c[props.type].name)})}),errorWindow,Object(jsx_runtime.jsx)(InputText.a,{inputName:"Название оснастки(оборудования)",required:!0,error:formErrors.name,name:"name",handleInputChange:function handleInputChange(_ref){var target=_ref.target;return _handleInputChange("name",target.value)},errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(jsx_runtime.jsx)(InputText.a,{inputName:"Артикул оснастки(оборудования)",required:!0,error:formErrors.number,name:"number",handleInputChange:function handleInputChange(_ref2){var target=_ref2.target;return _handleInputChange("number",target.value)},errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(jsx_runtime.jsx)(InputText.a,{inputName:"Комментарий",name:"comment",handleInputChange:function handleInputChange(_ref3){var target=_ref3.target;return _handleInputChange("comment",target.value)}}),Object(jsx_runtime.jsx)(Rigging_SelectParts_SelectParts,{handlePartsChange:function handlePartsChange(parts){return _handleInputChange("parts",parts)},error:formErrors.parts,hideError:function hideError(){return setFormErrors(Object.assign({},formErrors,{parts:!1}))}}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(jsx_runtime.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(jsx_runtime.jsx)(Button.a,{className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){return props.history.push(rigsVariables.c[props.type].redirectURL)},text:"Вернуться назад"}),Object(jsx_runtime.jsx)(Button.a,{text:"Добавить запись",isLoading:isLoading,className:"main-form__submit",onClick:function handleSubmit(){if(formIsValid()){setIsLoading(!0);var itemId=1;Object(Stamp.b)(formInputs).then((function(res){return res.json()})).then((function(res){return itemId=res.id})).then((function(){return Promise.all(formInputs.parts.map((function(item){return Object(Stamp.a)(Object.assign({},item,{riggingId:itemId}))})))})).then((function(){return props.history.push(rigsVariables.c[props.type].redirectURL)})).catch((function(error){setIsLoading(!1),alert("Ошибка при добавлении записи"),console.log(error)}))}}})]})]})})})};NewRig_NewRig_NewRig.displayName="NewRig",NewRig_NewRig_NewRig.__docgenInfo={description:"",methods:[],displayName:"NewRig"};var Forms_NewRig_NewRig=NewRig_NewRig_NewRig;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Rigging\\RiggingComponents\\Forms\\NewRig\\NewRig.jsx"]={name:"NewRig",docgenInfo:NewRig_NewRig_NewRig.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Rigging\\RiggingComponents\\Forms\\NewRig\\NewRig.jsx"});__webpack_require__(944),__webpack_require__(2554),__webpack_require__(2552),__webpack_require__(3417);var EditRig_EditRig_EditRig=function EditRig(props){var query=Object(hooks.c)().query,_useForm=Object(hooks.a)([].concat(toConsumableArray_default()(Object(TableView_functions.a)(props.type)),[{name:"stampParts",defaultValue:[]}])),_handleInputChange=_useForm.handleInputChange,formInputs=_useForm.formInputs,formErrors=_useForm.formErrors,setFormErrors=_useForm.setFormErrors,updateFormInputs=_useForm.updateFormInputs,formIsValid=_useForm.formIsValid,errorWindow=_useForm.errorWindow,_useState=Object(react.useState)(0),_useState2=slicedToArray_default()(_useState,2),stampId=_useState2[0],setStampId=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];return Object(react.useEffect)((function(){document.title="Редактирование записи";var id=props.history.location.pathname.split("/edit/")[1];setStampId(id),isNaN(Number.parseInt(id))?(alert("Неправильный индекс!"),props.history.push(rigsVariables.c[props.type].redirectURL)):Object(Stamp.j)(id).then((function(res){return res.json()})).then((function(res){return updateFormInputs({comment:res.comment,name:res.name,color:res.color,number:res.number,status:res.status,parts:res.stampParts,stampParts:res.stampParts,lastEdited:res.lastEdited?res.lastEdited:new Date})})).catch((function(error){console.log(error)}))}),[]),Object(jsx_runtime.jsx)("div",{className:"edit-rig",children:Object(jsx_runtime.jsx)("div",{className:"main-form",children:Object(jsx_runtime.jsxs)("form",{className:"main-form__form",children:[Object(jsx_runtime.jsx)("div",{className:"main-form__header main-form__header--full",children:Object(jsx_runtime.jsx)("div",{className:"main-form__title",children:"Редактирование записи"})}),errorWindow,Object(jsx_runtime.jsx)(InputText.a,{inputName:"Название оснастки(оборудования)",required:!0,error:formErrors.name,name:"name",defaultValue:formInputs.name,handleInputChange:function handleInputChange(_ref){var target=_ref.target;return _handleInputChange("name",target.value)},errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(jsx_runtime.jsx)(InputText.a,{inputName:"Артикул оснастки(оборудования)",required:!0,error:formErrors.number,name:"number",defaultValue:formInputs.number,handleInputChange:function handleInputChange(_ref2){var target=_ref2.target;return _handleInputChange("number",target.value)},errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(jsx_runtime.jsx)(InputText.a,{inputName:"Комментарий",name:"comment",defaultValue:formInputs.comment,handleInputChange:function handleInputChange(_ref3){var target=_ref3.target;return _handleInputChange("comment",target.value)}}),Object(jsx_runtime.jsx)(Rigging_SelectParts_SelectParts,{handlePartsChange:function handlePartsChange(parts){return _handleInputChange("parts",parts)},defaultValue:formInputs.parts,scrollToId:query.get("part"),isMinimizedDefault:!0,error:formErrors.parts,hideError:function hideError(){return setFormErrors(Object.assign({},formErrors,{parts:!1}))},searchPlaceholder:"Введите название продукта для поиска..."}),Object(jsx_runtime.jsx)(InputText.a,{inputName:"Дата последнего изменения",name:"lastEdited",readOnly:!0,defaultValue:Object(functions.g)(formInputs.lastEdited)}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(jsx_runtime.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(jsx_runtime.jsx)(Button.a,{className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){var part=query.get("part")?"&part=".concat(query.get("part")):"";props.history.push("".concat(rigsVariables.c[props.type].redirectURL,"?rig=").concat(formInputs.id).concat(part))},text:"Вернуться назад"}),Object(jsx_runtime.jsx)(Button.a,{text:"Сохранить данные",isLoading:isLoading,className:"main-form__submit",onClick:function handleSubmit(){console.log(props.type,formInputs),formIsValid()&&(setIsLoading(!0),Object(Stamp.f)(Object.assign({},formInputs,{lastEdited:new Date}),stampId).then((function(){var partsArr=formInputs.parts.map((function(selected){var edited=!1,oldItem=null;if(formInputs.stampParts.map((function(item){if(item.id===selected.id)return edited=!0,void(oldItem=item)})),oldItem!==selected)return edited?Object(Stamp.e)(Object.assign({},selected,{riggingId:stampId}),selected.id):Object(Stamp.a)(Object.assign({},selected,{riggingId:stampId}))}));Promise.all(partsArr).then((function(){var partsArr=formInputs.stampParts.map((function(item){var deleted=!0;return formInputs.parts.map((function(selected){selected.id!==item.id||(deleted=!1)})),!0===deleted&&Object(Stamp.c)(item.id)}));Promise.all(partsArr).then((function(){props.history.push("".concat(rigsVariables.c[props.type].redirectURL,"#").concat(stampId))}))}))})).catch((function(error){setIsLoading(!1),alert("Ошибка при добавлении записи"),console.log(error)})))}})]})]})})})};EditRig_EditRig_EditRig.displayName="EditRig",EditRig_EditRig_EditRig.__docgenInfo={description:"",methods:[],displayName:"EditRig"};var Forms_EditRig_EditRig=EditRig_EditRig_EditRig;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Rigging\\RiggingComponents\\Forms\\EditRig\\EditRig.jsx"]={name:"EditRig",docgenInfo:EditRig_EditRig_EditRig.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Rigging\\RiggingComponents\\Forms\\EditRig\\EditRig.jsx"});var useTitleHeader=__webpack_require__(2627),Rigging_Rigging_Rigging=function Rigging(props){var _useState=Object(react.useState)({stamp:{},pressForm:{},machine:{},parts:{}}),_useState2=slicedToArray_default()(_useState,2),cachedItems=_useState2[0],_setCachedItems=_useState2[1],getMenuItem=function getMenuItem(itemName,title){return{pageName:"/dispatcher/rigging/".concat(itemName),link:"/dispatcher/rigging/".concat(itemName),isActive:props.location.pathname.includes(itemName),pageTitle:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[title,Object(jsx_runtime.jsx)(react_router_dom.a,{to:"/dispatcher/rigging/".concat(itemName,"/new"),className:"main-window__addButton",children:Object(jsx_runtime.jsx)(plus_inline.a,{className:"main-window__img",alt:""})})]})}},titleHeader=Object(useTitleHeader.a)("Оснастка",[getMenuItem("stamp","Штамп"),getMenuItem("machine","Станок"),getMenuItem("press-form","Пресс-форма"),getMenuItem("parts","Запчасти")],"/dispatcher/rigging/stamp").titleHeader;Object(react.useEffect)((function(){}),[cachedItems]);var getRiggingPage=function getRiggingPage(itemName,type){return Object(jsx_runtime.jsx)(PrivateRoute.a,{exact:!0,path:"/dispatcher/rigging/".concat(itemName),component:lazyImports.ab,cachedItems:cachedItems[type],type:type,setCachedItems:function setCachedItems(items){return _setCachedItems((function(cachedItems){return Object.assign({},cachedItems,defineProperty_default()({},type,Object.assign({},items)))}))},allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"]})},stampPage=getRiggingPage("stamp","stamp"),machinePage=getRiggingPage("machine","machine"),pressFormPage=getRiggingPage("press-form","pressForm"),partsPage=getRiggingPage("parts","parts");return Object(jsx_runtime.jsx)("div",{className:"rigging",children:Object(jsx_runtime.jsxs)("div",{className:"main-window",children:[titleHeader,Object(jsx_runtime.jsx)("div",{className:"main-window__content",children:Object(jsx_runtime.jsx)(react.Suspense,{fallback:Object(jsx_runtime.jsx)(PageLoading.a,{}),children:Object(jsx_runtime.jsxs)(react_router.e,{children:[stampPage,machinePage,pressFormPage,partsPage,Object(jsx_runtime.jsx)(PrivateRoute.a,{exact:!0,path:"/dispatcher/rigging/stamp/new",component:Forms_NewRig_NewRig,allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER"],type:"stamp"}),Object(jsx_runtime.jsx)(PrivateRoute.a,{path:"/dispatcher/rigging/stamp/edit/",component:Forms_EditRig_EditRig,type:"stamp",allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"]}),Object(jsx_runtime.jsx)(PrivateRoute.a,{exact:!0,path:"/dispatcher/rigging/machine/new",component:Forms_NewRig_NewRig,type:"machine",allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER"]}),Object(jsx_runtime.jsx)(PrivateRoute.a,{path:"/dispatcher/rigging/machine/edit/",component:Forms_EditRig_EditRig,type:"machine",allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"]}),Object(jsx_runtime.jsx)(PrivateRoute.a,{exact:!0,path:"/dispatcher/rigging/press-form/new",component:Forms_NewRig_NewRig,type:"pressForm",allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER"]}),Object(jsx_runtime.jsx)(PrivateRoute.a,{path:"/dispatcher/rigging/press-form/edit/",component:Forms_EditRig_EditRig,type:"pressForm",allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"]}),Object(jsx_runtime.jsx)(PrivateRoute.a,{exact:!0,path:"/dispatcher/rigging/parts/new",component:Forms_NewRig_NewRig,type:"parts",allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"]}),Object(jsx_runtime.jsx)(PrivateRoute.a,{path:"/dispatcher/rigging/parts/edit/",component:Forms_EditRig_EditRig,type:"parts",allowedRoles:["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_WORKSHOP","ROLE_ENGINEER"]}),Object(jsx_runtime.jsx)(react_router.c,{component:PageNotFound.a})]})})})]})})};Rigging_Rigging_Rigging.displayName="Rigging",Rigging_Rigging_Rigging.__docgenInfo={description:"",methods:[],displayName:"Rigging"};__webpack_exports__.default=Rigging_Rigging_Rigging;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Rigging\\Rigging.jsx"]={name:"Rigging",docgenInfo:Rigging_Rigging_Rigging.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Rigging\\Rigging.jsx"})}}]);