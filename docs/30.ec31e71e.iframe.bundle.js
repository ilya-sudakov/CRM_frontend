(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{2855:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(23),__webpack_require__(36),__webpack_require__(51),__webpack_require__(0)),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2856),__webpack_require__(1)),PlaceholderLoading=function PlaceholderLoading(_ref){var _ref$items=_ref.items,items=void 0===_ref$items?3:_ref$items,itemClassName=_ref.itemClassName,_ref$minHeight=_ref.minHeight,minHeight=void 0===_ref$minHeight?"1.5rem":_ref$minHeight,placeholderContent=_ref.placeholderContent,wrapperClassName=_ref.wrapperClassName,_ref$itemStyles=_ref.itemStyles,itemStyles=void 0===_ref$itemStyles?{}:_ref$itemStyles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),elements=_useState2[0],setElements=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){for(var temp=[],count=items,i=1;i<=count;i++)temp.push(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading__item ".concat(itemClassName),style:Object.assign({minHeight:minHeight},itemStyles)}));setElements([].concat(temp))}),[]),placeholderContent?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:itemClassName,style:{minHeight:minHeight},children:placeholderContent},index)}))}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item){return item}))})};PlaceholderLoading.displayName="PlaceholderLoading",PlaceholderLoading.__docgenInfo={description:"",methods:[],displayName:"PlaceholderLoading",props:{items:{defaultValue:{value:"3",computed:!1},type:{name:"number"},required:!1,description:""},minHeight:{defaultValue:{value:"'1.5rem'",computed:!1},type:{name:"string"},required:!1,description:""},itemStyles:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},itemClassName:{type:{name:"string"},required:!1,description:""},wrapperClassName:{type:{name:"string"},required:!1,description:""},placeholderContent:{type:{name:"any"},required:!1,description:""}}},__webpack_exports__.a=PlaceholderLoading,PlaceholderLoading.propTypes={items:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number,minHeight:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,itemClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,wrapperClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,placeholderContent:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.any,itemStyles:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"]={name:"PlaceholderLoading",docgenInfo:PlaceholderLoading.__docgenInfo,path:"src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"})},2856:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(2857);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2857:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,'@keyframes pulse-placeholder-loading{0%,100%{background-color:#e7e7e7}50%{background-color:#efefef}}@keyframes load{from{left:-150px}to{left:100%}}.placeholder-loading__item{height:1rem;background-color:#ddd;animation:pulse-placeholder-loading 1s infinite ease-in-out;position:relative;overflow:hidden;border-bottom:1px solid #bbb}.placeholder-loading__item::after{content:"";display:block;position:absolute;left:-150px;top:0;height:100%;width:150px;background:linear-gradient(to right, transparent 0%, #e8e8e8 50%, transparent 100%);animation:load 1s cubic-bezier(0.4, 0, 0.2, 1) infinite}\n',""]),module.exports=exports},2863:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/edit.efe0dc2a.svg"},2879:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return rigTypes})),__webpack_require__.d(__webpack_exports__,"b",(function(){return rigStatuses})),__webpack_require__.d(__webpack_exports__,"a",(function(){return checkRiggingTypesInputs})),__webpack_require__.d(__webpack_exports__,"d",(function(){return workshopsLocations}));var rigTypes={stamp:{name:"штамп",redirectURL:"/dispatcher/rigging/stamp",type:"stamp",title:"Штамп"},machine:{name:"станок",redirectURL:"/dispatcher/rigging/machine",type:"machine",title:"Станок"},pressForm:{name:"пресс-форма",redirectURL:"/dispatcher/rigging/press-form",type:"pressForm",title:"Пресс-форма"},parts:{name:"запчасти",redirectURL:"/dispatcher/rigging/parts",type:"parts",title:"Запчасти"}},rigStatuses={production:{name:"В производстве",className:"production"},completed:{name:"Завершено",className:"completed"},defect:{name:"Приоритет",className:"defect"}},riggingTypeList={cuttingDimensions:{prev:null},milling:{prev:"cuttingDimensions"},harding:{prev:"milling"},grinding:{prev:"harding"},erosion:{prev:"grinding"},controll:{prev:"erosion"}},checkRiggingTypesInputs=function checkRiggingTypesInputs(inputs){for(var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"controll",check=!0,curType=riggingTypeList[type].prev;null!==curType;){if(""===inputs[curType]||null===inputs[curType])return void(check=!1);curType=riggingTypeList[curType].prev}return check},workshopsLocations={lemz:{name:"ЦехЛЭМЗ"},lepsari:{name:"ЦехЛепсари"},ligovskiy:{name:"ЦехЛиговский"}}},2888:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/delete.1ad59e4c.svg"},2975:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isPartHidden})),__webpack_require__.d(__webpack_exports__,"c",(function(){return searchQuery})),__webpack_require__.d(__webpack_exports__,"d",(function(){return sortStampParts})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getRigsDefaultInputs}));__webpack_require__(1016),__webpack_require__(673),__webpack_require__(51),__webpack_require__(258),__webpack_require__(671),__webpack_require__(672),__webpack_require__(83),__webpack_require__(474),__webpack_require__(201),__webpack_require__(165),__webpack_require__(1786),__webpack_require__(302),__webpack_require__(475);var isPartHidden=function isPartHidden(list,index){index=Number.parseInt(index);var check=!0;return list.map((function(element){element.id===index&&(check=element.hidden)})),check},searchQuery=function searchQuery(data,query){var re=/[.,_-\s]/gi,newQuery=query.toLowerCase();return data.filter((function(item){return item.id.toString().includes(newQuery)||item.comment.toLowerCase().includes(newQuery)||item.name.toLowerCase().includes(newQuery)||item.number.toLowerCase().replace(re,"").includes(newQuery.replace(re,""))}))},sortStampParts=function sortStampParts(data){return data.sort((function(a,b){return a.number<b.number?-1:a.number>b.number?1:a.number===b.number&&a.id<b.id?-1:a.number===b.number&&a.id>b.id?1:0}))},getRigsDefaultInputs=function getRigsDefaultInputs(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stamp";return[{name:"name",defaultValue:"",isRequired:!0},{name:"number",defaultValue:"",isRequired:!0},{name:"comment",defaultValue:""},{name:"parts",defaultValue:[],isRequired:!0},{name:"lastEdited",defaultValue:new Date},{name:"color",defaultValue:"production"},{name:"status",defaultValue:type}]}},3092:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3311);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3309:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3310);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3310:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.rigging-workshop{width:100%;display:flex;flex-direction:column;align-items:flex-start}.rigging-workshop .main-window__header{padding-top:5px;margin-bottom:0}@media (max-width: 768px){.rigging-workshop .searchbar{width:calc(100% + 10px) !important}.rigging-workshop .main-window__header{margin-top:-5px;width:calc(100% + 10px)}.rigging-workshop .control-panel{width:calc(100% + 10px)}}\n",""]),module.exports=exports},3311:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.rigging-tableview{--completed: #c7e9ce;--defect: #ebbdba;--production: #eaebde;min-width:1000px;width:100%;display:flex;flex-direction:column;align-items:flex-start}.rigging-tableview .main-window{padding:0;width:100%}.rigging-tableview .main-window__list-item{padding-top:15px;padding-bottom:15px;cursor:pointer}.rigging-tableview .main-window__list-item--defect{background-color:var(--defect)}.rigging-tableview .main-window__list-item--defect::before{background-color:var(--defect) !important}.rigging-tableview .main-window__list-item--defect:hover{background-color:var(--defect) !important}.rigging-tableview .main-window__list-item--completed{background-color:var(--completed)}.rigging-tableview .main-window__list-item--completed::before{background-color:var(--completed) !important}.rigging-tableview .main-window__list-item--completed:hover{background-color:var(--completed) !important}.rigging-tableview .main-window__list-item--production{background-color:var(--production)}.rigging-tableview .main-window__list-item--production::before{background-color:var(--production) !important}.rigging-tableview .main-window__list-item--production:hover{background-color:var(--production) !important}.rigging-tableview .main-window__list-item:not(.main-window__list-item--header){border-color:#bbb}.rigging-tableview .main-window__list-item:not(.main-window__list-item--header) span:nth-child(5){font-size:0.9rem}.rigging-tableview .main-window__list-item:not(.main-window__list-item--header) span:nth-child(5)::before{content:"";display:inline-block;position:absolute;width:5px;height:5px;left:10px;top:calc(50% - 2.5px);border-radius:999px;background-color:#cccccc;border:1px solid #cccccc}.rigging-tableview .main-window__list-item:not(.main-window__list-item--header):hover{color:inherit}.rigging-tableview .main-window__list-item .main-window__status_select{width:100%;padding:5px 0px;font-size:90%;border-radius:3px;outline:0;padding-left:10px;max-width:110px;border-color:#bbb}.rigging-tableview .main-window__list-item span:nth-child(1){max-width:40px}.rigging-tableview .main-window__list-item span:nth-child(2){flex:0 1 20%}.rigging-tableview .main-window__list-item span:nth-child(3){flex:0 1 20%}.rigging-tableview .main-window__list-item span:nth-child(4){flex:0 1 40%}.rigging-tableview .main-window__list-item span:nth-child(5){position:relative;max-width:150px}.rigging-tableview .main-window__list-item span:nth-child(5) .main-window__status_select{max-width:fit-content}.rigging-tableview .main-window__list-item .main-window__actions{max-width:125px}.rigging-tableview .main-window__list-item .main-window__actions .main-window__img{filter:brightness(1)}.rigging-tableview .main-window__list .main-window__list-options{box-sizing:border-box;justify-content:center;font-size:95%;width:100%}.rigging-tableview .main-window__list .main-window__list-options .main-window__list{width:100%}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item{padding-top:0px;padding-bottom:0px;min-height:3.5rem;box-sizing:border-box;width:100%}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item--border-checked{border-right:1px solid #cccccc}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item:not(.main-window__list-item--header) span:nth-child(6)::before{content:"";display:inline-block;position:absolute;width:5px;height:5px;left:9px;top:calc(50% - 2.5px);border-radius:999px;background-color:#cccccc;border:1px solid #bbbbbb}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item:not(.main-window__list-item--header) span:nth-child(n+7){align-self:stretch;padding-top:calc(1.5rem - 15px);padding-bottom:5px;text-overflow:ellipsis;box-sizing:border-box;overflow:hidden}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span{flex:0 1 15%}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:not(:nth-child(1)),.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:not(:nth-child(2)),.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:not(:nth-child(3)),.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:not(:nth-child(6)){word-break:break-all;overflow-x:hidden}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(1){flex:0 1 100%;max-width:140px;font-size:0.85rem}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(2){flex:0 1 15%;max-width:200px}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(3){flex:0 1 20%;max-width:60px;white-space:nowrap}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(4){flex:0 1 15%;max-width:120px}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(5){flex:0 1 15%;max-width:150px}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(5)::before{display:none}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(6){max-width:100px;position:relative;padding-top:calc(1.25rem - 5px)}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(8){flex:0 1 20%}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span{align-self:stretch;padding-top:calc(1.5rem - 15px);padding-bottom:5px;box-sizing:border-box;border-right:1px solid #cccccc;box-sizing:border-box;text-overflow:ellipsis;font-size:0.85rem}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(n+7),.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(5){flex:0 1 10%;max-width:100px;max-width:150px;box-sizing:border-box}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(n+7):after,.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(5):after{content:"";display:block;margin-bottom:-100%}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item--header{position:sticky;top:60px;background-color:#ffffff !important;min-height:2rem;border-left:none;border-right:none;border-top-left-radius:3px !important;border-top-right-radius:3px !important}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item--header span{padding-top:0.5rem;word-break:normal;white-space:nowrap}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item--header span:nth-child(6){padding-top:0.5rem}@media (max-width: 768px){.rigging-tableview{min-width:0}.rigging-tableview .main-window__list-item span{max-width:none !important}.rigging-tableview .main-window__list-item span:nth-child(5){box-sizing:border-box;padding-right:10px;width:calc(100% + 10px)}.rigging-tableview .main-window__list-item span:nth-child(5) select{border-top-right-radius:0;border-bottom-right-radius:0}.rigging-tableview .main-window__list-item span:nth-child(5)::before{left:auto !important;right:0;border-radius:2.5px;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(5){box-sizing:content-box;padding-right:5px;width:100%}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(6){box-sizing:border-box;padding-right:10px;width:calc(100% + 10px)}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(6) select{border-top-right-radius:0;border-bottom-right-radius:0}.rigging-tableview .main-window__list .main-window__list-options .main-window__list-item span:nth-child(6)::before{left:auto !important;right:0;border-radius:2.5px;border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}}\n',""]),module.exports=exports},3554:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var defineProperty=__webpack_require__(15),defineProperty_default=__webpack_require__.n(defineProperty),slicedToArray=__webpack_require__(7),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(23),__webpack_require__(134),__webpack_require__(83),__webpack_require__(166),__webpack_require__(154),__webpack_require__(202),__webpack_require__(51),__webpack_require__(0)),SearchBar=__webpack_require__(355),toConsumableArray=(__webpack_require__(3309),__webpack_require__(18)),toConsumableArray_default=__webpack_require__.n(toConsumableArray),react_router=(__webpack_require__(36),__webpack_require__(1016),__webpack_require__(673),__webpack_require__(671),__webpack_require__(672),__webpack_require__(1018),__webpack_require__(1025),__webpack_require__(165),__webpack_require__(1019),__webpack_require__(151)),edit=__webpack_require__(2863),edit_default=__webpack_require__.n(edit),tableview_delete=__webpack_require__(2888),delete_default=__webpack_require__.n(tableview_delete),functions=(__webpack_require__(3092),__webpack_require__(63)),rigsVariables=__webpack_require__(2879),rigging=__webpack_require__(1028),PlaceholderLoading=__webpack_require__(2855),TableActions=__webpack_require__(1026),DeleteItemAction=__webpack_require__(677),hooks=__webpack_require__(1015),useSort=__webpack_require__(1023),TableView_functions=__webpack_require__(2975),jsx_runtime=__webpack_require__(1),riggingListOptionsHeader=Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Артикул"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Название"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Кол-во"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Местоположение"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Комментарий"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Статус"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Распил/габариты"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Фрезеровка/точение"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Закалка"}),Object(jsx_runtime.jsx)("span",{className:"main-window__list-item--border-checked",children:"Шлифовка"}),Object(jsx_runtime.jsx)("span",{children:"Эрозия"}),Object(jsx_runtime.jsx)("div",{className:"main-window__table-actions"})]}),PartItem_PartItem=function PartItem(_ref){var part=_ref.part,refItem=_ref.refItem,loadData=_ref.loadData,type=_ref.type,stampId=_ref.stampId;return Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--"+(part.color||"production")+(rigsVariables.d[part.location]?"":" main-window__list-item--message main-window__list-item--warning"),"data-msg":"Предупреждение! Введите корректное местоположение",ref:refItem,children:[Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--border-checked",title:part.number,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Артикул:"}),part.number]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--border-checked",title:part.name,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Название:"})," ",part.name]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--border-checked",title:Object(functions.a)(part.amount),children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Кол-во:"}),Object(functions.a)(part.amount)]}),Object(jsx_runtime.jsxs)("span",{title:rigsVariables.d[part.location]?rigsVariables.d[part.location].name:"",className:"main-window__list-item--border-checked",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Местоположение:"}),rigsVariables.d[part.location]?rigsVariables.d[part.location].name:""]}),Object(jsx_runtime.jsxs)("span",{title:part.comment,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Комментарий:"}),part.comment]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--"+rigsVariables.b[part.color||"production"].className+"main-window__list-item--border-checked",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Статус:"}),Object(jsx_runtime.jsx)("select",{id:part.id,className:"main-window__status_select",value:part.color,onChange:function onChange(_ref2){var target=_ref2.target;return Object(rigging.h)({color:target.value},part.id).then((function(){return loadData()}))},children:Object.values(rigsVariables.b).map((function(status,index){return Object(jsx_runtime.jsx)("option",{value:status.className,children:status.name},index)}))})]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--border-checked",title:part.cuttingDimensions,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Распил/габариты:"}),part.cuttingDimensions]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--border-checked",title:part.milling,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Фрезеровка/точение:"}),part.milling]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--border-checked",title:part.harding,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Закалка:"}),part.harding]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--border-checked",title:part.grinding,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Шлифовка:"}),part.grinding]}),Object(jsx_runtime.jsxs)("span",{title:part.erosion,className:"main-window__list-item--border-checked",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Эрозия:"}),part.erosion]}),Object(jsx_runtime.jsx)(TableActions.a,{actionsList:[{link:"".concat(rigsVariables.c[type].redirectURL,"/edit/").concat(stampId,"?part=").concat(part.id),imgSrc:edit_default.a,title:"Редактировать"}]})]},part.id)};PartItem_PartItem.displayName="PartItem",PartItem_PartItem.__docgenInfo={description:"",methods:[],displayName:"PartItem"};var TableView_PartItem=PartItem_PartItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Dispatcher/Rigging/RiggingComponents/TableView/PartItem.jsx"]={name:"PartItem",docgenInfo:PartItem_PartItem.__docgenInfo,path:"src/components/MainPage/Dispatcher/Rigging/RiggingComponents/TableView/PartItem.jsx"});var TableView_TableView_TableView=function TableView(props){var _useState=Object(react.useState)([]),_useState2=slicedToArray_default()(_useState,2),partsVisible=_useState2[0],setPartsVisible=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),scrolledToPrev=_useState4[0],setScrolledToPrev=_useState4[1],query=Object(hooks.e)().query,sortedData=Object(useSort.a)(Object(TableView_functions.c)(props.data,props.searchQuery),{ignoreURL:!1,sortOrder:{curSort:"id",id:"desc"},sortOptions:[{value:"id desc",text:"id"}]},[props.data]).sortedData;Object(react.useEffect)((function(){if(query.get("rig"))return setPartsVisible(toConsumableArray_default()(checkPart(query.get("rig"))))}),[]),Object(react.useEffect)((function(){var temp=[];props.data.map((function(element){return void 0===props.cachedItems[element.id]&&props.setCachedItems(Object.assign({},props.cachedItems,defineProperty_default()({},element.id,!0))),temp.push({id:element.id,hidden:void 0===props.cachedItems[element.id]||props.cachedItems[element.id]})})),setPartsVisible([].concat(temp))}),[props.data]);var checkPart=function checkPart(index){return index=Number.parseInt(index),partsVisible.map((function(element){return element.id==index?(props.setCachedItems(Object.assign({},props.cachedItems,defineProperty_default()({},index,!element.hidden))),{id:index,hidden:!element.hidden}):element}))},handleClickStamp=function handleClickStamp(event){var id=event.currentTarget.getAttribute("id");!event.target.className.includes("main-window__status_select")&&!event.target.className.includes("main-window__action")&&!event.target.className.includes("main-window__img")&&setPartsVisible(toConsumableArray_default()(checkPart(id)))},prevRef=Object(react.useCallback)((function(node){var rig=Number.parseInt(query.get("rig"));props.data&&!scrolledToPrev&&void 0!==props.data.find((function(item){return item.id===rig}))&&null!==node&&props.data&&(setTimeout((function(){return Object(functions.v)(node,-200)}),600),setScrolledToPrev(!0))}),[props.data]);return Object(jsx_runtime.jsx)("div",{className:"rigging-tableview",children:Object(jsx_runtime.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)("span",{children:"ID"}),Object(jsx_runtime.jsx)("span",{children:"Артикул"}),Object(jsx_runtime.jsx)("span",{children:"Название"}),Object(jsx_runtime.jsx)("span",{children:"Комментарий"}),Object(jsx_runtime.jsx)("span",{children:"Статус"}),Object(jsx_runtime.jsx)("div",{className:"main-window__table-actions"})]}),props.isLoading&&Object(jsx_runtime.jsx)(PlaceholderLoading.a,{itemClassName:"main-window__list-item",minHeight:"35px",items:5}),sortedData.map((function(stamp){return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{id:stamp.id,ref:Number.parseInt(query.get("rig"))===stamp.id&&null===query.get("part")?prevRef:null,className:"main-window__list-item main-window__list-item--"+(stamp.color||"production"),onClick:handleClickStamp,children:[Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"ID:"}),stamp.id]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Артикул:"}),stamp.number]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Название:"}),stamp.name]}),Object(jsx_runtime.jsxs)("span",{title:stamp.comment,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Комментарий:"}),stamp.comment]}),Object(jsx_runtime.jsxs)("span",{className:"main-window__list-item--"+rigsVariables.b[stamp.color||"production"].className,children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Статус заявки:"}),Object(jsx_runtime.jsx)("select",{id:stamp.id,className:"main-window__status_select",value:stamp.color||"production",onChange:function onChange(_ref){var target=_ref.target;return Object(rigging.g)({color:target.value},stamp.id).then((function(){return props.loadData()}))},children:Object.values(rigsVariables.b).map((function(status,index){return Object(jsx_runtime.jsx)("option",{value:status.className,children:status.name},index)}))})]}),Object(jsx_runtime.jsx)(TableActions.a,{actionsList:[{link:"".concat(rigsVariables.c[props.type].redirectURL,"/edit/").concat(stamp.id),title:"Редактирование",imgSrc:edit_default.a},{customElement:Object(jsx_runtime.jsx)(DeleteItemAction.a,{onClick:function onClick(){return props.deleteItem(stamp.id)},icon:delete_default.a,title:"Удалить"})}]})]}),Object(jsx_runtime.jsx)("div",{id:stamp.id,className:"main-window__list-options ".concat(Object(TableView_functions.b)(partsVisible,stamp.id)&&Number.parseInt(query.get("rig"))!==stamp.id?"main-window__list-options--hidden":""),children:Object(jsx_runtime.jsxs)("div",{className:"main-window__list",children:[riggingListOptionsHeader,Object(TableView_functions.d)(stamp.stampParts).map((function(part){var ref=Number.parseInt(query.get("rig"))===stamp.id&&Number.parseInt(query.get("part"))===part.id?prevRef:null;return Object(jsx_runtime.jsx)(TableView_PartItem,{part:part,refItem:ref,loadData:props.loadData,type:props.type,stampId:stamp.id},part.id)}))]})})]})}))]})})};TableView_TableView_TableView.displayName="TableView",TableView_TableView_TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"};var RiggingComponents_TableView_TableView=Object(react_router.j)(TableView_TableView_TableView);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Dispatcher/Rigging/RiggingComponents/TableView/TableView.jsx"]={name:"TableView",docgenInfo:TableView_TableView_TableView.__docgenInfo,path:"src/components/MainPage/Dispatcher/Rigging/RiggingComponents/TableView/TableView.jsx"});var FloatingButton=__webpack_require__(675),ControlPanel=__webpack_require__(674),useTitleHeader=__webpack_require__(1024),filterRigItems=(__webpack_require__(258),function filterRigItems(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],curPage=arguments.length>1?arguments[1]:void 0;return data.filter((function(item){return"completed"===item.color&&"Завершено"===curPage||("Активные"===curPage&&"completed"!==item.color||void 0)}))}),RiggingWorkshop_RiggingWorkshop_RiggingWorkshop=function RiggingWorkshop(props){var _useState=Object(react.useState)({stamp:[],machine:[],pressForm:[],parts:[]}),_useState2=slicedToArray_default()(_useState,2),rigItems=_useState2[0],setRigItems=_useState2[1],_useState3=Object(react.useState)(""),_useState4=slicedToArray_default()(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1],_useState5=Object(react.useState)(!1),_useState6=slicedToArray_default()(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),isLoaded=_useState8[0],setIsLoaded=_useState8[1],_useTitleHeader=Object(useTitleHeader.a)(void 0,[{pageTitle:"Активные",pageName:"Активные"},!props.userHasAccess(["ROLE_WORKSHOP"])&&{pageTitle:"Завершено",pageName:"Завершено"}],"Активные"),curPage=_useTitleHeader.curPage,setCurPage=_useTitleHeader.setCurPage,titleHeader=_useTitleHeader.titleHeader;Object(react.useEffect)((function(){document.title="Штампы";var abortController=new AbortController;return isLoaded===props.type||isLoading||0!==rigItems[props.type].length||(setCurPage("Активные"),loadRigItems(abortController.signal)),function cancel(){abortController.abort()}}),[props.type]);var loadRigItems=function loadRigItems(signal){setIsLoading(!0),Object(rigging.k)(props.type,signal).then((function(res){return res.json()})).then((function(res){setIsLoaded(props.type),setRigItems((function(rigItems){return Object.assign({},rigItems,defineProperty_default()({},props.type,res))})),setIsLoading(!1)})).catch((function(error){setIsLoading(!1),console.log(error)}))};return Object(jsx_runtime.jsxs)("div",{className:"rigging-workshop",children:[Object(jsx_runtime.jsx)(FloatingButton.a,{linkTo:"/dispatcher/rigging/stamp/new",visibility:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_ENGINEER"]}),Object(jsx_runtime.jsx)(SearchBar.a,{fullSize:!0,setSearchQuery:setSearchQuery,placeholder:"Введите здесь запрос для поиска..."}),titleHeader,Object(jsx_runtime.jsx)(ControlPanel.a,{itemsCount:"Всего: ".concat(rigItems[props.type].length," записей")}),Object(jsx_runtime.jsx)(RiggingComponents_TableView_TableView,{data:filterRigItems(rigItems[props.type],curPage),searchQuery:searchQuery,userHasAccess:props.userHasAccess,loadData:loadRigItems,deleteItem:function deleteItem(id){Object(rigging.j)(id).then((function(res){return res.json()})).then((function(res){return Promise.all(res.stampParts.map((function(item){return Object(rigging.c)(item.id)})))})).then((function(){return Object(rigging.d)(id)})).then((function(){return loadRigItems()}))},cachedItems:props.cachedItems,setCachedItems:function setCachedItems(items){return props.setCachedItems(items)},isLoading:isLoading,type:props.type})]})};RiggingWorkshop_RiggingWorkshop_RiggingWorkshop.displayName="RiggingWorkshop",RiggingWorkshop_RiggingWorkshop_RiggingWorkshop.__docgenInfo={description:"",methods:[],displayName:"RiggingWorkshop"};__webpack_exports__.default=RiggingWorkshop_RiggingWorkshop_RiggingWorkshop;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Dispatcher/Rigging/RiggingComponents/RiggingWorkshop/RiggingWorkshop.jsx"]={name:"RiggingWorkshop",docgenInfo:RiggingWorkshop_RiggingWorkshop_RiggingWorkshop.__docgenInfo,path:"src/components/MainPage/Dispatcher/Rigging/RiggingComponents/RiggingWorkshop/RiggingWorkshop.jsx"})}}]);