(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{2855:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(23),__webpack_require__(36),__webpack_require__(51),__webpack_require__(0)),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2856),__webpack_require__(1)),PlaceholderLoading=function PlaceholderLoading(_ref){var _ref$items=_ref.items,items=void 0===_ref$items?3:_ref$items,itemClassName=_ref.itemClassName,_ref$minHeight=_ref.minHeight,minHeight=void 0===_ref$minHeight?"1.5rem":_ref$minHeight,placeholderContent=_ref.placeholderContent,wrapperClassName=_ref.wrapperClassName,_ref$itemStyles=_ref.itemStyles,itemStyles=void 0===_ref$itemStyles?{}:_ref$itemStyles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),elements=_useState2[0],setElements=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){for(var temp=[],count=items,i=1;i<=count;i++)temp.push(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading__item ".concat(itemClassName),style:Object.assign({minHeight:minHeight},itemStyles)}));setElements([].concat(temp))}),[]),placeholderContent?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:itemClassName,style:{minHeight:minHeight},children:placeholderContent},index)}))}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item){return item}))})};PlaceholderLoading.displayName="PlaceholderLoading",PlaceholderLoading.__docgenInfo={description:"",methods:[],displayName:"PlaceholderLoading",props:{items:{defaultValue:{value:"3",computed:!1},type:{name:"number"},required:!1,description:""},minHeight:{defaultValue:{value:"'1.5rem'",computed:!1},type:{name:"string"},required:!1,description:""},itemStyles:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},itemClassName:{type:{name:"string"},required:!1,description:""},wrapperClassName:{type:{name:"string"},required:!1,description:""},placeholderContent:{type:{name:"any"},required:!1,description:""}}},__webpack_exports__.a=PlaceholderLoading,PlaceholderLoading.propTypes={items:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number,minHeight:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,itemClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,wrapperClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,placeholderContent:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.any,itemStyles:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"]={name:"PlaceholderLoading",docgenInfo:PlaceholderLoading.__docgenInfo,path:"src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"})},2856:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(2857);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2857:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,'@keyframes pulse-placeholder-loading{0%,100%{background-color:#e7e7e7}50%{background-color:#efefef}}@keyframes load{from{left:-150px}to{left:100%}}.placeholder-loading__item{height:1rem;background-color:#ddd;animation:pulse-placeholder-loading 1s infinite ease-in-out;position:relative;overflow:hidden;border-bottom:1px solid #bbb}.placeholder-loading__item::after{content:"";display:block;position:absolute;left:-150px;top:0;height:100%;width:150px;background:linear-gradient(to right, transparent 0%, #e8e8e8 50%, transparent 100%);animation:load 1s cubic-bezier(0.4, 0, 0.2, 1) infinite}\n',""]),module.exports=exports},2863:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/edit.efe0dc2a.svg"},2895:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/ok.2ad21b54.svg"},2936:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return getLTDList})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getLTDById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addLTD})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteLTD}));__webpack_require__(36);var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),axios__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(259),axios__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);function getLTDList(){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.get("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/"),headers)}function getLTDById(id){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.get("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/").concat(id),headers)}function addLTD(newLtd){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.post("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/"),newLtd,headers)}function deleteLTD(id){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.delete("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/").concat(id),headers)}},3047:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(51),__webpack_require__(165);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),Utils_TableView_TableActions_TableActions_jsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1026),Utils_TableView_TableActions_Actions_DeleteItemAction_jsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(677),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2863),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5__),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2895),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6__),Utils_TableView_PlaceholderLoading_PlaceholderLoading_jsx__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2855),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(3048),__webpack_require__(1)),TableView=function TableView(_ref){var data=_ref.data,deleteItem=_ref.deleteItem,userHasAccess=_ref.userHasAccess,_ref$onSelect=_ref.onSelect,onSelect=void 0!==_ref$onSelect&&_ref$onSelect,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,setShowWindow=_ref.setShowWindow,selectedLtd=_ref.selectedLtd;return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){setShowWindow&&setShowWindow(!1)}),[selectedLtd]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"ltd-tableview",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:"Название"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:"Адрес"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:"ИНН"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"main-window__table-actions"})]}),isLoading?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Utils_TableView_PlaceholderLoading_PlaceholderLoading_jsx__WEBPACK_IMPORTED_MODULE_7__.a,{itemClassName:"main-window__list-item",minHeight:"30px",items:3}):data.map((function(item){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"main-window__list-item",onClick:onSelect?function(){return onSelect(item)}:null,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:item.name}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:item.legalAddress}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:item.inn}),onSelect?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"main-window__table-actions",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("img",{onClick:function onClick(){return onSelect(item)},className:"main-window__img",src:Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6___default.a})}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Utils_TableView_TableActions_TableActions_jsx__WEBPACK_IMPORTED_MODULE_3__.a,{actionsList:[{title:"Редактирование",link:"/ltd-list/edit/".concat(item.id),imgSrc:Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5___default.a,isRendered:userHasAccess(["ROLE_ADMIN","ROLE_MANAGER"])},{customElement:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Utils_TableView_TableActions_Actions_DeleteItemAction_jsx__WEBPACK_IMPORTED_MODULE_4__.a,{title:"Удаление заявки",onClick:function onClick(){return deleteItem(item.id)}}),isRendered:!!deleteItem&&userHasAccess(["ROLE_ADMIN"])}]})]},item.id)}))]})})};TableView.displayName="TableView",TableView.__docgenInfo={description:"",methods:[],displayName:"TableView",props:{onSelect:{defaultValue:{value:"false",computed:!1},required:!1},isLoading:{defaultValue:{value:"false",computed:!1},required:!1}}},__webpack_exports__.a=TableView,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/LtdListPage/TableView/TableView.jsx"]={name:"TableView",docgenInfo:TableView.__docgenInfo,path:"src/components/MainPage/PriceList/LtdListPage/TableView/TableView.jsx"})},3048:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3049);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3049:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,".ltd-tableview{width:100%}.ltd-tableview .main-window__list-item:not(.main-window__list-item--header){cursor:pointer}.ltd-tableview .main-window__list-item:not(.main-window__list-item--header) span{padding-top:15px;padding-bottom:15px}.ltd-tableview .main-window__list-item span:nth-child(1){flex:0 1 20%}.ltd-tableview .main-window__list-item span:nth-child(2){flex:0 1 40%}.ltd-tableview .main-window__list-item span:nth-child(3){flex:0 1 10%}\n",""]),module.exports=exports},3488:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(258),__webpack_require__(165),__webpack_require__(671),__webpack_require__(672),__webpack_require__(83),__webpack_require__(474),__webpack_require__(201),__webpack_require__(0)),Utils_hooks_usePagination_usePagination_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1030),Utils_hooks_useSort_useSort_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1023),Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(675),Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(674),API_PriceList_lts_list_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2936),_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(355),_App_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(135),_TableView_TableView_jsx__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(3047),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=(__webpack_require__(3489),__webpack_require__(1)),LtdListPage=function LtdListPage(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_9__.useState)(""),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_9__.useState)([]),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3,2),ltdData=_useState4[0],setLtdData=_useState4[1],userContext=Object(react__WEBPACK_IMPORTED_MODULE_9__.useContext)(_App_js__WEBPACK_IMPORTED_MODULE_16__.a),_useState5=Object(react__WEBPACK_IMPORTED_MODULE_9__.useState)(!0),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1],_useSort=Object(Utils_hooks_useSort_useSort_js__WEBPACK_IMPORTED_MODULE_11__.a)(ltdData,{sortOrder:{curSort:"name",name:"asc"},sortOptions:[{value:"name asc",text:"По названию (А-Я)"},{value:"name desc",text:"По названию (Я-А)"}],ignoreURL:!1},[ltdData]),sortPanel=_useSort.sortPanel,sortedData=_useSort.sortedData,sortOrder=_useSort.sortOrder,_usePagination=Object(Utils_hooks_usePagination_usePagination_js__WEBPACK_IMPORTED_MODULE_10__.a)((function(){return filterSearchQuery(sortedData)}),[searchQuery,sortOrder,sortedData],"static"),pagination=_usePagination.pagination,data=_usePagination.data,filterSearchQuery=function filterSearchQuery(data){var query=searchQuery.toLowerCase();return data.filter((function(item){var _item$name,_item$inn,_item$kpp;return(null===(_item$name=item.name)||void 0===_item$name?void 0:_item$name.toLowerCase().includes(query))||(null===(_item$inn=item.inn)||void 0===_item$inn?void 0:_item$inn.toLowerCase().includes(query))||(null===(_item$kpp=item.kpp)||void 0===_item$kpp?void 0:_item$kpp.toLowerCase().includes(query))||item.id.toString().includes(query)}))};Object(react__WEBPACK_IMPORTED_MODULE_9__.useEffect)((function(){document.title="Список ООО",loadLTDList()}),[]);var loadLTDList=function loadLTDList(){Object(API_PriceList_lts_list_js__WEBPACK_IMPORTED_MODULE_14__.d)().then((function(res){setLtdData(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(res.data)),setIsLoading(!1)})).catch((function(error){setIsLoading(!1),console.log(error)}))};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"ltd-list",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"main-window",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"main-window__header main-window__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"main-window__title",children:"Список ООО"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_12__.a,{visibility:["ROLE_ADMIN","ROLE_MANAGER"],linkTo:"/ltd-list/new"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_15__.a,{fullSize:!0,placeholder:"Введите название продукции для поиска...",setSearchQuery:setSearchQuery}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_13__.a,{sorting:sortPanel,itemsCount:"Всего: ".concat(ltdData.length," записей")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_TableView_TableView_jsx__WEBPACK_IMPORTED_MODULE_17__.a,{data:data,deleteItem:function deleteItem(id){Object(API_PriceList_lts_list_js__WEBPACK_IMPORTED_MODULE_14__.b)(id).then((function(){return loadLTDList()}))},userHasAccess:userContext.userHasAccess,isLoading:isLoading}),pagination]})})};LtdListPage.displayName="LtdListPage",LtdListPage.__docgenInfo={description:"",methods:[],displayName:"LtdListPage"},__webpack_exports__.default=LtdListPage,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/LtdListPage/LtdListPage.jsx"]={name:"LtdListPage",docgenInfo:LtdListPage.__docgenInfo,path:"src/components/MainPage/PriceList/LtdListPage/LtdListPage.jsx"})},3489:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3490);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3490:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,"",""]),module.exports=exports}}]);