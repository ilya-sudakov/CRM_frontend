(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{2668:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$reduce=__webpack_require__(2675).left,arrayMethodIsStrict=__webpack_require__(993),CHROME_VERSION=__webpack_require__(446),IS_NODE=__webpack_require__(445);$({target:"Array",proto:!0,forced:!arrayMethodIsStrict("reduce")||!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2670:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return workshops})),__webpack_require__.d(__webpack_exports__,"b",(function(){return requestStatuses})),__webpack_require__.d(__webpack_exports__,"a",(function(){return productsStatuses}));var workshops={requests:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"},lemz:{name:"ЛЭМЗ",title:"ЛЭМЗ",redirectURL:"/lemz/workshop-lemz",ordersRedirectURL:"/lemz/workshop-orders",storageRedirectURL:"/lemz/workshop-storage",type:"lemz",fullName:"ЦехЛЭМЗ"},lepsari:{name:"Лепсари",title:"Лепсари",redirectURL:"/lepsari/workshop-lepsari",ordersRedirectURL:"/lepsari/workshop-orders",storageRedirectURL:"/lepsari/workshop-storage",type:"lepsari",fullName:"ЦехЛепсари"},ligovskiy:{name:"Лиговский",title:"Лиговский",redirectURL:"/ligovskiy/workshop",ordersRedirectURL:"/ligovskiy/workshop-orders",storageRedirectURL:"/ligovskiy/workshop-storage",type:"ligovskiy",fullName:"ЦехЛиговский"},null:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"}},requestStatuses=[{name:"Проблема/Материалы",oldName:"Проблема-материалы",className:"materials",access:["ROLE_ADMIN","ROLE_WORKSHOP"],visible:!1},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Отгружено",className:"shipped",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Частично отгружено",className:"shipped-in-parts",access:[]},{name:"Готово к отгрузке",oldName:"Готово",className:"ready",access:["ROLE_ADMIN","ROLE_WORKSHOP"]},{name:"В производстве",className:"in-production",access:[]},{name:"Ожидание",className:"waiting",access:["ROLE_ADMIN","ROLE_MANAGER","ROLE_WORKSHOP"]},{name:"Приоритет",className:"priority",access:["ROLE_ADMIN"]}],productsStatuses=[{name:"В работе",oldName:null,className:"production",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Приоритет",className:"defect",access:["ROLE_ADMIN"]}]},2671:function(module,__webpack_exports__,__webpack_require__){"use strict";var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(989),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2683),__webpack_require__(1)),SelectFromButton=function SelectFromButton(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"Выбрать":_ref$text,_onClick=_ref.onClick;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"select-from-button",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"select-from-button__link",onClick:function onClick(event){event.preventDefault(),_onClick()},children:[text,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"select-from-button__img select-from-button__img--more"})]})})};SelectFromButton.displayName="SelectFromButton",SelectFromButton.__docgenInfo={description:"",methods:[],displayName:"SelectFromButton",props:{text:{defaultValue:{value:"'Выбрать'",computed:!1},required:!1},onClick:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=SelectFromButton,SelectFromButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/SelectFromButton/SelectFromButton.jsx"]={name:"SelectFromButton",docgenInfo:SelectFromButton.__docgenInfo,path:"src/utils/Form/SelectFromButton/SelectFromButton.jsx"})},2672:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultStylesPDF})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createPDF})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getPDFTitleObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getInputElementTextPDF})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getTransportationListPdfText})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getRequestPdfText})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProductsFromRequestsListPdfText}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(181),__webpack_require__(213),__webpack_require__(281),__webpack_require__(990),__webpack_require__(2663),__webpack_require__(1586),__webpack_require__(2713)),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__),pdfmake__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2714),pdfmake__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(pdfmake__WEBPACK_IMPORTED_MODULE_8__),_functions_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(986),_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(988),defaultStylesPDF={title:{fontSize:18,alignment:"left"},subheader:{fontSize:14,alignment:"left"},regularText:{fontSize:11,alignment:"left"},tableHeader:{fontSize:11,color:"#555",alignment:"left"}},createPDF=function createPDF(data){var print=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,print?pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).print():pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).open()},getPDFTitleObject=function getPDFTitleObject(name){return{text:"".concat(name,"\n"),alignment:"center",style:"title"}},getInputElementTextPDF=function getInputElementTextPDF(title,value){return{text:[{text:"\n".concat(title,": \n"),style:"regularText",fontSize:12},{text:"".concat(value,"\n\n"),style:"subheader"}]}},getTransportationListPdfText=function getTransportationListPdfText(transportation){var transportationList=[],transportationInfo=[];transportation.map((function(item){return transportationInfo.push([{text:Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.g)(item.date),style:"regularText"},{text:item.cargo,style:"regularText"},{text:item.quantity,style:"regularText"},{text:item.sender,style:"regularText"},{text:item.recipient,style:"regularText"},{text:item.driver,style:"regularText"}])})),transportationList.push({table:{widths:[60,140,40,80,80,"*"],body:[[{text:"Дата",style:"tableHeader"},{text:"Товар",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Откуда",style:"tableHeader"},{text:"Куда",style:"tableHeader"},{text:"Водитель",style:"tableHeader"}]].concat(transportationInfo)}});var dd={info:{title:"Реестр транспортировок"},content:[getPDFTitleObject("Реестр транспортировок")].concat(transportationList),styles:defaultStylesPDF};return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,dd},getRequestPdfText=function getRequestPdfText(date,requestProducts,codeWord,workshopName,itemId){var productsArr=Object(_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__.a)(requestProducts,{fieldName:"name",direction:"asc"}).map((function(item){return[item.name,item.quantity,item.packaging,"",""]})),dd={info:{title:"Очередь производства №"+itemId},content:[getPDFTitleObject("Очередь производства  №".concat(itemId)),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",getInputElementTextPDF("Дата",Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.g)(date)),{text:"Продукция: ",style:"regularText",fontSize:12,margin:[0,0,0,5]},{table:{widths:["*",70,70,70,70],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Фасовка",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(productsArr))}},"\n",getInputElementTextPDF("Кодовое слово",codeWord)],styles:defaultStylesPDF};createPDF(dd)},sortRequestProducts=function sortRequestProducts(data){return data.sort((function(a,b){return a[0].localeCompare(b[0],void 0,{numeric:!0})<0?-1:a[0].localeCompare(b[0],void 0,{numeric:!0})>0?1:0}))},getProductsFromRequestsListPdfText=function getProductsFromRequestsListPdfText(products,workshopName){var dd={info:{title:"Очередь производства - список"},content:[getPDFTitleObject("Очередь производства - список"),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",sortRequestProducts(Object.entries(products)).map((function(category){if(Object.values(category[1]).length>0)return[{text:[{text:"".concat(category[0]," \n"),fontSize:12,style:"regularText",margin:[5,5,5,5]}]}].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(function formatProducts(products){return[{table:{margin:[0,5,0,5],widths:["*",100,80,80],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(sortRequestProducts(Object.entries(products)).map((function(product){return[product[0],product[1],"",""]}))))}}]}(category[1])),["\n"])}))],styles:defaultStylesPDF};createPDF(dd)}},2675:function(module,exports,__webpack_require__){var aFunction=__webpack_require__(284),toObject=__webpack_require__(148),IndexedObject=__webpack_require__(643),toLength=__webpack_require__(183),createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction(callbackfn);var O=toObject(that),self=IndexedObject(O),length=toLength(O.length),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}},2679:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/chevron-down.d0a0493c.svg"},2680:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return getClients})),__webpack_require__.d(__webpack_exports__,"j",(function(){return searchClients})),__webpack_require__.d(__webpack_exports__,"d",(function(){return editNextContactDateClient})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getClientsByCategoryAndType})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getClientById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addClient})),__webpack_require__.d(__webpack_exports__,"c",(function(){return editClient})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteClient})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getInfoByINN})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getBIKByINN}));__webpack_require__(2691),__webpack_require__(636),__webpack_require__(213);var axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(992),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(637);function getClients(elements){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/client/?size="+elements,method:"GET"})}function searchClients(query,fields){var formattedFields=fields.filter((function(cur){return""!==cur&&cur})).join("&");return console.log("formatted",formattedFields,fields),Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/client/search/").concat(formattedFields&&""!==formattedFields?"".concat(formattedFields,"/"):""),method:"POST",body:JSON.stringify(query)})}function editNextContactDateClient(date){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/client/date/",method:"POST",body:JSON.stringify(date)})}function getClientsByCategoryAndType(category_type,curPage,itemsPerPage,sortOrder,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/client/category_type/client/?page="+(curPage-1)+"&sort="+sortOrder.curSort+","+sortOrder[sortOrder.curSort]+"&size="+itemsPerPage,method:"POST",body:JSON.stringify(category_type),signal:signal})}function getClientById(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/client/"+id,method:"GET"})}function addClient(newClient){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.a)();return axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/client"),newClient,headers)}function editClient(newClient,id){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.a)();return axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/client/").concat(id),newClient,headers)}function deleteClient(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/client/"+id,method:"DELETE"})}function getInfoByINN(INN){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.c)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party",method:"POST",body:JSON.stringify(INN)})}function getBIKByINN(INN){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.c)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/bank",method:"POST",body:JSON.stringify(INN)})}},2683:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2684);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2684:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-from-button__link{display:flex;align-items:center;transition:100ms ease-in-out;color:#777777 !important;border-radius:3px;cursor:pointer;font-size:0.9rem;padding:2px 8px;padding-right:3px;margin-top:2px;width:fit-content;margin-left:10px}.select-from-button__link .select-from-button__img{width:20px;transition:margin-left 200ms ease-in-out}.select-from-button__link .select-from-button__img--plus{margin-left:7px}.select-from-button__link .select-from-button__img--plus path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link .select-from-button__img--more{transform:rotate(-90deg) !important}.select-from-button__link .select-from-button__img--more path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link:hover{color:#333333 !important}.select-from-button__link:hover .select-from-button__img--more{margin-left:8px}.select-from-button__link:hover .select-from-button__img--more path:first-child{fill:#55a1c1}.select-from-button__link:hover .select-from-button__img--plus path:first-child{fill:#55a1c1}\n",""]),module.exports=exports},2690:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/delete.1ad59e4c.svg"},2691:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),IndexedObject=__webpack_require__(643),toIndexedObject=__webpack_require__(184),arrayMethodIsStrict=__webpack_require__(993),nativeJoin=[].join,ES3_STRINGS=IndexedObject!=Object,STRICT_METHOD=arrayMethodIsStrict("join",",");$({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD},{join:function join(separator){return nativeJoin.call(toIndexedObject(this),void 0===separator?",":separator)}})},2701:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return getPageByRequest})),__webpack_require__.d(__webpack_exports__,"c",(function(){return filterRequestsByPage})),__webpack_require__.d(__webpack_exports__,"e",(function(){return filterRequestsByStatuses})),__webpack_require__.d(__webpack_exports__,"d",(function(){return filterRequestsBySearchQuery})),__webpack_require__.d(__webpack_exports__,"k",(function(){return printRequest})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteItem})),__webpack_require__.d(__webpack_exports__,"l",(function(){return printRequestsList})),__webpack_require__.d(__webpack_exports__,"a",(function(){return copySelectedRequest})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getRequestsDefaultInputs})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getRequestsEditingDefaultInputs})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getRequestRedirectUrl})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getWorkshopOrdersDefaultInputs}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(18),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__),Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_20__=(__webpack_require__(636),__webpack_require__(181),__webpack_require__(281),__webpack_require__(638),__webpack_require__(639),__webpack_require__(241),__webpack_require__(641),__webpack_require__(333),__webpack_require__(443),__webpack_require__(283),__webpack_require__(242),__webpack_require__(334),__webpack_require__(41),__webpack_require__(2663),__webpack_require__(991),__webpack_require__(213),__webpack_require__(640),__webpack_require__(444),__webpack_require__(986)),Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2672),Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2688),_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2670),Utils_RequestsAPI_Products_Categories_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(2708),getPageByRequest=function getPageByRequest(item){return"Завершено"===item.status?"completed":"Отгружено"===item.status||"Частично отгружено"===item.status?"shipped":("Завершено"!==item.status&&"Отгружено"!==item.status&&item.status,"open")},filterRequestsByPage=function filterRequestsByPage(data,page){return data.filter((function(item){return"Завершено"===page&&"Завершено"===item.status||("Отгружено"===page&&("Отгружено"===item.status||"Частично отгружено"===item.status)||"Открытые"===page&&"Завершено"!==item.status&&"Отгружено"!==item.status&&"Частично отгружено"!==item.status)}))},filterRequestsByStatuses=function filterRequestsByStatuses(data,statuses){return data.filter((function(item){var check=!1,noActiveStatuses=!0;return statuses.map((function(status){statuses.map((function(status){status.visible&&(noActiveStatuses=!1)})),(!0===noActiveStatuses||status.visible&&(status.name===item.status||status.oldName===item.status))&&(check=!0)})),check}))},filterRequestsBySearchQuery=function filterRequestsBySearchQuery(data,searchQuery){var query=searchQuery.toLowerCase();return data.filter((function(item){return 0!==item.requestProducts.length&&null!==item.requestProducts[0].name?item.requestProducts[0].name.toLowerCase().includes(query)||item.id.toString().includes(query)||Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_20__.g)(item.date).includes(query)||(item.codeWord||"").toLowerCase().includes(query)||item.status.toLowerCase().includes(query)||item.responsible.toLowerCase().includes(query)||Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_20__.g)(item.shippingDate).includes(query):item.status.toLowerCase().includes(query)}))},printRequest=function printRequest(request){var _request$client$name,_request$client;Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_21__.f)(request.date,request.requestProducts,null!==(_request$client$name=null===(_request$client=request.client)||void 0===_request$client?void 0:_request$client.name)&&void 0!==_request$client$name?_request$client$name:request.codeWord,_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.c[request.factory].name,request.id)},deleteItem=function deleteItem(id,loadRequests){Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.j)(id).then((function(res){return res.json()})).then((function(res){return Promise.all(res.requestProducts.map((function(product){return Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.d)(product.id)})))})).then((function(){return Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.e)(id)})).then((function(){return loadRequests()})).catch((function(error){console.log(error)}))},printRequestsList=function printRequestsList(setIsLoading,productsQuantities,fullName){var categories={};setIsLoading(!0),Object(Utils_RequestsAPI_Products_Categories_js__WEBPACK_IMPORTED_MODULE_24__.d)().then((function(res){return res.json()})).then((function(res){res.map((function(category){void 0===categories[category.category]&&(categories=Object.assign({},categories,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({},category.category,{}))),Object.entries(productsQuantities).map((function(product){category.products.map((function(categoryProduct){product[0]===categoryProduct.name&&(categories=Object.assign({},categories,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({},category.category,Object.assign({},categories[category.category],_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({},product[0],product[1])))))}))}))}))})).then((function(){setIsLoading(!1),Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_21__.e)(categories,fullName)})).catch((function(error){console.log(error),setIsLoading(!1)}))},copySelectedRequest=function copySelectedRequest(id,requests,setIsLoading,loadData){var _requestToBeCopied$cl,_requestToBeCopied$sh;setIsLoading(!0);var requestToBeCopied=requests.find((function(item){return item.id===id})),newId=0;Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.b)({date:requestToBeCopied.date,products:requestToBeCopied.requestProducts,quantity:requestToBeCopied.quantity,clientId:null===(_requestToBeCopied$cl=requestToBeCopied.client)||void 0===_requestToBeCopied$cl?void 0:_requestToBeCopied$cl.id,sum:requestToBeCopied.sum,responsible:requestToBeCopied.responsible,status:requestToBeCopied.status,shippingDate:null!==(_requestToBeCopied$sh=requestToBeCopied.shippingDate)&&void 0!==_requestToBeCopied$sh?_requestToBeCopied$sh:new Date,comment:requestToBeCopied.comment,factory:requestToBeCopied.factory}).then((function(res){return res.json()})).then((function(res){return newId=res.id,Promise.all(requestToBeCopied.requestProducts.map((function(item){return Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.a)({requestId:res.id,quantity:item.quantity,packaging:item.packaging,status:item.status,name:item.name})})))})).then((function(){var _requestToBeCopied$cl2;return Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.c)(newId,null===(_requestToBeCopied$cl2=requestToBeCopied.client)||void 0===_requestToBeCopied$cl2?void 0:_requestToBeCopied$cl2.id)})).then((function(){setIsLoading(!1),loadData()})).catch((function(error){setIsLoading(!1),console.log(error)}))},getRequestsDefaultInputs=function getRequestsDefaultInputs(username,type){return[{name:"date",defaultValue:new Date,isRequired:!0,isValid:!0},{name:"responsible",defaultValue:username,isRequired:!0,isValid:!0},{name:"status",defaultValue:"Ожидание",isRequired:!0,isValid:!0},{name:"requestProducts",defaultValue:[],isRequired:!0},{name:"shippingDate",defaultValue:new Date((new Date).setDate((new Date).getDate()+7)),isRequired:!0,isValid:!0},{name:"comment",defaultValue:""},{name:"factory",defaultValue:type},{name:"sum",defaultValue:0},{name:"clientId",defaultValue:0,isRequired:!0}]},getRequestsEditingDefaultInputs=function getRequestsEditingDefaultInputs(username,type){var defaultInputs=getRequestsDefaultInputs(username,type);return defaultInputs=defaultInputs.map((function(input){return Object.assign({},input,{isValid:!0})})),defaultInputs=[].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(defaultInputs),[{name:"client",defaultValue:null,isRequired:!0,isValid:!0},{name:"oldProducts",defaultValue:[],isRequired:!0,isValid:!0}])},getRequestRedirectUrl=function getRequestRedirectUrl(history,splitPoint,type,inputs){var id=history.location.pathname.split(splitPoint)[1];return"".concat(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.c[type].redirectURL,"/").concat(getPageByRequest(inputs),"#").concat(id)},getWorkshopOrdersDefaultInputs=function getWorkshopOrdersDefaultInputs(factory){return[{name:"name",defaultValue:"",isRequired:!0},{name:"status",defaultValue:"ordered"},{name:"date",defaultValue:new Date,isRequired:!0,isValid:!0},{name:"deliverBy",defaultValue:new Date((new Date).setDate((new Date).getDate()+7)),isRequired:!0,isValid:!0},{name:"assembly",defaultValue:"ordered"},{name:"products",defaultValue:[{name:"",quantity:""}]},{name:"factoryName",defaultValue:factory}]}},2727:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2728);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2728:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.input_products{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:20px}.input_products .select{width:calc(90% - 20px);width:100%}.input_products--new{margin:0 !important;padding-right:10px}.input_products .input_products__input{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;width:100%}.input_products .input_products__input .input_products__input_name{color:#666;flex:0 1 calc(20% - 10px);padding-right:10px;width:100%;margin-bottom:5px}.input_products .input_products__input .input_products__input_field{display:flex;justify-content:center;width:calc(90% - 20px);position:relative;height:2rem;width:100%}.input_products .input_products__input .input_products__input_field input[type="text"],.input_products .input_products__input .input_products__input_field input[type="password"]{border:1px solid #bbbbbb;width:calc(100% - 20px);padding:5px 10px;border-radius:5px;transition:100ms ease-in-out}.input_products .input_products__input .input_products__input_field input[type="text"]:hover,.input_products .input_products__input .input_products__input_field input[type="password"]:hover{border-color:#888888}.input_products .input_products__input .input_products__input_field input[type="text"]:focus,.input_products .input_products__input .input_products__input_field input[type="password"]:focus{border:1px solid #4293b6}.input_products .input_products__input .input_products__input_field--error input[type="text"],.input_products .input_products__input .input_products__input_field--error input[type="password"]{border:1px solid #f73434 !important}.input_products .input_products__input .input_products__input_field:focus{border:1px solid #4293b6}@media (max-width: 768px){.input_products .input_products__input{flex-wrap:wrap}.input_products .input_products__input .input_products__input_name{margin-bottom:5px}.input_products .input_products__input .input_products__input_field{width:100%}.input_products .input_products__error{width:calc(100% - 20px)}}\n',""]),module.exports=exports},2729:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2730);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2730:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select{width:100%;position:relative;--completed: #c7e9ce;--defect: #ebbdba;--production: #eaebde}.select .select__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select .select__overlay--hidden{display:none}.select__error{width:100%;box-sizing:border-box;margin-top:1px;font-size:0.75rem;margin-top:-11px;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.select__error--hidden{display:none}.select__searchbar{display:flex;flex-direction:column;position:relative;margin-bottom:12px}.select__searchbar .select__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px !important;box-sizing:border-box;z-index:0;transition:100ms ease-in-out;min-height:2rem}.select__searchbar .select__input:hover{border-color:#888888}.select__searchbar .select__input:focus{border:1px solid #4293b6}.select__searchbar .select__input--error{border:1px solid #d48282 !important}.select__searchbar .main-form__button{font-size:0.8rem}.select__searchbar .tableview_products{width:calc(100% + 30px);margin-left:-15px}.select__options{position:absolute;width:100%;max-height:200px;overflow-y:auto;background-color:#fff;display:flex;flex-direction:column;font-size:80%;z-index:2;transform:scaleX(1);transition:0.1s ease-in-out;padding:5px 0;box-shadow:0 4px 4px rgba(0,0,0,0.22),0 0px 5px rgba(0,0,0,0.24);transform-origin:0 0;margin-top:-12px}.select__options--hidden{transform:scaleY(0)}.select__options .select__img{max-width:50px;width:100%;border-radius:2.5px;margin-right:10px}.select__options .sk-circle{max-width:50px;max-height:50px}.select__options .select__option_item{padding:5px 10px;cursor:pointer;background-color:#ffffff;transition:0.1s ease-in-out;display:flex;flex-direction:row;align-items:center;min-height:40px}.select__options .select__option_item:hover{color:#fff;background-color:#4293b6}.select__selected{font-size:90%;display:flex;flex-direction:column}.select__selected_photo{max-width:50px;max-height:50px;margin-right:10px;border-radius:5px}.select__selected_title{margin-top:5px;font-size:95%;color:#666;display:none}.select__selected_row{display:flex;flex-direction:row;justify-content:space-between;margin-top:12px;font-size:0.9rem}.select__selected_row:first-of-type{margin-top:0px}.select__selected_row .select__selected_item{display:flex;padding:0px 0px;border-radius:3px;width:calc(50% - 30px);margin-right:50px;position:relative;font-size:90%;align-items:center;border:1px solid #bbbbbb;transition:100ms ease-in-out;cursor:pointer;background-color:#ffffff;color:#333333}.select__selected_row .select__selected_item:hover{border-color:#999999}.select__selected_row .select__selected_item:last-child{margin-bottom:0}.select__selected_row .select__selected_item .select__img{position:absolute;left:calc(100% + 10px);width:22.5px;border-radius:105px}.select__selected_row .select__selected_item .select__selected_name{width:100%;height:fit-content;padding:10px 10px}.select__selected_row .select__selected_quantity,.select__selected_row .select__selected_packaging{width:calc(25% - 10px);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;font-size:90%;margin-right:10px;box-sizing:border-box;position:relative}.select__selected_row .select__selected_quantity span,.select__selected_row .select__selected_packaging span{position:absolute;top:-7px;left:6px;z-index:1;background-color:#ffffff;padding:0 5px;color:#777777;white-space:nowrap;border-radius:3px}.select__selected_row .select__selected_quantity input[type="text"],.select__selected_row .select__selected_quantity input[type="number"],.select__selected_row .select__selected_quantity textarea,.select__selected_row .select__selected_quantity select,.select__selected_row .select__selected_packaging input[type="text"],.select__selected_row .select__selected_packaging input[type="number"],.select__selected_row .select__selected_packaging textarea,.select__selected_row .select__selected_packaging select{border:1px solid #bbbbbb;font-size:110%;width:100%;min-width:100px;display:flex;padding:10px 10px;border-radius:3px;outline:none;position:relative;align-items:center;transition:100ms ease-in-out;z-index:0;padding-top:10px;box-sizing:border-box;color:#333333;height:auto}.select__selected_row .select__selected_quantity input[type="text"]:hover,.select__selected_row .select__selected_quantity input[type="number"]:hover,.select__selected_row .select__selected_quantity textarea:hover,.select__selected_row .select__selected_quantity select:hover,.select__selected_row .select__selected_packaging input[type="text"]:hover,.select__selected_row .select__selected_packaging input[type="number"]:hover,.select__selected_row .select__selected_packaging textarea:hover,.select__selected_row .select__selected_packaging select:hover{border-color:#888888}.select__selected_row .select__selected_quantity input[type="text"]:focus,.select__selected_row .select__selected_quantity input[type="number"]:focus,.select__selected_row .select__selected_quantity textarea:focus,.select__selected_row .select__selected_quantity select:focus,.select__selected_row .select__selected_packaging input[type="text"]:focus,.select__selected_row .select__selected_packaging input[type="number"]:focus,.select__selected_row .select__selected_packaging textarea:focus,.select__selected_row .select__selected_packaging select:focus{border:1px solid #4293b6}.select__selected_row .select__selected_quantity input::-webkit-outer-spin-button,.select__selected_row .select__selected_quantity input::-webkit-inner-spin-button,.select__selected_row .select__selected_packaging input::-webkit-outer-spin-button,.select__selected_row .select__selected_packaging input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.select__selected_row .select__selected_quantity input[type="number"],.select__selected_row .select__selected_packaging input[type="number"]{-moz-appearance:textfield}.select__selected_row .select__selected_packaging{margin-right:0;width:25%}.select__selected_row--minimized .select__selected_item{width:calc(50% - 30px);margin-right:10px}.select__selected_row--minimized .select__selected_quantity,.select__selected_row--minimized .select__selected_packaging{width:calc(25% + 15px);margin-right:10px}.select__selected_row--minimized .select__img{display:none}.select__selected_row--minimized div:last-child{margin-right:0}.select__selected .select__selected_item--completed{background-color:var(--completed)}.select__selected .select__selected_item--defect{background-color:var(--defect)}.select__selected .select__selected_item--production{background-color:var(--production)}.select--new{padding-right:10px;box-sizing:border-box;margin-top:0;margin-bottom:0 !important;display:flex;flex-direction:row-reverse;align-items:flex-start}.select--new .select__input{width:fit-content !important}.select--new .select__input_field{font-size:0.85rem !important}.select--new .select__input_name{position:absolute;top:-11px;left:6px;z-index:1;color:#555555;font-size:0.8rem !important;background-color:#ffffff;width:fit-content !important;padding:2px 5px}.select--new button{border-color:transparent;font-size:28px;color:#888;cursor:pointer;background-color:transparent;line-height:1rem;margin-top:4px}.select--new .select__selected{margin-top:0px;width:100%;margin-bottom:10px;margin-right:6px}.select--new .select__selected .select__selected_row{margin-top:0;align-items:flex-start}.select--new .select__selected .select__selected_row:not(:first-child){margin-top:8px}.select--new .select__selected_item{width:calc(100%);font-size:0.8rem}.select--new .select__selected_item .select-product__color_name{padding:5px 5px;height:3rem !important;max-height:1.5rem !important}.select--new .select__selected_item .select__selected_name{padding:5px 10px;height:3rem !important;max-height:1.6rem !important;white-space:nowrap;overflow-x:hidden;background-color:#ffffff;border-radius:5px;display:flex;align-items:center;font-size:0.9rem}.select--new .select__img{max-width:21px}.select--new input{max-width:none !important;min-width:0 !important}.select--new .select__selected_quantity{margin-right:0;width:calc(30%);min-width:110px;max-width:125px;font-size:0.8rem}.select--new .select__selected_quantity input{min-width:100% !important;box-sizing:border-box;height:3rem !important;max-height:2.25rem !important}.select--new .select__input_field{font-size:0.9rem}.select--readonly .select__input .select__input_name{border-radius:5px}.select--readonly .select__selected .select__selected_row:first-child{margin-top:0px !important}.select--readonly .select__selected .select__selected_row .select__selected_item .select__selected_name{max-height:1rem}.select--readonly .select__selected .select__selected_row .select__selected_quantity input{height:3rem !important;max-height:2.3rem !important}@media (max-width: 768px){.select{width:100% !important}.select .select__searchbar .select__input{padding:10px !important}.select__selected_row{flex-wrap:wrap}.select__selected_row .select__selected_item{margin-right:auto !important;width:calc(100% - 43px) !important}.select__selected_row .select__selected_packaging,.select__selected_row .select__selected_quantity{width:calc(50% - 2.5px);margin-top:10px;margin-right:5px}.select__selected_row .select__selected_quantity{min-width:80px}.select__selected_row .select__selected_packaging{min-width:150px}.select__selected_row--minimized{margin-left:0}.select__selected_row--minimized .select__selected_item{width:100% !important}}\n',""]),module.exports=exports},2731:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2732);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2732:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-product__color{width:100%;height:100%;display:flex;position:relative;align-items:center;justify-content:center;--completed: #c7e9ce;--defect: #ebbdba;--production: #eaebde}.select-product__color .select-product__color_overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select-product__color .select-product__color_overlay--hidden{display:none}.select-product__color .select-product__color_name{cursor:pointer;display:flex;text-align:left;justify-content:space-between;align-items:center;width:100%;height:fit-content;padding:10px 10px;transition:0.2s ease-in-out}.select-product__color .select-product__color_name .tableview__img{margin:0;width:15px}.select-product__color .select-product__color_picker{box-shadow:0 1px 1px rgba(0,0,0,0.22),0 0px 5px rgba(0,0,0,0.24);border-radius:2.5px;font-weight:normal;position:absolute;top:calc(100% - 1rem);transform-origin:0 0;width:100%;max-width:100px;z-index:1}.select-product__color .select-product__color_picker--hidden{transform:scaleY(0)}.select-product__color .select-product__color_picker .select-product__color_option{content:"";width:100%;padding:2.5px 0px;text-align:center;transition:100ms ease-in-out;cursor:pointer;color:#444444}.select-product__color .select-product__color_picker .select-product__color_option:first-child{border-top-left-radius:5px;border-top-right-radius:5px}.select-product__color .select-product__color_picker .select-product__color_option:last-child{border-bottom-left-radius:5px;border-bottom-right-radius:5px}.select-product__color .select-product__color_picker .select-product__color_option:hover{color:#999999}.select-product__color .select-product__color_picker .select-product__color_option--completed{background-color:var(--completed)}.select-product__color .select-product__color_picker .select-product__color_option--defect{background-color:var(--defect)}.select-product__color .select-product__color_picker .select-product__color_option--production{background-color:var(--production)}\n',""]),module.exports=exports},2766:function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(18),defineProperty_default=__webpack_require__.n(defineProperty),toConsumableArray=__webpack_require__(65),toConsumableArray_default=__webpack_require__.n(toConsumableArray),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),SelectFromButton=(__webpack_require__(640),__webpack_require__(444),__webpack_require__(636),__webpack_require__(181),__webpack_require__(638),__webpack_require__(639),__webpack_require__(281),__webpack_require__(213),__webpack_require__(987),__webpack_require__(41),__webpack_require__(241),__webpack_require__(641),__webpack_require__(333),__webpack_require__(2663),__webpack_require__(2727),__webpack_require__(2671)),react=__webpack_require__(0),SearchBar=(__webpack_require__(2729),__webpack_require__(642)),TableView=__webpack_require__(2787),FormWindow=__webpack_require__(335),ImgLoader=__webpack_require__(2689),ControlPanel=__webpack_require__(2656),useSort=__webpack_require__(2682),select_delete=(__webpack_require__(991),__webpack_require__(1584),__webpack_require__(1583),__webpack_require__(2690)),delete_default=__webpack_require__.n(select_delete),chevron_down=__webpack_require__(2679),chevron_down_default=__webpack_require__.n(chevron_down),jsx_runtime=(__webpack_require__(2731),__webpack_require__(1)),ColorPicker_ColorPicker_ColorPicker=function ColorPicker(props){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),showColorPicker=_useState2[0],setShowColorPicker=_useState2[1],clickOnColorOption=function clickOnColorOption(color){props.handleStatusChange(color,props.id),setShowColorPicker(!1)};return Object(jsx_runtime.jsxs)("div",{className:"select-product__color",children:[Object(jsx_runtime.jsx)("div",{className:showColorPicker?"select-product__color_overlay":"select-product__color_overlay select-product__color_overlay--hidden",onClick:function onClick(){return setShowColorPicker(!showColorPicker)}}),Object(jsx_runtime.jsxs)("div",{className:"select-product__color_name",onClick:function onClick(){return setShowColorPicker(!showColorPicker)},children:[props.defaultName,Object(jsx_runtime.jsx)("img",{className:"tableview__img",src:chevron_down_default.a})]}),Object(jsx_runtime.jsxs)("div",{className:showColorPicker?"select-product__color_picker":"select-product__color_picker select-product__color_picker--hidden",children:[Object(jsx_runtime.jsx)("div",{onClick:function onClick(){return clickOnColorOption("completed")},className:"select-product__color_option select-product__color_option--completed",children:"Завершено"}),Object(jsx_runtime.jsx)("div",{onClick:function onClick(){return clickOnColorOption("defect")},className:"select-product__color_option select-product__color_option--defect",children:"Приоритет"}),Object(jsx_runtime.jsx)("div",{onClick:function onClick(){return clickOnColorOption("production")},className:"select-product__color_option select-product__color_option--production",children:"В работе"})]})]})};ColorPicker_ColorPicker_ColorPicker.displayName="ColorPicker",ColorPicker_ColorPicker_ColorPicker.__docgenInfo={description:"",methods:[],displayName:"ColorPicker"};var InputProducts_ColorPicker_ColorPicker=ColorPicker_ColorPicker_ColorPicker;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/InputProducts/ColorPicker/ColorPicker.jsx"]={name:"ColorPicker",docgenInfo:ColorPicker_ColorPicker_ColorPicker.__docgenInfo,path:"src/utils/Form/InputProducts/ColorPicker/ColorPicker.jsx"});var functions_defaultPropsForLayoutFunctions={numberInput:"text",readOnly:!1,workshop:!1,handleParamChange:function handleParamChange(){},clickOnSelected:function clickOnSelected(){},handleStatusChange:function handleStatusChange(){}},functions_renderQuantity=function renderQuantity(index,item){var props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:functions_defaultPropsForLayoutFunctions,options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{customName:"Кол-во (шт.)".concat(props.readOnly?"":"*"),readOnly:!1};return Object(jsx_runtime.jsxs)("div",{className:"select__selected_quantity",children:[Object(jsx_runtime.jsx)("span",{children:options.customName}),Object(jsx_runtime.jsx)("input",{quantity_id:index,type:"number",name:"quantity",autoComplete:"off",defaultValue:0!=item.quantity?item.quantity:0,value:item.quantity,onChange:props.handleParamChange,disabled:props.readOnly||props.workshop||options.readOnly})]})};functions_renderQuantity.displayName="renderQuantity";var functions_renderNewQuantity=function renderNewQuantity(index,item){var props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:functions_defaultPropsForLayoutFunctions,options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{customName:"Отгружено (шт.)".concat(props.readOnly?"":"*"),readOnly:!1};return Object(jsx_runtime.jsxs)("div",{className:"select__selected_quantity",children:[Object(jsx_runtime.jsx)("span",{children:options.customName}),Object(jsx_runtime.jsx)("input",{quantityNew_id:index,type:"number",name:"quantityNew",autoComplete:"off",defaultValue:0,value:item.quantityNew,onChange:props.handleParamChange,disabled:options.readOnly})]})};functions_renderNewQuantity.displayName="renderNewQuantity";var functions_renderPackaging=function renderPackaging(index,item){var props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:functions_defaultPropsForLayoutFunctions,options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{customName:"Фасовка".concat(props.readOnly?"":"*"),readOnly:!1,marginRight:"0px"};return Object(jsx_runtime.jsxs)("div",{className:"select__selected_packaging",style:{marginRight:options.marginRight},children:[Object(jsx_runtime.jsx)("span",{children:options.customName}),Object(jsx_runtime.jsx)("input",{packaging_id:index,type:"text",name:"packaging",autoComplete:"off",defaultValue:item.packaging,value:item.packaging,onChange:props.handleParamChange,disabled:options.readOnly||props.workshop})]})};functions_renderPackaging.displayName="renderPackaging";var functions_renderSelectPackaging=function renderSelectPackaging(index,item){var _products$find,_products$find$packin,props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:functions_defaultPropsForLayoutFunctions,products=arguments.length>3?arguments[3]:void 0;return Object(jsx_runtime.jsx)("select",{onChange:props.handleParamChange,packaging_id:index,name:"packaging",defaultValue:item.packaging,value:item.packaging,disabled:props.readOnly||props.workshop,children:null===(_products$find=products.find((function(product){return product.id===Number.parseInt(item.productId)})))||void 0===_products$find||null===(_products$find$packin=_products$find.packings)||void 0===_products$find$packin?void 0:_products$find$packin.map((function(packagingItem,index){return Object(jsx_runtime.jsx)("option",{value:packagingItem.id,children:packagingItem.name},index)}))})};functions_renderSelectPackaging.displayName="renderSelectPackaging";var functions_renderSelectedItemName=function renderSelectedItemName(index,item){var props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:functions_defaultPropsForLayoutFunctions,options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{readOnly:!1,showColorPicker:!0,showDelete:!0};return Object(jsx_runtime.jsxs)("div",{className:"select__selected_item select__selected_item--"+(item.status?item.status:"production"),children:[!props.readOnly&&options.showColorPicker?Object(jsx_runtime.jsx)(InputProducts_ColorPicker_ColorPicker,{defaultName:item.name,id:item.id,handleStatusChange:props.handleStatusChange}):Object(jsx_runtime.jsx)("div",{className:"select__selected_name",children:item.name}),Object(jsx_runtime.jsx)("img",{id:index,className:"select__img",src:delete_default.a,alt:"",onClick:props.clickOnSelected})]})};functions_renderSelectedItemName.displayName="renderSelectedItemName",functions_renderQuantity.__docgenInfo={description:"",methods:[],displayName:"renderQuantity"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/InputProducts/functions.jsx"]={name:"renderQuantity",docgenInfo:functions_renderQuantity.__docgenInfo,path:"src/utils/Form/InputProducts/functions.jsx"}),functions_renderNewQuantity.__docgenInfo={description:"",methods:[],displayName:"renderNewQuantity"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/InputProducts/functions.jsx"]={name:"renderNewQuantity",docgenInfo:functions_renderNewQuantity.__docgenInfo,path:"src/utils/Form/InputProducts/functions.jsx"}),functions_renderPackaging.__docgenInfo={description:"",methods:[],displayName:"renderPackaging"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/InputProducts/functions.jsx"]={name:"renderPackaging",docgenInfo:functions_renderPackaging.__docgenInfo,path:"src/utils/Form/InputProducts/functions.jsx"}),functions_renderSelectPackaging.__docgenInfo={description:"",methods:[],displayName:"renderSelectPackaging"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/InputProducts/functions.jsx"]={name:"renderSelectPackaging",docgenInfo:functions_renderSelectPackaging.__docgenInfo,path:"src/utils/Form/InputProducts/functions.jsx"}),functions_renderSelectedItemName.__docgenInfo={description:"",methods:[],displayName:"renderSelectedItemName"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/InputProducts/functions.jsx"]={name:"renderSelectedItemName",docgenInfo:functions_renderSelectedItemName.__docgenInfo,path:"src/utils/Form/InputProducts/functions.jsx"});var useProductsList=__webpack_require__(2711),InputProducts_InputProducts_InputProducts=function InputProducts(props){var _props$products,_props$products2,_props$customSearch,_props$products5,_props$categories,_useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1],_useState3=Object(react.useState)(""),_useState4=slicedToArray_default()(_useState3,2),searchQueryCategory=_useState4[0],setSearchQueryCategory=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),selected=_useState6[0],setSelected=_useState6[1],_useProductsList=Object(useProductsList.a)(!props.products||!props.categories),products=_useProductsList.products,categories=_useProductsList.categories,_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),showWindow=_useState8[0],setShowWindow=_useState8[1],_useState9=Object(react.useState)(!1),_useState10=slicedToArray_default()(_useState9,2),closeWindow=_useState10[0],setCloseWindow=_useState10[1],_useState11=Object(react.useState)(!1),_useState12=slicedToArray_default()(_useState11,2),showOptions=_useState12[0],setShowOptions=_useState12[1],_useState13=Object(react.useState)(!1),_useState14=slicedToArray_default()(_useState13,2),showOverlay=_useState14[0],setShowOverlay=_useState14[1],_useSort=Object(useSort.a)(null!==(_props$products=props.products)&&void 0!==_props$products?_props$products:products,{ignoreURL:!0,sortOrder:{curSort:"name",name:"asc"},sortOptions:[{value:"name asc",text:"По алфавиту (А-Я)"},{value:"name desc",text:"По алфавиту (Я-А)"},{value:"weight desc",text:"По весу"}]},[null!==(_props$products2=props.products)&&void 0!==_props$products2?_props$products2:products]),sortPanel=_useSort.sortPanel,sortedData=_useSort.sortedData,clickOnInput=function clickOnInput(){return setShowOverlay(!showOverlay),setShowOptions(!showOptions)},clickOnOption=function clickOnOption(event){var value=event.currentTarget.getAttribute("name"),newData={id:event.currentTarget.getAttribute("id"),name:value,quantity:0,quantityNew:0,packaging:"",status:"production",productId:event.currentTarget.getAttribute("productId")};clickOnInput(),setSelected([].concat(toConsumableArray_default()(selected),[newData])),props.onChange([].concat(toConsumableArray_default()(selected),[newData]))},pressEscKey=Object(react.useCallback)((function(event){if(27===event.keyCode&&(console.log(showOptions,showOverlay),showOptions))return clickOnInput()}),[showOptions,showOverlay]);Object(react.useEffect)((function(){return void 0!==props.defaultValue&&setSelected(toConsumableArray_default()(props.defaultValue)),document.addEventListener("keydown",pressEscKey,!1),function(){document.removeEventListener("keydown",pressEscKey,!1)}}),[props.defaultValue,props.categories,showOptions,showOverlay]);var defaultPropsForLayoutFunctions={numberInput:props.numberInput,readOnly:props.readOnly,workshop:props.workshop,handleParamChange:function handleParamChange(event){return function handleParamChange(event){var value=event.target.value,name=event.target.getAttribute("name"),id=event.target.getAttribute(name+"_id"),productId=event.target.getAttribute(productId),newSelected=selected;newSelected=newSelected.map((function(item,index){return Object.assign({},item,defineProperty_default()({},name,index==id?value:item[name]))})),setSelected(toConsumableArray_default()(newSelected)),props.onChange(toConsumableArray_default()(newSelected))}(event)},clickOnSelected:function clickOnSelected(event){var id=event.target.getAttribute("id"),newSelected=selected;newSelected.splice(id,1),setSelected(toConsumableArray_default()(newSelected)),props.onChange(toConsumableArray_default()(newSelected))},handleStatusChange:function handleStatusChange(color,id){var newSelected=selected;newSelected=newSelected.map((function(item){return Object.assign({},item,{status:item.id==id?color:item.status})})),setSelected(toConsumableArray_default()(newSelected)),props.onChange(toConsumableArray_default()(newSelected))}},customLayoutOptions={productName:{render:function render(index,item,options){return functions_renderSelectedItemName(index,item,defaultPropsForLayoutFunctions,options)}},quantity:{render:function render(index,item,options){return functions_renderQuantity(index,item,defaultPropsForLayoutFunctions,options)}},newQuantity:{render:function render(index,item,options){return functions_renderNewQuantity(index,item,defaultPropsForLayoutFunctions,options)}},packaging:{render:function render(index,item,options){return functions_renderPackaging(index,item,defaultPropsForLayoutFunctions,options)}},selectPackaging:{render:function render(index,item){var _props$products4;return functions_renderSelectPackaging(index,item,defaultPropsForLayoutFunctions,null!==(_props$products4=props.products)&&void 0!==_props$products4?_props$products4:products)}}};return Object(jsx_runtime.jsx)("div",{className:"input_products",children:Object(jsx_runtime.jsxs)("div",{className:"input_products__input",children:[Object(jsx_runtime.jsxs)("div",{className:"input_products__input_name main-form__input_name--header",children:[props.inputName+(props.required?"*":""),!props.readOnly&&Object(jsx_runtime.jsx)(SelectFromButton.a,{text:"Выбрать продукцию",onClick:function onClick(){return setShowWindow(!showWindow)}})]}),Object(jsx_runtime.jsxs)("div",{className:"select",children:[Object(jsx_runtime.jsx)("div",{className:showOverlay?"select__overlay":"select__overlay select__overlay--hidden",onClick:function clickOverlay(){showOverlay&&clickOnInput()}}),!props.readOnly&&!props.workshop&&!1!==(null===(_props$customSearch=props.customSearch)||void 0===_props$customSearch?void 0:_props$customSearch.display)&&Object(jsx_runtime.jsxs)("div",{className:"select__searchbar",children:[Object(jsx_runtime.jsx)("input",{type:"text",className:!0===props.error?"select__input select__input--error":"select__input",onChange:function handleInputChange(event){setSearchQuery(event.target.value)},onClick:props.readOnly?null:clickOnInput,placeholder:props.searchPlaceholder,readOnly:props.readOnly||props.workshop}),Object(jsx_runtime.jsx)(FormWindow.a,{title:"Выбор продукции",content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SearchBar.a,{fullSize:!0,placeholder:"Введите название продукции для поиска...",setSearchQuery:setSearchQueryCategory}),Object(jsx_runtime.jsx)(ControlPanel.a,{itemsCount:"Всего: ".concat((null!==(_props$products5=props.products)&&void 0!==_props$products5?_props$products5:products).length," записей"),sorting:sortPanel}),Object(jsx_runtime.jsx)(TableView.a,{products:function filterSearchQuery(data){var query=searchQueryCategory.toLowerCase();return data.filter((function(item){return item.name.toLowerCase().includes(query)||item.id.toString().includes(query)||item.weight.toString().includes(query)||null!==item.comment&&item.comment.toLowerCase().includes(query)}))}(sortedData),categories:null!==(_props$categories=props.categories)&&void 0!==_props$categories?_props$categories:categories,searchQuery:searchQueryCategory,deleteItem:null,selectProduct:function selectProduct(id,value,productId){var newData={id:id,name:value,quantity:0,quantityNew:0,packaging:"",status:"production",productId:productId};setSelected([].concat(toConsumableArray_default()(selected),[newData])),props.onChange([].concat(toConsumableArray_default()(selected),[newData]))},closeWindow:closeWindow,setCloseWindow:setCloseWindow,setShowWindow:setShowWindow})]}),showWindow:showWindow,setShowWindow:setShowWindow})]}),!0===props.error&&Object(jsx_runtime.jsx)("div",{className:"select__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,defineProperty_default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),props.options&&Object(jsx_runtime.jsx)("div",{className:showOptions?"select__options":"select__options select__options--hidden",children:function search(){var _props$products3,searchArr=searchQuery.split(" ");return(null!==(_props$products3=props.products)&&void 0!==_props$products3?_props$products3:products).filter((function(item){var check=!0;return searchArr.map((function(searchWord){!1===item.name.toLowerCase().includes(searchWord.toLowerCase())&&(check=!1)})),!0===check}))}().map((function(item,index){return Object(jsx_runtime.jsxs)("div",{id:item.id,optionId:index,productId:item.id,name:item.name,className:"select__option_item",onClick:clickOnOption,children:[Object(jsx_runtime.jsx)(ImgLoader.a,{imgSrc:item.photo,imgClass:"select__img"}),Object(jsx_runtime.jsx)("div",{children:"№"+item.id+", "+item.name})]},item.id)}))}),Object(jsx_runtime.jsxs)("div",{className:"select__selected",children:[0!==selected.length&&Object(jsx_runtime.jsx)("span",{className:"select__selected_title",children:"Выбранная продукция:"}),selected.map((function(item,index){var _props$customSelected;return Object(jsx_runtime.jsx)("div",{className:props.readOnly||props.workshop||!0===(null===(_props$customSelected=props.customSelectedItem)||void 0===_props$customSelected?void 0:_props$customSelected.isMinimized)?"select__selected_row select__selected_row--minimized":"select__selected_row",children:props.customLayout?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object.entries(props.customLayout).map((function(layoutOption){return customLayoutOptions[layoutOption[0]].render(index,item,layoutOption[1])}))}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[functions_renderSelectedItemName(index,item,defaultPropsForLayoutFunctions),functions_renderQuantity(index,item,defaultPropsForLayoutFunctions),functions_renderPackaging(index,item,defaultPropsForLayoutFunctions,props.noPackaging?{readOnly:!0,customName:"Фасовка".concat(props.readOnly?"":"*"),marginRight:"0px"}:void 0)]})},item.id)}))]})]})]})})};InputProducts_InputProducts_InputProducts.displayName="InputProducts",InputProducts_InputProducts_InputProducts.__docgenInfo={description:"",methods:[],displayName:"InputProducts"};__webpack_exports__.a=InputProducts_InputProducts_InputProducts;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/InputProducts/InputProducts.jsx"]={name:"InputProducts",docgenInfo:InputProducts_InputProducts_InputProducts.__docgenInfo,path:"src/utils/Form/InputProducts/InputProducts.jsx"})},2847:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(640),__webpack_require__(444),__webpack_require__(281),__webpack_require__(41),__webpack_require__(0)),Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(2848),__webpack_require__(2680)),Utils_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2671),Utils_hooks__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2659),Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(648),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1),SelectClient=function SelectClient(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),closeWindow=_useState2[0],setCloseWindow=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3,2),clients=_useState4[0],setClients=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(0),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5,2),id=_useState6[0],setId=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState7,2),name=_useState8[0],setName=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState10=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){}),[]);var _useSearchBar=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_10__.e)(void 0,[],(function(query){""===query&&setClients([]),query.length>2&&function loadClients(query){setIsLoading(!0),Object(Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_8__.j)({name:query,city:query,type:null},[selectedOption]).then((function(response){return response.json()})).then((function(response){console.log(response),setIsLoading(!1),setClients(response)})).catch((function(error){setIsLoading(!1),console.log(error)}))}(query)}),[{text:"Везде",value:""},{text:"Город",value:"city"}]),searchBar=_useSearchBar.searchBar,selectedOption=_useSearchBar.selectedOption,columns=[{text:"Название",value:"name"},{text:"Сайт",value:"site",link:{getURL:function getURL(site){var _site$split;return site&&(null==site||null===(_site$split=site.split("//"))||void 0===_site$split?void 0:_site$split.length)>1?site:"https://".concat(site)},isOutside:!0,newTab:!0},formatFn:function formatFn(_ref2){var site=_ref2.site;return site&&site.split("//").length>1?site.split("//")[1]:site}},{text:"Контакты",value:"contacts",formatFn:function formatContacts(_ref){var contacts=_ref.contacts;return(null==contacts?void 0:contacts.length)>0?(""!==contacts[0].name?"".concat(contacts[0].name,", "):"")+contacts[0].phoneNumber:"Не указаны контакт. данные"}},{text:"Комментарий",value:"comment"}],_useFormWindow=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_10__.b)("Выбор клиента",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:[searchBar,0===clients.length?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{style:{padding:"10px 25px"},children:"Введите не менее 3 символов для начала поиска"}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{columns:columns,data:clients,loading:{isLoading:isLoading},onClick:function clickClient(_ref3){var id=_ref3.id,name=_ref3.name;setId(id),setName(name),props.onChange(id),toggleFormWindow(),setCloseWindow(!closeWindow)},options:{fullSize:!0}})]}),[closeWindow]),formWindow=_useFormWindow.formWindow,toggleFormWindow=_useFormWindow.toggleFormWindow;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"select-client",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"select-client__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"select-client__input_name main-form__input_name--header",children:[props.inputName+(props.required?"*":""),!props.readonly&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(Utils_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_9__.a,{text:"Выбрать клиента",onClick:function onClick(){return toggleFormWindow()}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"select-client__input_field",children:(0!==id||props.defaultValue)&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"select-client__searchbar",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("input",{type:"text",className:!0===props.error?"select-client__input select-client__input--error":"select-client__input",value:props.defaultValue&&""===name?props.defaultValue:name,placeholder:"Выберите клиента, нажав на кнопку 'Выбрать клиента'",disabled:!0})})})]}),!0===props.error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"select-client__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),formWindow]})};SelectClient.displayName="SelectClient",SelectClient.__docgenInfo={description:"",methods:[],displayName:"SelectClient"},__webpack_exports__.a=SelectClient,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Clients/SelectClients/SelectClients.jsx"]={name:"SelectClient",docgenInfo:SelectClient.__docgenInfo,path:"src/components/MainPage/Clients/SelectClients/SelectClients.jsx"})},2848:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2849);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2849:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-client{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:25px}.select-client .select-client__input{display:flex;width:100%;justify-content:space-between;flex-direction:column;align-items:flex-start}.select-client .select-client__input .select-client__input_name{color:#666;flex:0 1 20%;width:100%}.select-client .select-client__input .select-client__input_name--row{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.select-client .select-client__input .select-client__input_name--row .main-form__link{margin-left:20px}.select-client .select-client__input .select-client__input_field{width:calc(90% - 20px);width:100%}.select-client .select-client__error{width:100%;box-sizing:border-box;margin-top:1px;font-size:0.75rem;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.select-client .select-client__error--hidden{display:none}.select-client .main-form__button{font-size:0.8rem}.select-client .select-client__searchbar{display:flex;flex-direction:row;margin-top:5px;position:relative;min-height:2rem}.select-client .select-client__searchbar .select-client__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;z-index:0;transition:100ms ease-in-out}.select-client .select-client__searchbar .select-client__input:hover{border-color:#888888}.select-client .select-client__searchbar .select-client__input:focus{border:1px solid #4293b6}.select-client .select-client__searchbar .select-client__input--error{border:1px solid #f73434 !important}.select-client .select-client__searchbar .select-client__search_button{border:0;flex:0 1 15%;background-color:#4293b6;color:#fff;border-radius:5px;outline:none;cursor:pointer;padding:5px 10px;font-size:80%;transition:0.2s ease-in-out}.select-client .select-client__searchbar .select-client__search_button:hover{background-color:#519fc0}.select-client .main-window__list{position:relative;width:calc(100% + 30px) !important;margin-left:-15px}.select-client .main-window__list .main-window__list-item{cursor:pointer}.select-client .main-window__list .main-window__list-item span{align-items:center}.select-client .main-window__list .main-window__list-item span:nth-child(1){flex:0 1 15%}.select-client .main-window__list .main-window__list-item span:nth-child(2){flex:0 1 10%;max-width:120px;overflow:hidden;text-overflow:ellipsis}.select-client .main-window__list .main-window__list-item span:nth-child(3){flex:0 1 15%}.select-client .main-window__list .main-window__list-item span:nth-child(4){flex:0 1 30%;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.select-client .searchbar{padding-bottom:10px;margin-bottom:0px}@media (max-width: 768px){.select-client .select-client__input{flex-wrap:wrap;flex-direction:column}.select-client .select-client__input .select-client__input_name{width:100%}.select-client .select-client__input .select-client__input_field{width:100%}.select-client .select-client__input .select-client__input_field input{padding:10px !important}}\n",""]),module.exports=exports},3324:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__(181),__webpack_require__(281),__webpack_require__(443),__webpack_require__(241),__webpack_require__(283),__webpack_require__(242),__webpack_require__(334),__webpack_require__(640),__webpack_require__(444),__webpack_require__(1584),__webpack_require__(1583),__webpack_require__(333),__webpack_require__(0)),Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(3325),__webpack_require__(2660),__webpack_require__(2666)),Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2651),Utils_Form_InputUser_InputUser_jsx__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(2768),Utils_Form_InputProducts_InputProducts_jsx__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2766),Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(182),_App_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(214),Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2688),_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2670),_Clients_SelectClients_SelectClients_jsx__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(2847),_functions_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(2701),Utils_hooks__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(2659),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(1),EditRequest=function EditRequest(props){var _formInputs$client2,_useState=Object(react__WEBPACK_IMPORTED_MODULE_13__.useState)(1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),requestId=_useState2[0],setRequestId=_useState2[1],userContext=Object(react__WEBPACK_IMPORTED_MODULE_13__.useContext)(_App_js__WEBPACK_IMPORTED_MODULE_21__.a),requestsDefaultInputs=Object(_functions_js__WEBPACK_IMPORTED_MODULE_25__.i)(userContext.userData.username,props.type),_useForm=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_26__.a)(requestsDefaultInputs),_handleInputChange=_useForm.handleInputChange,formInputs=_useForm.formInputs,formErrors=_useForm.formErrors,setFormErrors=_useForm.setFormErrors,formIsValid=_useForm.formIsValid,updateFormInputs=_useForm.updateFormInputs,errorWindow=_useForm.errorWindow,_useState3=Object(react__WEBPACK_IMPORTED_MODULE_13__.useState)(!1),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];return Object(react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){document.title="Редактирование заявки";var id=props.history.location.pathname.split("edit/")[1];isNaN(Number.parseInt(id))?(alert("Неправильный индекс заявки!"),props.history.push(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.c[props.type].redirectURL)):(setRequestId(id),Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.j)(id).then((function(res){return res.json()})).then((function(oldRequest){updateFormInputs({date:oldRequest.date,oldProducts:oldRequest.requestProducts,requestProducts:oldRequest.requestProducts,quantity:oldRequest.quantity,responsible:oldRequest.responsible,status:oldRequest.status,shippingDate:null!==oldRequest.shippingDate?oldRequest.shippingDate:new Date,comment:oldRequest.comment,factory:oldRequest.factory,sum:oldRequest.sum,client:oldRequest.client,clientId:oldRequest.client?oldRequest.client.id:0})})).catch((function(error){console.log(error),alert("Неправильный индекс заявки!"),props.history.push(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.c[props.type].redirectURL)})))}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"edit-request",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"main-form",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("form",{className:"main-form__form",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"main-form__header main-form__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"main-form__title",children:"Редактирование заявки ".concat(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.c[props.type].title)})}),errorWindow,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"main-form__row",children:[userContext.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER","ROLE_WORKSHOP"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_16__.a,{inputName:"Дата заявки",required:!0,error:formErrors.date,name:"date",selected:Date.parse(formInputs.date),handleDateChange:function handleDateChange(value){return _handleInputChange("date",value)},errorsArr:formErrors,setErrorsArr:setFormErrors,readOnly:userContext.userHasAccess(["ROLE_WORKSHOP"])}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_16__.a,{inputName:"Дата отгрузки",name:"shippingDate",selected:Date.parse(formInputs.shippingDate),handleDateChange:function handleDateChange(value){return _handleInputChange("shippingDate",value)},errorsArr:formErrors,setErrorsArr:setFormErrors})]}),userContext.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER","ROLE_WORKSHOP"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_InputProducts_InputProducts_jsx__WEBPACK_IMPORTED_MODULE_19__.a,{inputName:"Продукция",userHasAccess:userContext.userHasAccess,required:!0,options:!0,onChange:function onChange(products){return _handleInputChange("requestProducts",products)},searchPlaceholder:"Введите название продукта для поиска...",defaultValue:formInputs.requestProducts,error:formErrors.requestProducts,errorsArr:formErrors,setErrorsArr:setFormErrors,workshop:userContext.userHasAccess(["ROLE_WORKSHOP"])}),userContext.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER","ROLE_WORKSHOP"])&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_InputUser_InputUser_jsx__WEBPACK_IMPORTED_MODULE_18__.a,{inputName:"Ответственный",userData:userContext.userData,required:!0,error:formErrors.responsible,defaultValue:formInputs.responsible,name:"responsible",handleUserChange:function handleUserChange(user){return _handleInputChange("responsible",user)},searchPlaceholder:"Введите имя пользователя для поиска...",errorsArr:formErrors,setErrorsArr:setFormErrors,readOnly:userContext.userHasAccess(["ROLE_WORKSHOP"])}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"main-form__item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"main-form__input_name",children:"Статус*"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"main-form__input_field",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("select",{name:"status",onChange:function onChange(_ref){var target=_ref.target;return _handleInputChange("status",target.value)},value:formInputs.status,children:_workshopVariables_js__WEBPACK_IMPORTED_MODULE_23__.b.map((function(status){return userContext.userHasAccess(status.access)?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("option",{value:status.oldName===formInputs.status?status.oldName:status.name,children:status.name}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("option",{style:{display:"none"},children:status.name})}))})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_17__.a,{inputName:"Комментарий",name:"comment",defaultValue:formInputs.comment,handleInputChange:function handleInputChange(_ref2){var target=_ref2.target;return _handleInputChange("comment",target.value)}}),userContext.userHasAccess(["ROLE_ADMIN","ROLE_MANAGER"])?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_17__.a,{inputName:"Сумма",name:"sum",type:"number",defaultValue:formInputs.sum,handleInputChange:function handleInputChange(_ref3){var target=_ref3.target;return _handleInputChange("sum",target.value)},errorsArr:formErrors,setErrorsArr:setFormErrors}):null,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_Clients_SelectClients_SelectClients_jsx__WEBPACK_IMPORTED_MODULE_24__.a,{inputName:"Клиент",userHasAccess:userContext.userHasAccess,defaultValue:0!==formInputs.clientId&&(null===(_formInputs$client2=formInputs.client)||void 0===_formInputs$client2?void 0:_formInputs$client2.name),required:!0,readOnly:userContext.userHasAccess(["ROLE_WORKSHOP"]),onChange:function onChange(value){return _handleInputChange("clientId",value)},error:formErrors.clientId,errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_20__.a,{text:"Вернуться назад",className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){return props.history.push(Object(_functions_js__WEBPACK_IMPORTED_MODULE_25__.g)(props.history,"edit/",props.type,formInputs))}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_20__.a,{text:"Обновить данные",isLoading:isLoading,className:"main-form__submit",onClick:function handleSubmit(){formIsValid()&&(setIsLoading(!0),Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.h)(formInputs,requestId).then((function(){var productsArr=formInputs.requestProducts.map((function(selected){var edited=!1,oldItem=null;if(formInputs.oldProducts.map((function(item){if(item.id===selected.id)return edited=!0,void(oldItem=item)})),oldItem!==selected)return edited?Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.g)({requestId:requestId,quantity:selected.quantity,status:selected.status,packaging:selected.packaging,name:selected.name},selected.id):Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.a)({requestId:requestId,quantity:selected.quantity,packaging:selected.packaging,status:selected.status,name:selected.name})}));return Promise.all(productsArr).then((function(){var productsArr=formInputs.oldProducts.map((function(item){var deleted=!0;return formInputs.requestProducts.map((function(selected){selected.id!==item.id||(deleted=!1)})),deleted&&Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.d)(item.id)}));return Promise.all(productsArr)}))})).then((function(){var _formInputs$client;if((null===(_formInputs$client=formInputs.client)||void 0===_formInputs$client?void 0:_formInputs$client.id)!==formInputs.clientId)return Object(Utils_RequestsAPI_requests__WEBPACK_IMPORTED_MODULE_22__.c)(requestId,formInputs.clientId)})).then((function(){return props.history.push(Object(_functions_js__WEBPACK_IMPORTED_MODULE_25__.g)(props.history,"edit/",props.type,formInputs))})).catch((function(error){setIsLoading(!1),console.log(error)})))}})]})]})})})};EditRequest.displayName="EditRequest",EditRequest.__docgenInfo={description:"",methods:[],displayName:"EditRequest"},__webpack_exports__.default=EditRequest,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/WorkshopsComponents/Forms/EditRequest/EditRequest.jsx"]={name:"EditRequest",docgenInfo:EditRequest.__docgenInfo,path:"src/components/MainPage/WorkshopsComponents/Forms/EditRequest/EditRequest.jsx"})},3325:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3326);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3326:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}\n",""]),module.exports=exports}}]);