(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{2862:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultStylesPDF})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createPDF})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getPDFTitleObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getInputElementTextPDF})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getTransportationListPdfText})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getRequestPdfText})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProductsFromRequestsListPdfText}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(51),__webpack_require__(36),__webpack_require__(165),__webpack_require__(476),__webpack_require__(1017),__webpack_require__(1019),__webpack_require__(2896)),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__),pdfmake__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2897),pdfmake__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(pdfmake__WEBPACK_IMPORTED_MODULE_8__),_functions_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(63),_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(302),defaultStylesPDF={title:{fontSize:18,alignment:"left"},subheader:{fontSize:14,alignment:"left"},regularText:{fontSize:11,alignment:"left"},tableHeader:{fontSize:11,color:"#555",alignment:"left"}},createPDF=function createPDF(data){var print=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,print?pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).print():pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).open()},getPDFTitleObject=function getPDFTitleObject(name){return{text:"".concat(name,"\n"),alignment:"center",style:"title"}},getInputElementTextPDF=function getInputElementTextPDF(title,value){return{text:[{text:"\n".concat(title,": \n"),style:"regularText",fontSize:12},{text:"".concat(value,"\n\n"),style:"subheader"}]}},getTransportationListPdfText=function getTransportationListPdfText(transportation){var transportationList=[],transportationInfo=[];transportation.map((function(item){return transportationInfo.push([{text:Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.f)(item.date),style:"regularText"},{text:item.cargo,style:"regularText"},{text:item.quantity,style:"regularText"},{text:item.sender,style:"regularText"},{text:item.recipient,style:"regularText"},{text:item.driver,style:"regularText"}])})),transportationList.push({table:{widths:[60,140,40,80,80,"*"],body:[[{text:"Дата",style:"tableHeader"},{text:"Товар",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Откуда",style:"tableHeader"},{text:"Куда",style:"tableHeader"},{text:"Водитель",style:"tableHeader"}]].concat(transportationInfo)}});var dd={info:{title:"Реестр транспортировок"},content:[getPDFTitleObject("Реестр транспортировок")].concat(transportationList),styles:defaultStylesPDF};return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,dd},getRequestPdfText=function getRequestPdfText(date,requestProducts,codeWord,workshopName,itemId){var productsArr=Object(_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__.a)(requestProducts,{fieldName:"name",direction:"asc"}).map((function(item){return[item.name,item.quantity,item.packaging,"",""]})),dd={info:{title:"Очередь производства №"+itemId},content:[getPDFTitleObject("Очередь производства  №".concat(itemId)),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",getInputElementTextPDF("Дата",Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.f)(date)),{text:"Продукция: ",style:"regularText",fontSize:12,margin:[0,0,0,5]},{table:{widths:["*",70,70,70,70],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Фасовка",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(productsArr))}},"\n",getInputElementTextPDF("Кодовое слово",codeWord)],styles:defaultStylesPDF};createPDF(dd)},sortRequestProducts=function sortRequestProducts(data){return data.sort((function(a,b){return a[0].localeCompare(b[0],void 0,{numeric:!0})<0?-1:a[0].localeCompare(b[0],void 0,{numeric:!0})>0?1:0}))},getProductsFromRequestsListPdfText=function getProductsFromRequestsListPdfText(products,workshopName){var dd={info:{title:"Очередь производства - список"},content:[getPDFTitleObject("Очередь производства - список"),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",sortRequestProducts(Object.entries(products)).map((function(category){if(Object.values(category[1]).length>0)return[{text:[{text:"".concat(category[0]," \n"),fontSize:12,style:"regularText",margin:[5,5,5,5]}]}].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(function formatProducts(products){return[{table:{margin:[0,5,0,5],widths:["*",100,80,80],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(sortRequestProducts(Object.entries(products)).map((function(product){return[product[0],product[1],"",""]}))))}}]}(category[1])),["\n"])}))],styles:defaultStylesPDF};createPDF(dd)}},2863:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/edit.efe0dc2a.svg"},2866:function(module,__webpack_exports__,__webpack_require__){"use strict";var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(477),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2871),__webpack_require__(1)),SelectFromButton=function SelectFromButton(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"Выбрать":_ref$text,_onClick=_ref.onClick;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"select-from-button",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"select-from-button__link",onClick:function onClick(event){event.preventDefault(),_onClick()},children:[text,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"select-from-button__img select-from-button__img--more"})]})})};SelectFromButton.displayName="SelectFromButton",SelectFromButton.__docgenInfo={description:"",methods:[],displayName:"SelectFromButton",props:{text:{defaultValue:{value:"'Выбрать'",computed:!1},required:!1},onClick:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=SelectFromButton,SelectFromButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/SelectFromButton/SelectFromButton.jsx"]={name:"SelectFromButton",docgenInfo:SelectFromButton.__docgenInfo,path:"src/components/Form/SelectFromButton/SelectFromButton.jsx"})},2867:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return months})),__webpack_require__.d(__webpack_exports__,"b",(function(){return days})),__webpack_require__.d(__webpack_exports__,"a",(function(){return customSelectStyles}));__webpack_require__(23);var months=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],days=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],customSelectStyles={container:function container(provided){return Object.assign({},provided,{width:"100%",borderColor:"1px solid #247fa7"})},option:function option(provided){return Object.assign({},provided,{borderColor:"1px solid #247fa7"})}}},2871:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(2872);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2872:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-from-button__link{display:flex;align-items:center;transition:100ms ease-in-out;color:#777777 !important;border-radius:3px;cursor:pointer;font-size:0.9rem;padding:2px 8px;padding-right:3px;margin-top:2px;width:fit-content;margin-left:10px}.select-from-button__link .select-from-button__img{width:20px;transition:margin-left 200ms ease-in-out}.select-from-button__link .select-from-button__img--plus{margin-left:7px}.select-from-button__link .select-from-button__img--plus path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link .select-from-button__img--more{transform:rotate(-90deg) !important}.select-from-button__link .select-from-button__img--more path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link:hover{color:#333333 !important}.select-from-button__link:hover .select-from-button__img--more{margin-left:8px}.select-from-button__link:hover .select-from-button__img--more path:first-child{fill:#55a1c1}.select-from-button__link:hover .select-from-button__img--plus path:first-child{fill:#55a1c1}\n",""]),module.exports=exports},2899:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return filterEmployeesBySearchQuery})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getEmployeesByWorkshopListPdfText})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getEmployeesListPdfText}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(257),__webpack_require__(165),__webpack_require__(672),__webpack_require__(673),__webpack_require__(83),__webpack_require__(475),__webpack_require__(201),__webpack_require__(36),__webpack_require__(51),__webpack_require__(63)),Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2862),filterEmployeesBySearchQuery=function filterEmployeesBySearchQuery(data,searchQuery){var query=searchQuery.toLowerCase();return data.filter((function(item){return null!==item.name&&(item.lastName.toLowerCase().includes(query)||item.name.toLowerCase().includes(query)||item.middleName.toLowerCase().includes(query)||item.id.toString().includes(query)||item.yearOfBirth&&item.yearOfBirth.toString().includes(query)||item.dateOfBirth&&item.dateOfBirth.toString().includes(query)||item.citizenship.toLowerCase().includes(query)||item.workshop.toLowerCase().includes(query)||item.position.toLowerCase().includes(query)||item.comment.toLowerCase().includes(query)||item.relevance.toLowerCase().includes(query))}))},getEmployeesTablePDF=function getEmployeesTablePDF(employeeInfo){return{table:{widths:["*",70,80,120,100],body:[[{text:"ФИО",style:"tableHeader"},{text:"Дата рождения",style:"tableHeader"},{text:"Гражданство",style:"tableHeader"},{text:"Должность",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(employeeInfo))}}},getEmployeesByWorkshopListPdfText=function getEmployeesByWorkshopListPdfText(){var employees=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],workshop=arguments.length>1?arguments[1]:void 0,employeesList=[],employeeInfo=[];employees.map((function(item){employeeInfo.push([Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.o)(item),Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.f)(item.yearOfBirth),item.citizenship,item.position,""])})),employeesList.push(getEmployeesTablePDF(employeeInfo));var dd={info:{title:"Список сотрудников - ".concat(workshop)},content:[Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.d)("Список сотрудников ".concat(workshop,"\n"))].concat(employeesList),styles:Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.b};Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.a)(dd)},getEmployeesListPdfText=function getEmployeesListPdfText(employees,workshops){var employeesList=[];workshops.map((function(workshop){employeesList.push(Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.c)("Подразделение",workshop));var employeeInfo=[];employees.map((function(employee){(workshop===employee.workshop&&"Уволен"!==employee.relevance||"Уволенные"===workshop&&"Уволен"===employee.relevance)&&employeeInfo.push([Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.o)(employee),Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.f)(employee.yearOfBirth),employee.citizenship,employee.position,""])})),employeesList.push(getEmployeesTablePDF(employeeInfo))}));var dd={info:{title:"Список сотрудников"},content:[Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.d)("Список сотрудников")].concat(employeesList),styles:Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.b};Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.a)(dd)}},2904:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getPreviousQuarterDates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getPreviousMonthDates})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getDaysArray}));__webpack_require__(201);var getPreviousQuarterDates=function getPreviousQuarterDates(date,value){var startDate,endDate,today=date,quarter=Math.floor(today.getMonth()/3);switch(value){case"current":startDate=new Date(today.getFullYear(),3*quarter,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+3,0);break;default:startDate=new Date(today.getFullYear(),3*quarter-3,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+3,0)}return{startDate:startDate,endDate:endDate}},getPreviousMonthDates=function getPreviousMonthDates(date,value){var startDate,endDate,today=date,month=today.getMonth();switch(value){case"current":startDate=new Date(today.getFullYear(),month,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+1,0);break;default:startDate=new Date(today.getFullYear(),month-1,1),endDate=new Date(startDate.getFullYear(),startDate.getMonth()+1,0)}return{startDate:startDate,endDate:endDate}},getDaysArray=function getDaysArray(start,end){for(var arr=[],dt=new Date(start);dt<=end;dt.setDate(dt.getDate()+1))arr.push(new Date(dt));return arr}},2956:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(257),__webpack_require__(165),__webpack_require__(36),__webpack_require__(51),__webpack_require__(23),__webpack_require__(0)),Utils_hooks__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(472),Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(302),_App__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(135),_functions__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2899),Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(63),workshops=[{name:"ЦехЛЭМЗ"},{name:"ЦехЛепсари"},{name:"ЦехЛиговский"},{name:"Офис"},{name:"Уволенные"}],filterEmployees=function filterEmployees(data,workshopItem){return data.filter((function(employee){return workshopItem===employee.workshop&&"Уволен"!==employee.relevance||"Уволенные"===workshopItem&&"Уволен"===employee.relevance}))},sortEmployees=function sortEmployees(data,searchQuery){return Object(Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_functions__WEBPACK_IMPORTED_MODULE_10__.a)(data,searchQuery),{fieldName:"lastName",direction:"asc"})};__webpack_exports__.a=function TableView(_ref){var isLoading=_ref.isLoading,searchQuery=_ref.searchQuery,employees=_ref.employees,deleteItem=_ref.deleteItem,onSelect=_ref.onSelect,userContext=Object(react__WEBPACK_IMPORTED_MODULE_6__.useContext)(_App__WEBPACK_IMPORTED_MODULE_9__.a),columns=[{text:"Подразделение",value:"name",itemsCount:function itemsCount(item){return"Уволенные"!==item.name?filterEmployees(employees,item.name).length:null}}],nestedColumns=[{text:"ФИО",value:"lastName",formatFn:function formatFn(item){return"".concat(item.lastName," ").concat(item.name," ").concat(item.middleName)}},{text:"Дата рождения",value:"dateOfBirth",formatFn:function formatFn(_ref2){var dateOfBirth=_ref2.dateOfBirth;return Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_11__.f)(dateOfBirth)}},{text:"Гражданство",value:""},{text:"Должность",value:"position"}],data=onSelect?Object(react__WEBPACK_IMPORTED_MODULE_6__.useMemo)((function(){return sortEmployees(employees,searchQuery)}),[employees,isLoading,searchQuery]):Object(react__WEBPACK_IMPORTED_MODULE_6__.useMemo)((function(){return workshops.map((function(workshop){return Object.assign({},workshop,{employees:sortEmployees(filterEmployees(employees,workshop.name),searchQuery)})}))}),[employees,isLoading,searchQuery]),_useTable=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_7__.i)({data:data,isLoading:isLoading,onClick:onSelect?function(item){return onSelect(item)}:void 0,columns:onSelect?nestedColumns:columns,actions:onSelect?void 0:function actions(item){return[{onClick:function onClick(){return Object(_functions__WEBPACK_IMPORTED_MODULE_10__.b)(item.employees,item.name)},icon:"print",text:"Печать",isOutside:!0}]},nestedTable:onSelect?void 0:{isLoading:isLoading,columns:nestedColumns,actions:function actionsNested(item){return[{elementType:"edit",title:"Редактирование сотрудника",link:"/dispatcher/employees/edit/".concat(item.id),isRendered:userContext.userHasAccess(["ROLE_ADMIN","ROLE_DISPATCHER","ROLE_ENGINEER","ROLE_WORKSHOP"])},{elementType:"delete",title:"Удаление сотрудника",onClick:function onClick(){return deleteItem(item.id)},isRendered:userContext.userHasAccess(["ROLE_ADMIN"])}]},fieldName:"employees"},options:onSelect?{fullSize:!0}:void 0});return _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useTable,1)[0]}},2976:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(77),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(36),__webpack_require__(165),__webpack_require__(23),__webpack_require__(0)),_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(3015),__webpack_require__(355)),_TableView_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2956),Components_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(675),Components_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2866),Utils_hooks__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(472),_functions__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2899),Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(63),Utils_hooks_useEmployeesList__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1039),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(1),SelectEmployee=function SelectEmployee(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(null),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState,2),employee=_useState2[0],setEmployee=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5,2),fullName=_useState6[0],setFullName=_useState6[1],_useEmployeesList=Object(Utils_hooks_useEmployeesList__WEBPACK_IMPORTED_MODULE_15__.a)(!props.employees),employees=_useEmployeesList.employees,setEmployees=_useEmployeesList.setEmployees,isLoadingEmployees=_useEmployeesList.isLoadingEmployees,_useSort=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_12__.h)(employees,{sortOrder:{curSort:"lastName",lastName:"asc"},sortOptions:[{value:"lastName asc",text:"По фамилии (А-Я)"},{value:"lastName desc",text:"По фамилии (Я-А)"}],ignoreURL:!0},[employees]),sortedData=_useSort.sortedData,sortPanel=_useSort.sortPanel;Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(props.employees&&0===employees.length)return setEmployees(props.employees)}),[props.employees,employees]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){var _props$defaultValue;"object"===_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(props.defaultValue)&&null!==(_props$defaultValue=props.defaultValue)&&void 0!==_props$defaultValue&&_props$defaultValue.lastName&&setEmployee(props.defaultValue)}),[props.defaultValue]);var _useFormWindow=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_12__.b)("Выбор сотрудника",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_8__.a,{fullSize:!0,setSearchQuery:setSearchQuery,placeholder:"Введите ФИО сотрудника для поиска..."}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(Components_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_10__.a,{sorting:sortPanel,itemsCount:"Всего: ".concat(employees.length," записей")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_TableView_jsx__WEBPACK_IMPORTED_MODULE_9__.a,{employees:Object(_functions__WEBPACK_IMPORTED_MODULE_13__.a)(sortedData,searchQuery),isLoading:isLoadingEmployees,searchQuery:searchQuery,onSelect:function clickEmployee(employee){var id=employee.id,_fullName=Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_14__.o)(employee);setFullName(_fullName),setEmployee(employee),props.handleEmployeeChange(id,_fullName,employee),toggleFormWindow()}})]})),formWindow=_useFormWindow.formWindow,toggleFormWindow=_useFormWindow.toggleFormWindow;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{className:"select-employee",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{className:"select-employee__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{className:"select-employee__input_name main-form__input_name--header",children:["".concat(props.inputName," ").concat(props.required?"*":""),!props.readOnly&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(Components_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{text:"Выбрать сотрудника",onClick:function onClick(){return toggleFormWindow()}})]}),employee?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{className:"select-employee__employee-info",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"employee-info__name",children:"".concat(employee.lastName," ").concat(employee.name," ").concat(employee.middleName)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"employee-info__workshop",children:employee.workshop}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"employee-info__position",children:employee.position})]}):(props.defaultValue&&"object"!==_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(props.defaultValue)||fullName)&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"select-employee__input_field",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"select-employee__searchbar",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("input",{type:"text",className:!0===props.error?"select-employee__input select-employee__input--error":"select-employee__input",defaultValue:props.defaultValue?props.defaultValue:fullName,placeholder:"Выберите работника, нажав на кнопку 'Выбрать сотрудника'",disabled:!0})})})]}),!0===props.error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"select-employee__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),formWindow]})};SelectEmployee.displayName="SelectEmployee",SelectEmployee.__docgenInfo={description:"",methods:[],displayName:"SelectEmployee"},__webpack_exports__.a=SelectEmployee,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Dispatcher/Employees/SelectEmployee/SelectEmployee.jsx"]={name:"SelectEmployee",docgenInfo:SelectEmployee.__docgenInfo,path:"src/components/MainPage/Dispatcher/Employees/SelectEmployee/SelectEmployee.jsx"})},3015:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3016);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3016:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-employee{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:25px}.select-employee .select-employee__input{display:flex;width:100%;justify-content:space-between;margin-top:5px;flex-direction:column;align-items:flex-start}.select-employee .select-employee__input .select-employee__input_name{color:#666;flex:0 1 calc(20% - 10px);padding-right:10px;width:100%;margin-bottom:5px}.select-employee .select-employee__input .select-employee__input_field{width:100%}.select-employee .main-form__button{font-size:0.8rem;padding:10px 10px}.select-employee__employee-info{border:1px solid #ccc;padding:5px 15px;border-radius:3px;width:100%;box-sizing:border-box;color:#333333;font-size:1rem}.select-employee__employee-info .employee-info__name{font-size:1.1rem}.select-employee__employee-info .employee-info__workshop{font-size:0.95rem}.select-employee__employee-info .employee-info__position{font-size:0.9rem;color:#777777}.select-employee .select-employee__error{width:100%;margin-top:1px;font-size:0.75rem;box-sizing:border-box;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.select-employee .select-employee__error--hidden{display:none}.select-employee .select-employee__searchbar{display:flex;flex-direction:row;position:relative;min-height:2rem}.select-employee .select-employee__searchbar .select-employee__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;z-index:0;transition:100ms ease-in-out;margin-top:0}.select-employee .select-employee__searchbar .select-employee__input:hover{border-color:#888888}.select-employee .select-employee__searchbar .select-employee__input:focus{border:1px solid #4293b6}.select-employee .select-employee__searchbar .select-employee__input--error{border:1px solid #f73434 !important}.select-employee .select-employee__searchbar .select-employee__search_button{border:0;flex:0 1 15%;background-color:#4293b6;color:#fff;border-top-right-radius:5px;border-bottom-right-radius:5px;outline:none;cursor:pointer;padding:5px 10px;font-size:80%;transition:0.2s ease-in-out}.select-employee .select-employee__searchbar .select-employee__search_button:hover{background-color:#519fc0}.select-employee .tableview-employees{width:100%}@media (max-width: 768px){.select-employee .select-employee__input{flex-wrap:wrap;flex-direction:column;align-items:flex-start}.select-employee .select-employee__input .select-employee__input_name{width:100%;margin-bottom:5px}.select-employee .select-employee__input .select-employee__input_field{width:100%}.select-employee .select-employee__input .select-employee__input_field input{padding:10px !important}}@media (max-width: 500px){.select-employee .select-from-button__link{margin-left:0;padding-left:0}.select-employee .select-employee__input_name{flex-direction:column;justify-content:flex-start;align-items:flex-start}}\n",""]),module.exports=exports},3018:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(36),__webpack_require__(165),__webpack_require__(51),__webpack_require__(257),__webpack_require__(1045),__webpack_require__(1784),__webpack_require__(1018),__webpack_require__(1016),__webpack_require__(674);var react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(0),Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(63),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2863),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_11__),react_router_dom__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(47),Utils_dataObjects_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2867),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(3019),__webpack_require__(1)),filterWorksByDate=function filterWorksByDate(item,date){return item.length>0?item[0].day===date.getDate()&&item[0].month===date.getMonth()+1&&item[0].year===date.getFullYear():item.day===date.getDate()&&item.month===date.getMonth()+1&&item.year===date.getFullYear()},EmployeeInfoPanel=function EmployeeInfoPanel(_ref){var _selectedInfo$employe,_selectedInfo$employe2,_selectedInfo$employe3,_selectedInfo$employe4,_selectedInfo$employe5,_selectedInfo$employe6,_selectedInfo$works,selectedInfo=_ref.selectedInfo,_ref$dates=_ref.dates,dates=void 0===_ref$dates?[]:_ref$dates,header=_ref.header;return Object(react__WEBPACK_IMPORTED_MODULE_9__.useEffect)((function(){console.log(selectedInfo)}),[selectedInfo]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__employee-wrapper",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info__employee-title",children:null!=header?header:"Данные сотрудника (".concat(Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.g)(dates[0])," - ").concat(Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.g)(dates[dates.length-1]),")")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__employee-general",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info__full-name",children:null!==(_selectedInfo$employe=null==selectedInfo?void 0:selectedInfo.employeeName)&&void 0!==_selectedInfo$employe?_selectedInfo$employe:"".concat(null===(_selectedInfo$employe2=selectedInfo.employee)||void 0===_selectedInfo$employe2?void 0:_selectedInfo$employe2.lastName," ").concat(null===(_selectedInfo$employe3=selectedInfo.employee)||void 0===_selectedInfo$employe3?void 0:_selectedInfo$employe3.name," ").concat(null===(_selectedInfo$employe4=selectedInfo.employee)||void 0===_selectedInfo$employe4?void 0:_selectedInfo$employe4.middleName)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info__workshop",children:null==selectedInfo||null===(_selectedInfo$employe5=selectedInfo.employee)||void 0===_selectedInfo$employe5?void 0:_selectedInfo$employe5.workshop}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info__position",children:null==selectedInfo||null===(_selectedInfo$employe6=selectedInfo.employee)||void 0===_selectedInfo$employe6?void 0:_selectedInfo$employe6.position})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info__employee-title",children:"Список работ"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info__employee-works-wrapper",children:void 0===(null==selectedInfo||null===(_selectedInfo$works=selectedInfo.works)||void 0===_selectedInfo$works?void 0:_selectedInfo$works.length)?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{children:"Нет учтенной работы"}):dates.map((function(date){var _selectedInfo$works2,_selectedInfo$employe7,filteredData=null==selectedInfo||null===(_selectedInfo$works2=selectedInfo.works)||void 0===_selectedInfo$works2?void 0:_selectedInfo$works2.filter((function(item){return filterWorksByDate(item,date)}));return filteredData.length>0?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__wrapper",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"employee-info__employee-title employee-info__employee-title--date",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_router_dom__WEBPACK_IMPORTED_MODULE_12__.a,{to:"/work-management/record-time?employee=".concat(null==selectedInfo||null===(_selectedInfo$employe7=selectedInfo.employee)||void 0===_selectedInfo$employe7?void 0:_selectedInfo$employe7.id,"&date=").concat(date.getFullYear(),",").concat(date.getMonth()+1,",").concat(date.getDate()),children:["".concat(Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.g)(date)," - ").concat(Utils_dataObjects_js__WEBPACK_IMPORTED_MODULE_13__.b[date.getDay()]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("img",{className:"employee-info__img",src:Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_11___default.a,alt:""})]})}),null==filteredData?void 0:filteredData.map((function(item){return item.length>0?item.map((function(workItem,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(WorksItem,{item:workItem},index)})):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(WorksItem,{item:item})}))]}):null}))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(WeekSummary,{selectedInfo:selectedInfo,dates:dates})]})})};EmployeeInfoPanel.displayName="EmployeeInfoPanel",EmployeeInfoPanel.__docgenInfo={description:"",methods:[],displayName:"EmployeeInfoPanel",props:{dates:{defaultValue:{value:"[]",computed:!1},required:!1}}},__webpack_exports__.a=EmployeeInfoPanel;var WorksItem=function WorksItem(_ref2){var item=_ref2.item;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__employee-works-item",style:{marginBottom:"15px",marginTop:"5px",marginLeft:"15px"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("span",{children:item.workList.work}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("span",{className:"employee-info__employee-hours",children:"".concat(item.hours," ч")}),(item.workControlProduct.length>0||(null==item?void 0:item.partsWorks.length)>0)&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__list",children:[item.workControlProduct.map((function(product){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(ProductItem,{item:product},product.id)})),item.partsWorks.map((function(draft){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(ProductItem,{item:draft},draft.id)}))]}),item.comment?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__comment",children:["Комментарий:",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("span",{children:item.comment})]}):null]})};WorksItem.displayName="WorksItem";var ProductItem=function ProductItem(_ref3){var _item$name,item=_ref3.item;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__list-item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("span",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window__mobile-text",children:"Название:"}),null!==(_item$name=item.name)&&void 0!==_item$name?_item$name:item.product.name]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("span",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"main-window__mobile-text",children:"Кол-во:"}),"".concat(Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.a)(item.quantity)," шт")]})]})};ProductItem.displayName="ProductItem";var WeekSummary=function WeekSummary(_ref4){var _selectedInfo$works3,selectedInfo=_ref4.selectedInfo,dates=_ref4.dates;console.log(null==selectedInfo?void 0:selectedInfo.works);var hours=null!=selectedInfo&&selectedInfo.works&&Array.isArray(null==selectedInfo?void 0:selectedInfo.works)?selectedInfo.works.reduce((function(sum,cur){return void 0!==dates.find((function(date){return filterWorksByDate(cur,date)}))?sum+(cur.length>0?cur.reduce((function(sumInner,curInner){return sumInner+curInner.hours}),0):cur.hours):sum}),0):new Array;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"employee-info__employee-title",children:["Всего:",(null==selectedInfo||null===(_selectedInfo$works3=selectedInfo.works)||void 0===_selectedInfo$works3?void 0:_selectedInfo$works3.length)>0?"".concat(Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.t)(hours)," ").concat(Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.s)(Number.parseInt(Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.t)(hours)),["час","часа","часов"])):0]})};WeekSummary.displayName="WeekSummary","undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/GeneralPage/ReportTablePage/EmployeeInfo/EmployeeInfo.jsx"]={name:"EmployeeInfoPanel",docgenInfo:EmployeeInfoPanel.__docgenInfo,path:"src/components/MainPage/GeneralPage/ReportTablePage/EmployeeInfo/EmployeeInfo.jsx"})},3019:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3020);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3020:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,'.employee-info{width:100%}.employee-info .employee-info__employee-wrapper{padding:0 15px}.employee-info .employee-info__employee-wrapper .employee-info__employee-general{padding:2.5px;padding-left:0;margin-bottom:25px}.employee-info .employee-info__employee-wrapper .employee-info__employee-general .employee-info__full-name{font-size:24px}.employee-info .employee-info__employee-wrapper .employee-info__employee-general .employee-info__workshop{font-size:18px}.employee-info .employee-info__employee-wrapper .employee-info__employee-general .employee-info__position{font-size:16px;color:#555555}.employee-info .employee-info__employee-wrapper .employee-info__employee-date{font-size:16px;width:100%;margin-left:0px;margin-bottom:10px;color:#777777}.employee-info .employee-info__employee-wrapper .employee-info__wrapper{border:1px solid #cccccc;border-radius:3px;background-color:#ffffff;padding:10px 20px;padding-bottom:0;margin-bottom:10px}.employee-info .employee-info__employee-wrapper .employee-info__wrapper:last-child{margin-bottom:0}.employee-info .employee-info__employee-wrapper .employee-info__list{display:flex;flex-direction:column;margin-top:5px;font-size:1rem}.employee-info .employee-info__employee-wrapper .employee-info__list-item{color:#555555;margin-bottom:10px}.employee-info .employee-info__employee-wrapper .employee-info__list-item:last-child{margin-bottom:0}.employee-info .employee-info__employee-wrapper .employee-info__list-item span{position:relative;margin-left:15px}.employee-info .employee-info__employee-wrapper .employee-info__list-item span:nth-child(1)::before{content:"";background-color:#dddddd;width:2px;height:80%;position:absolute;right:-10px;top:15%;border-radius:999px}.employee-info .employee-info__employee-wrapper .employee-info__list-item span:first-child{margin-left:0}.employee-info .employee-info__employee-wrapper .employee-info__employee-title{font-size:20px;color:#333333;position:relative;text-align:left;width:fit-content;margin-bottom:10px}.employee-info .employee-info__employee-wrapper .employee-info__employee-title--date{font-size:1.1rem;border-bottom:1px solid #bbb}.employee-info .employee-info__employee-wrapper .employee-info__employee-title--date::after{height:2px;top:calc(100% + 1px);width:100%}.employee-info .employee-info__employee-wrapper .employee-info__employee-title--date a{color:#333;display:inline-block;flex-direction:row;align-items:center;width:fit-content;cursor:pointer;line-height:1.5rem}.employee-info .employee-info__employee-wrapper .employee-info__employee-title--date a .employee-info__img{margin-bottom:-5px;margin-left:5px;max-width:22px;transition:100ms ease-in-out}.employee-info .employee-info__employee-wrapper .employee-info__employee-title--date a:hover{color:#000}.employee-info .employee-info__employee-wrapper .employee-info__employee-title--date a:hover .employee-info__img{margin-left:10px}.employee-info .employee-info__employee-wrapper .employee-info__employee-hours{padding:3px 8px;border-radius:3px;border:1px solid #bbbbbb;background-color:#ffffff;margin:10px 0;margin-left:10px;white-space:nowrap;cursor:pointer;font-size:80%}.employee-info .employee-info__employee-wrapper .employee-info__comment{font-size:0.85rem;margin-top:5px;color:#888}.employee-info .employee-info__employee-wrapper .employee-info__comment span{margin-left:5px;color:#333}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper{padding:5px 0;margin-bottom:20px}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper .employee-info__employee-works-item{margin-top:20px}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper .employee-info__employee-works-item:first-child{margin-top:5px}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper .employee-info__employee-works-item:last-child .main-window__list{margin-bottom:0}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper .employee-info__employee-works-item .main-window__list{max-width:400px;margin:30px 0;margin-top:0px;margin-left:25px}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper .employee-info__employee-works-item .main-window__list .main-window__list-item{padding:7.5px 10px;font-size:75%}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper .employee-info__employee-works-item .main-window__list .main-window__list-item span:nth-child(1){flex:0 1 80%}.employee-info .employee-info__employee-wrapper .employee-info__employee-works-wrapper .employee-info__employee-works-item .main-window__list .main-window__list-item span:nth-child(2){flex:0 1 20%}@media (max-width: 768px){.employee-info .employee-info .main-window__list{margin:0 !important;margin-top:15px !important}.employee-info .employee-info .employee-info__employee-works-wrapper{padding-left:5px}}\n',""]),module.exports=exports},3355:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3356);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3356:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,".employee-page{display:flex;flex-direction:column;align-items:flex-start;width:100%;background-color:#f4f4f4;min-height:calc(100vh - 60px)}.employee-page .main-form{background-color:#f4f4f4;padding:0}.employee-page .select-employee{margin-top:15px;margin-bottom:15px;padding-left:25px;box-sizing:border-box}.employee-page .select-employee__searchbar{display:none}.employee-page .select-employee__employee-info{background-color:#fff}.employee-page .employee-page__button--loading{margin-top:15px;margin-bottom:15px;margin-left:25px;margin-right:auto;box-sizing:border-box}.employee-page .main-window__select{margin-top:5px;margin-right:15px;font-size:0.9rem}.employee-page .employee-page__employee-wrapper{padding-left:0}.employee-page .employee-info__employee-wrapper{padding:0 25px;max-width:600px}\n",""]),module.exports=exports},3567:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(7),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(201),__webpack_require__(51),__webpack_require__(257),__webpack_require__(36),__webpack_require__(23),__webpack_require__(0)),SelectEmployee=__webpack_require__(2976),Button=__webpack_require__(153),EmployeeInfo=__webpack_require__(3018),ControlPanel=__webpack_require__(675),functions=__webpack_require__(63),useWorkReportByRange=__webpack_require__(1062),App=__webpack_require__(135),dataObjects=(__webpack_require__(3355),__webpack_require__(2867)),getWeekDays=function getWeekDays(date){for(var week=[],curDate=new Date(date),i=1;i<=7;i++){var first=curDate.getDate()-curDate.getDay()+i,day=new Date(curDate.setDate(first));week.push(day)}return{week:week,startDate:week[0],endDate:week[6]}},time=__webpack_require__(2904),jsx_runtime=__webpack_require__(1),EmployeeReportPage_EmployeeReportPage_EmployeeReportPage=function EmployeeReportPage(){var _useState=Object(react.useState)(null),_useState2=slicedToArray_default()(_useState,2),selectedInfo=_useState2[0],setSelectedInfo=_useState2[1],_useState3=Object(react.useState)({startDate:getWeekDays(new Date).startDate,endDate:getWeekDays(new Date).endDate}),_useState4=slicedToArray_default()(_useState3,2),selectedDate=_useState4[0],setSelectedDate=_useState4[1],_useState5=Object(react.useState)("week"),_useState6=slicedToArray_default()(_useState5,2),curPeriod=_useState6[0],setCurPeriod=_useState6[1],userContext=Object(react.useContext)(App.a),timePeriods={week:{name:"Неделя",prevButton:{text:"Пред. неделя",onClick:function onClick(){return setSelectedDate((function(selectedDate){var newDate=new Date(new Date(selectedDate.startDate).setTime(selectedDate.startDate.getTime()-6048e5));return{startDate:newDate,endDate:getWeekDays(newDate).endDate}}))}},nextButton:{text:"Тек. неделя",onClick:function onClick(){return setSelectedDate({startDate:getWeekDays(new Date).startDate,endDate:getWeekDays(new Date).endDate})}},getDateList:function getDateList(){return Object(time.a)(selectedDate.startDate,selectedDate.endDate)},displayDates:function displayDates(){return"".concat(Object(functions.f)(selectedDate.startDate)," - ").concat(Object(functions.f)(selectedDate.endDate))},initData:function initData(){return setSelectedDate({startDate:getWeekDays(new Date).startDate,endDate:getWeekDays(new Date).endDate})}},month:{name:"Месяц",prevButton:{text:"Пред. месяц",onClick:function onClick(){return setSelectedDate((function(selectedDate){return{startDate:Object(time.b)(selectedDate.startDate).startDate,endDate:Object(time.b)(selectedDate.startDate).endDate}}))}},nextButton:{text:"Тек. месяц",onClick:function onClick(){return setSelectedDate({startDate:Object(time.b)(new Date,"current").startDate,endDate:Object(time.b)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(selectedDate.startDate,selectedDate.endDate)},displayDates:function displayDates(){return dataObjects.c[selectedDate.startDate.getMonth()]},initData:function initData(){return setSelectedDate({startDate:Object(time.b)(new Date,"current").startDate,endDate:Object(time.b)(new Date,"current").endDate})}},quarter:{name:"Квартал",prevButton:{text:"Пред. квартал",onClick:function onClick(){return setSelectedDate((function(selectedDate){return{startDate:Object(time.c)(selectedDate.endDate).startDate,endDate:Object(time.c)(selectedDate.endDate).endDate}}))}},nextButton:{text:"Тек. квартал",onClick:function onClick(){return setSelectedDate({startDate:Object(time.c)(new Date,"current").startDate,endDate:Object(time.c)(new Date,"current").endDate})}},getDateList:function getDateList(){return Object(time.a)(selectedDate.startDate,selectedDate.endDate)},displayDates:function displayDates(){return"".concat(Object(functions.f)(selectedDate.startDate)," - ").concat(Object(functions.f)(selectedDate.endDate))},initData:function initData(){return setSelectedDate({startDate:Object(time.c)(new Date,"current").startDate,endDate:Object(time.c)(new Date,"current").endDate})}}},_useWorkReportByRange=Object(useWorkReportByRange.a)(timePeriods[curPeriod].getDateList()),_useWorkReportByRange2=slicedToArray_default()(_useWorkReportByRange,2),workData=_useWorkReportByRange2[0],isLoadingWorkData=_useWorkReportByRange2[1];return Object(react.useEffect)((function(){var _workData$filter$map2,_workData$filter2;null!==selectedInfo&&setSelectedInfo(Object.assign({},selectedInfo,{worksId:null!==(_workData$filter$map2=workData.filter((function(item){return item.employee.id===selectedInfo.employeeId})).map((function(item){return item.id})))&&void 0!==_workData$filter$map2?_workData$filter$map2:[],works:null!==(_workData$filter2=workData.filter((function(item){return item.employee.id===selectedInfo.employeeId})))&&void 0!==_workData$filter2?_workData$filter2:[]}))}),[workData,selectedDate]),Object(jsx_runtime.jsx)("div",{className:"employee-page",children:Object(jsx_runtime.jsxs)("div",{className:"main-window",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__header main-window__header--full",children:Object(jsx_runtime.jsx)("div",{className:"main-window__title",children:"Отчет сотрудника"})}),Object(jsx_runtime.jsx)(ControlPanel.a,{styles:{marginTop:"-5px"},itemsCount:timePeriods[curPeriod].displayDates(),buttons:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("select",{className:"main-window__select",onChange:function onChange(_ref){var target=_ref.target;setCurPeriod(target.value),timePeriods[target.value].initData()},children:[Object(jsx_runtime.jsx)("option",{value:"week",children:"Неделя"}),Object(jsx_runtime.jsx)("option",{value:"month",children:"Месяц"}),Object(jsx_runtime.jsx)("option",{value:"quarter",children:"Квартал"})]}),Object(jsx_runtime.jsx)(Button.a,{text:timePeriods[curPeriod].prevButton.text,className:"main-window__button main-window__button--inverted",inverted:!0,isLoading:isLoadingWorkData,onClick:timePeriods[curPeriod].prevButton.onClick}),Object(jsx_runtime.jsx)(Button.a,{text:timePeriods[curPeriod].nextButton.text,className:"main-window__button main-window__button--inverted",inverted:!0,isLoading:isLoadingWorkData,onClick:timePeriods[curPeriod].nextButton.onClick})]})}),isLoadingWorkData?Object(jsx_runtime.jsx)(Button.a,{text:"Идет загрузка",className:"main-window__button employee-page__button--loading",isLoading:!0}):Object(jsx_runtime.jsx)("div",{className:"main-form",children:Object(jsx_runtime.jsx)(SelectEmployee.a,{userHasAccess:userContext.userHasAccess,inputName:"Выбор сотрудника",name:"employee",handleEmployeeChange:function handleEmployeeChange(value,name,employee){var _workData$filter$map,_workData$filter;return setSelectedInfo({employeeId:value,employeeName:name,employee:employee,worksId:null!==(_workData$filter$map=workData.filter((function(item){return item.employee.id===value})).map((function(item){return item.id})))&&void 0!==_workData$filter$map?_workData$filter$map:[],works:null!==(_workData$filter=workData.filter((function(item){return item.employee.id===value})))&&void 0!==_workData$filter?_workData$filter:[]})}})}),null===selectedInfo||isLoadingWorkData?null:Object(jsx_runtime.jsx)(EmployeeInfo.a,{selectedInfo:selectedInfo,dates:timePeriods[curPeriod].getDateList()})]})})};EmployeeReportPage_EmployeeReportPage_EmployeeReportPage.displayName="EmployeeReportPage",EmployeeReportPage_EmployeeReportPage_EmployeeReportPage.__docgenInfo={description:"",methods:[],displayName:"EmployeeReportPage"};__webpack_exports__.default=EmployeeReportPage_EmployeeReportPage_EmployeeReportPage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/ReportsPage/EmployeeReportPage/EmployeeReportPage.jsx"]={name:"EmployeeReportPage",docgenInfo:EmployeeReportPage_EmployeeReportPage_EmployeeReportPage.__docgenInfo,path:"src/components/MainPage/ReportsPage/EmployeeReportPage/EmployeeReportPage.jsx"})}}]);