(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{2653:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(41),__webpack_require__(213),__webpack_require__(181),__webpack_require__(0)),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2657),__webpack_require__(1)),PlaceholderLoading=function PlaceholderLoading(_ref){var _ref$items=_ref.items,items=void 0===_ref$items?3:_ref$items,itemClassName=_ref.itemClassName,_ref$minHeight=_ref.minHeight,minHeight=void 0===_ref$minHeight?"1.5rem":_ref$minHeight,placeholderContent=_ref.placeholderContent,wrapperClassName=_ref.wrapperClassName,_ref$itemStyles=_ref.itemStyles,itemStyles=void 0===_ref$itemStyles?{}:_ref$itemStyles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),elements=_useState2[0],setElements=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){for(var temp=[],count=items,i=1;i<=count;i++)temp.push(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading__item ".concat(itemClassName),style:Object.assign({minHeight:minHeight},itemStyles)}));setElements([].concat(temp))}),[]),placeholderContent?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:itemClassName,style:{minHeight:minHeight},children:placeholderContent},index)}))}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item){return item}))})};PlaceholderLoading.displayName="PlaceholderLoading",PlaceholderLoading.__docgenInfo={description:"",methods:[],displayName:"PlaceholderLoading",props:{items:{defaultValue:{value:"3",computed:!1},type:{name:"number"},required:!1,description:""},minHeight:{defaultValue:{value:"'1.5rem'",computed:!1},type:{name:"string"},required:!1,description:""},itemStyles:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},itemClassName:{type:{name:"string"},required:!1,description:""},wrapperClassName:{type:{name:"string"},required:!1,description:""},placeholderContent:{type:{name:"any"},required:!1,description:""}}},__webpack_exports__.a=PlaceholderLoading,PlaceholderLoading.propTypes={items:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number,minHeight:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,itemClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,wrapperClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,placeholderContent:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.any,itemStyles:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"]={name:"PlaceholderLoading",docgenInfo:PlaceholderLoading.__docgenInfo,path:"src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"})},2657:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2658);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2658:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,'@keyframes pulse-placeholder-loading{0%,100%{background-color:#e7e7e7}50%{background-color:#efefef}}@keyframes load{from{left:-150px}to{left:100%}}.placeholder-loading__item{height:1rem;background-color:#ddd;animation:pulse-placeholder-loading 1s infinite ease-in-out;position:relative;overflow:hidden;border-bottom:1px solid #bbb}.placeholder-loading__item::after{content:"";display:block;position:absolute;left:-150px;top:0;height:100%;width:150px;background:linear-gradient(to right, transparent 0%, #e8e8e8 50%, transparent 100%);animation:load 1s cubic-bezier(0.4, 0, 0.2, 1) infinite}\n',""]),module.exports=exports},2667:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),DESCRIPTORS=__webpack_require__(72),global=__webpack_require__(26),has=__webpack_require__(91),isObject=__webpack_require__(90),defineProperty=__webpack_require__(122).f,copyConstructorProperties=__webpack_require__(1589),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function description(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},2668:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),$reduce=__webpack_require__(2675).left,arrayMethodIsStrict=__webpack_require__(993),CHROME_VERSION=__webpack_require__(446),IS_NODE=__webpack_require__(445);$({target:"Array",proto:!0,forced:!arrayMethodIsStrict("reduce")||!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2671:function(module,__webpack_exports__,__webpack_require__){"use strict";var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(989),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2683),__webpack_require__(1)),SelectFromButton=function SelectFromButton(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"Выбрать":_ref$text,_onClick=_ref.onClick;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"select-from-button",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"select-from-button__link",onClick:function onClick(event){event.preventDefault(),_onClick()},children:[text,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"select-from-button__img select-from-button__img--more"})]})})};SelectFromButton.displayName="SelectFromButton",SelectFromButton.__docgenInfo={description:"",methods:[],displayName:"SelectFromButton",props:{text:{defaultValue:{value:"'Выбрать'",computed:!1},required:!1},onClick:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=SelectFromButton,SelectFromButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/Form/SelectFromButton/SelectFromButton.jsx"]={name:"SelectFromButton",docgenInfo:SelectFromButton.__docgenInfo,path:"src/utils/Form/SelectFromButton/SelectFromButton.jsx"})},2676:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/ok.2ad21b54.svg"},2683:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2684);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2684:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-from-button__link{display:flex;align-items:center;transition:100ms ease-in-out;color:#777777 !important;border-radius:3px;cursor:pointer;font-size:0.9rem;padding:2px 8px;padding-right:3px;margin-top:2px;width:fit-content;margin-left:10px}.select-from-button__link .select-from-button__img{width:20px;transition:margin-left 200ms ease-in-out}.select-from-button__link .select-from-button__img--plus{margin-left:7px}.select-from-button__link .select-from-button__img--plus path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link .select-from-button__img--more{transform:rotate(-90deg) !important}.select-from-button__link .select-from-button__img--more path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link:hover{color:#333333 !important}.select-from-button__link:hover .select-from-button__img--more{margin-left:8px}.select-from-button__link:hover .select-from-button__img--more path:first-child{fill:#55a1c1}.select-from-button__link:hover .select-from-button__img--plus path:first-child{fill:#55a1c1}\n",""]),module.exports=exports},2763:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getPriceListColumnValue})),__webpack_require__.d(__webpack_exports__,"c",(function(){return parseExcelData})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getExcelFileBlob}));var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(282),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(147),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),axios__WEBPACK_IMPORTED_MODULE_39__=(__webpack_require__(1587),__webpack_require__(2667),__webpack_require__(281),__webpack_require__(2795),__webpack_require__(2737),__webpack_require__(2738),__webpack_require__(2739),__webpack_require__(2740),__webpack_require__(2741),__webpack_require__(2742),__webpack_require__(2743),__webpack_require__(2744),__webpack_require__(2745),__webpack_require__(2746),__webpack_require__(2747),__webpack_require__(2748),__webpack_require__(2749),__webpack_require__(2750),__webpack_require__(2751),__webpack_require__(2752),__webpack_require__(2753),__webpack_require__(2754),__webpack_require__(2755),__webpack_require__(2756),__webpack_require__(2757),__webpack_require__(2758),__webpack_require__(2759),__webpack_require__(2760),__webpack_require__(241),__webpack_require__(242),__webpack_require__(2736),__webpack_require__(640),__webpack_require__(444),__webpack_require__(638),__webpack_require__(639),__webpack_require__(41),__webpack_require__(443),__webpack_require__(992)),axios__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_39__),xlsx__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(2761),xlsx__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(xlsx__WEBPACK_IMPORTED_MODULE_40__),getPriceListColumnValue=function getPriceListColumnValue(column,item){return"partnerPrice"===column.property?item.partnerName:"dealerPrice"===column.property?item.dealerName:"distributorPrice"===column.property&&item.distributorName},getPriceListDefaultParsedObject=function getPriceListDefaultParsedObject(item){return{id:item.id,groupImg1:"",groupImg2:"",groupImg3:"",groupImg4:"",footerImg:"",number:item.number,category:item.category,name:item.groupName,description:item.description,infoText:item.infoText,linkAddress:item.linkAddress,locationType:item.locationType,priceHeader:item.priceHeader,retailName:item.retailName,firstPriceName:item.firstPriceName,secondPriceName:item.secondPriceName,dealerName:item.dealerName,distributorName:item.distributorName,partnerName:item.partnerName,active:!0,isMinimized:!0,proprietaryItemText1:item.proprietaryItemText1,proprietaryItemText2:item.proprietaryItemText2}},getPriceListParsedProduct=function getPriceListParsedProduct(item){return{id:item.id,number:item.number,name:item.name,description:item.productDescription,units:item.units,lessThan1500Price:item.firstPrice?item.firstPrice.toFixed(2):0,lessThan5000Price:item.secondPrice?item.secondPrice.toFixed(2):0,cost:item.cost?item.cost.toFixed(2):0,retailMarketPrice:item.retailMarketPrice?item.retailMarketPrice.toFixed(2):0,retailPrice:item.retailPrice?item.retailPrice.toFixed(2):0,firstPrice:item.firstPrice?item.firstPrice.toFixed(2):0,secondPrice:item.secondPrice?item.secondPrice.toFixed(2):0,partnerPrice:item.partnerPrice?item.partnerPrice.toFixed(2):0,dealerPrice:item.dealerPrice?item.dealerPrice.toFixed(2):0,distributorPrice:item.distributorPrice?item.distributorPrice.toFixed(2):0,onSale:"да"===item.onSale}},parseExcelData=function parseExcelData(result){var data=new Uint8Array(result),wb=xlsx__WEBPACK_IMPORTED_MODULE_40___default.a.read(data,{type:"array"}),firstSheetName=wb.SheetNames[0],firstSheet=wb.Sheets[firstSheetName],excelRows=xlsx__WEBPACK_IMPORTED_MODULE_40___default.a.utils.sheet_to_json(firstSheet);if(0===excelRows.length)return alert("Файл пустой либо заполнен некорректно!");for(var disclaimer=excelRows[excelRows.length-1].id,titlePage={to:excelRows[0].titlePage,date:excelRows[1].titlePage,slogan:excelRows[2].titlePage,list:excelRows[3].titlePage.split("/"),active:!0,isMinimized:!0},parsedData=[],tempNumber="000",groupData=null,startId=0,endId=0,index=3;index<excelRows.length;index++){var item=excelRows[index];1===item.id&&(startId=index,endId=index,groupData=getPriceListDefaultParsedObject(item),tempNumber=item.number.substring(0,3));for(var products=[],i=startId;i<endId;i++)products.push(getPriceListParsedProduct(excelRows[i]));if(!item.number){parsedData.push(Object.assign({},groupData,{products:products}));break}item.number.includes(tempNumber)?endId++:(parsedData.push(Object.assign({},groupData,{products:products})),console.log(startId,index,item,excelRows[index]),groupData=getPriceListDefaultParsedObject(item),startId=index,endId=index+1,tempNumber=item.number.substring(0,3))}return console.log(parsedData),{parsedData:parsedData,disclaimer:disclaimer,titlePage:titlePage}},getExcelFileBlob=function(){var _ref=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee(url,filename){var type,headers,_args=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return type=_args.length>2&&void 0!==_args[2]?_args[2]:"blob",headers={"Content-Disposition":"attachment; filename=".concat(encodeURIComponent(filename)),"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},_context.next=4,axios__WEBPACK_IMPORTED_MODULE_39___default.a.get(url,{headers:headers,responseType:"arraybuffer"}).then((function(_ref2){var data=_ref2.data;return"blob"===type?new Blob([data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}):data})).catch((function(error){return console.log(error)}));case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}),_callee)})));return function getExcelFileBlob(_x,_x2){return _ref.apply(this,arguments)}}()},2772:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return clientCategoriesDefaultInputs})),__webpack_require__.d(__webpack_exports__,"b",(function(){return clientsDefaultInputs}));__webpack_require__(333);var clientCategoriesDefaultInputs=[{name:"name",defaultValue:"",isRequired:!0},{name:"visibility",defaultValue:"all"}],clientsDefaultInputs=[{name:"name",defaultValue:"",isRequired:!0},{name:"legalEntity",defaultValue:[]},{name:"contacts",defaultValue:[],isRequired:!0},{name:"workHistory",defaultValue:[]},{name:"site",defaultValue:"",isRequired:!0},{name:"comment",defaultValue:""},{name:"city",defaultValue:"",isRequired:!0},{name:"storageAddress",defaultValue:""},{name:"workCondition",defaultValue:""},{name:"price",defaultValue:""},{name:"discount",defaultValue:""},{name:"check",defaultValue:""},{name:"clientType",defaultValue:"Активные"},{name:"categoryId",defaultValue:0,isRequired:!0},{name:"categoryName",defaultValue:""},{name:"visibility",defaultValue:!0},{name:"nextDateContact",defaultValue:new Date((new Date).setDate((new Date).getDate()+7))},{name:"taxes",defaultValue:!1},{name:"priceId",defaultValue:0}]},2789:function(module,__webpack_exports__,__webpack_require__){"use strict";var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),FormErrorMessage=function FormErrorMessage(_ref){var _ref$error=_ref.error,error=void 0!==_ref$error&&_ref$error,hideError=_ref.hideError,Message=styled_components__WEBPACK_IMPORTED_MODULE_0__.b.div.withConfig({displayName:"FormErrorMessage__Message",componentId:"m52cp5-0"})(["border:1px solid #d48282;border-radius:3px;box-sizing:border-box;margin-top:1px;width:100%;height:1.6rem;padding:5px 10px;font-size:0.8rem;background-color:#fadada;cursor:pointer;text-align:left;color:#ad1c1c;"]);return error?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Message,{onClick:function onClick(event){event.preventDefault(),hideError()},children:"Поле не заполнено!"}):null};FormErrorMessage.displayName="FormErrorMessage",FormErrorMessage.__docgenInfo={description:"",methods:[],displayName:"FormErrorMessage",props:{error:{defaultValue:{value:"false",computed:!1},required:!1}}},__webpack_exports__.a=FormErrorMessage,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/FormErrorMessage/FormErrorMessage.jsx"]={name:"FormErrorMessage",docgenInfo:FormErrorMessage.__docgenInfo,path:"src/utils/FormErrorMessage/FormErrorMessage.jsx"})},2795:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(19),toInteger=__webpack_require__(336),thisNumberValue=__webpack_require__(2796),repeat=__webpack_require__(2797),fails=__webpack_require__(30),nativeToFixed=1..toFixed,floor=Math.floor,pow=function(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},multiply=function(data,n,c){for(var index=-1,c2=c;++index<6;)c2+=n*data[index],data[index]=c2%1e7,c2=floor(c2/1e7)},divide=function(data,n){for(var index=6,c=0;--index>=0;)c+=data[index],data[index]=floor(c/n),c=c%n*1e7},dataToString=function(data){for(var index=6,s="";--index>=0;)if(""!==s||0===index||0!==data[index]){var t=String(data[index]);s=""===s?t:s+repeat.call("0",7-t.length)+t}return s};$({target:"Number",proto:!0,forced:nativeToFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!fails((function(){nativeToFixed.call({})}))},{toFixed:function toFixed(fractionDigits){var e,z,j,k,number=thisNumberValue(this),fractDigits=toInteger(fractionDigits),data=[0,0,0,0,0,0],sign="",result="0";if(fractDigits<0||fractDigits>20)throw RangeError("Incorrect fraction digits");if(number!=number)return"NaN";if(number<=-1e21||number>=1e21)return String(number);if(number<0&&(sign="-",number=-number),number>1e-21)if(z=(e=function(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}(number*pow(2,69,1))-69)<0?number*pow(2,-e,1):number/pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(multiply(data,0,z),j=fractDigits;j>=7;)multiply(data,1e7,0),j-=7;for(multiply(data,pow(10,j,1),0),j=e-1;j>=23;)divide(data,1<<23),j-=23;divide(data,1<<j),multiply(data,1,1),divide(data,2),result=dataToString(data)}else multiply(data,0,z),multiply(data,1<<-e,0),result=dataToString(data)+repeat.call("0",fractDigits);return result=fractDigits>0?sign+((k=result.length)<=fractDigits?"0."+repeat.call("0",fractDigits-k)+result:result.slice(0,k-fractDigits)+"."+result.slice(k-fractDigits)):sign+result}})},2796:function(module,exports,__webpack_require__){var classof=__webpack_require__(244);module.exports=function(value){if("number"!=typeof value&&"Number"!=classof(value))throw TypeError("Incorrect invocation");return+value}},2797:function(module,exports,__webpack_require__){"use strict";var toInteger=__webpack_require__(336),requireObjectCoercible=__webpack_require__(185);module.exports=function repeat(count){var str=String(requireObjectCoercible(this)),result="",n=toInteger(count);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(str+=str))1&n&&(result+=str);return result}},2871:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(213),__webpack_require__(987),__webpack_require__(41),__webpack_require__(281),__webpack_require__(181),__webpack_require__(0)),Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(2872),__webpack_require__(2680)),Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(182),Utils_Form_NestedForm_NestedFormItem_NestedFormItem_jsx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2703),Utils_Form_AddToButton_AddToButton_jsx__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2681),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1),SelectLegalEntity=function SelectLegalEntity(props){var newEntity={name:"",inn:"",kpp:"",ogrn:"",bik:"",checkingAccount:"",legalAddress:"",factualAddress:"",isMinimized:!0},_useState=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([newEntity]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState,2),selected=_useState2[0],setSelected=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(!1),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(!1),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState5,2),defaultValueLoaded=_useState6[0],setDefaultValueLoaded=_useState6[1];Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){void 0===props.defaultValue||0===props.defaultValue.length||defaultValueLoaded||(setDefaultValueLoaded(!0),setSelected(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(props.defaultValue)))}),[props.defaultValue,selected]);var deleteLegalEntity=function deleteLegalEntity(index){var temp=selected;temp.splice(index,1),setSelected(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp)),props.handleLegalEntityChange(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp))},getInputElement=function getInputElement(name,index,item){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("input",{type:"text",name:name,index:index,autoComplete:"off",onChange:function onChange(_ref){var target=_ref.target;return function handleInputChange(index,name,value){var temp=selected,originalItem=selected[index];temp.splice(index,1,Object.assign({},originalItem,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,value))),setSelected(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp)),props.handleLegalEntityChange(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp))}(index,name,target.value)},value:item[name],readOnly:props.readOnly})};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"select-legal-entity",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"main-form__item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"main-form__input_name main-form__input_name--header",children:["Юридическое лицо",!props.readOnly&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(Utils_Form_AddToButton_AddToButton_jsx__WEBPACK_IMPORTED_MODULE_13__.a,{text:"Добавить юридическое лицо",onClick:function handleNewLegalEntity(){setSelected([].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(selected),[newEntity])),props.handleLegalEntityChange([].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(selected),[newEntity]))}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"select-legal-entity__selected",children:selected.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(Utils_Form_NestedForm_NestedFormItem_NestedFormItem_jsx__WEBPACK_IMPORTED_MODULE_12__.a,{item:item,index:index,readOnly:props.readOnly,itemsLength:selected.length,handleDeleteItem:deleteLegalEntity,isMinimizedDefault:props.isMinimizedDefault,headerItems:[{text:"Название",value:item.name,placeholder:"Введите название...",style:{flex:"0 1 30%"}},{text:"Адрес",value:item.legalAddress,placeholder:"Введите адрес...",style:{flex:"0 1 50%"}},{text:"ИНН",value:item.inn,placeholder:"Введите ИНН...",style:{flex:"0 1 20%",maxWidth:"120px"}}],formInputs:[{name:"Название",element:getInputElement("name",index,item)},{name:"ИНН",element:getInputElement("inn",index,item)},{name:"КПП",element:getInputElement("kpp",index,item)},{name:"ОГРН",element:getInputElement("ogrn",index,item)},{name:"БИК",element:getInputElement("bik",index,item)},{name:"Расчетный счет",element:getInputElement("checkingAccount",index,item)},{name:"Юридический адрес",element:getInputElement("legalAddress",index,item)},{name:"Фактический адрес",element:getInputElement("factualAddress",index,item)}],bottomButton:!props.readOnly&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{text:"Загрузить данные по ИНН",isLoading:isLoading,className:"select-legal-entity__button",onClick:function onClick(){return function fetchINNData(item,index){setIsLoading(!0),Object(Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_10__.i)({query:item.inn,branch_type:"MAIN"}).then((function(res){return res.json()})).then((function(res){var _res$suggestions$0$da;return console.log(res),res.suggestions.length>0?Object.assign(Object.assign({},item,{name:res.suggestions[0].data.name.short_with_opf,kpp:res.suggestions[0].data.kpp,ogrn:res.suggestions[0].data.ogrn,legalAddress:res.suggestions[0].data.address.value,legalEntity:null===(_res$suggestions$0$da=res.suggestions[0].data.management)||void 0===_res$suggestions$0$da?void 0:_res$suggestions$0$da.name})):null})).then((function(newData){null!==newData?Object(Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_10__.e)({query:newData.name}).then((function(res){return res.json()})).then((function(res){console.log(res),setIsLoading(!1);var temp=selected;temp.splice(index,1,Object.assign({},item,newData,{bik:res.suggestions.length>0?res.suggestions[0].data.bic:""})),setSelected(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp)),props.handleLegalEntityChange(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp)),setIsLoading(!1)})):(alert("Не найдено данных с данным ИНН"),setIsLoading(!1))}))}(item,index)}})},index)}))})]})})};SelectLegalEntity.displayName="SelectLegalEntity",SelectLegalEntity.__docgenInfo={description:"",methods:[],displayName:"SelectLegalEntity"},__webpack_exports__.a=SelectLegalEntity,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Clients/SelectLegalEntity/SelectLegalEntity.jsx"]={name:"SelectLegalEntity",docgenInfo:SelectLegalEntity.__docgenInfo,path:"src/components/MainPage/Clients/SelectLegalEntity/SelectLegalEntity.jsx"})},2872:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2873);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2873:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-legal-entity{width:calc(100% - 20px);position:relative}.select-legal-entity .main-form__item{width:100%}.select-legal-entity__selected{width:100%}.select-legal-entity .select-legal-entity__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select-legal-entity .select-legal-entity__overlay--hidden{display:none}.select-legal-entity .button{font-size:0.8rem}\n",""]),module.exports=exports},2874:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(213),__webpack_require__(987),__webpack_require__(41),__webpack_require__(181),__webpack_require__(281),__webpack_require__(0)),Utils_Form_AddToButton_AddToButton_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2681),Utils_Form_NestedForm_NestedFormItem_NestedFormItem_jsx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2703),Utils_FormErrorMessage_FormErrorMessage_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2789),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__(2875),__webpack_require__(1)),SelectContacts=function SelectContacts(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([{name:"",lastName:"",email:"",position:"",phoneNumber:"",isMinimized:!1}]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState,2),selected=_useState2[0],setSelected=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(!1),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3,2),defaultValueLoaded=_useState4[0],setDefaultValueLoaded=_useState4[1];Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){void 0===props.defaultValue||0===props.defaultValue.length||defaultValueLoaded||(setDefaultValueLoaded(!0),setSelected(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(props.defaultValue)))}),[props.defaultValue,selected]);var deleteContact=function deleteContact(index){var temp=selected;temp.splice(index,1),setSelected(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp)),props.handleContactsChange(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp))},handleInputChange=function handleInputChange(event){var id=event.target.getAttribute("index"),name=event.target.getAttribute("name"),value=event.target.value,temp=selected,originalItem=selected[id];temp.splice(id,1,Object.assign({},originalItem,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,value))),setSelected(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp)),props.handleContactsChange(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(temp))};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"select-contacts",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"main-form__item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"main-form__input_name main-form__input_name--header",children:["Контактное лицо*",!props.readOnly&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Utils_Form_AddToButton_AddToButton_jsx__WEBPACK_IMPORTED_MODULE_9__.a,{text:"Добавить контактное лицо",onClick:function handleNewContact(){setSelected([].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(selected),[{name:"",lastName:"",email:"",position:"",phoneNumber:"",isMinimized:!0}])),props.handleContactsChange([].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(selected),[{name:"",lastName:"",email:"",position:"",phoneNumber:""}]))}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"main-form__input_field",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"select-contacts__selected",children:selected.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Utils_Form_NestedForm_NestedFormItem_NestedFormItem_jsx__WEBPACK_IMPORTED_MODULE_10__.a,{item:item,index:index,readOnly:props.readOnly,itemsLength:selected.length,handleDeleteItem:deleteContact,isMinimizedDefault:props.isMinimizedDefault,headerItems:[{text:"ФИО",value:""===item.lastName&&""===item.name?"":"".concat(item.lastName," ").concat(item.name),placeholder:"Введите ФИО..."},{text:"E-mail",value:item.email,placeholder:"Введите email..."},{text:"Телефон",value:item.phoneNumber,placeholder:"Введите телефон..."}],formInputs:[{name:"Имя",element:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("input",{type:"text",name:"name",index:index,autoComplete:"off",onChange:handleInputChange,defaultValue:item.name,readOnly:props.readOnly})},{name:"Фамилия",element:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("input",{type:"text",name:"lastName",index:index,autoComplete:"off",onChange:handleInputChange,defaultValue:item.lastName,readOnly:props.readOnly})},{name:"Должность",element:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("input",{type:"text",name:"position",index:index,autoComplete:"off",onChange:handleInputChange,defaultValue:item.position,readOnly:props.readOnly})},{name:"E-mail",element:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("input",{type:"text",name:"email",index:index,autoComplete:"off",onChange:handleInputChange,defaultValue:item.email,readOnly:props.readOnly})},{name:"Номер телефона",element:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("input",{type:"text",name:"phoneNumber",index:index,autoComplete:"off",onChange:handleInputChange,defaultValue:item.phoneNumber,readOnly:props.readOnly})}]},index)}))})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Utils_FormErrorMessage_FormErrorMessage_jsx__WEBPACK_IMPORTED_MODULE_11__.a,{error:props.error,hideError:props.hideError})]})})};SelectContacts.displayName="SelectContacts",SelectContacts.__docgenInfo={description:"",methods:[],displayName:"SelectContacts"},__webpack_exports__.a=SelectContacts,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Clients/SelectContacts/SelectContacts.jsx"]={name:"SelectContacts",docgenInfo:SelectContacts.__docgenInfo,path:"src/components/MainPage/Clients/SelectContacts/SelectContacts.jsx"})},2875:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2876);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2876:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-contacts{width:calc(100% - 20px);position:relative}.select-contacts .main-form__item{width:100%}.select-contacts .select-contacts__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select-contacts .select-contacts__overlay--hidden{display:none}.select-contacts .button{font-size:0.8rem}.select-contacts__selected{width:100%}.select-contacts__selected_item{background-color:#dddddd;border-radius:5px;padding:0px 15px;margin-top:5px;width:calc(100% - 30px);position:relative;transition:0.2s ease-in-out}.select-contacts__selected_item--minimized{width:calc(100% - 80px)}.select-contacts__selected_item:hover{background-color:#c4c4c4}.select-contacts__selected_item .select-contacts__img{position:absolute;right:-35px;cursor:pointer;top:25%}.select-contacts__selected_item .select-contacts__selected_header{display:flex;cursor:pointer;padding:10px 0px}.select-contacts__selected_item .select-contacts__selected_header .select-contacts__selected_name:nth-of-type(1){flex:0 1 40%}.select-contacts__selected_item .select-contacts__selected_header .select-contacts__selected_name:nth-of-type(2){flex:0 1 30%;text-align:center}.select-contacts__selected_item .select-contacts__selected_header .select-contacts__selected_name:nth-of-type(3){flex:0 1 30%;text-align:center}.select-contacts__selected_item .select-contacts__selected_header .select-contacts__selected_name span:first-of-type{font-size:70%}.select-contacts__selected_item .select-contacts__selected_form{transform-origin:0 0;min-height:100px;height:190px;width:calc(100%);padding-bottom:10px;transition:0.2s ease-in-out}.select-contacts__selected_item .select-contacts__selected_form--hidden{transform:scaleY(0);min-height:0;height:0;transition:0.2s ease-in-out;padding:0}.select-contacts__selected_item .select-contacts__selected_form .select-contacts__item{width:calc(100% - 10px);margin:0 auto;display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-top:5px}.select-contacts__selected_item .select-contacts__selected_form .select-contacts__item .select-contacts__input_name{color:#666666;flex:0 1 20%;font-size:80%}.select-contacts__selected_item .select-contacts__selected_form .select-contacts__item .select-contacts__input_field{flex:0 1 80%}.select-contacts__selected_item .select-contacts__selected_form .select-contacts__item .select-contacts__input_field input{font-size:70%;border-radius:5px}@media (max-width: 768px){.select-contacts .select-contacts__selected_form{height:330px}.select-contacts .select-contacts__selected_form--hidden{height:0}.select-contacts .select-contacts__selected_header{flex-direction:column;align-items:flex-start}.select-contacts .select-contacts__item{width:100%;flex-direction:column !important}.select-contacts .select-contacts__input_name{width:100%}.select-contacts .select-contacts__selected_name{width:100%;display:flex;align-items:center;justify-content:space-between}.select-contacts .select-contacts__input_field{width:100%}}\n",""]),module.exports=exports},2877:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2878);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2878:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-client-category{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:25px}.select-client-category .select-client-category__input{width:100%;display:flex;justify-content:space-between;flex-direction:column;align-items:flex-start;margin-top:5px}.select-client-category .select-client-category__input .select-client-category__input_name{color:#666;flex:0 1 20%;width:100%}.select-client-category .select-client-category__input .select-client-category__input_field{width:100%}.select-client-category .select-client-category__error{width:100%;align-self:flex-end;margin-top:1px;font-size:0.75rem;background-color:#fadada;border:1px solid #d48282;color:#b24f4d;border-radius:3px;padding:5px 10px;box-sizing:border-box;transition:0.2s ease-in-out;cursor:pointer}.select-client-category .select-client-category__error--hidden{display:none}.select-client-category .select-client-category__searchbar{display:flex;flex-direction:row;position:relative}.select-client-category .select-client-category__searchbar .select-client-category__input{min-height:1.25rem;border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;z-index:0;transition:100ms ease-in-out}.select-client-category .select-client-category__searchbar .select-client-category__input:hover{border-color:#888888}.select-client-category .select-client-category__searchbar .select-client-category__input:focus{border:1px solid #4293b6}.select-client-category .select-client-category__searchbar .select-client-category__input--error{border:1px solid #d48282 !important}.select-client-category .form-window .searchbar{margin-bottom:0px}@media (max-width: 768px){.select-client-category .select-client-category__input{flex-wrap:wrap;flex-direction:column}.select-client-category .select-client-category__input .select-client-category__input_name{width:100%;margin-bottom:5px}.select-client-category .select-client-category__input .select-client-category__input_field{width:100%}.select-client-category .select-client-category__input .select-client-category__input_field input{padding:10px !important}}\n",""]),module.exports=exports},2879:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2880);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2880:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.client-categories__list{width:calc(100% + 30px);margin-left:-15px}.client-categories__list .main-window__list-item{cursor:pointer}.client-categories__list .main-window__list-item span:nth-child(1){flex:0 1 50%}@media (max-width: 768px){.client-categories__list .main-window__actions{display:none}}\n",""]),module.exports=exports},2881:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return clientsFormHeaderMenu}));var clientsFormHeaderMenu=function clientsFormHeaderMenu(name){return[{pageTitle:"История работы",pageName:"workHistory"},{pageTitle:"Данные ".concat(name,"а"),pageName:"clientData"}]}},2882:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2883);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2883:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,".select-pricefile{width:calc(100% - 20px);margin-bottom:20px}.select-pricefile .form-window__body{padding:0}.select-pricefile .form-window__body .main-window__list-item{cursor:pointer}.select-pricefile .form-window__body .main-window__list-item:not(.main-window__list-item--header){min-height:40px}.select-pricefile .form-window__body .main-window .control-panel{width:100%;margin-top:0px}.select-pricefile .form-window__body .main-window .control-panel .main-window__button{margin-left:15px}.select-pricefile .main-form__input_field p{display:flex;border:1px solid #ddd;padding:10px 15px;border-radius:3px;margin:0;width:100%;box-sizing:border-box;max-width:fit-content;color:#555;font-size:0.9rem;margin-right:auto}.select-pricefile .main-form__input_field p div{margin-right:20px}.select-pricefile .main-form__input_field p .main-window__link{margin-left:auto}.select-pricefile .main-form__input_field p span{margin-left:20px;cursor:pointer}.select-pricefile .main-form__input_field p span:hover{text-decoration:underline}.select-pricefile .main-form__input_field>span{margin:0;width:100%;box-sizing:border-box;color:#666666;font-size:0.9rem}\n",""]),module.exports=exports},2903:function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(18),defineProperty_default=__webpack_require__.n(defineProperty),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(41),__webpack_require__(281),__webpack_require__(0)),FormWindow=(__webpack_require__(2877),__webpack_require__(335)),SearchBar=__webpack_require__(642),ok=(__webpack_require__(181),__webpack_require__(990),__webpack_require__(636),__webpack_require__(638),__webpack_require__(639),__webpack_require__(2879),__webpack_require__(1585),__webpack_require__(2676)),ok_default=__webpack_require__.n(ok),PlaceholderLoading=__webpack_require__(2653),jsx_runtime=__webpack_require__(1),TableView_TableView_TableView=function TableView(props){return Object(react.useEffect)((function(){props.setShowWindow&&props.setShowWindow(!1)}),[props.closeWindow,props.data]),Object(jsx_runtime.jsx)("div",{className:"client-categories__list",children:Object(jsx_runtime.jsx)("div",{className:"main-window",children:Object(jsx_runtime.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)("span",{children:"Название"}),Object(jsx_runtime.jsx)("span",{children:"Видимость"}),Object(jsx_runtime.jsx)("div",{className:"main-window__actions",children:"Действия"})]}),props.isLoading&&Object(jsx_runtime.jsx)(PlaceholderLoading.a,{itemClassName:"main-window__list-item",minHeight:"20px",items:2}),props.data.filter((function(item){return item.name.toLowerCase().includes(props.searchQuery.toLowerCase())})).sort((function(a,b){return a.name.localeCompare(b.name,void 0,{numeric:!0})<0?-1:a.name.localeCompare(b.name,void 0,{numeric:!0})>0?1:0})).map((function(item){return Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item",onClick:function onClick(){props.selectCategory(item.id,item.name),props.setCloseWindow(!props.closeWindow)},children:[Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Название: "}),item.name]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Видимость: "}),item.visibility]}),Object(jsx_runtime.jsx)("div",{className:"main-window__actions",children:Object(jsx_runtime.jsx)("div",{className:"main-window__action",title:"Выбрать категорию",children:Object(jsx_runtime.jsx)("img",{className:"main-window__img",src:ok_default.a})})})]},item.id)}))]})})})};TableView_TableView_TableView.displayName="TableView",TableView_TableView_TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"};var SelectClientCategory_TableView_TableView=TableView_TableView_TableView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Clients/ClientCategories/SelectClientCategory/TableView/TableView.jsx"]={name:"TableView",docgenInfo:TableView_TableView_TableView.__docgenInfo,path:"src/components/MainPage/Clients/ClientCategories/SelectClientCategory/TableView/TableView.jsx"});var Categories=__webpack_require__(2802),SelectFromButton=__webpack_require__(2671),SelectClientCategory_SelectClientCategory_SelectClientCategory=function SelectClientCategory(props){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),showWindow=_useState2[0],setShowWindow=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),closeWindow=_useState4[0],setCloseWindow=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),categories=_useState6[0],setCategories=_useState6[1],_useState7=Object(react.useState)(""),_useState8=slicedToArray_default()(_useState7,2),searchQuery=_useState8[0],setSearchQuery=_useState8[1],_useState9=Object(react.useState)(0),_useState10=slicedToArray_default()(_useState9,2),id=_useState10[0],setId=_useState10[1],_useState11=Object(react.useState)(""),_useState12=slicedToArray_default()(_useState11,2),fullName=_useState12[0],setFullName=_useState12[1],_useState13=Object(react.useState)(!1),_useState14=slicedToArray_default()(_useState13,2),isLoading=_useState14[0],setIsLoading=_useState14[1],clientTypes={clients:{name:"клиент",getCategoriesFunction:function getCategoriesFunction(){return Object(Categories.d)()}},suppliers:{name:"поставщик",getCategoriesFunction:function getCategoriesFunction(){return Object(Categories.e)()}}};Object(react.useEffect)((function(){0===categories.length&&loadCategories()}),[]);var loadCategories=function loadCategories(){setIsLoading(!0),clientTypes[props.type].getCategoriesFunction().then((function(res){return res.json()})).then((function(res){setCategories(res),setIsLoading(!1)})).catch((function(error){console.log(error),setIsLoading(!0)}))};return Object(jsx_runtime.jsxs)("div",{className:"select-client-category",children:[Object(jsx_runtime.jsx)("div",{className:"select-client-category__input",children:Object(jsx_runtime.jsxs)("div",{className:"select-client-category__input_name main-form__input_name--header",children:[props.inputName+(props.required?"*":""),!props.readOnly&&Object(jsx_runtime.jsx)(SelectFromButton.a,{text:"Выбрать категорию",onClick:function onClick(){return setShowWindow(!showWindow)}}),Object(jsx_runtime.jsx)("div",{className:"select-client-category__input_field",children:(0!==id||props.defaultValue)&&Object(jsx_runtime.jsx)("div",{className:"select-client-category__searchbar",children:Object(jsx_runtime.jsx)("input",{type:"text",className:!0===props.error?"select-client-category__input select-client-category__input--error":"select-client-category__input",defaultValue:props.defaultValue?props.defaultValue:fullName,disabled:!0,placeholder:"Выберите категорию, нажав на кнопку 'Выбрать категорию'"})})})]})}),!0===props.error&&Object(jsx_runtime.jsx)("div",{className:"select-client-category__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,defineProperty_default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),Object(jsx_runtime.jsx)(FormWindow.a,{title:"Выбор категории ".concat(clientTypes[props.type].name,"а"),content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SearchBar.a,{fullSize:!0,setSearchQuery:setSearchQuery,placeholder:"Введите запрос для поиска..."}),Object(jsx_runtime.jsx)(SelectClientCategory_TableView_TableView,{data:categories,searchQuery:searchQuery,userHasAccess:props.userHasAccess,selectCategory:function clickCategory(categoryId,categoryName){setId(categoryId),setFullName(categoryName),props.handleCategoryChange(categoryId,categoryName),setShowWindow(!showWindow)},setCloseWindow:setCloseWindow,closeWindow:closeWindow,setShowWindow:setShowWindow,isLoading:isLoading})]}),showWindow:showWindow,setShowWindow:setShowWindow})]})};SelectClientCategory_SelectClientCategory_SelectClientCategory.displayName="SelectClientCategory",SelectClientCategory_SelectClientCategory_SelectClientCategory.__docgenInfo={description:"",methods:[],displayName:"SelectClientCategory"};__webpack_exports__.a=SelectClientCategory_SelectClientCategory_SelectClientCategory;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Clients/ClientCategories/SelectClientCategory/SelectClientCategory.jsx"]={name:"SelectClientCategory",docgenInfo:SelectClientCategory_SelectClientCategory_SelectClientCategory.__docgenInfo,path:"src/components/MainPage/Clients/ClientCategories/SelectClientCategory/SelectClientCategory.jsx"})},2904:function(module,__webpack_exports__,__webpack_require__){"use strict";var toConsumableArray=__webpack_require__(65),toConsumableArray_default=__webpack_require__.n(toConsumableArray),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(640),__webpack_require__(444),__webpack_require__(0)),FormWindow=__webpack_require__(335),SelectFromButton=__webpack_require__(2671),Button=__webpack_require__(182),ControlPanel=__webpack_require__(2656),asyncToGenerator=__webpack_require__(282),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),regenerator=__webpack_require__(147),regenerator_default=__webpack_require__.n(regenerator),TableActions=(__webpack_require__(181),__webpack_require__(443),__webpack_require__(241),__webpack_require__(994)),DeleteItemAction=__webpack_require__(647),PlaceholderLoading=__webpack_require__(2653),functions=__webpack_require__(2763),ImageView_functions=__webpack_require__(239),react_router_dom=__webpack_require__(53),styled_components_browser_esm=__webpack_require__(21),jsx_runtime=__webpack_require__(1),TableView_TableView=function TableView(_ref){var data=_ref.data,deleteItem=_ref.deleteItem,userHasAccess=_ref.userHasAccess,isLoading=_ref.isLoading,setShowWindow=_ref.setShowWindow,selectedItem=_ref.selectedItem,onSelect=_ref.onSelect;Object(react.useEffect)((function(){setShowWindow&&setShowWindow(!1)}),[selectedItem]);var List=styled_components_browser_esm.b.div.withConfig({displayName:"TableView__List",componentId:"eglp9f-0"})(["display:flex;width:100%;"]),IdColumn=styled_components_browser_esm.b.span.withConfig({displayName:"TableView__IdColumn",componentId:"eglp9f-1"})(["max-width:50px;"]),FilenameColumn=styled_components_browser_esm.b.span.withConfig({displayName:"TableView__FilenameColumn",componentId:"eglp9f-2"})(["flex:0 1 40% !important;"]);return Object(jsx_runtime.jsx)(List,{className:"prices__tableview",children:Object(jsx_runtime.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)(IdColumn,{children:"ID"}),Object(jsx_runtime.jsx)(FilenameColumn,{children:"Имя файла"}),Object(jsx_runtime.jsx)(FilenameColumn,{children:"Ссылка на прайс-лист"}),Object(jsx_runtime.jsx)("div",{className:"main-window__table-actions"})]}),isLoading?Object(jsx_runtime.jsx)(PlaceholderLoading.a,{itemClassName:"main-window__list-item",minHeight:"30px",items:3}):data.map((function(item){return Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item",onClick:onSelect?function(){return onSelect(item)}:null,children:[Object(jsx_runtime.jsx)(IdColumn,{children:item.id}),Object(jsx_runtime.jsx)(FilenameColumn,{children:item.uri.split("downloadFile/")[1]}),Object(jsx_runtime.jsx)(FilenameColumn,{children:Object(jsx_runtime.jsx)(react_router_dom.a,{to:"/price-list?filename=".concat(item.uri.split("downloadFile/")[1],"&open=true"),target:"_blank",rel:"noopener noreferrer",className:"main-window__link",children:"Просмотр прайс-листа"})}),onSelect?Object(jsx_runtime.jsx)("div",{className:"main-window__table-actions"}):Object(jsx_runtime.jsx)(TableActions.a,{actionsList:[{onClick:(_onClick=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.t0=ImageView_functions.b,_context.next=3,Object(functions.a)(item.uri,item.uri.split("downloadFile/")[1]);case 3:return _context.t1=_context.sent,_context.t2=item.uri.split("downloadFile/")[1],_context.abrupt("return",(0,_context.t0)(_context.t1,_context.t2));case 6:case"end":return _context.stop()}}),_callee)}))),function onClick(){return _onClick.apply(this,arguments)}),text:"Скачать"},{customElement:Object(jsx_runtime.jsx)(DeleteItemAction.a,{title:"Удаление прайса",onClick:function onClick(){return deleteItem(item.id)}}),isRendered:!!deleteItem&&userHasAccess(["ROLE_ADMIN"])}]})]},item.id);var _onClick}))]})})};TableView_TableView.displayName="TableView",TableView_TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"};var PricesListPage_TableView_TableView=TableView_TableView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/PricesListPage/TableView/TableView.jsx"]={name:"TableView",docgenInfo:TableView_TableView.__docgenInfo,path:"src/components/MainPage/PriceList/PricesListPage/TableView/TableView.jsx"});var App=__webpack_require__(214),price_list=(__webpack_require__(2882),__webpack_require__(2805)),react_router=__webpack_require__(177),SelectPricelistFile_SelectPricelistFile_SelectPricelistFile=function SelectPricelistFile(_ref){var data=_ref.data,onChange=_ref.onChange,defaultValue=_ref.defaultValue,_useState=Object(react.useState)(null),_useState2=slicedToArray_default()(_useState,2),selectedItem=_useState2[0],setSelectedItem=_useState2[1],_useState3=Object(react.useState)(null),_useState4=slicedToArray_default()(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),ltdData=_useState6[0],setLtdData=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),showWindow=_useState8[0],setShowWindow=_useState8[1],userContext=Object(react.useContext)(App.a),history=Object(react_router.h)();return Object(react.useEffect)((function(){if(console.log(defaultValue),defaultValue&&setSelectedItem(defaultValue),data)return setLtdData(data);ltdData.length>0||function loadLtd(){Object(price_list.c)().then((function(_ref2){var data=_ref2.data;setLtdData(toConsumableArray_default()(data)),setIsLoading(!1)})).catch((function(error){setIsLoading(!1),console.log(error)}))}()}),[defaultValue]),Object(jsx_runtime.jsx)("div",{className:"select-pricefile",children:Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsxs)("div",{className:"main-form__input_name main-form__input_name--header",children:["Прайс-лист",Object(jsx_runtime.jsx)(SelectFromButton.a,{text:"Выберите файл",onClick:function onClick(){return setShowWindow(!showWindow)}})]}),Object(jsx_runtime.jsxs)("div",{className:"main-form__input_field",children:[Object(jsx_runtime.jsx)(FormWindow.a,{title:"Выбор файла прайс-листа",content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(ControlPanel.a,{buttons:Object(jsx_runtime.jsx)(Button.a,{text:"Добавить прайс-лист файл",onClick:function onClick(){return history.push("/price-list/prices/upload")},className:"main-window__button main-window__button--inverted",inverted:!0})}),Object(jsx_runtime.jsx)(PricesListPage_TableView_TableView,{data:ltdData,userHasAccess:userContext.userHasAccess,onSelect:function onSelect(item){setSelectedItem(item),onChange(item),setShowWindow(!1)},selectedItem:selectedItem,isLoading:isLoading,showWindow:showWindow,setShowWindow:setShowWindow})]}),showWindow:showWindow,setShowWindow:setShowWindow}),selectedItem?Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("div",{children:"".concat(selectedItem.uri.split("downloadFile/")[1])}),Object(jsx_runtime.jsx)(react_router_dom.a,{to:"/price-list?filename=".concat(selectedItem.uri.split("downloadFile/")[1],"&open=true"),className:"main-window__link",target:"_blank",children:"Просмотреть прайс"}),Object(jsx_runtime.jsx)("span",{onClick:function onClick(){setSelectedItem(null),onChange(null),setShowWindow(!1)},children:"Удалить"})]}):Object(jsx_runtime.jsx)("span",{children:"Вы можете закрепить .xlsx прайс-лист к данному клиенту"})]})]})})};SelectPricelistFile_SelectPricelistFile_SelectPricelistFile.displayName="SelectPricelistFile",SelectPricelistFile_SelectPricelistFile_SelectPricelistFile.__docgenInfo={description:"",methods:[],displayName:"SelectPricelistFile"};__webpack_exports__.a=SelectPricelistFile_SelectPricelistFile_SelectPricelistFile;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/PricesListPage/SelectPricelistFile/SelectPricelistFile.jsx"]={name:"SelectPricelistFile",docgenInfo:SelectPricelistFile_SelectPricelistFile_SelectPricelistFile.__docgenInfo,path:"src/components/MainPage/PriceList/PricesListPage/SelectPricelistFile/SelectPricelistFile.jsx"})},3396:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__(213),__webpack_require__(41),__webpack_require__(281),__webpack_require__(333),__webpack_require__(443),__webpack_require__(241),__webpack_require__(283),__webpack_require__(242),__webpack_require__(334),__webpack_require__(181),__webpack_require__(636),__webpack_require__(2668),__webpack_require__(0)),Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_17__=(__webpack_require__(3397),__webpack_require__(2660),__webpack_require__(2680)),Utils_RequestsAPI_Clients_LegalEntity_jsx__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(2815),Utils_RequestsAPI_Clients_Contacts_jsx__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2816),Utils_RequestsAPI_Clients_WorkHistory_jsx__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2817),_SelectLegalEntity_SelectLegalEntity_jsx__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2871),Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2651),Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2666),_SelectContacts_SelectContacts_jsx__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(2874),_ClientCategories_SelectClientCategory_SelectClientCategory_jsx__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(2903),_SelectWorkHistory_SelectWorkHistory_jsx__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(2814),Utils_Form_InputUser_InputUser_jsx__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(2768),Utils_RequestsAPI_users__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(2709),Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(182),_App_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(214),Utils_Form_CheckBox_CheckBox_jsx__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(215),Utils_hooks__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(2659),_objects__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(2772),_functions__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(2881),Utils_hooks_uiComponents_useTitleHeader_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(2710),_PriceList_PricesListPage_SelectPricelistFile_SelectPricelistFile_jsx__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(2904),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(1),newClient=function newClient(props){var userContext=Object(react__WEBPACK_IMPORTED_MODULE_14__.useContext)(_App_js__WEBPACK_IMPORTED_MODULE_30__.a),_useForm=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_32__.a)([].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_objects__WEBPACK_IMPORTED_MODULE_33__.b),[{name:"manager",defaultValue:userContext.userHasAccess(["ROLE_ADMIN"])?"":userContext.userData.username,isRequired:!0,isValid:!userContext.userHasAccess(["ROLE_ADMIN"])}])),_handleInputChange=_useForm.handleInputChange,formInputs=_useForm.formInputs,formErrors=_useForm.formErrors,setFormErrors=_useForm.setFormErrors,formIsValid=_useForm.formIsValid,_hideError=_useForm.hideError,errorWindow=_useForm.errorWindow,clientTypes={clients:{name:"клиент",filteredRoles:["ROLE_ADMIN","ROLE_MANAGER"],addItemFunction:function addItemFunction(newClient){return Object(Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_17__.a)(Object.assign({},newClient,{type:null}))},addLegalEntityFunction:function addLegalEntityFunction(newLegalEntity){return Object(Utils_RequestsAPI_Clients_LegalEntity_jsx__WEBPACK_IMPORTED_MODULE_18__.a)(newLegalEntity)},addContactsFunction:function addContactsFunction(newContact){return Object(Utils_RequestsAPI_Clients_Contacts_jsx__WEBPACK_IMPORTED_MODULE_19__.a)(newContact)},addWorkHistoryFunction:function addWorkHistoryFunction(newWorkHistory){return Object(Utils_RequestsAPI_Clients_WorkHistory_jsx__WEBPACK_IMPORTED_MODULE_20__.a)(newWorkHistory)}},suppliers:{name:"поставщик",filteredRoles:["ROLE_ADMIN","ROLE_ENGINEER","ROLE_DISPATCHER","ROLE_MANAGER","ROLE_WORKSHOP"],addItemFunction:function addItemFunction(newClient){return Object(Utils_RequestsAPI_Clients__WEBPACK_IMPORTED_MODULE_17__.a)(Object.assign({},newClient,{type:"supplier"}))},addLegalEntityFunction:function addLegalEntityFunction(newLegalEntity){return Object(Utils_RequestsAPI_Clients_LegalEntity_jsx__WEBPACK_IMPORTED_MODULE_18__.a)(newLegalEntity)},addContactsFunction:function addContactsFunction(newContact){return Object(Utils_RequestsAPI_Clients_Contacts_jsx__WEBPACK_IMPORTED_MODULE_19__.a)(newContact)},addWorkHistoryFunction:function addWorkHistoryFunction(newWorkHistory){return Object(Utils_RequestsAPI_Clients_WorkHistory_jsx__WEBPACK_IMPORTED_MODULE_20__.a)(newWorkHistory)}}},_useTitleHeader=Object(Utils_hooks_uiComponents_useTitleHeader_js__WEBPACK_IMPORTED_MODULE_35__.a)("Новый ".concat(clientTypes[props.type].name),Object(_functions__WEBPACK_IMPORTED_MODULE_34__.a)(clientTypes[props.type].name),"clientData","main-form"),titleHeader=_useTitleHeader.titleHeader,curPage=_useTitleHeader.curPage,_useState=Object(react__WEBPACK_IMPORTED_MODULE_14__.useState)(!1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_14__.useState)([]),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState3,2),users=_useState4[0],setUsers=_useState4[1];return Object(react__WEBPACK_IMPORTED_MODULE_14__.useEffect)((function(){document.title="Добавление ".concat(clientTypes[props.type].name),0===users.length&&Object(Utils_RequestsAPI_users__WEBPACK_IMPORTED_MODULE_28__.e)().then((function(res){return res.json()})).then((function(res){var filteredRoles=clientTypes[props.type].filteredRoles,newUsers=res;setUsers(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(newUsers.filter((function(item){return!filteredRoles||item.roles.reduce((function(prevRole,curRole){var check=!1;return filteredRoles.map((function(filteredRole){filteredRole!==curRole.name||(check=!0)})),check}),!1)})).map((function(item){return Object.assign({},item,{active:!0})}))))}))}),[users]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"new_client",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("form",{className:"main-form__form",children:[titleHeader,errorWindow,"workHistory"===curPage?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_SelectWorkHistory_SelectWorkHistory_jsx__WEBPACK_IMPORTED_MODULE_26__.a,{handleWorkHistoryChange:function handleWorkHistoryChange(value){_handleInputChange("workHistory",value)},defaultValue:formInputs.workHistory,userHasAccess:userContext.userHasAccess})}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Название",required:!0,name:"name",error:formErrors.name,defaultValue:formInputs.name,errorsArr:formErrors,setErrorsArr:setFormErrors,handleInputChange:function handleInputChange(_ref2){var target=_ref2.target;return _handleInputChange("name",target.value)}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_SelectLegalEntity_SelectLegalEntity_jsx__WEBPACK_IMPORTED_MODULE_21__.a,{handleLegalEntityChange:function handleLegalEntityChange(value){return _handleInputChange("legalEntity",value)},defaultValue:formInputs.legalEntity,userHasAccess:userContext.userHasAccess}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__fieldset",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__group-name",children:"Контактные данные"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_SelectContacts_SelectContacts_jsx__WEBPACK_IMPORTED_MODULE_24__.a,{handleContactsChange:function handleContactsChange(value){return _handleInputChange("contacts",value)},error:formErrors.contacts,hideError:function hideError(){return _hideError("contacts")},defaultValue:formInputs.contacts,userHasAccess:userContext.userHasAccess}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Сайт",required:!0,name:"site",error:formErrors.site,errorsArr:formErrors,setErrorsArr:setFormErrors,defaultValue:formInputs.site,handleInputChange:function handleInputChange(_ref3){var target=_ref3.target;return _handleInputChange("site",target.value)}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Комментарий",name:"comment",defaultValue:formInputs.comment,handleInputChange:function handleInputChange(_ref4){var target=_ref4.target;return _handleInputChange("comment",target.value)},type:"textarea"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Адрес склада",name:"storageAddress",defaultValue:formInputs.storageAddress,handleInputChange:function handleInputChange(_ref5){var target=_ref5.target;return _handleInputChange("storageAddress",target.value)}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_23__.a,{inputName:"Дата след. контакта",name:"nextDateContact",selected:Date.parse(formInputs.nextDateContact),handleDateChange:function handleDateChange(value){return _handleInputChange("nextDateContact",value)}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Условия работы",name:"workCondition",defaultValue:formInputs.workCondition,handleInputChange:function handleInputChange(_ref6){var target=_ref6.target;return _handleInputChange("workCondition",target.value)}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Город",name:"city",required:!0,defaultValue:formInputs.city,handleInputChange:function handleInputChange(_ref7){var target=_ref7.target;return _handleInputChange("city",target.value)},error:formErrors.city,errorsArr:formErrors,setErrorsArr:setFormErrors}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Прайс",name:"price",defaultValue:formInputs.price,handleInputChange:function handleInputChange(_ref8){var target=_ref8.target;return _handleInputChange("price",target.value)}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_PriceList_PricesListPage_SelectPricelistFile_SelectPricelistFile_jsx__WEBPACK_IMPORTED_MODULE_36__.a,{onChange:function onChange(item){return _handleInputChange("priceId",item)},defaultValue:formInputs.priceId}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputUser_InputUser_jsx__WEBPACK_IMPORTED_MODULE_27__.a,{inputName:"Ответственный менеджер",userData:userContext.userData,filteredRoles:["ROLE_ADMIN","ROLE_MANAGER"],required:!0,name:"manager",handleUserChange:function handleUserChange(value){return _handleInputChange("manager",value)},error:formErrors.manager,defaultValue:formInputs.manager,searchPlaceholder:"Введите имя менеджера для поиска..."}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__fieldset",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__group-name",children:"Юридические данные"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Акт сверки",name:"check",handleInputChange:function handleInputChange(_ref9){var target=_ref9.target;return _handleInputChange("check",target.value)},defaultValue:formInputs.check}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__input_name",children:"Тип Налогообложения"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__input_field",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_CheckBox_CheckBox_jsx__WEBPACK_IMPORTED_MODULE_31__.a,{text:"УСН",id:"taxes",checked:formInputs.taxes,disabled:!userContext.userHasAccess(["ROLE_ADMIN"]),onChange:function onChange(value){return _handleInputChange("taxes",value)}})})]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__input_name",children:"Видимость*"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__input_field",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_CheckBox_CheckBox_jsx__WEBPACK_IMPORTED_MODULE_31__.a,{text:"Запись видна всем пользователям",id:"visibility",checked:formInputs.visibility,disabled:!userContext.userHasAccess(["ROLE_ADMIN"]),onChange:function onChange(value){return _handleInputChange("visibility",value)}})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__fieldset",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__group-name",children:"Категория"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__item",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__input_name",children:["Тип ".concat(clientTypes[props.type].name,"а"),"*"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__input_field",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("select",{name:"clientType",onChange:function onChange(_ref10){var target=_ref10.target;return _handleInputChange("clientType",target.value)},defaultValue:formInputs.clientType,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("option",{value:"Активные",children:"Активные"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("option",{value:"Потенциальные",children:"Потенциальные"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("option",{value:"В разработке",children:"В разработке"})]})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_ClientCategories_SelectClientCategory_SelectClientCategory_jsx__WEBPACK_IMPORTED_MODULE_25__.a,{inputName:"Выбор категории",required:!0,error:formErrors.categoryId,type:props.type,userHasAccess:userContext.userHasAccess,name:"categoryId",handleCategoryChange:function handleCategoryChange(value,name){console.log(value,name),_handleInputChange("categoryName",name),_handleInputChange("categoryId",value)},errorsArr:formErrors,setErrorsArr:setFormErrors})]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("input",{className:"main-form__submit main-form__submit--inverted",type:"submit",onClick:function onClick(){return props.history.push("/"+props.type+"/categories")},value:"Вернуться назад"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_29__.a,{text:"Добавить клиента",isLoading:isLoading,className:"main-form__submit",onClick:function handleSubmit(){var _formInputs$priceId$i,_formInputs$priceId;if(console.log(formInputs),formIsValid()){setIsLoading(!0);var clientId=0;clientTypes[props.type].addItemFunction({clientType:formInputs.clientType,comment:formInputs.comment,manager:formInputs.manager,name:formInputs.name,price:formInputs.price,site:formInputs.site,city:formInputs.city,isClosed:!formInputs.visibility,storageAddress:formInputs.storageAddress,workCondition:formInputs.workCondition,check:formInputs.check,nextDateContact:Math.ceil(new Date(formInputs.nextDateContact).getTime()/1e3),categoryId:formInputs.categoryId,taxes:formInputs.taxes,priceId:0!==formInputs.priceId&&formInputs.priceId?null!==(_formInputs$priceId$i=null===(_formInputs$priceId=formInputs.priceId)||void 0===_formInputs$priceId?void 0:_formInputs$priceId.id)&&void 0!==_formInputs$priceId$i?_formInputs$priceId$i:formInputs.priceId:null}).then((function(_ref){var data=_ref.data;return clientId=data.id,Promise.all(formInputs.legalEntity.map((function(item){return clientTypes[props.type].addLegalEntityFunction({name:item.name,inn:item.inn,kpp:item.kpp,ogrn:item.ogrn,bik:item.bik,checkingAccount:item.checkingAccount,legalAddress:item.legalAddress,factualAddress:item.factualAddress,legalEntity:item.legalEntity,clientId:data.id})})))})).then((function(){return Promise.all(formInputs.contacts.map((function(item){return clientTypes[props.type].addContactsFunction({name:item.name,lastName:item.lastName,email:item.email,position:item.position,phoneNumber:item.phoneNumber,clientId:clientId})})))})).then((function(){return clientTypes[props.type].addWorkHistoryFunction({date:new Date,action:"Создание записи",result:"Запись успешно создана",comment:"<Cообщение сгенерировано автоматически>",clientId:clientId})})).then((function(){return Promise.all(formInputs.workHistory.map((function(item){return clientTypes[props.type].addWorkHistoryFunction({date:item.date,action:item.action,result:item.result,comment:item.comment,clientId:clientId})})))})).then((function(){return props.history.push("/".concat(props.type,"/category/").concat(formInputs.categoryName,"/active"))})).catch((function(error){setIsLoading(!1),alert("Ошибка при добавлении записи"),console.log(error)}))}}})]})]})})})};newClient.displayName="newClient",newClient.__docgenInfo={description:"",methods:[],displayName:"newClient"},__webpack_exports__.default=newClient,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Clients/NewClient/NewClient.jsx"]={name:"newClient",docgenInfo:newClient.__docgenInfo,path:"src/components/MainPage/Clients/NewClient/NewClient.jsx"})},3397:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3398);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3398:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.new_client .main-form__form{--form__max-width--content: 1000px}\n",""]),module.exports=exports}}]);