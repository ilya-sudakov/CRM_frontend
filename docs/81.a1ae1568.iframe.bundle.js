(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{3018:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(258),__webpack_require__(671),__webpack_require__(672),__webpack_require__(83),__webpack_require__(474),__webpack_require__(201),__webpack_require__(0)),Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(1782),__webpack_require__(303)),Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(356),Components_App__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(135),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1),TableView=function TableView(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!0),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1],userContext=Object(react__WEBPACK_IMPORTED_MODULE_7__.useContext)(Components_App__WEBPACK_IMPORTED_MODULE_11__.a);Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){props.data.length>0&&setIsLoading(!1)}),[props.data]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_10__.a,{columns:[{text:"Название",value:"work"},{text:"Тип",value:"typeOfWork"}],data:function sortWorkItems(data){return function searchQuery(data){var query=props.searchQuery.toLowerCase();return data.filter((function(item){return item.work.toLowerCase().includes(query)||item.id.toString().includes(query)}))}(Object(Utils_sorting_sorting__WEBPACK_IMPORTED_MODULE_9__.a)(data,{fieldName:"work",direction:"asc"}))}(props.data),loading:{isLoading:isLoading},actions:props.selectWork?void 0:function actions(item){return[{elementType:"edit",title:"Редактировать работу",link:"/work-list/edit/".concat(item.id)},{elementType:"delete",title:"Удаление работы",onClick:function onClick(){return props.deleteItem(item.id)},isRendered:userContext.userHasAccess(["ROLE_ADMIN"])}]},onClick:props.selectWork?function(_ref){var work=_ref.work,id=_ref.id,typeOfWork=_ref.typeOfWork;return props.selectWork(work,id,typeOfWork)}:void 0,options:props.selectWork?{fullSize:!0}:void 0})};TableView.displayName="TableView",TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"},__webpack_exports__.a=TableView,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Work/TableView.jsx"]={name:"TableView",docgenInfo:TableView.__docgenInfo,path:"src/components/MainPage/Work/TableView.jsx"})},3458:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(3459),__webpack_require__(355)),_TableView_jsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3018),API_WorkManaging_work_list__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1038),Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(675),Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(674),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1),Work=function Work(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),work=_useState2[0],setWork=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){document.title="Работы";var abortController=new AbortController;return loadWork(abortController.signal),function cancel(){abortController.abort()}}),[]);var loadWork=function loadWork(signal){Object(API_WorkManaging_work_list__WEBPACK_IMPORTED_MODULE_5__.d)(signal).then((function(response){return response.json()})).then((function(response){console.log(response),setWork(response)})).catch((function(error){console.log(error)}))};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"work",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"main-window",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Utils_MainWindow_FloatingButton_FloatingButton_jsx__WEBPACK_IMPORTED_MODULE_6__.a,{linkTo:"/work-list/new",visibility:["ROLE_ADMIN"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"main-window__header main-window__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"main-window__title",children:"Работы"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_SearchBar_SearchBar_jsx__WEBPACK_IMPORTED_MODULE_3__.a,{fullSize:!0,placeholder:"Введите название работы для поиска...",setSearchQuery:setSearchQuery}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Utils_MainWindow_ControlPanel_ControlPanel_jsx__WEBPACK_IMPORTED_MODULE_7__.a,{itemsCount:"Всего: ".concat(work.length," записей")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TableView_jsx__WEBPACK_IMPORTED_MODULE_4__.a,{data:work,searchQuery:searchQuery,userHasAccess:props.userHasAccess,deleteItem:function deleteItem(id){return Object(API_WorkManaging_work_list__WEBPACK_IMPORTED_MODULE_5__.b)(id).then((function(){return loadWork()}))}})]})})};Work.displayName="Work",Work.__docgenInfo={description:"",methods:[],displayName:"Work"},__webpack_exports__.default=Work,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/Work/Work.jsx"]={name:"Work",docgenInfo:Work.__docgenInfo,path:"src/components/MainPage/Work/Work.jsx"})},3459:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3460);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3460:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.work{width:100%;display:flex;flex-direction:column;align-items:center}.work .main-window{padding-top:10px;padding-bottom:10px}.work .main-window__title{font-size:24px}.work .main-window__link{margin-bottom:15px}@media (max-width: 768px){.work .main-window__amount_table{margin-left:10px;align-self:flex-start}}\n",""]),module.exports=exports}}]);