(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{2851:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(165),__webpack_require__(23),__webpack_require__(2)),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(2852),__webpack_require__(1)),InputText=function InputText(_ref){var inputName=_ref.inputName,required=_ref.required,error=_ref.error,type=_ref.type,name=_ref.name,handleInputChange=_ref.handleInputChange,defaultValue=_ref.defaultValue,readOnly=_ref.readOnly,disabled=_ref.disabled,setErrorsArr=_ref.setErrorsArr,errorsArr=_ref.errorsArr;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__input_name",children:inputName+(required?"*":"")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:!0===error?"input_text__input_field input_text__input_field--error":"input_text__input_field",children:"textarea"===type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("textarea",{name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("input",{type:type||"text",name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled})})]}),error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__error",onClick:setErrorsArr?function(){return setErrorsArr(Object.assign({},errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,!1)))}:null,children:"Поле не заполнено!"})]})};InputText.displayName="InputText",InputText.__docgenInfo={description:"",methods:[],displayName:"InputText",props:{inputName:{type:{name:"string"},required:!1,description:""},required:{type:{name:"bool"},required:!1,description:""},error:{type:{name:"bool"},required:!1,description:""},type:{type:{name:"string"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},handleInputChange:{type:{name:"func"},required:!1,description:""},defaultValue:{type:{name:"string"},required:!1,description:""},readOnly:{type:{name:"bool"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},setErrorsArr:{type:{name:"func"},required:!1,description:""},errorsArr:{type:{name:"object"},required:!1,description:""}}},__webpack_exports__.a=InputText,InputText.propTypes={inputName:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,required:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,error:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,type:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,name:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,handleInputChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,defaultValue:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,setErrorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,errorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/InputText/InputText.jsx"]={name:"InputText",docgenInfo:InputText.__docgenInfo,path:"src/components/Form/InputText/InputText.jsx"})},2852:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(2853);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2853:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.input_text{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:20px}.input_text .input_text__error{width:100%;margin-top:1px;font-size:0.75rem;box-sizing:border-box;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.input_text .input_text__input{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;width:100%}.input_text .input_text__input .input_text__input_name{color:#666;padding-right:10px;flex:0 1 calc(20% - 10px);width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{display:flex;justify-content:center;width:calc(90% - 20px);position:relative;min-height:2rem;width:100%}.input_text .input_text__input .input_text__input_field input[type="text"],.input_text .input_text__input .input_text__input_field input[type="password"],.input_text .input_text__input .input_text__input_field input[type="number"],.input_text .input_text__input .input_text__input_field textarea{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;transition:100ms ease-in-out;box-sizing:border-box}.input_text .input_text__input .input_text__input_field input[type="text"]:hover,.input_text .input_text__input .input_text__input_field input[type="password"]:hover,.input_text .input_text__input .input_text__input_field input[type="number"]:hover,.input_text .input_text__input .input_text__input_field textarea:hover{border-color:#888888}.input_text .input_text__input .input_text__input_field input[type="text"]:focus,.input_text .input_text__input .input_text__input_field input[type="password"]:focus,.input_text .input_text__input .input_text__input_field input[type="number"]:focus,.input_text .input_text__input .input_text__input_field textarea:focus{border:1px solid #4293b6}.input_text .input_text__input .input_text__input_field input::-webkit-outer-spin-button,.input_text .input_text__input .input_text__input_field input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input_text .input_text__input .input_text__input_field textarea{min-width:calc(100% - 20px);outline:none;min-height:100px;max-height:150px;resize:vertical}.input_text .input_text__input .input_text__input_field input[type="number"]{-moz-appearance:textfield}.input_text .input_text__input .input_text__input_field--error input[type="text"],.input_text .input_text__input .input_text__input_field--error input[type="number"],.input_text .input_text__input .input_text__input_field--error input[type="password"],.input_text .input_text__input .input_text__input_field--error textarea{border:1px solid #d48282 !important}@media (max-width: 768px){.input_text .input_text__input{flex-wrap:wrap;align-items:flex-start;flex-direction:column}.input_text .input_text__input .input_text__input_name{width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{width:calc(100% - 0px)}.input_text .input_text__input .input_text__input_field input{padding:10px !important}}\n',""]),module.exports=exports},2855:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(23),__webpack_require__(36),__webpack_require__(51),__webpack_require__(0)),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2856),__webpack_require__(1)),PlaceholderLoading=function PlaceholderLoading(_ref){var _ref$items=_ref.items,items=void 0===_ref$items?3:_ref$items,itemClassName=_ref.itemClassName,_ref$minHeight=_ref.minHeight,minHeight=void 0===_ref$minHeight?"1.5rem":_ref$minHeight,placeholderContent=_ref.placeholderContent,wrapperClassName=_ref.wrapperClassName,_ref$itemStyles=_ref.itemStyles,itemStyles=void 0===_ref$itemStyles?{}:_ref$itemStyles,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),elements=_useState2[0],setElements=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){for(var temp=[],count=items,i=1;i<=count;i++)temp.push(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading__item ".concat(itemClassName),style:Object.assign({minHeight:minHeight},itemStyles)}));setElements([].concat(temp))}),[]),placeholderContent?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:itemClassName,style:{minHeight:minHeight},children:placeholderContent},index)}))}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"placeholder-loading ".concat(wrapperClassName),children:elements.map((function(item){return item}))})};PlaceholderLoading.displayName="PlaceholderLoading",PlaceholderLoading.__docgenInfo={description:"",methods:[],displayName:"PlaceholderLoading",props:{items:{defaultValue:{value:"3",computed:!1},type:{name:"number"},required:!1,description:""},minHeight:{defaultValue:{value:"'1.5rem'",computed:!1},type:{name:"string"},required:!1,description:""},itemStyles:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},itemClassName:{type:{name:"string"},required:!1,description:""},wrapperClassName:{type:{name:"string"},required:!1,description:""},placeholderContent:{type:{name:"any"},required:!1,description:""}}},__webpack_exports__.a=PlaceholderLoading,PlaceholderLoading.propTypes={items:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number,minHeight:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,itemClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,wrapperClassName:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,placeholderContent:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.any,itemStyles:prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"]={name:"PlaceholderLoading",docgenInfo:PlaceholderLoading.__docgenInfo,path:"src/utils/TableView/PlaceholderLoading/PlaceholderLoading.jsx"})},2856:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(2857);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2857:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,'@keyframes pulse-placeholder-loading{0%,100%{background-color:#e7e7e7}50%{background-color:#efefef}}@keyframes load{from{left:-150px}to{left:100%}}.placeholder-loading__item{height:1rem;background-color:#ddd;animation:pulse-placeholder-loading 1s infinite ease-in-out;position:relative;overflow:hidden;border-bottom:1px solid #bbb}.placeholder-loading__item::after{content:"";display:block;position:absolute;left:-150px;top:0;height:100%;width:150px;background:linear-gradient(to right, transparent 0%, #e8e8e8 50%, transparent 100%);animation:load 1s cubic-bezier(0.4, 0, 0.2, 1) infinite}\n',""]),module.exports=exports},2858:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(21),DESCRIPTORS=__webpack_require__(84),global=__webpack_require__(32),has=__webpack_require__(103),isObject=__webpack_require__(90),defineProperty=__webpack_require__(136).f,copyConstructorProperties=__webpack_require__(1785),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function description(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},2862:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultStylesPDF})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createPDF})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getPDFTitleObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getInputElementTextPDF})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getTransportationListPdfText})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getRequestPdfText})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProductsFromRequestsListPdfText}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(51),__webpack_require__(36),__webpack_require__(165),__webpack_require__(475),__webpack_require__(1017),__webpack_require__(1019),__webpack_require__(2896)),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__),pdfmake__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2897),pdfmake__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(pdfmake__WEBPACK_IMPORTED_MODULE_8__),_functions_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(63),_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(303),defaultStylesPDF={title:{fontSize:18,alignment:"left"},subheader:{fontSize:14,alignment:"left"},regularText:{fontSize:11,alignment:"left"},tableHeader:{fontSize:11,color:"#555",alignment:"left"}},createPDF=function createPDF(data){var print=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,print?pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).print():pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).open()},getPDFTitleObject=function getPDFTitleObject(name){return{text:"".concat(name,"\n"),alignment:"center",style:"title"}},getInputElementTextPDF=function getInputElementTextPDF(title,value){return{text:[{text:"\n".concat(title,": \n"),style:"regularText",fontSize:12},{text:"".concat(value,"\n\n"),style:"subheader"}]}},getTransportationListPdfText=function getTransportationListPdfText(transportation){var transportationList=[],transportationInfo=[];transportation.map((function(item){return transportationInfo.push([{text:Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.f)(item.date),style:"regularText"},{text:item.cargo,style:"regularText"},{text:item.quantity,style:"regularText"},{text:item.sender,style:"regularText"},{text:item.recipient,style:"regularText"},{text:item.driver,style:"regularText"}])})),transportationList.push({table:{widths:[60,140,40,80,80,"*"],body:[[{text:"Дата",style:"tableHeader"},{text:"Товар",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Откуда",style:"tableHeader"},{text:"Куда",style:"tableHeader"},{text:"Водитель",style:"tableHeader"}]].concat(transportationInfo)}});var dd={info:{title:"Реестр транспортировок"},content:[getPDFTitleObject("Реестр транспортировок")].concat(transportationList),styles:defaultStylesPDF};return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,dd},getRequestPdfText=function getRequestPdfText(date,requestProducts,codeWord,workshopName,itemId){var productsArr=Object(_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__.a)(requestProducts,{fieldName:"name",direction:"asc"}).map((function(item){return[item.name,item.quantity,item.packaging,"",""]})),dd={info:{title:"Очередь производства №"+itemId},content:[getPDFTitleObject("Очередь производства  №".concat(itemId)),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",getInputElementTextPDF("Дата",Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.f)(date)),{text:"Продукция: ",style:"regularText",fontSize:12,margin:[0,0,0,5]},{table:{widths:["*",70,70,70,70],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Фасовка",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(productsArr))}},"\n",getInputElementTextPDF("Кодовое слово",codeWord)],styles:defaultStylesPDF};createPDF(dd)},sortRequestProducts=function sortRequestProducts(data){return data.sort((function(a,b){return a[0].localeCompare(b[0],void 0,{numeric:!0})<0?-1:a[0].localeCompare(b[0],void 0,{numeric:!0})>0?1:0}))},getProductsFromRequestsListPdfText=function getProductsFromRequestsListPdfText(products,workshopName){var dd={info:{title:"Очередь производства - список"},content:[getPDFTitleObject("Очередь производства - список"),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",sortRequestProducts(Object.entries(products)).map((function(category){if(Object.values(category[1]).length>0)return[{text:[{text:"".concat(category[0]," \n"),fontSize:12,style:"regularText",margin:[5,5,5,5]}]}].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(function formatProducts(products){return[{table:{margin:[0,5,0,5],widths:["*",100,80,80],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(sortRequestProducts(Object.entries(products)).map((function(product){return[product[0],product[1],"",""]}))))}}]}(category[1])),["\n"])}))],styles:defaultStylesPDF};createPDF(dd)}},2863:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/edit.efe0dc2a.svg"},2866:function(module,__webpack_exports__,__webpack_require__){"use strict";var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(476),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2871),__webpack_require__(1)),SelectFromButton=function SelectFromButton(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"Выбрать":_ref$text,_onClick=_ref.onClick;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"select-from-button",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"select-from-button__link",onClick:function onClick(event){event.preventDefault(),_onClick()},children:[text,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"select-from-button__img select-from-button__img--more"})]})})};SelectFromButton.displayName="SelectFromButton",SelectFromButton.__docgenInfo={description:"",methods:[],displayName:"SelectFromButton",props:{text:{defaultValue:{value:"'Выбрать'",computed:!1},required:!1},onClick:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=SelectFromButton,SelectFromButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/SelectFromButton/SelectFromButton.jsx"]={name:"SelectFromButton",docgenInfo:SelectFromButton.__docgenInfo,path:"src/components/Form/SelectFromButton/SelectFromButton.jsx"})},2871:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(2872);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2872:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-from-button__link{display:flex;align-items:center;transition:100ms ease-in-out;color:#777777 !important;border-radius:3px;cursor:pointer;font-size:0.9rem;padding:2px 8px;padding-right:3px;margin-top:2px;width:fit-content;margin-left:10px}.select-from-button__link .select-from-button__img{width:20px;transition:margin-left 200ms ease-in-out}.select-from-button__link .select-from-button__img--plus{margin-left:7px}.select-from-button__link .select-from-button__img--plus path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link .select-from-button__img--more{transform:rotate(-90deg) !important}.select-from-button__link .select-from-button__img--more path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.select-from-button__link:hover{color:#333333 !important}.select-from-button__link:hover .select-from-button__img--more{margin-left:8px}.select-from-button__link:hover .select-from-button__img--more path:first-child{fill:#55a1c1}.select-from-button__link:hover .select-from-button__img--plus path:first-child{fill:#55a1c1}\n",""]),module.exports=exports},2883:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/no_img.60f1f667.png"},2884:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(51),__webpack_require__(23),__webpack_require__(165),__webpack_require__(0)),Assets_tableview_delete_inline_svg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(486),Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(2905),__webpack_require__(476)),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),Utils_hooks__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1015),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1),NestedFormItem=function NestedFormItem(_ref){var _formRef$current,readOnly=_ref.readOnly,index=_ref.index,headerItems=_ref.headerItems,_ref$formInputs=_ref.formInputs,formInputs=void 0===_ref$formInputs?[]:_ref$formInputs,bottomButton=_ref.bottomButton,_ref$itemsLength=_ref.itemsLength,itemsLength=void 0===_ref$itemsLength?0:_ref$itemsLength,_ref$isMinimizedDefau=_ref.isMinimizedDefault,isMinimizedDefault=void 0!==_ref$isMinimizedDefau&&_ref$isMinimizedDefau,handleDeleteItem=_ref.handleDeleteItem,_ref$id=_ref.id,id=void 0===_ref$id?0:_ref$id,_useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(isMinimizedDefault),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),isMinimized=_useState2[0],setIsMinimized=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(0),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState3,2),selectedIndex=_useState4[0],setSelectedIndex=_useState4[1],formRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null),_useMessageForUser=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_9__.c)({title:"Удаление элемента",message:"Вы действительно хотите удалить этот элемент?",onClick:function onClick(){return handleDeleteItem(selectedIndex)},buttonText:"ОК"}),messageForUser=_useMessageForUser.messageForUser,showMessage=_useMessageForUser.showMessage,setShowMessage=_useMessageForUser.setShowMessage,_useState5=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(null==formRef||null===(_formRef$current=formRef.current)||void 0===_formRef$current?void 0:_formRef$current.clientHeight),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState5,2),formHeight=_useState6[0],setFormHeight=_useState6[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){setFormHeight("".concat(formRef.current.clientHeight,"px"))}),[formRef.current]),Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){isMinimized||"0px"!==formHeight||setFormHeight("".concat(formRef.current.clientHeight,"px"))}),[isMinimized]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:!readOnly&&itemsLength>1?"form-item form-item--minimized":"form-item",children:[headerItems?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"form-item__header",index:index,onClick:function onClick(){return setIsMinimized(!isMinimized)},id:id,children:[headerItems.map((function(headerItem,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"form-item__name",style:Object.assign({},headerItem.style),children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:headerItem.text}),""!==headerItem.value?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:headerItem.value}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"form-item__name--placeholder",children:headerItem.placeholder})]},index)})),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(Assets_tableview_chevron_down_inline_svg__WEBPACK_IMPORTED_MODULE_7__.a,{className:"main-form__img ".concat(isMinimized?"":"main-form__img--rotated")})]}):null,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:isMinimized?"form-item__form form-item__form--hidden":"form-item__form",style:{height:isMinimized?"0px":"auto",transition:"0s ease-in"},ref:formRef,children:[formInputs.map((function(input,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"form-item__item",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"form-item__input_field",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"form-item__input_name",children:input.name}),input.element]})},index)})),!readOnly&&bottomButton&&bottomButton]}),messageForUser,!readOnly&&itemsLength>1&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(Assets_tableview_delete_inline_svg__WEBPACK_IMPORTED_MODULE_5__.a,{onClick:function onClick(){setSelectedIndex(index),setShowMessage(!showMessage)},className:"form-item__img"})]})};NestedFormItem.displayName="NestedFormItem",NestedFormItem.__docgenInfo={description:"",methods:[],displayName:"NestedFormItem",props:{formInputs:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},itemsLength:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},isMinimizedDefault:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},id:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},readOnly:{type:{name:"bool"},required:!1,description:""},index:{type:{name:"number"},required:!1,description:""},headerItems:{type:{name:"array"},required:!1,description:""},bottomButton:{type:{name:"custom",raw:"PropTypes"},required:!1,description:""},handleDeleteItem:{type:{name:"element"},required:!1,description:""}}},__webpack_exports__.a=NestedFormItem,NestedFormItem.propTypes={readOnly:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,index:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number,headerItems:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.array,formInputs:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.array,bottomButton:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a,itemsLength:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number,id:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number,isMinimizedDefault:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,handleDeleteItem:prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.element},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/NestedForm/NestedFormItem/NestedFormItem.jsx"]={name:"NestedFormItem",docgenInfo:NestedFormItem.__docgenInfo,path:"src/components/Form/NestedForm/NestedFormItem/NestedFormItem.jsx"})},2895:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/ok.2ad21b54.svg"},2905:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(2906);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2906:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.form-item{background-color:#eeeeee;border:1px solid #cccccc;border-radius:3px;padding:0px 15px;margin-top:5px;width:calc(100% - 30px);position:relative;transition:100ms ease-in-out}.form-item--minimized{width:calc(100% - 50px)}.form-item .form-item__img{position:absolute;right:-35px;cursor:pointer;top:25%}.form-item .form-item__header{display:flex;align-items:center;cursor:pointer;padding:10px 0px}.form-item .form-item__header .form-item__name{display:flex;flex-direction:column;margin-right:10px;flex:0 1 33.333%;min-width:0}.form-item .form-item__header .form-item__name:nth-last-child(2){margin-right:0}.form-item .form-item__header .form-item__name span:first-child{font-size:0.8rem;color:#777777}.form-item .form-item__header .form-item__name span:nth-child(2){font-size:1rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.form-item .form-item__header .form-item__name--placeholder{color:#999999;white-space:nowrap;font-size:0.9rem !important;line-height:1.2rem}.form-item .form-item__header .main-form__img{flex:0 1 20px;transform-origin:50% 50%;margin-left:auto}.form-item .button{font-size:0.8rem}.form-item .form-item__form{width:calc(100%);padding-bottom:10px}.form-item .form-item__form--hidden{padding:0;height:0;margin:0;transform:scaleY(0)}.form-item .form-item__form--hidden .form-item__item{margin-top:0 !important}.form-item .form-item__form .button{margin-top:10px}.form-item .form-item__form .form-item__item{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;margin-top:10px;box-sizing:border-box}.form-item .form-item__form .form-item__item .form-item__input_name{color:#888888;flex:0 1 20%;font-size:80%;position:absolute;top:4px;left:5px;padding:0 5px;border-radius:3px;font-size:0.85rem;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.form-item .form-item__form .form-item__item .form-item__input_field{width:100%}.form-item .form-item__form .form-item__item .form-item__input_field input,.form-item .form-item__form .form-item__item .form-item__input_field select,.form-item .form-item__form .form-item__item .form-item__input_field textarea{border:1px solid #cccccc;width:100%;padding:5px 10px;padding-top:22px;padding-bottom:7px;border-radius:3px;font-size:0.9rem;transition:100ms ease-in-out;box-sizing:border-box;line-height:2rem;height:3rem;min-width:0;max-width:100%}.form-item .form-item__form .form-item__item .form-item__input_field input:hover,.form-item .form-item__form .form-item__item .form-item__input_field select:hover,.form-item .form-item__form .form-item__item .form-item__input_field textarea:hover{border:1px solid #bbbbbb}.form-item .form-item__form .form-item__item .form-item__input_field input:focus,.form-item .form-item__form .form-item__item .form-item__input_field select:focus,.form-item .form-item__form .form-item__item .form-item__input_field textarea:focus{border:1px solid #4293b6}.form-item .form-item__form .form-item__item .form-item__input_field input:not(select):read-only,.form-item .form-item__form .form-item__item .form-item__input_field select:not(select):read-only,.form-item .form-item__form .form-item__item .form-item__input_field textarea:not(select):read-only{opacity:1;background-color:#f7f7f7}.form-item .form-item__form .form-item__item .form-item__input_field input:disabled,.form-item .form-item__form .form-item__item .form-item__input_field select:disabled,.form-item .form-item__form .form-item__item .form-item__input_field textarea:disabled{opacity:1;background-color:#f4f4f4}.form-item .form-item__form .form-item__item .form-item__input_field select{padding-left:5px}.form-item .form-item__form .form-item__item .form-item__input_field textarea{resize:vertical;min-height:4rem;max-height:5rem;line-height:unset}.form-item .form-item__form .form-item__item .form-item__input_field .input_date{width:100%;margin-bottom:0}.form-item .form-item__form .form-item__item .form-item__input_field .input_date__input_name{font-size:0.9rem;padding-left:5px}.form-item .form-item__form .form-item__item .form-item__input_field .input_date input{padding:5px 10px;line-height:normal;height:auto}@media (max-width: 768px){.form-item__header{flex-direction:column;justify-content:flex-start;align-items:flex-start}.form-item__header .form-item__name{width:100%;max-width:none !important;flex:0 1 100% !important;margin-right:0 !important}.form-item__header .main-form__img{margin-left:0 !important;flex:none !important}}\n",""]),module.exports=exports},2907:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return saveExcelFile})),__webpack_require__.d(__webpack_exports__,"a",(function(){return exportClientsEmailsCSV}));var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),xlsx__WEBPACK_IMPORTED_MODULE_35__=(__webpack_require__(134),__webpack_require__(83),__webpack_require__(2952),__webpack_require__(2908),__webpack_require__(2909),__webpack_require__(2910),__webpack_require__(2911),__webpack_require__(2912),__webpack_require__(2913),__webpack_require__(2914),__webpack_require__(2915),__webpack_require__(2916),__webpack_require__(2917),__webpack_require__(2918),__webpack_require__(2919),__webpack_require__(2920),__webpack_require__(2921),__webpack_require__(2922),__webpack_require__(2923),__webpack_require__(2924),__webpack_require__(2925),__webpack_require__(2926),__webpack_require__(2927),__webpack_require__(2928),__webpack_require__(2929),__webpack_require__(2930),__webpack_require__(2931),__webpack_require__(2932),__webpack_require__(154),__webpack_require__(51),__webpack_require__(165),__webpack_require__(166),__webpack_require__(202),__webpack_require__(2933)),xlsx__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(xlsx__WEBPACK_IMPORTED_MODULE_35__),file_saver__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(2955),file_saver__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_36__),_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(303),saveExcelFile=function(){var _ref=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee(workBook,fileName){var buffer;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,workBook.xlsx.writeBuffer();case 2:buffer=_context.sent,file_saver__WEBPACK_IMPORTED_MODULE_36___default.a.saveAs(new Blob([buffer]),"".concat(fileName,".xlsx"));case 4:case"end":return _context.stop()}}),_callee)})));return function saveExcelFile(_x,_x2){return _ref.apply(this,arguments)}}();function s2ab(s){for(var buf=new ArrayBuffer(s.length),view=new Uint8Array(buf),i=0;i!=s.length;++i)view[i]=255&s.charCodeAt(i);return buf}var clientColWidths=[{width:30},{width:20},{width:30},{width:40}],exportClientsEmailsCSV=function exportClientsEmailsCSV(clients){Promise.all(Object(_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_37__.a)(clients,{fieldName:"name",direction:"asc"}).map((function(client){return function addClientContacts(dataWS,client,index){client.contacts.map((function(contactData){var clientRow=[[client.name,client.site,contactData.name,contactData.email]];dataWS=0===index?xlsx__WEBPACK_IMPORTED_MODULE_35___default.a.utils.aoa_to_sheet(clientRow):xlsx__WEBPACK_IMPORTED_MODULE_35___default.a.utils.sheet_add_aoa(dataWS,clientRow,{origin:"A"+index}),index++}))}(null,client,0)}))).then((function(){null["!cols"]=clientColWidths;var wb=xlsx__WEBPACK_IMPORTED_MODULE_35___default.a.utils.book_new();xlsx__WEBPACK_IMPORTED_MODULE_35___default.a.utils.book_append_sheet(wb,null,"Почты"),function saveEmailsCSV(wb,fileName){var wboutput=xlsx__WEBPACK_IMPORTED_MODULE_35___default.a.write(wb,{bookType:"xlsx",bookSST:!1,type:"binary"});file_saver__WEBPACK_IMPORTED_MODULE_36___default.a.saveAs(new Blob([s2ab(wboutput)],{type:""}),fileName)}(wb,"ЭлПочты_SendPulse.xlsx")}))}},2935:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getPriceListColumnValue})),__webpack_require__.d(__webpack_exports__,"c",(function(){return parseExcelData})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getExcelFileBlob}));var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),axios__WEBPACK_IMPORTED_MODULE_39__=(__webpack_require__(1783),__webpack_require__(2858),__webpack_require__(165),__webpack_require__(2958),__webpack_require__(2909),__webpack_require__(2910),__webpack_require__(2911),__webpack_require__(2912),__webpack_require__(2913),__webpack_require__(2914),__webpack_require__(2915),__webpack_require__(2916),__webpack_require__(2917),__webpack_require__(2918),__webpack_require__(2919),__webpack_require__(2920),__webpack_require__(2921),__webpack_require__(2922),__webpack_require__(2923),__webpack_require__(2924),__webpack_require__(2925),__webpack_require__(2926),__webpack_require__(2927),__webpack_require__(2928),__webpack_require__(2929),__webpack_require__(2930),__webpack_require__(2931),__webpack_require__(2932),__webpack_require__(83),__webpack_require__(154),__webpack_require__(2908),__webpack_require__(472),__webpack_require__(302),__webpack_require__(671),__webpack_require__(672),__webpack_require__(23),__webpack_require__(134),__webpack_require__(259)),axios__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_39__),xlsx__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(2933),xlsx__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(xlsx__WEBPACK_IMPORTED_MODULE_40__),getPriceListColumnValue=function getPriceListColumnValue(column,item){return"partnerPrice"===column.property?item.partnerName:"dealerPrice"===column.property?item.dealerName:"distributorPrice"===column.property&&item.distributorName},getPriceListDefaultParsedObject=function getPriceListDefaultParsedObject(item){return{id:item.id,groupImg1:"",groupImg2:"",groupImg3:"",groupImg4:"",footerImg:"",number:item.number,category:item.category,name:item.groupName,description:item.description,infoText:item.infoText,linkAddress:item.linkAddress,locationType:item.locationType,priceHeader:item.priceHeader,retailName:item.retailName,firstPriceName:item.firstPriceName,secondPriceName:item.secondPriceName,dealerName:item.dealerName,distributorName:item.distributorName,partnerName:item.partnerName,active:!0,isMinimized:!0,proprietaryItemText1:item.proprietaryItemText1,proprietaryItemText2:item.proprietaryItemText2}},getPriceListParsedProduct=function getPriceListParsedProduct(item){return{id:item.id,number:item.number,name:item.name,description:item.productDescription,units:item.units,lessThan1500Price:item.firstPrice?item.firstPrice.toFixed(2):0,lessThan5000Price:item.secondPrice?item.secondPrice.toFixed(2):0,cost:item.cost?item.cost.toFixed(2):0,retailMarketPrice:item.retailMarketPrice?item.retailMarketPrice.toFixed(2):0,retailPrice:item.retailPrice?item.retailPrice.toFixed(2):0,firstPrice:item.firstPrice?item.firstPrice.toFixed(2):0,secondPrice:item.secondPrice?item.secondPrice.toFixed(2):0,partnerPrice:item.partnerPrice?item.partnerPrice.toFixed(2):0,dealerPrice:item.dealerPrice?item.dealerPrice.toFixed(2):0,distributorPrice:item.distributorPrice?item.distributorPrice.toFixed(2):0,onSale:"да"===item.onSale}},parseExcelData=function parseExcelData(result){var data=new Uint8Array(result),wb=xlsx__WEBPACK_IMPORTED_MODULE_40___default.a.read(data,{type:"array"}),firstSheetName=wb.SheetNames[0],firstSheet=wb.Sheets[firstSheetName],excelRows=xlsx__WEBPACK_IMPORTED_MODULE_40___default.a.utils.sheet_to_json(firstSheet);if(0===excelRows.length)return alert("Файл пустой либо заполнен некорректно!");for(var disclaimer=excelRows[excelRows.length-1].id,titlePage={to:excelRows[0].titlePage,date:excelRows[1].titlePage,slogan:excelRows[2].titlePage,list:excelRows[3].titlePage.split("/"),active:!0,isMinimized:!0},parsedData=[],tempNumber="000",groupData=null,startId=0,endId=0,index=3;index<excelRows.length;index++){var item=excelRows[index];1===item.id&&(startId=index,endId=index,groupData=getPriceListDefaultParsedObject(item),tempNumber=item.number.substring(0,3));for(var products=[],i=startId;i<endId;i++)products.push(getPriceListParsedProduct(excelRows[i]));if(!item.number){parsedData.push(Object.assign({},groupData,{products:products}));break}item.number.includes(tempNumber)?endId++:(parsedData.push(Object.assign({},groupData,{products:products})),console.log(startId,index,item,excelRows[index]),groupData=getPriceListDefaultParsedObject(item),startId=index,endId=index+1,tempNumber=item.number.substring(0,3))}return console.log(parsedData),{parsedData:parsedData,disclaimer:disclaimer,titlePage:titlePage}},getExcelFileBlob=function(){var _ref=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee(url,filename){var type,headers,_args=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return type=_args.length>2&&void 0!==_args[2]?_args[2]:"blob",headers={"Content-Disposition":"attachment; filename=".concat(encodeURIComponent(filename)),"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},_context.next=4,axios__WEBPACK_IMPORTED_MODULE_39___default.a.get(url,{headers:headers,responseType:"arraybuffer"}).then((function(_ref2){var data=_ref2.data;return"blob"===type?new Blob([data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}):data})).catch((function(error){return console.log(error)}));case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}),_callee)})));return function getExcelFileBlob(_x,_x2){return _ref.apply(this,arguments)}}()},2936:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return getLTDList})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getLTDById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addLTD})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteLTD}));__webpack_require__(36);var _utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),axios__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(259),axios__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);function getLTDList(){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.get("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/"),headers)}function getLTDById(id){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.get("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/").concat(id),headers)}function addLTD(newLtd){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.post("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/"),newLtd,headers)}function deleteLTD(id){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_1__.a)();return axios__WEBPACK_IMPORTED_MODULE_2___default.a.delete("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/plc/").concat(id),headers)}},2939:function(module,exports){},2943:function(module,exports,__webpack_require__){__webpack_require__(21)({target:"Number",stat:!0},{isNaN:function isNaN(number){return number!=number}})},2953:function(module,exports){},2954:function(module,exports){},2958:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(21),toInteger=__webpack_require__(357),thisNumberValue=__webpack_require__(2959),repeat=__webpack_require__(2960),fails=__webpack_require__(38),nativeToFixed=1..toFixed,floor=Math.floor,pow=function(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},multiply=function(data,n,c){for(var index=-1,c2=c;++index<6;)c2+=n*data[index],data[index]=c2%1e7,c2=floor(c2/1e7)},divide=function(data,n){for(var index=6,c=0;--index>=0;)c+=data[index],data[index]=floor(c/n),c=c%n*1e7},dataToString=function(data){for(var index=6,s="";--index>=0;)if(""!==s||0===index||0!==data[index]){var t=String(data[index]);s=""===s?t:s+repeat.call("0",7-t.length)+t}return s};$({target:"Number",proto:!0,forced:nativeToFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!fails((function(){nativeToFixed.call({})}))},{toFixed:function toFixed(fractionDigits){var e,z,j,k,number=thisNumberValue(this),fractDigits=toInteger(fractionDigits),data=[0,0,0,0,0,0],sign="",result="0";if(fractDigits<0||fractDigits>20)throw RangeError("Incorrect fraction digits");if(number!=number)return"NaN";if(number<=-1e21||number>=1e21)return String(number);if(number<0&&(sign="-",number=-number),number>1e-21)if(z=(e=function(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}(number*pow(2,69,1))-69)<0?number*pow(2,-e,1):number/pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(multiply(data,0,z),j=fractDigits;j>=7;)multiply(data,1e7,0),j-=7;for(multiply(data,pow(10,j,1),0),j=e-1;j>=23;)divide(data,1<<23),j-=23;divide(data,1<<j),multiply(data,1,1),divide(data,2),result=dataToString(data)}else multiply(data,0,z),multiply(data,1<<-e,0),result=dataToString(data)+repeat.call("0",fractDigits);return result=fractDigits>0?sign+((k=result.length)<=fractDigits?"0."+repeat.call("0",fractDigits-k)+result:result.slice(0,k-fractDigits)+"."+result.slice(k-fractDigits)):sign+result}})},2959:function(module,exports,__webpack_require__){var classof=__webpack_require__(261);module.exports=function(value){if("number"!=typeof value&&"Number"!=classof(value))throw TypeError("Incorrect invocation");return+value}},2960:function(module,exports,__webpack_require__){"use strict";var toInteger=__webpack_require__(357),requireObjectCoercible=__webpack_require__(168);module.exports=function repeat(count){var str=String(requireObjectCoercible(this)),result="",n=toInteger(count);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(str+=str))1&n&&(result+=str);return result}},3047:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(51),__webpack_require__(165);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),Utils_TableView_TableActions_TableActions_jsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1026),Utils_TableView_TableActions_Actions_DeleteItemAction_jsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(677),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2863),Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5__),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2895),Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6__),Utils_TableView_PlaceholderLoading_PlaceholderLoading_jsx__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2855),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(3048),__webpack_require__(1)),TableView=function TableView(_ref){var data=_ref.data,deleteItem=_ref.deleteItem,userHasAccess=_ref.userHasAccess,_ref$onSelect=_ref.onSelect,onSelect=void 0!==_ref$onSelect&&_ref$onSelect,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,setShowWindow=_ref.setShowWindow,selectedLtd=_ref.selectedLtd;return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){setShowWindow&&setShowWindow(!1)}),[selectedLtd]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"ltd-tableview",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:"Название"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:"Адрес"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:"ИНН"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"main-window__table-actions"})]}),isLoading?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Utils_TableView_PlaceholderLoading_PlaceholderLoading_jsx__WEBPACK_IMPORTED_MODULE_7__.a,{itemClassName:"main-window__list-item",minHeight:"30px",items:3}):data.map((function(item){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"main-window__list-item",onClick:onSelect?function(){return onSelect(item)}:null,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:item.name}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:item.legalAddress}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:item.inn}),onSelect?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"main-window__table-actions",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("img",{onClick:function onClick(){return onSelect(item)},className:"main-window__img",src:Assets_tableview_ok_svg__WEBPACK_IMPORTED_MODULE_6___default.a})}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Utils_TableView_TableActions_TableActions_jsx__WEBPACK_IMPORTED_MODULE_3__.a,{actionsList:[{title:"Редактирование",link:"/ltd-list/edit/".concat(item.id),imgSrc:Assets_tableview_edit_svg__WEBPACK_IMPORTED_MODULE_5___default.a,isRendered:userHasAccess(["ROLE_ADMIN","ROLE_MANAGER"])},{customElement:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Utils_TableView_TableActions_Actions_DeleteItemAction_jsx__WEBPACK_IMPORTED_MODULE_4__.a,{title:"Удаление заявки",onClick:function onClick(){return deleteItem(item.id)}}),isRendered:!!deleteItem&&userHasAccess(["ROLE_ADMIN"])}]})]},item.id)}))]})})};TableView.displayName="TableView",TableView.__docgenInfo={description:"",methods:[],displayName:"TableView",props:{onSelect:{defaultValue:{value:"false",computed:!1},required:!1},isLoading:{defaultValue:{value:"false",computed:!1},required:!1}}},__webpack_exports__.a=TableView,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/LtdListPage/TableView/TableView.jsx"]={name:"TableView",docgenInfo:TableView.__docgenInfo,path:"src/components/MainPage/PriceList/LtdListPage/TableView/TableView.jsx"})},3048:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3049);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3049:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,".ltd-tableview{width:100%}.ltd-tableview .main-window__list-item:not(.main-window__list-item--header){cursor:pointer}.ltd-tableview .main-window__list-item:not(.main-window__list-item--header) span{padding-top:15px;padding-bottom:15px}.ltd-tableview .main-window__list-item span:nth-child(1){flex:0 1 20%}.ltd-tableview .main-window__list-item span:nth-child(2){flex:0 1 40%}.ltd-tableview .main-window__list-item span:nth-child(3){flex:0 1 10%}\n",""]),module.exports=exports},3467:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3468);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3468:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.new-price-item{background-color:#fff;height:100%;padding:25px 0}.new-price-item .main-window__header{display:flex;flex-direction:row;justify-content:flex-start;width:100%;margin-bottom:10px}.new-price-item .main-form__title{display:flex;flex-direction:row;align-items:center;padding-left:24px;text-align:left;box-sizing:border-box;margin-bottom:0}.new-price-item .main-form__title .main-window__button{margin-left:15px;font-size:0.9rem}.new-price-item .new-price-item__checkbox-container{width:fit-content;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;margin-right:auto}.new-price-item .main-form__form{background-color:transparent;border:none;width:calc(100% + 50px);max-width:1200px !important;--form__max-width--content: 1000px;margin-right:auto;padding-top:15px}.new-price-item .main-form__form .main-form__title{width:100%;text-align:left;min-height:70px;color:#fff;line-height:70px;margin-bottom:0}.new-price-item .main-form__form .main-form__fieldset{margin-bottom:0}.new-price-item .main-form__input_field--vertical{flex-direction:column}.new-price-item .main-form__info-panel{width:50% !important;font-size:1rem}.new-price-item .main-form__info-panel .main-form__button{font-size:0.8rem}.new-price-item .main-form__info-panel .main-form__button--inverted{color:#555555 !important}.new-price-item .main-form__item--header{background-color:#eeeeee;border:1px solid #ccc;border-radius:5px;padding:10px;font-size:125%;flex-direction:row !important;justify-content:flex-start !important;margin-bottom:10px !important}.new-price-item .main-form__item--header .main-form__input_name{color:#000000 !important}.new-price-item .main-form__item--header:first-child{width:100%}.new-price-item .main-form__item--header .checkbox{width:fit-content !important;margin-right:5px}.new-price-item .main-form__item--header .checkbox__container{font-size:1rem}.new-price-item .main-form__item--header .checkbox__checkmark{background-color:#fff}.new-price-item .main-form__item--header .main-window__img{cursor:pointer}.new-price-item .main-form__item--header .main-form__input_field{flex-wrap:wrap}.new-price-item .main-form__item--header .main-form__input_field .main-form__title{min-width:400px;margin-bottom:10px;text-align:center}.new-price-item .price-list__group-wrapper{display:flex;flex-direction:column;border:1px solid #ccc;transition:100ms ease-in-out;padding:15px 10px;padding-right:25px;border-radius:3px;width:100%;margin-bottom:10px;box-sizing:border-box;margin-bottom:0;border-radius:0;border-bottom:none}.new-price-item .price-list__group-wrapper:nth-child(2){border-top-left-radius:3px;border-top-right-radius:3px}.new-price-item .price-list__group-wrapper:last-child{margin-bottom:0;border-bottom:1px solid #ccc;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.new-price-item .price-list__group-wrapper .main-form__item{margin-bottom:0}.new-price-item .price-list__group-wrapper .main-form__item:first-child{flex-direction:row}.new-price-item .price-list__group-wrapper .main-form__item:first-child .checkbox{width:fit-content;margin-right:5px}.new-price-item .price-list__group-wrapper .main-form__item:first-child .main-window__img{transition:100ms ease-in-out;cursor:pointer}.new-price-item .price-list__group-wrapper .main-form__item .checkbox{margin-bottom:0}.new-price-item .price-list__title-page-wrapper{display:flex;flex-direction:column;border:1px solid #ccc;transition:100ms ease-in-out;padding:15px 20px;border-radius:3px;width:100%;margin-bottom:30px;box-sizing:border-box;margin-top:-5px}.new-price-item .price-list__category-wrapper{display:flex;flex-direction:column;width:100%;box-sizing:border-box;margin-bottom:30px}.new-price-item .price-list__category-wrapper:last-child{margin-bottom:0}.new-price-item .price-list__category-wrapper .price-list__group-wrapper{margin-left:20px;box-sizing:border-box;width:calc(100% - 20px)}.new-price-item .price-list__images-wrapper{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;margin-bottom:20px}.new-price-item .price-list__images-wrapper .main-form__item{margin-right:10px;min-width:250px;max-width:20%;margin-bottom:5px}.new-price-item .price-list__images-wrapper .main-form__item:last-child{margin-right:0}.new-price-item .main-form__item{width:100% !important;box-sizing:border-box}.new-price-item .main-form__item .main-form__input_name{width:fit-content !important;white-space:nowrap}.new-price-item .main-form__item .main-form__input_field{justify-content:flex-start !important;align-items:center}.new-price-item .main-form__item .main-form__input_field .main-form__product_img{max-width:150px}.new-price-item .main-form__item .main-form__input_field .main-form__product_img img{width:100%;min-height:25px}.new-price-item .main-form__buttons{margin-bottom:-5px !important}.new-price-item .main-form__buttons--vertical{width:100% !important;margin-bottom:0}.new-price-item .main-form__buttons--vertical .main-form__item--header .checkbox{margin-bottom:0}.new-price-item .main-form__buttons--vertical .main-form__item--header .checkbox__container{font-size:1rem}.new-price-item .main-form__buttons--vertical .main-form__item--header .checkbox__checkmark{background-color:#fff}.new-price-item .main-form__buttons .checkbox{width:50%}.new-price-item .main-form__buttons .checkbox__text{white-space:nowrap}.new-price-item .main-form__buttons:last-child{margin-bottom:0}@media (max-width: 768px){.new-price-item .main-form__title{padding-left:20px}.new-price-item .main-form__item--header{flex-direction:row !important;align-items:center !important;width:calc(100% - 50px) !important}.new-price-item .main-form__item--header .main-form__input_name{width:fit-content !important;margin-bottom:10px}}@media (min-width: 1024px){.new-price-item .main-form .main-form__form{max-width:900px}}\n",""]),module.exports=exports},3469:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/крепеж_для_деревянных_досок.7264c726.png"},3470:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/крепеж_для_дпк_досок.78956542.png"},3471:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/крепежные_элементы.36e3207d.png"},3472:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/default_category.25f2654f.png"},3473:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/Фасад.40f5553d.png"},3474:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/Терраса.b2b5cf2f.png"},3475:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(21),createHTML=__webpack_require__(1807);$({target:"String",proto:!0,forced:__webpack_require__(1808)("bold")},{bold:function bold(){return createHTML(this,"b","","")}})},3476:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/contacts.cad924ad.png"},3477:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/list.9fac84b5.png"},3478:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/osfix_logo__no_slogan.17bc9de9.png"},3479:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/linkButton.cb9a2550.png"},3480:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/onSale.c38a10db.png"},3481:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/rospatent.37dc4094.png"},3482:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/contacts_excel.ca965449.png"},3483:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/osfix_logo.b632d7b2.png"},3484:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3485);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3485:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,".select-ltd{width:100%;margin-bottom:20px}.select-ltd .form-window__body{padding:0}.select-ltd .form-window__body .main-window__list-item{cursor:pointer}.select-ltd .main-form__input_field>p{display:flex;flex-direction:column;box-sizing:border-box;margin:5px 0;border-left:1px solid #bbb;padding:0 10px;width:100%;max-width:300px;font-size:1rem;color:#444}.select-ltd .main-form__input_field>p span:not(:last-child){margin-bottom:5px}.select-ltd .main-form__input_field>p span:nth-child(2){font-size:0.9rem;color:#888}.select-ltd .main-form__input_field>span{margin:0;width:100%;box-sizing:border-box;color:#666;font-size:0.9rem}\n",""]),module.exports=exports},3486:function(module,exports,__webpack_require__){var api=__webpack_require__(45),content=__webpack_require__(3487);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3487:function(module,exports,__webpack_require__){(exports=__webpack_require__(46)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-price-item{width:calc(100%);position:relative}.select-price-item .select-price-item__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select-price-item .select-price-item__overlay--hidden{display:none}.select-price-item .input_products{width:100%;margin-top:10px}.select-price-item .input_products .input_products__input_name{font-size:85%}.select-price-item .input_products .select{width:calc(80% - 0px)}.select-price-item .input_products .select__input{width:calc(100% - 20px);min-width:0 !important}.select-price-item .main-form__item{margin-bottom:0px;margin-top:10px}.select-price-item .main-form__item .checkbox{margin-right:25px}.select-price-item .select-price-item__selected_item:first-child{margin-top:0 !important}.select-price-item .main-form__product_img{max-width:200px}.select-price-item .main-form__product_img img{max-width:200px !important}.select-price-item__selected_item{background-color:#dddddd;border-radius:5px;padding:0px 15px;margin-top:10px;width:calc(100% - 60px);position:relative;transition:0.2s ease-in-out}.select-price-item__selected_item:first-of-type{width:calc(100% - 30px)}.select-price-item__selected_item:hover{background-color:#c4c4c4}.select-price-item__selected_item .select-price-item__img{position:absolute;right:-35px;cursor:pointer;top:25%}.select-price-item .select-price-item__selected_form .select-price-item__button{margin-top:15px}.select-price-item .button{font-size:0.8rem}@media (max-width: 768px){.select-price-item .select-price-item__selected_form{height:650px}.select-price-item .select-price-item__selected_form--hidden{height:0}.select-price-item .select-price-item__selected_header{flex-direction:column;align-items:flex-start}.select-price-item .select-price-item__item{width:100%;flex-direction:column !important}.select-price-item .select-price-item__input_name{width:100%}.select-price-item .select-price-item__selected_name{width:100%;display:flex;align-items:center;justify-content:space-between}.select-price-item .select-price-item__input_field{width:100%}}\n",""]),module.exports=exports},3549:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var toConsumableArray=__webpack_require__(18),toConsumableArray_default=__webpack_require__.n(toConsumableArray),asyncToGenerator=__webpack_require__(37),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),slicedToArray=__webpack_require__(7),slicedToArray_default=__webpack_require__.n(slicedToArray),regenerator=__webpack_require__(20),regenerator_default=__webpack_require__.n(regenerator),react=(__webpack_require__(23),__webpack_require__(134),__webpack_require__(83),__webpack_require__(166),__webpack_require__(154),__webpack_require__(202),__webpack_require__(51),__webpack_require__(473),__webpack_require__(472),__webpack_require__(302),__webpack_require__(36),__webpack_require__(258),__webpack_require__(165),__webpack_require__(1784),__webpack_require__(0)),utilsAPI=(__webpack_require__(3467),__webpack_require__(2854),__webpack_require__(10));function getPriceGroupImageByName(name){return Object(utilsAPI.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/price_group/name/"+name,method:"GET"})}function updatePriceGroupByName(name,body){return Object(utilsAPI.b)({url:Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL+"/api/v1/price_group/name/"+name,method:"PUT",body:JSON.stringify(body)})}var FileUploader=__webpack_require__(676),CheckBox=__webpack_require__(232),Button=__webpack_require__(153),_=(__webpack_require__(201),__webpack_require__(3469)),_default=__webpack_require__.n(_),priceList_=__webpack_require__(3470),priceList_default=__webpack_require__.n(priceList_),assets_priceList_=__webpack_require__(3471),assets_priceList_default=__webpack_require__.n(assets_priceList_),default_category=__webpack_require__(3472),default_category_default=__webpack_require__.n(default_category),assets_priceList_0=__webpack_require__(3473),assets_priceList_default_0=__webpack_require__.n(assets_priceList_0),assets_priceList_1=__webpack_require__(3474),assets_priceList_default_1=__webpack_require__.n(assets_priceList_1),functions=__webpack_require__(63),defaultCategories=[{name:"Крепеж для деревянных досок",img:_default.a,active:!0},{name:"Крепеж для ДПК досок",img:priceList_default.a,active:!0},{name:"Крепежные элементы",img:assets_priceList_default.a,active:!0},{name:"Продукция для подконструкций",img:default_category_default.a,active:!0},{name:"Крепеж для НВФ",img:default_category_default.a,active:!0}],objects_locationTypes=[{name:"Фасад",img:assets_priceList_default_0.a},{name:"Терраса",img:assets_priceList_default_1.a}],defaultOptionalColumns=[{id:1,property:"partnerPrice",name:"Опт 1",active:!1},{id:2,property:"dealerPrice",name:"Опт 2",active:!1},{id:3,property:"distributorPrice",name:"Опт 3",active:!1}],defaultTitlePage={to:"",date:Object(functions.f)(new Date),slogan:"",list:[],active:!0,isMinimized:!0,img1:"",img2:"",img3:""},pdfHeaderCompanyContacts_name="ООО «ОСФИКС»",pdfHeaderCompanyContacts_site="https://www.osfix.ru",pdfHeaderCompanyContacts_legalAddress="Лиговский пр., 52, Санкт-Петербург, 191040",pdfHeaderCompanyContacts_email="info@osfix.ru",pdfHeaderCompanyContacts_phone="+7 (812) 449-10-09",contacts=(__webpack_require__(474),__webpack_require__(3475),__webpack_require__(1783),__webpack_require__(2858),__webpack_require__(475),__webpack_require__(2943),__webpack_require__(673),__webpack_require__(3476)),contacts_default=__webpack_require__.n(contacts),no_img=__webpack_require__(2883),no_img_default=__webpack_require__.n(no_img),list=__webpack_require__(3477),list_default=__webpack_require__.n(list),osfix_logo_no_slogan=__webpack_require__(3478),osfix_logo_no_slogan_default=__webpack_require__.n(osfix_logo_no_slogan),linkButton=__webpack_require__(3479),linkButton_default=__webpack_require__.n(linkButton),onSale=__webpack_require__(3480),onSale_default=__webpack_require__.n(onSale),rospatent=__webpack_require__(3481),rospatent_default=__webpack_require__.n(rospatent),pdfFunctions=__webpack_require__(2862),sorting=__webpack_require__(303),PriceList_functions=__webpack_require__(2935),loadGroupImage=function(){var _ref=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(img){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(null===img||""===img){_context.next=4;break}return _context.next=3,Object(functions.l)(img,"jpeg",.3);case 3:return _context.abrupt("return",_context.sent);case 4:return _context.abrupt("return",null);case 5:case"end":return _context.stop()}}),_callee)})));return function loadGroupImage(_x){return _ref.apply(this,arguments)}}(),getPriceListPdf_sortProductsByNumber=function sortProductsByNumber(data){return Object(sorting.a)(data,{fieldName:"number",direction:"asc"})},getLine=function getLine(margins){return{canvas:[{type:"line",x1:0,y1:0,x2:515,y2:0,lineWidth:2,lineColor:"#e30434"}],alignment:"justify",width:"*",margin:[margins.l,margins.t,margins.r,margins.b]}},priceStyles={header:{fontSize:20,bold:!0,alignment:"center",margin:[0,5,0,5]},title:{fontSize:24,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,0,0,5],color:"white",background:"#e30434"},regularText:{fontSize:10,italics:!0},tableHeader:{fontSize:12,bold:!0,alignment:"center"}},getPriceFooterItem=function getPriceFooterItem(title,value){return[{text:"".concat(title," "),fontSize:10,bold:!0},{text:"".concat(value,"\t"),fontSize:10}]},getPriceListPdf_getPriceFooterList=function getPriceFooterList(companyContacts){var _companyContacts$inn,_companyContacts$kpp,_companyContacts$ogrn,_companyContacts$okpo,_companyContacts$bank,_companyContacts$chec,_companyContacts$bik;return{text:[].concat(toConsumableArray_default()(getPriceFooterItem("ИНН",null!==(_companyContacts$inn=null==companyContacts?void 0:companyContacts.inn)&&void 0!==_companyContacts$inn?_companyContacts$inn:"7842143789")),toConsumableArray_default()(getPriceFooterItem("КПП",null!==(_companyContacts$kpp=null==companyContacts?void 0:companyContacts.kpp)&&void 0!==_companyContacts$kpp?_companyContacts$kpp:"784201001")),toConsumableArray_default()(getPriceFooterItem("ОГРН",null!==(_companyContacts$ogrn=null==companyContacts?void 0:companyContacts.ogrn)&&void 0!==_companyContacts$ogrn?_companyContacts$ogrn:"1177847364584")),toConsumableArray_default()(getPriceFooterItem("ОКПО",null!==(_companyContacts$okpo=null==companyContacts?void 0:companyContacts.okpo)&&void 0!==_companyContacts$okpo?_companyContacts$okpo:"20161337")),toConsumableArray_default()(getPriceFooterItem("Банк",null!==(_companyContacts$bank=null==companyContacts?void 0:companyContacts.bank)&&void 0!==_companyContacts$bank?_companyContacts$bank:"Филиал №7806 ВТБ (ПАО)")),toConsumableArray_default()(getPriceFooterItem("Расчетный счет №",null!==(_companyContacts$chec=null==companyContacts?void 0:companyContacts.checkingAccount)&&void 0!==_companyContacts$chec?_companyContacts$chec:"40702810717060000232")),toConsumableArray_default()(getPriceFooterItem("БИК",null!==(_companyContacts$bik=null==companyContacts?void 0:companyContacts.bik)&&void 0!==_companyContacts$bik?_companyContacts$bik:"044525411"))),alignment:"left",width:"*",margin:[40,0,40,10]}},getPriceFooter=function getPriceFooter(currentPage,pageCount,active,companyContacts,isMini){return 1===currentPage&&active&&!isMini?{text:" "}:currentPage===pageCount||isMini?[getLine({l:40,t:0,r:40,b:10}),getPriceListPdf_getPriceFooterList(companyContacts)]:{text:"Страница "+currentPage.toString(),alignment:"center",fontSize:11,color:"#999999",margin:[0,20,0,0]}},emptyTextObject={text:""},getPriceHeaderItem=function getPriceHeaderItem(name,link){var _options$bold,_options$margin,_options$lineHeight,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{text:"".concat(name,"\n"),link:null!=link?link:void 0,bold:null!==(_options$bold=options.bold)&&void 0!==_options$bold&&_options$bold,fontSize:10,margin:null!==(_options$margin=options.margin)&&void 0!==_options$margin?_options$margin:[0,0,0,0],lineHeight:null!==(_options$lineHeight=options.lineHeight)&&void 0!==_options$lineHeight?_options$lineHeight:1}},getPriceListPdf_getPriceHeaderList=function getPriceHeaderList(companyContacts){var _companyContacts$site,_companyContacts$name,_companyContacts$phon,_companyContacts$emai,_companyContacts$lega,site=null!==(_companyContacts$site=null==companyContacts?void 0:companyContacts.site)&&void 0!==_companyContacts$site?_companyContacts$site:pdfHeaderCompanyContacts_site,name=null!==(_companyContacts$name=null==companyContacts?void 0:companyContacts.name)&&void 0!==_companyContacts$name?_companyContacts$name:pdfHeaderCompanyContacts_name,phone=null!==(_companyContacts$phon=null==companyContacts?void 0:companyContacts.phone)&&void 0!==_companyContacts$phon?_companyContacts$phon:pdfHeaderCompanyContacts_phone,email=null!==(_companyContacts$emai=null==companyContacts?void 0:companyContacts.email)&&void 0!==_companyContacts$emai?_companyContacts$emai:pdfHeaderCompanyContacts_email,legalAddress=null!==(_companyContacts$lega=null==companyContacts?void 0:companyContacts.legalAddress)&&void 0!==_companyContacts$lega?_companyContacts$lega:pdfHeaderCompanyContacts_legalAddress;return{text:[getPriceHeaderItem(name,site,{margin:[0,0,0,0],bold:!0}),getPriceHeaderItem(legalAddress,"https://yandex.ru/maps/-/CKUrY0Ih",{lineHeight:1.1}),getPriceHeaderItem(site,site,{lineHeight:1.1}),getPriceHeaderItem(email,null,{lineHeight:1.1}),getPriceHeaderItem(phone,"tel:+78124491009",{lineHeight:1.1})],margin:[5,0,0,0],alignment:"left"}},getPriceHeaderLogo=function getPriceHeaderLogo(logo){return logo?{image:logo,link:"https://www.osfix.ru",fit:[100,100],margin:[0,13,0,0],alignment:"right"}:emptyTextObject},getPriceHeader=function getPriceHeader(currentPage,active,contactsImgData){var companyContacts=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},isMini=arguments.length>4?arguments[4]:void 0;return 1===currentPage&&active&&!isMini?[emptyTextObject]:[{alignment:"justify",width:"*",margin:[40,40,40,0],columns:[{image:contactsImgData,width:10,alignment:"left"},getPriceListPdf_getPriceHeaderList(companyContacts),getPriceHeaderLogo(null==companyContacts?void 0:companyContacts.logo)]},getLine({l:40,t:5,r:40,b:40})]},getPriceListPdf_getAllLocationTypes=function getAllLocationTypes(locationTypes,location,locations){return Promise.all(locationTypes.map(function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(locationType){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(locationType.name!==location){_context2.next=10;break}return _context2.t0=locations,_context2.t1={text:location,style:"regularText",fontSize:8,color:"#e30434",alignment:"right",margin:[0,5,1,0]},_context2.next=5,Object(functions.l)(locationType.img);case 5:return _context2.t2=_context2.sent,_context2.t3={image:_context2.t2,width:14},_context2.t4=[_context2.t1,_context2.t3],_context2.t5={columnGap:1,columns:_context2.t4},_context2.abrupt("return",_context2.t0.push.call(_context2.t0,_context2.t5));case 10:case"end":return _context2.stop()}}),_callee2)})));return function(_x2){return _ref2.apply(this,arguments)}}()))},getGroupOfProductsName=function getGroupOfProductsName(_ref3){var id=_ref3.id,name=_ref3.name,linkAddress=_ref3.linkAddress;return{text:[{text:" ",style:"subheader"},{text:name.toUpperCase(),style:"subheader",fontSize:12,groupId:id,link:linkAddress,bold:!0},{text:" ",style:"subheader"}],width:110}},getGroupOfProductsDescription=function getGroupOfProductsDescription(_ref4){return{text:[{text:_ref4.description,style:"regularText",color:"#666666",fontSize:8,bold:!0}],margin:[10,1,0,0],width:"*"}},sortLocations=function sortLocations(locations){return locations.length<=1?locations:locations.sort((function(a,b){var element=a.columns[0].text.localeCompare(b.columns[0].text,void 0,{numeric:!0});return element<0?-1:element>0?1:0}))},getPriceListPdf_getGroupOfProductsLocations=function getGroupOfProductsLocations(locations){return{stack:[{columns:toConsumableArray_default()(sortLocations(locations)),margin:[0,0,0,2.5],columnGap:1,width:100}],alignment:"right",width:100}},getGroupOfProductsTopImages=function getGroupOfProductsTopImages(groupImg1Data,groupImg2Data,groupImg3Data,groupImg4Data,testImgData){var getProductTopImage=function getProductTopImage(img){var marginLeft=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{image:null!=img?img:testImgData,fit:[120,100],margin:[marginLeft,0,0,5],alignment:"left"}};return{columns:[getProductTopImage(groupImg1Data),getProductTopImage(groupImg2Data,10),getProductTopImage(groupImg3Data,10),getProductTopImage(groupImg4Data,11)]}},getProductsTableHeaderItem=function getProductsTableHeaderItem(text){var marginTop=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;return{text:text,margin:[0,marginTop,0,0]}},getPriceListPdf_getProductsTableHeaderFakeRow=function getProductsTableHeaderFakeRow(priceHeader,optionalCols){var emptyRow={text:"",border:[!1,!1,!1,!1]};return[emptyRow,emptyRow,emptyRow,{text:priceHeader?"".concat(priceHeader,", ₽"):"Цена за штуку, ₽",colSpan:3+optionalCols.length,italics:!0},{},{}].concat(toConsumableArray_default()(optionalCols.map((function(){}))))},getPriceListPdf_getProductsTableHeader=function getProductsTableHeader(groupOfProducts,optionalCols){var retailName=groupOfProducts.retailName,firstPriceName=groupOfProducts.firstPriceName,secondPriceName=groupOfProducts.secondPriceName;return[getPriceListPdf_getProductsTableHeaderFakeRow(groupOfProducts.priceHeader,optionalCols),[getProductsTableHeaderItem("Артикул",5),getProductsTableHeaderItem("Название",5),getProductsTableHeaderItem("Ед. изм.",5),getProductsTableHeaderItem(null!=retailName?retailName:"Розница"),getProductsTableHeaderItem(null!=firstPriceName?firstPriceName:"до 1500 шт."),getProductsTableHeaderItem(null!=secondPriceName?secondPriceName:"до 5000 шт.")].concat(toConsumableArray_default()(optionalCols.map((function(column){return getProductsTableHeaderItem(Object(PriceList_functions.b)(column,groupOfProducts))}))))]},getDisclaimerText=function getDisclaimerText(disclaimer){return{margin:[0,10,0,0],table:{body:[[{border:[!0,!1,!1,!1],fontSize:12,borderColor:["#e30434","#e30434","#e30434","#e30434"],text:[{text:disclaimer}],margin:[0,0,10,0]}]]}}},getTitlePageReceiver=function getTitlePageReceiver(_ref5){return{alignment:"right",stack:[{columns:[{width:"*",text:""},{width:180,table:{body:[[{border:[!0,!0,!0,!1],fontSize:13,borderColor:["#e30434","#e30434","#e30434","#e30434"],text:_ref5.to,alignment:"left",margin:[2.5,2.5,10,2.5]}],[{text:_ref5.date,alignment:"right",fontSize:11,color:"#666666",border:[!0,!1,!0,!0],borderColor:["#e30434","#e30434","#e30434","#e30434"]}]]},alignment:"right"}],margin:[0,0,0,5]}],margin:[0,0,0,50]}},getTitlePageListItem=function getTitlePageListItem(listImgData,item){return[{margin:[0,10,0,0],alignment:"left",columns:[{image:listImgData,fit:[15,15],margin:[0,1,0,0],width:15},{text:item,margin:[5,0,0,0],fontSize:16,alignment:"center",width:"auto"}]}]},getTitlePageLogo=function(){var _ref7=asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(_ref6){var slogan,companyLogoNoSloganData;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return slogan=_ref6.slogan,_context3.next=3,Object(functions.l)(osfix_logo_no_slogan_default.a);case 3:return companyLogoNoSloganData=_context3.sent,_context3.abrupt("return",{stack:[{image:companyLogoNoSloganData,link:"https://www.osfix.ru",fit:[200,200],margin:[0,0,0,0],alignment:"center"},{text:slogan,alignment:"center",margin:[0,5,0,15],fontSize:18}]});case 5:case"end":return _context3.stop()}}),_callee3)})));return function getTitlePageLogo(_x3){return _ref7.apply(this,arguments)}}(),getTitlePageImageObject=function getTitlePageImageObject(img,testImgData){var alignment=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right";return{image:null!=img?img:testImgData,fit:[150,130],margin:[0,0,0,5],alignment:alignment}},getTitlePageImagesList=function(){var _ref9=asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(_ref8){var img1,img2,img3,titlePageImg1Data,titlePageImg2Data,titlePageImg3Data,testImgData;return regenerator_default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return img1=_ref8.img1,img2=_ref8.img2,img3=_ref8.img3,_context4.next=3,loadGroupImage(img1);case 3:return titlePageImg1Data=_context4.sent,_context4.next=6,loadGroupImage(img2);case 6:return titlePageImg2Data=_context4.sent,_context4.next=9,loadGroupImage(img3);case 9:return titlePageImg3Data=_context4.sent,_context4.next=12,Object(functions.l)(no_img_default.a);case 12:return testImgData=_context4.sent,_context4.abrupt("return",{columns:[getTitlePageImageObject(titlePageImg1Data,testImgData),getTitlePageImageObject(titlePageImg2Data,testImgData,"center"),getTitlePageImageObject(titlePageImg3Data,testImgData,"left")],alignment:"center",width:125,margin:[0,0,0,30]});case 14:case"end":return _context4.stop()}}),_callee4)})));return function getTitlePageImagesList(_x4){return _ref9.apply(this,arguments)}}(),getTitlePage=function(){var _ref10=asyncToGenerator_default()(regenerator_default.a.mark((function _callee5(titlePage){var listImgData,titlePageLogo,titlePageImagesList;return regenerator_default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,Object(functions.l)(list_default.a);case 2:return listImgData=_context5.sent,_context5.next=5,getTitlePageLogo(titlePage);case 5:return titlePageLogo=_context5.sent,_context5.next=8,getTitlePageImagesList(titlePage);case 8:return titlePageImagesList=_context5.sent,_context5.abrupt("return",{stack:[getTitlePageReceiver(titlePage),titlePageLogo,titlePageImagesList,{stack:toConsumableArray_default()(titlePage.list.map((function(item){return getTitlePageListItem(listImgData,item)})))}],pageBreak:"after",margin:[0,-50,0,0]});case 10:case"end":return _context5.stop()}}),_callee5)})));return function getTitlePage(_x5){return _ref10.apply(this,arguments)}}(),sortFinalList=function sortFinalList(data){return data.length<=1?data:data.sort((function(a,b){var element=a.stack[0].stack[1].text.localeCompare(b.stack[0].stack[1].text,void 0,{numeric:!0});return element<0?-1:element>0?1:0}))},getCustomColumnText=function getCustomColumnText(field,onSale){var marginTop=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return{text:field,margin:[0,marginTop,0,0],bold:onSale,color:onSale?"#111111":"#666666"}},getPriceColumnText=function getPriceColumnText(price,onSale,isOptionsColsLengthMoreThanOne){var isNumber=""!==price&&!Number.isNaN(price)&&0!==price;return getCustomColumnText(isNumber?price:" ",onSale,isOptionsColsLengthMoreThanOne?4.5:0)},getPriceListPdf_getProductsTableListItem=function getProductsTableListItem(product,optionalCols,saleImgData){var isOptionsColsLengthMoreThanOne=optionalCols.length>1;return[getCustomColumnText(product.number,product.onSale,isOptionsColsLengthMoreThanOne?5:0),getProductsTableOnSaleText(product,saleImgData),getCustomColumnText(product.units,product.onSale,isOptionsColsLengthMoreThanOne?1:0)].concat(toConsumableArray_default()(function getProductsTablePriceColumns(product,isOptionsColsLengthMoreThanOne){return["retailPrice","lessThan1500Price","lessThan5000Price"].map((function(item){return getPriceColumnText(product[item],product.onSale,isOptionsColsLengthMoreThanOne)}))}(product,isOptionsColsLengthMoreThanOne)),toConsumableArray_default()(optionalCols.map((function(column){return void 0!==product[column.property]?getPriceColumnText(product[column.property],product.onSale,isOptionsColsLengthMoreThanOne):getPriceColumnText(0,product.onSale,isOptionsColsLengthMoreThanOne)}))))},getProductsTableOnSaleText=function getProductsTableOnSaleText(product,saleImgData,isOptionsColsLengthMoreThanOne){return product.onSale?{columns:[{image:saleImgData,width:15},{text:product.name,margin:[5,isOptionsColsLengthMoreThanOne?2:1.5,0,0],alignment:"left",bold:product.onSale,color:"#111111"}]}:{text:product.name,margin:[0,isOptionsColsLengthMoreThanOne?1:0,0,0],alignment:"left"}},productsTableListLayout={hLineWidth:function hLineWidth(){return 1},vLineWidth:function vLineWidth(){return 1},hLineColor:function hLineColor(){return"#444444"},vLineColor:function vLineColor(){return"#444444"}},getPriceListPdf_getProductsTableListWidths=function getProductsTableListWidths(optionalCols){return[40,"*","*",35,35,35].concat(toConsumableArray_default()(optionalCols.map((function(item,index){return optionalCols.length,35}))))},getProductsTableList=function(){var _ref11=asyncToGenerator_default()(regenerator_default.a.mark((function _callee6(groupOfProducts,optionalCols){var saleImgData;return regenerator_default.a.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,Object(functions.l)(onSale_default.a);case 2:return saleImgData=_context6.sent,_context6.abrupt("return",{columns:[{unbreakable:groupOfProducts.products.length<=10,table:{widths:getPriceListPdf_getProductsTableListWidths(optionalCols),body:[].concat(toConsumableArray_default()(getPriceListPdf_getProductsTableHeader(groupOfProducts,optionalCols)),toConsumableArray_default()(getPriceListPdf_sortProductsByNumber(groupOfProducts.products).map((function(product){return getPriceListPdf_getProductsTableListItem(product,optionalCols,saleImgData)}))))},layout:productsTableListLayout,alignment:"center",width:"*",fontSize:8,color:"#555555",margin:[0,0,0,5]}]});case 4:case"end":return _context6.stop()}}),_callee6)})));return function getProductsTableList(_x6,_x7){return _ref11.apply(this,arguments)}}(),getProductsInfoText=function getProductsInfoText(infoText){return{table:{body:[[{border:[!0,!1,!1,!1],style:"regularText",borderColor:["#e30434","#e30434","#e30434","#e30434"],text:infoText,margin:[0,0,10,0]}]]}}},getProprietaryItem=function(){var _ref12=asyncToGenerator_default()(regenerator_default.a.mark((function _callee7(text){var proprietaryItemImgData;return regenerator_default.a.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,Object(functions.l)(rospatent_default.a);case 2:return proprietaryItemImgData=_context7.sent,_context7.abrupt("return",text?{stack:[{image:proprietaryItemImgData,width:65,margin:[0,10,9,0],alignment:"right"},{text:text,margin:[0,5,0,0],alignment:"center",fontSize:10}]}:{text:"  "});case 4:case"end":return _context7.stop()}}),_callee7)})));return function getProprietaryItem(_x8){return _ref12.apply(this,arguments)}}(),getGroupSortItem=function getGroupSortItem(item,isMini){return isMini?item.stack[2].columns[0].table.body[2][0].text:item.stack[0].columns[0].text[1].groupId},sortFullGroup=function sortFullGroup(data,isMini){return data.sort((function(a,b){var first=getGroupSortItem(a,isMini),second=getGroupSortItem(b,isMini);return first<second?-1:first>second?1:0}))},getLinkButton=function getLinkButton(linkButtonData,linkAddress){return{image:linkButtonData,link:linkAddress,width:100,alignment:"right"}},priceListCategoryNameStyles={style:"header",fontSize:16,color:"#ffffff",alignment:"center",relativePosition:{x:0,y:-38}},getPriceListPdf_makeListUnbreakable=function makeListUnbreakable(sortedArr,tempImg,category){return{stack:toConsumableArray_default()(sortedArr.map((function(item,index){return 0!==index?item:{unbreakable:item.stack[2].columns[0].table.body.length<=10,stack:[{image:tempImg,width:510,height:50,alignment:"center"},Object.assign({text:category.toUpperCase()},priceListCategoryNameStyles)].concat(toConsumableArray_default()(item.stack))}})))}},getProductsHeader=function getProductsHeader(groupOfProducts,locations){return{width:"*",headlineLevel:1,columns:[getGroupOfProductsName(groupOfProducts),getGroupOfProductsDescription(groupOfProducts),getPriceListPdf_getGroupOfProductsLocations(locations)],margin:[0,10,0,10]}},getProductsFooter=function getProductsFooter(groupOfProducts,linkButtonData){var proprietaryItems=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{unbreakable:!0,alignment:"justify",width:"*",margin:[0,0,0,10],columns:[getProductsInfoText(groupOfProducts.infoText),{unbreakable:!0,stack:[getLinkButton(linkButtonData,groupOfProducts.linkAddress),proprietaryItems.proprietaryItem1,proprietaryItems.proprietaryItem2],width:100}]}},getProductFooterImg=function getProductFooterImg(groupImgFooterData){return null!==groupImgFooterData?{image:groupImgFooterData,fit:[512,100]}:emptyTextObject},getFullGroup=function(){var _ref13=asyncToGenerator_default()(regenerator_default.a.mark((function _callee8(groupOfProducts,locations,testImgData,optionalCols,isMini){var linkButtonData,groupImg1Data,groupImg2Data,groupImg3Data,groupImg4Data,groupImgFooterData,proprietaryItem1,proprietaryItem2,productsTableList;return regenerator_default.a.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,Object(functions.l)(linkButton_default.a);case 2:return linkButtonData=_context8.sent,_context8.next=5,loadGroupImage(groupOfProducts.groupImg1);case 5:return groupImg1Data=_context8.sent,_context8.next=8,loadGroupImage(groupOfProducts.groupImg2);case 8:return groupImg2Data=_context8.sent,_context8.next=11,loadGroupImage(groupOfProducts.groupImg3);case 11:return groupImg3Data=_context8.sent,_context8.next=14,loadGroupImage(groupOfProducts.groupImg4);case 14:return groupImg4Data=_context8.sent,_context8.next=17,loadGroupImage(groupOfProducts.footerImg);case 17:return groupImgFooterData=_context8.sent,_context8.next=20,getProprietaryItem(groupOfProducts.proprietaryItemText1);case 20:return proprietaryItem1=_context8.sent,_context8.next=23,getProprietaryItem(groupOfProducts.proprietaryItemText2);case 23:return proprietaryItem2=_context8.sent,_context8.next=26,getProductsTableList(groupOfProducts,optionalCols);case 26:return productsTableList=_context8.sent,_context8.abrupt("return",{unbreakable:groupOfProducts.products.length<=20,stack:[isMini?emptyTextObject:getProductsHeader(groupOfProducts,locations),isMini?emptyTextObject:getGroupOfProductsTopImages(groupImg1Data,groupImg2Data,groupImg3Data,groupImg4Data,testImgData),productsTableList,isMini?emptyTextObject:getProductsFooter(groupOfProducts,linkButtonData,{proprietaryItem1:proprietaryItem1,proprietaryItem2:proprietaryItem2}),isMini?emptyTextObject:getProductFooterImg(groupImgFooterData)]});case 28:case"end":return _context8.stop()}}),_callee8)})));return function getFullGroup(_x9,_x10,_x11,_x12,_x13){return _ref13.apply(this,arguments)}}();function getPriceListPdf(_x14,_x15,_x16){return _getPriceListPdf.apply(this,arguments)}function _getPriceListPdf(){return(_getPriceListPdf=asyncToGenerator_default()(regenerator_default.a.mark((function _callee14(categories,priceList,options){var optionalCols,locationTypes,disclaimer,titlePage,companyContacts,isMini,finalList,testImgData,temp;return regenerator_default.a.wrap((function _callee14$(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return optionalCols=options.optionalCols,locationTypes=options.locationTypes,disclaimer=options.disclaimer,titlePage=options.titlePage,companyContacts=options.companyContacts,isMini=options.isMini,finalList=[],_context14.next=4,Object(functions.l)(no_img_default.a);case 4:return testImgData=_context14.sent,_context14.next=7,categories.map(function(){var _ref14=asyncToGenerator_default()(regenerator_default.a.mark((function _callee12(category){var fullGroup;return regenerator_default.a.wrap((function _callee12$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return fullGroup=[],_context12.abrupt("return",Promise.all(priceList.map(function(){var _ref15=asyncToGenerator_default()(regenerator_default.a.mark((function _callee10(groupOfProducts){var locations,locationTypesArray;return regenerator_default.a.wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(locations=[],category.name===groupOfProducts.category){_context10.next=3;break}return _context10.abrupt("return");case 3:return locationTypesArray=groupOfProducts.locationType.split("/"),_context10.abrupt("return",Promise.all(locationTypesArray.map((function(location){return getPriceListPdf_getAllLocationTypes(locationTypes,location,locations)}))).then(asyncToGenerator_default()(regenerator_default.a.mark((function _callee9(){var temp;return regenerator_default.a.wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,getFullGroup(groupOfProducts,locations,testImgData,optionalCols,isMini);case 2:temp=_context9.sent,fullGroup.push(temp);case 4:case"end":return _context9.stop()}}),_callee9)})))));case 5:case"end":return _context10.stop()}}),_callee10)})));return function(_x18){return _ref15.apply(this,arguments)}}())).then(asyncToGenerator_default()(regenerator_default.a.mark((function _callee11(){var tempImg,sortedArr;return regenerator_default.a.wrap((function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,Object(functions.l)(category.img);case 2:if(tempImg=_context11.sent,0!==fullGroup.length&&category.active){_context11.next=5;break}return _context11.abrupt("return");case 5:if(sortedArr=sortFullGroup(fullGroup,isMini),!isMini){_context11.next=8;break}return _context11.abrupt("return",finalList.push({stack:toConsumableArray_default()(sortedArr)}));case 8:return _context11.abrupt("return",finalList.push(getPriceListPdf_makeListUnbreakable(sortedArr,tempImg,category.name)));case 9:case"end":return _context11.stop()}}),_callee11)})))));case 2:case"end":return _context12.stop()}}),_callee12)})));return function(_x17){return _ref14.apply(this,arguments)}}());case 7:return temp=_context14.sent,_context14.next=10,Promise.all(temp).then(asyncToGenerator_default()(regenerator_default.a.mark((function _callee13(){var contactsImgData,titlePageObject,dd;return regenerator_default.a.wrap((function _callee13$(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return finalList=isMini?finalList:sortFinalList(finalList),_context13.next=3,Object(functions.l)(contacts_default.a);case 3:return contactsImgData=_context13.sent,_context13.next=6,getTitlePage(titlePage);case 6:return titlePageObject=_context13.sent,dd={info:{title:"Прайс-лист"},header:function header(currentPage){return getPriceHeader(currentPage,titlePage.active,contactsImgData,companyContacts,isMini)},pageMargins:[40,125,40,70],footer:function footer(currentPage,pageCount){return getPriceFooter(currentPage,pageCount,titlePage.active,companyContacts,isMini)},content:[titlePage.active&&!isMini?titlePageObject:emptyTextObject,finalList,isMini?emptyTextObject:getDisclaimerText(disclaimer)],styles:priceStyles},_context13.abrupt("return",Object(pdfFunctions.a)(dd));case 9:case"end":return _context13.stop()}}),_callee13)}))));case 10:return _context14.abrupt("return",_context14.sent);case 11:case"end":return _context14.stop()}}),_callee14)})))).apply(this,arguments)}__webpack_require__(478),__webpack_require__(3008);var exceljs_min=__webpack_require__(3010),exceljs_min_default=__webpack_require__.n(exceljs_min),xlsxFunctions=__webpack_require__(2907),getPriceListDefaultColumnXLSX=(__webpack_require__(3482),__webpack_require__(3483),function getPriceListDefaultColumnXLSX(name){var width=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return{key:name,width:width,style:{font:{size:11,color:{argb:"FF333333"}},alignment:{vertical:"middle",horizontal:"center",wrapText:!0}}}}),getPriceListDefaultColumns=function getPriceListDefaultColumns(){return[getPriceListDefaultColumnXLSX(void 0,30),getPriceListDefaultColumnXLSX("number",30),getPriceListDefaultColumnXLSX("name",30),getPriceListDefaultColumnXLSX("units",30),getPriceListDefaultColumnXLSX("group1",14),getPriceListDefaultColumnXLSX("group2",14),getPriceListDefaultColumnXLSX("group3",14),getPriceListDefaultColumnXLSX("group4",14),getPriceListDefaultColumnXLSX("group5",14),getPriceListDefaultColumnXLSX("group6",14)]},getPriceListHeaderItem=function getPriceListHeaderItem(workSheet){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},customStyles=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},temp=workSheet.addRow([""]),curRow=workSheet.rowCount,value=data.link?{text:data.text,hyperlink:data.link,tooltip:data.tooltip}:data.text;workSheet.getCell(curRow,3).value=value,workSheet.getCell(curRow,3).font=Object.assign({name:"DejaVu",family:2},customStyles),temp.alignment={vertical:"middle",horizontal:"center"},workSheet.mergeCells(curRow,3,curRow,4),temp.height=25},priceListHeaderItems=[{data:{text:"ООО «ОСФИКС»",link:"https://www.osfix.ru",tooltip:"Перейти на сайт www.osfix.ru"},styles:{size:16,bold:!0}},{data:{text:"Лиговский пр., 52, Санкт-Петербург, 191040",link:"https://yandex.ru/maps/-/CKUrY0Ih",tooltip:"Открыть Яндекс.Карту"}},{data:{text:"info@osfix.ru, +7 (812) 449-10-09"}},{data:{text:"www.osfix.ru",link:"https://www.osfix.ru",tooltip:"Открыть сайт"},styles:{size:14}}],getPriceListHeaderBorder=function getPriceListHeaderBorder(workSheet,lastColumnNumber){for(var border={style:"medium",color:{argb:"FFFF1B5F"}},i=1;i<=lastColumnNumber;i++)workSheet.getCell(workSheet.rowCount,i).border={bottom:border};for(var _i=1;_i<=workSheet.rowCount;_i++)workSheet.getCell(_i,lastColumnNumber).border=Object.assign({},workSheet.getCell(_i,lastColumnNumber).border,{right:border})},priceListHeaderAddImage=function priceListHeaderAddImage(workBook,workSheet,imgObject){var logoImg=workBook.addImage({base64:imgObject.imgData,extension:"jpeg"});imgObject.mergeCells&&imgObject.mergeCells(),workSheet.addImage(logoImg,{tl:imgObject.tl,ext:imgObject.ext})},getPriceListHeader=function(){var _ref=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(workSheet,workBook,lastColumnNumber){var tempImg,contactsImg;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(functions.l)("assets/osfix_logo.png");case 2:return tempImg=_context.sent,_context.next=5,Object(functions.l)("assets/contacts_excel.png");case 5:contactsImg=_context.sent,priceListHeaderItems.map((function(item){return getPriceListHeaderItem(workSheet,item.data,item.styles)})),priceListHeaderAddImage(workBook,workSheet,{imgData:tempImg,mergeCells:function mergeCells(){return workSheet.mergeCells(1,1,4,1)},tl:{col:.3,row:.4},ext:{width:180,height:80}}),priceListHeaderAddImage(workBook,workSheet,{imgData:contactsImg,tl:{col:2.1,row:.3},ext:{width:22,height:120}}),getPriceListHeaderBorder(workSheet,lastColumnNumber),workSheet.addRow([""]).height=25;case 12:case"end":return _context.stop()}}),_callee)})));return function getPriceListHeader(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),filterPriceListItems=function filterPriceListItems(priceList,category){return priceList.filter((function(item){return item.category===category}))},greyBorder={left:{style:"medium",color:{argb:"FF666666"}},top:{style:"medium",color:{argb:"FF666666"}},right:{style:"medium",color:{argb:"FF666666"}},bottom:{style:"medium",color:{argb:"FF666666"}}},getPriceListCategoryName=function getPriceListCategoryName(workSheet,name,lastColumnNumber){var rowCategoryName=workSheet.addRow([name]);workSheet.getCell(workSheet.rowCount,1).border=greyBorder,rowCategoryName.font={size:18,bold:!0,name:"DejaVu",family:2},rowCategoryName.height=80,rowCategoryName.alignment={vertical:"middle",horizontal:"center"},workSheet.mergeCells(workSheet.rowCount,1,workSheet.rowCount,lastColumnNumber),workSheet.addRow([""])},buttonStyles_font={size:12,bold:!1,color:{argb:"FFFFFFFF"}},buttonStyles_fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE30235"}},buttonStyles_alignment={horizontal:"center",vertical:"middle",wrapText:!0},getPriceListProductGroupHeader=function getPriceListProductGroupHeader(workSheet,item,lastColumnNumber){!function getPriceListProductGroupName(workSheet,name,lastColumnNumber){var newRowName=workSheet.addRow(["\t".concat(name)]);newRowName.font={size:14,bold:!0,name:"DejaVu",family:2},newRowName.height=50,newRowName.alignment={wrapText:!0,vertical:"middle",horizontal:"center"},workSheet.mergeCells(workSheet.rowCount,1,workSheet.rowCount,lastColumnNumber-4),workSheet.getCell(workSheet.rowCount,1).border=greyBorder}(workSheet,item.name,lastColumnNumber),function getPriceListProductLocation(workSheet,locationType,lastColumnNumber){workSheet.getCell(workSheet.rowCount,lastColumnNumber-3).value=locationType,workSheet.getCell(workSheet.rowCount,lastColumnNumber-3).font={size:11,bold:!1},workSheet.getCell(workSheet.rowCount,lastColumnNumber-3).alignment={horizontal:"center",vertical:"middle"},workSheet.getCell(workSheet.rowCount,lastColumnNumber-3).border=greyBorder,workSheet.mergeCells(workSheet.rowCount,lastColumnNumber-3,workSheet.rowCount,lastColumnNumber-2)}(workSheet,item.locationType,lastColumnNumber),function getPriceListProductLinkButton(workSheet,linkAddress,lastColumnNumber){var font=buttonStyles_font,fill=buttonStyles_fill,alignment=buttonStyles_alignment;workSheet.getCell(workSheet.rowCount,lastColumnNumber-1).value={text:"Смотреть на сайте",hyperlink:null!=linkAddress?linkAddress:"https://www.osfix.ru",tooltip:"Смотреть на сайте"},workSheet.getCell(workSheet.rowCount,lastColumnNumber-1).alignment=alignment,workSheet.getCell(workSheet.rowCount,lastColumnNumber-1).fill=fill,workSheet.getCell(workSheet.rowCount,lastColumnNumber-1).font=font,workSheet.mergeCells(workSheet.rowCount,lastColumnNumber-1,workSheet.rowCount,lastColumnNumber)}(workSheet,item.linkAddress,lastColumnNumber)},getPriceListProductDescription=function getPriceListProductDescription(workSheet,description,lastColumnNumber){var newRowDescription=workSheet.addRow([description]);newRowDescription.font={size:10,color:{argb:"FF666666"}},newRowDescription.height=35,newRowDescription.alignment={vertical:"middle",wrapText:!0},workSheet.mergeCells(workSheet.rowCount,1,workSheet.rowCount,lastColumnNumber)},priceListProductsAddImage=function priceListProductsAddImage(workBook,workSheet,groupImg,imageIndex){var index=imageIndex,img=workBook.addImage({base64:groupImg,extension:"jpeg"});workSheet.addImage(img,{tl:{col:index,row:workSheet.rowCount-1},br:{col:++index,row:workSheet.rowCount},editAs:"absolute"})},getPriceListProductTopImages=function getPriceListProductTopImages(workSheet,workBook,item,lastColumnNumber){workSheet.addRow([""]).height=120;var imageIndex=0;workSheet.mergeCells(workSheet.rowCount,lastColumnNumber-1,workSheet.rowCount,lastColumnNumber),""!==item.groupImg1&&(priceListProductsAddImage(workBook,workSheet,item.groupImg1,imageIndex),imageIndex++),""!==item.groupImg2&&(priceListProductsAddImage(workBook,workSheet,item.groupImg2,imageIndex),imageIndex++),""!==item.groupImg3&&(priceListProductsAddImage(workBook,workSheet,item.groupImg3,imageIndex),imageIndex++),""!==item.groupImg4&&priceListProductsAddImage(workBook,workSheet,item.groupImg4,imageIndex)},getPriceListProductProprietaryText=function getPriceListProductProprietaryText(workBook,workSheet,item,lastColumnNumber,rospatentTempImg){var rospatentImg=workBook.addImage({base64:rospatentTempImg,extension:"png"});workSheet.addImage(rospatentImg,{tl:{col:lastColumnNumber-2+.6,row:workSheet.rowCount-1+.3},ext:{width:125,height:80}}),workSheet.getCell(workSheet.rowCount,lastColumnNumber-1).value=void 0!==item.proprietaryItemText1?item.proprietaryItemText1+"\n":item.proprietaryItemText2+"\n",workSheet.getCell(workSheet.rowCount,lastColumnNumber-1).font={size:12},workSheet.getCell(workSheet.rowCount,lastColumnNumber-1).alignment={vertical:"bottom",horizontal:"center",wrapText:!0}},createBorderBottomAllLength=function createBorderBottomAllLength(workSheet,lastColumnNumber){for(var i=1;i<=lastColumnNumber;i++)workSheet.getCell(workSheet.rowCount,i).border=greyBorder},infoTextStyles_border={right:{style:"medium",color:{argb:"FFFF1B5F"}}},infoTextStyles_alignment={vertical:"top",horizontal:"left",wrapText:!0,indent:1},infoTextStyles_font={size:11,italic:!0,color:{argb:"FF000000"}},getPriceListProductInfoText=function getPriceListProductInfoText(workSheet,item,lastColumnNumber,optionalCols){var border=infoTextStyles_border,font=infoTextStyles_font,alignment=infoTextStyles_alignment;workSheet.addRow([""]);var rowInfoText=workSheet.addRow([item.infoText]);rowInfoText.font=font,workSheet.getCell(workSheet.rowCount,1).border=border,workSheet.getCell(workSheet.rowCount,1).alignment=alignment,workSheet.mergeCells(workSheet.rowCount,1,workSheet.rowCount,lastColumnNumber),rowInfoText.height=22*(item.infoText.split(" ").length>17+optionalCols.length?item.infoText.split(" ").length/(17+optionalCols.length):1.5)},getPriceListProductGroupTable=function getPriceListProductGroupTable(workSheet,item,lastColumnNumber,optionalCols){!function getPriceListProductTableFakeHeader(workSheet,lastColumnNumber){var fakeTableHeaderRow=workSheet.addRow(["","","","","Стоимость 1 шт., ₽"]);fakeTableHeaderRow.font={italic:!0},fakeTableHeaderRow.height=20,workSheet.getCell(workSheet.rowCount,5).border=greyBorder,workSheet.mergeCells(workSheet.rowCount,5,workSheet.rowCount,lastColumnNumber)}(workSheet,lastColumnNumber),function getPriceListProductTableHeader(workSheet,item,lastColumnNumber,optionalCols){var tableHeaderRow=workSheet.addRow(["Артикул","Название","","Ед. изм.",item.retailName,item.firstPriceName,item.secondPriceName].concat(toConsumableArray_default()(optionalCols.map((function(column){return Object(PriceList_functions.b)(column,item)})))));createBorderBottomAllLength(workSheet,lastColumnNumber),workSheet.mergeCells(workSheet.rowCount,2,workSheet.rowCount,3),tableHeaderRow.font={color:{argb:"FF111111"}},tableHeaderRow.height=30}(workSheet,item,lastColumnNumber,optionalCols),function getPriceListProductTableList(workSheet,item,lastColumnNumber,optionalCols){item.products.map((function(product){return workSheet.addRow([product.number,product.name,"",product.units,product.retailPrice,product.firstPrice,product.secondPrice].concat(toConsumableArray_default()(optionalCols.map((function(column){return void 0!==product[column.property]?""===product[column.property]||Number.isNaN(product[column.property])||0===product[column.property]?" ":product[column.property]:" "}))))).height=25,createBorderBottomAllLength(workSheet,lastColumnNumber),workSheet.mergeCells(workSheet.rowCount,2,workSheet.rowCount,3)}))}(workSheet,item,lastColumnNumber,optionalCols)},doesItemHaveImages=function doesItemHaveImages(item){return""!==item.groupImg1||""!==item.groupImg2||""!==item.groupImg3||""!==item.groupImg4},doesItemHaveProprietoryStatus=function doesItemHaveProprietoryStatus(item){return void 0!==item.proprietaryItemText1||void 0!==item.proprietaryItemText2},getPriceListProductGroup=function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(workBook,workSheet,item,lastColumnNumber,optionalCols,rospatentTempImg,isMini){var description,isProprietary,defaultParams;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:description=item.description,isMini||(getPriceListProductGroupHeader(workSheet,item,lastColumnNumber),getPriceListProductDescription(workSheet,description,lastColumnNumber)),isProprietary=doesItemHaveProprietoryStatus(item),!doesItemHaveImages(item)&&!isProprietary||isMini||getPriceListProductTopImages(workSheet,workBook,item,lastColumnNumber),isProprietary&&!isMini&&getPriceListProductProprietaryText(workBook,workSheet,item,lastColumnNumber,rospatentTempImg),getPriceListProductGroupTable.apply(void 0,defaultParams=[workSheet,item,lastColumnNumber,optionalCols]),!isMini&&getPriceListProductInfoText.apply(void 0,defaultParams),workSheet.addRow([""]).height=50;case 10:case"end":return _context2.stop()}}),_callee2)})));return function getPriceListProductGroup(_x4,_x5,_x6,_x7,_x8,_x9,_x10){return _ref2.apply(this,arguments)}}();function getPriceListExcel(){return _getPriceListExcel.apply(this,arguments)}function _getPriceListExcel(){return(_getPriceListExcel=asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(){var categories,priceList,options,optionalCols,isMini,workBook,workSheet,lastColumnNumber,rospatentTempImg,_args3=arguments;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return categories=_args3.length>0&&void 0!==_args3[0]?_args3[0]:[],priceList=_args3.length>1&&void 0!==_args3[1]?_args3[1]:[],options=_args3.length>2?_args3[2]:void 0,optionalCols=options.optionalCols,isMini=options.isMini,(workBook=new exceljs_min_default.a.Workbook).creator="Osfix",workBook.created=new Date,workSheet=workBook.addWorksheet("Каталог продукции"),lastColumnNumber=7+optionalCols.length,workSheet.columns=getPriceListDefaultColumns(),_context3.next=12,getPriceListHeader(workSheet,workBook,lastColumnNumber);case 12:return _context3.next=14,Object(functions.l)("assets/rospatent.png");case 14:rospatentTempImg=_context3.sent,Promise.all(categories.map((function(category){if(category.active){var filteredData=filterPriceListItems(priceList,category.name);return filteredData.length>0&&!isMini&&getPriceListCategoryName(workSheet,category.name,lastColumnNumber),filteredData.map((function(item){return getPriceListProductGroup(workBook,workSheet,item,lastColumnNumber,optionalCols,rospatentTempImg,isMini)}))}}))).then((function(){return Object(xlsxFunctions.b)(workBook,"Osfix_Прайс-лист")}));case 16:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}var react_router_dom=__webpack_require__(47),FormWindow=__webpack_require__(203),SelectFromButton=__webpack_require__(2866),TableView=__webpack_require__(3047),App=__webpack_require__(135),lts_list=(__webpack_require__(3484),__webpack_require__(2936)),jsx_runtime=__webpack_require__(1),SelectLtd_SelectLtd_SelectLtd=function SelectLtd(_ref){var data=_ref.data,onChange=_ref.onChange,_useState=Object(react.useState)(null),_useState2=slicedToArray_default()(_useState,2),selectedLtd=_useState2[0],setSelectedLtd=_useState2[1],_useState3=Object(react.useState)(null),_useState4=slicedToArray_default()(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),ltdData=_useState6[0],setLtdData=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),showWindow=_useState8[0],setShowWindow=_useState8[1],userContext=Object(react.useContext)(App.a);return Object(react.useEffect)((function(){if(data)return setLtdData(data);!function loadLtd(){Object(lts_list.d)().then((function(res){setLtdData(toConsumableArray_default()(res.data)),setIsLoading(!1)})).catch((function(error){setIsLoading(!1),console.log(error)}))}()}),[]),Object(jsx_runtime.jsx)("div",{className:"select-ltd",children:Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsxs)("div",{className:"main-form__input_name main-form__input_name--header",children:["Данные компании",Object(jsx_runtime.jsx)(SelectFromButton.a,{text:"Выберите ООО",onClick:function onClick(){return setShowWindow(!showWindow)}})]}),Object(jsx_runtime.jsxs)("div",{className:"main-form__input_field",children:[Object(jsx_runtime.jsx)(FormWindow.a,{title:"Выбор ООО",content:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(TableView.a,{data:ltdData,userHasAccess:userContext.userHasAccess,onSelect:function onSelect(item){setSelectedLtd(item),onChange(item),setShowWindow(!1)},selectedLtd:selectedLtd,isLoading:isLoading,showWindow:showWindow,setShowWindow:setShowWindow})}),showWindow:showWindow,setShowWindow:setShowWindow}),selectedLtd?Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("span",{children:"".concat(selectedLtd.name)}),Object(jsx_runtime.jsx)("span",{children:"ИНН: ".concat(selectedLtd.inn)})]}):Object(jsx_runtime.jsx)("span",{children:"По умолчанию используются данные Osfix"})]})]})})};SelectLtd_SelectLtd_SelectLtd.displayName="SelectLtd",SelectLtd_SelectLtd_SelectLtd.__docgenInfo={description:"",methods:[],displayName:"SelectLtd"};var LtdListPage_SelectLtd_SelectLtd=SelectLtd_SelectLtd_SelectLtd;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/LtdListPage/SelectLtd/SelectLtd.jsx"]={name:"SelectLtd",docgenInfo:SelectLtd_SelectLtd_SelectLtd.__docgenInfo,path:"src/components/MainPage/PriceList/LtdListPage/SelectLtd/SelectLtd.jsx"});var hooks=__webpack_require__(1015),defineProperty=__webpack_require__(15),defineProperty_default=__webpack_require__.n(defineProperty),InputText=__webpack_require__(2851),chevron_down_inline=__webpack_require__(476),GroupTitlePage_GroupTitlePage=function GroupTitlePage(_ref){var titlePage=_ref.titlePage,setTitlePage=_ref.setTitlePage,getTitlePagePhotoInputElement=function getTitlePagePhotoInputElement(title,index,name){return Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsx)("div",{className:"main-form__input_name",children:title}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_field",children:Object(jsx_runtime.jsx)(FileUploader.a,{uniqueId:"fileTitlePage".concat(index),type:"readAsDataURL",onChange:function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(result){var downgraded;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(""===result[0]||!result[0]){_context.next=6;break}return _context.next=3,Object(functions.l)(result[0],"jpeg",.3);case 3:_context.t0=_context.sent,_context.next=7;break;case 6:_context.t0="";case 7:downgraded=_context.t0,setTitlePage(Object.assign({},titlePage,defineProperty_default()({},name,downgraded)));case 9:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),defaultValue:""!==titlePage[name]&&titlePage[name]?[titlePage[name]]:null})})]})};return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"main-form__item main-form__item--header",children:[Object(jsx_runtime.jsx)(CheckBox.a,{checked:titlePage.active,name:"titleList",onChange:function handleActivateTitlePageGroup(value){return setTitlePage(Object.assign({},titlePage,{active:value}))},text:"Титульная страница"}),Object(jsx_runtime.jsx)(chevron_down_inline.a,{className:"main-window__img",style:{transform:"rotate(".concat(titlePage.isMinimized?0:180,"deg)")},title:"".concat(titlePage.isMinimized?"Раскрыть":"Скрыть"," Титульный лист"),onClick:function handleMinimizeTitlePageGroup(){return setTitlePage(Object.assign({},titlePage,{isMinimized:!titlePage.isMinimized}))}})]}),!titlePage.isMinimized&&titlePage.active?Object(jsx_runtime.jsxs)("div",{className:"price-list__title-page-wrapper",children:[Object(jsx_runtime.jsx)(InputText.a,{inputName:"Получатель",name:"to",defaultValue:titlePage.to,handleInputChange:function handleInputChange(event){setTitlePage(Object.assign({},titlePage,{to:event.target.value}))}}),Object(jsx_runtime.jsxs)("div",{className:"price-list__images-wrapper",children:[getTitlePagePhotoInputElement("Фотография 1",1,"img1"),getTitlePagePhotoInputElement("Фотография 2",2,"img2"),getTitlePagePhotoInputElement("Фотография 3",3,"img3")]})]}):null]})};GroupTitlePage_GroupTitlePage.__docgenInfo={description:"",methods:[],displayName:"GroupTitlePage"};var components_GroupTitlePage=GroupTitlePage_GroupTitlePage;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/PriceList/components/GroupTitlePage.jsx"]={name:"GroupTitlePage",docgenInfo:GroupTitlePage_GroupTitlePage.__docgenInfo,path:"src/components/MainPage/PriceList/PriceList/components/GroupTitlePage.jsx"});var CategoryHeader_CategoryHeader=function CategoryHeader(_ref){var category=_ref.category,setCategories=_ref.setCategories,categories=_ref.categories,categoryIndex=_ref.categoryIndex;return Object(jsx_runtime.jsxs)("div",{className:"main-form__item main-form__item--header",children:[Object(jsx_runtime.jsx)(CheckBox.a,{checked:category.active,name:"category",onChange:function onChange(value){var originalList=categories;originalList.splice(categoryIndex,1,Object.assign({},category,{active:value})),setCategories(toConsumableArray_default()(originalList))},text:category.name}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_field",children:Object(jsx_runtime.jsx)(FileUploader.a,{uniqueId:"categoryImg"+categoryIndex,type:"readAsDataURL",onChange:function onChange(result){var originalList=categories;originalList.splice(categoryIndex,1,Object.assign({},category,{img:result[0]})),setCategories(toConsumableArray_default()(originalList))},defaultValue:""!==category.img?[category.img]:void 0})})]})};CategoryHeader_CategoryHeader.displayName="CategoryHeader",CategoryHeader_CategoryHeader.__docgenInfo={description:"",methods:[],displayName:"CategoryHeader"};var components_CategoryHeader=CategoryHeader_CategoryHeader;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/PriceList/components/CategoryHeader.jsx"]={name:"CategoryHeader",docgenInfo:CategoryHeader_CategoryHeader.__docgenInfo,path:"src/components/MainPage/PriceList/PriceList/components/CategoryHeader.jsx"});__webpack_require__(3486);var NestedFormItem=__webpack_require__(2884),defaultPriceItemObject={number:"",units:"",name:"",description:"",retailPrice:0,lessThan1500Price:0,lessThan5000Price:0,retailMarketPrice:0,cost:0,dealerPrice:0,distributorPrice:0,partnerPrice:0,stopPrice:0,onSale:!1,isTopSeller:!1,isMinimized:!0},SelectPriceItem_SelectPriceItem_SelectPriceItem=function SelectPriceItem(props){var _useState=Object(react.useState)([defaultPriceItemObject]),_useState2=slicedToArray_default()(_useState,2),selected=_useState2[0],setSelected=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),defaultValueLoaded=_useState4[0],setDefaultValueLoaded=_useState4[1],_useState5=Object(react.useState)(null),_useState6=slicedToArray_default()(_useState5,2),groupImg1=_useState6[0],setGroupImg1=_useState6[1],_useState7=Object(react.useState)(null),_useState8=slicedToArray_default()(_useState7,2),groupImg2=_useState8[0],setGroupImg2=_useState8[1],_useState9=Object(react.useState)(null),_useState10=slicedToArray_default()(_useState9,2),groupImg3=_useState10[0],setGroupImg3=_useState10[1],_useState11=Object(react.useState)(null),_useState12=slicedToArray_default()(_useState11,2),groupImg4=_useState12[0],setGroupImg4=_useState12[1],_useState13=Object(react.useState)(null),_useState14=slicedToArray_default()(_useState13,2),footerImg=_useState14[0],setFooterImg=_useState14[1];Object(react.useEffect)((function(){void 0===props.defaultValue||defaultValueLoaded||(setSelected(toConsumableArray_default()(props.defaultValue.map((function(item){return Object.assign({},item,{isMinimized:!0})})))),setDefaultValueLoaded(!0)),void 0!==props.groupImg1&&setGroupImg1(props.groupImg1),void 0!==props.groupImg2&&setGroupImg2(props.groupImg2),void 0!==props.groupImg3&&setGroupImg3(props.groupImg3),void 0!==props.groupImg4&&setGroupImg4(props.groupImg4),void 0!==props.footerImg&&setFooterImg(props.footerImg)}),[props.defaultValue,props.groupImg1,props.groupImg2,props.groupImg3,props.groupImg4,props.footerImg,selected]);var handleInputChange=function handleInputChange(index,name,value){var temp=selected,originalItem=selected[index];temp.splice(index,1,Object.assign({},originalItem,defineProperty_default()({},name,value))),setSelected(toConsumableArray_default()(temp)),props.handlePriceItemChange(toConsumableArray_default()(temp))},getInputElement=function getInputElement(name,index,value){var type=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"number";return Object(jsx_runtime.jsx)("input",{type:type,name:name,autoComplete:"off",onChange:function onChange(_ref){var target=_ref.target;return handleInputChange(index,name,target.value)},value:value,readOnly:props.readOnly})},onImageDataChange=function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(result,imgInfo){var downgraded;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(""===result||!result){_context.next=6;break}return _context.next=3,Object(functions.l)(result,"jpeg",.3);case 3:_context.t0=_context.sent,_context.next=7;break;case 6:_context.t0="";case 7:downgraded=_context.t0,imgInfo.setter(downgraded),props.handleImgChange(downgraded,imgInfo.itemName);case 10:case"end":return _context.stop()}}),_callee)})));return function onImageDataChange(_x,_x2){return _ref2.apply(this,arguments)}}(),getPhotoInputElement=function getPhotoInputElement(title,index,imgInfo){return Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsx)("div",{className:"main-form__input_name",children:title}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_field",children:!props.readOnly&&Object(jsx_runtime.jsx)(FileUploader.a,{uniqueId:"file".concat(index).concat(props.uniqueId),type:"readAsDataURL",onChange:function onChange(result){return onImageDataChange(result[0],imgInfo)},defaultValue:imgInfo.previewImage&&""!==imgInfo.previewImage?[imgInfo.previewImage]:void 0})})]})};return Object(jsx_runtime.jsx)("div",{className:"select-price-item",children:Object(jsx_runtime.jsxs)("div",{className:"select-price-item__selected",children:[!props.readOnly&&Object(jsx_runtime.jsxs)("div",{className:"price-list__images-wrapper",children:[getPhotoInputElement("Фотография 1",1,{setter:function setter(downgraded){return setGroupImg1(downgraded)},itemName:"groupImg1",previewImage:groupImg1}),getPhotoInputElement("Фотография 2",2,{setter:function setter(downgraded){return setGroupImg2(downgraded)},itemName:"groupImg2",previewImage:groupImg2}),getPhotoInputElement("Фотография 3",3,{setter:function setter(downgraded){return setGroupImg3(downgraded)},itemName:"groupImg3",previewImage:groupImg3}),getPhotoInputElement("Фотография 4",4,{setter:function setter(downgraded){return setGroupImg4(downgraded)},itemName:"groupImg4",previewImage:groupImg4}),getPhotoInputElement("Фотография снизу",5,{setter:function setter(downgraded){return setFooterImg(downgraded)},itemName:"footerImg",previewImage:footerImg})]}),!props.readOnly&&Object(jsx_runtime.jsx)(Button.a,{className:"main-window__button",onClick:function handleNewPriceItem(){setSelected([].concat(toConsumableArray_default()(selected),[defaultPriceItemObject])),props.handlePriceItemChange([].concat(toConsumableArray_default()(selected),[defaultPriceItemObject]))},text:"Добавить продукцию"}),selected.map((function(item,index){return Object(jsx_runtime.jsx)(NestedFormItem.a,{itemsLength:selected.length,handleDeleteItem:function handleDeleteItem(){return function deletePriceItem(index){var temp=selected;temp.splice(index,1),setSelected(toConsumableArray_default()(temp)),props.handlePriceItemChange(toConsumableArray_default()(temp))}(index)},isMinimizedDefault:!0,headerItems:[{text:"Артикул",value:item.number,placeholder:"Введите артикул...",style:{flex:" 0 1 15%"}},{text:"Описание",value:item.description,placeholder:"Введите описание...",style:{flex:" 0 1 40%"}},{text:"Розница",value:item.retailPrice,placeholder:"Введите розн. цену...",style:{flex:" 0 1 15%"}},{text:"до 1500 шт.",value:item.lessThan1500Price,placeholder:"Введите цену до 1500шт...",style:{flex:" 0 1 15%"}},{text:"до 5000 шт.",value:item.lessThan5000Price,placeholder:"Введите цену до 5000шт...",style:{flex:" 0 1 15%"}}],formInputs:[{name:"Название",element:getInputElement("name",index,item.name,"text")},{name:"Артикул",element:getInputElement("number",index,item.number,"text")},{name:"Описание",element:getInputElement("description",index,item.description,"text")},{name:"Розница (рыночная цена)",element:getInputElement("retailMarketPrice",index,item.retailMarketPrice)},{name:"Розница",element:getInputElement("retailPrice",index,item.retailPrice)},{name:"До 1500 шт.",element:getInputElement("lessThan1500Price",index,item.lessThan1500Price)},{name:"До 5000 шт.",element:getInputElement("lessThan5000Price",index,item.lessThan5000Price)},{name:"Партнер",element:getInputElement("partnerPrice",index,item.partnerPrice)},{name:"Дилер",element:getInputElement("dealerPrice",index,item.dealerPrice)},{name:"Дистрибутор",element:getInputElement("distributorPrice",index,item.distributorPrice)},{name:"Стопцена",element:getInputElement("stopPrice",index,item.stopPrice)}]},index)}))]})})};SelectPriceItem_SelectPriceItem_SelectPriceItem.displayName="SelectPriceItem",SelectPriceItem_SelectPriceItem_SelectPriceItem.__docgenInfo={description:"",methods:[],displayName:"SelectPriceItem"};var PriceList_SelectPriceItem_SelectPriceItem=SelectPriceItem_SelectPriceItem_SelectPriceItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/SelectPriceItem/SelectPriceItem.jsx"]={name:"SelectPriceItem",docgenInfo:SelectPriceItem_SelectPriceItem_SelectPriceItem.__docgenInfo,path:"src/components/MainPage/PriceList/SelectPriceItem/SelectPriceItem.jsx"});var GroupOfProducts_GroupOfProducts=function GroupOfProducts(_ref){var item=_ref.item,priceList=_ref.priceList,setPriceList=_ref.setPriceList,index=_ref.index,handleValuesChange=function handleValuesChange(value,name){var temp=priceList;return temp.splice(index,1,Object.assign({},item,defineProperty_default()({},name,value))),setPriceList(toConsumableArray_default()(temp))};return Object(jsx_runtime.jsxs)("div",{className:"price-list__group-wrapper",children:[Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsx)(CheckBox.a,{checked:item.active,name:"groupOfProducts",onChange:function handleActivateGroup(value){var originalList=priceList;originalList.splice(index,1,Object.assign({},item,{active:value})),setPriceList(toConsumableArray_default()(originalList))},text:item.name}),Object(jsx_runtime.jsx)(chevron_down_inline.a,{className:"main-window__img",style:{transform:"rotate(".concat(item.isMinimized?0:180,"deg)")},title:"".concat(item.isMinimized?"Раскрыть":"Скрыть"," всю группу ").concat(item.name),onClick:function handleMinimizeGroup(){var originalList=priceList,isMinimized=priceList[index].isMinimized;originalList.splice(index,1,Object.assign({},item,{isMinimized:!isMinimized})),setPriceList(toConsumableArray_default()(originalList))}})]}),Object(jsx_runtime.jsx)("div",{className:item.isMinimized?" main-form__item main-form__item--hidden":"main-form__item",children:Object(jsx_runtime.jsx)("div",{className:"main-form__input_field",children:Object(jsx_runtime.jsx)(PriceList_SelectPriceItem_SelectPriceItem,{handlePriceItemChange:function handlePriceItemChange(value){var temp=priceList;temp.splice(index,1,Object.assign({},item,{products:value})),setPriceList(toConsumableArray_default()(temp))},groupImg1:item.groupImg1,groupImg2:item.groupImg2,groupImg3:item.groupImg3,groupImg4:item.groupImg4,footerImg:item.footerImg,proprietaryItem:item.proprietaryItemText,handleLabelChange:handleValuesChange,handleImgChange:handleValuesChange,uniqueId:index,defaultValue:Object(sorting.a)(item.products,{fieldName:"number",direction:"asc"})})})})]})};GroupOfProducts_GroupOfProducts.displayName="GroupOfProducts",GroupOfProducts_GroupOfProducts.__docgenInfo={description:"",methods:[],displayName:"GroupOfProducts"};var components_GroupOfProducts=GroupOfProducts_GroupOfProducts;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/PriceList/components/GroupOfProducts.jsx"]={name:"GroupOfProducts",docgenInfo:GroupOfProducts_GroupOfProducts.__docgenInfo,path:"src/components/MainPage/PriceList/PriceList/components/GroupOfProducts.jsx"});var lazyImports=__webpack_require__(2902),PriceList_PriceList_PriceList=function PriceList(){var _useState=Object(react.useState)(defaultOptionalColumns),_useState2=slicedToArray_default()(_useState,2),optionalCols=_useState2[0],setOptionalCols=_useState2[1],_useState3=Object(react.useState)(defaultCategories),_useState4=slicedToArray_default()(_useState3,2),categories=_useState4[0],setCategories=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),priceList=_useState6[0],setPriceList=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1],_useState9=Object(react.useState)(!0),_useState10=slicedToArray_default()(_useState9,2),selectAllCategories=_useState10[0],setSelectAllCategories=_useState10[1],_useState11=Object(react.useState)(!0),_useState12=slicedToArray_default()(_useState11,2),selectAllGroups=_useState12[0],setSelectAllGroups=_useState12[1],_useState13=Object(react.useState)(""),_useState14=slicedToArray_default()(_useState13,2),disclaimer=_useState14[0],setDisclaimer=_useState14[1],_useState15=Object(react.useState)(defaultTitlePage),_useState16=slicedToArray_default()(_useState15,2),titlePage=_useState16[0],setTitlePage=_useState16[1],_useState17=Object(react.useState)(null),_useState18=slicedToArray_default()(_useState17,2),selectedLtd=_useState18[0],setSelectedLtd=_useState18[1],_useQuery=Object(hooks.f)(),query=_useQuery.query,pushParamToURL=_useQuery.pushParamToURL,loadTitlePageImages=function loadTitlePageImages(_titlePage){return setIsLoading("Загружаются данные..."),getPriceGroupImageByName("titlePage").then((function(res){return res.json()})).then((function(res){setTitlePage(Object.assign({},_titlePage,{img1:res.imgOne,img2:res.imgTwo,img3:res.imgThree})),setIsLoading(!1)})).catch((function(error){console.log(error)}))},loadImages=function(){var _ref=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(data,_titlePage){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setIsLoading("Загружаются данные..."),_context.next=3,Promise.all(data.map((function(item,index){return getPriceGroupImageByName(item.number).then((function(res){return res.json()})).then((function(res){if(null!==res.id){var temp=data;temp.splice(index,1,Object.assign({},temp[index],{groupImg1:res.imgOne,groupImg2:res.imgTwo,groupImg3:res.imgThree,groupImg4:res.imgFour,footerImg:res.imgFive})),setPriceList(temp)}})).catch((function(error){console.log(error)}))}))).then((function(){return loadTitlePageImages(_titlePage)}));case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})));return function loadImages(_x,_x2){return _ref.apply(this,arguments)}}(),processFileBlob=function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(file){var _parseExcelData,parsedData,disclaimer,titlePage;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return console.log(file),_parseExcelData=Object(PriceList_functions.c)(file),parsedData=_parseExcelData.parsedData,disclaimer=_parseExcelData.disclaimer,titlePage=_parseExcelData.titlePage,setDisclaimer(disclaimer),setTitlePage(titlePage),setPriceList(parsedData),_context2.next=7,loadImages(parsedData,titlePage);case 7:return _context2.abrupt("return",[parsedData,disclaimer,titlePage]);case 8:case"end":return _context2.stop()}}),_callee2)})));return function processFileBlob(_x3){return _ref2.apply(this,arguments)}}(),loadFile=function(){var _ref3=asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(uri){var openFile,file,_yield$processFileBlo,_yield$processFileBlo2,parsedData,_args3=arguments;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return openFile=_args3.length>1&&void 0!==_args3[1]&&_args3[1],setIsLoading("Загружаются данные..."),pushParamToURL("filename",uri.split("downloadFile/")[1]),pushParamToURL("open",null!=openFile&&openFile),_context3.next=6,Object(PriceList_functions.a)(uri,uri.split("downloadFile/")[1],"arraybuffer");case 6:if(file=_context3.sent,console.log(file),file){_context3.next=10;break}return _context3.abrupt("return",setIsLoading(!1));case 10:return _context3.next=12,processFileBlob(file);case 12:if(_yield$processFileBlo=_context3.sent,_yield$processFileBlo2=slicedToArray_default()(_yield$processFileBlo,1),parsedData=_yield$processFileBlo2[0],!1!==openFile){_context3.next=17;break}return _context3.abrupt("return");case 17:handleOpenPDF(!0,parsedData);case 18:case"end":return _context3.stop()}}),_callee3)})));return function loadFile(_x4){return _ref3.apply(this,arguments)}}();Object(react.useEffect)((function(){document.title="Прайс-лист"}),[priceList,disclaimer,titlePage,priceList]),Object(react.useEffect)((function(){var filename=query.get("filename"),openFile=query.get("open");filename&&loadFile("".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/fileWithoutDB/downloadFile/").concat(filename),openFile)}),[]);var sortPriceList=function sortPriceList(priceList){return Object(sorting.a)(priceList,{fieldName:"id",direction:"asc"})},handleOpenPDF=function handleOpenPDF(){var newPDF=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_priceList=arguments.length>1?arguments[1]:void 0;setIsLoading("Создается pdf файл..."),console.log(categories,priceList,123),getPriceListPdf(categories,(null!=_priceList?_priceList:priceList).filter((function(item){return item.active})),{optionalCols:sortPriceList(optionalCols.filter((function(item){return item.active&&item}))),locationTypes:objects_locationTypes,disclaimer:disclaimer,titlePage:titlePage,companyContacts:selectedLtd,isMini:newPDF}).then((function(){setIsLoading(!1)}))},handleDownloadExcel=function handleDownloadExcel(){var newXLSX=arguments.length>0&&void 0!==arguments[0]&&arguments[0];setIsLoading("Создается xlsx файл..."),getPriceListExcel(categories,priceList.filter((function(item){return item.active})),{optionalCols:sortPriceList(optionalCols.filter((function(item){return item.active&&item}))),isMini:newXLSX}).then((function(){setIsLoading(!1)}))},getSelectAllCheckbox=function getSelectAllCheckbox(text,item){return Object(jsx_runtime.jsx)(CheckBox.a,{text:text,checked:item.checked,name:"header",onChange:function onChange(value){item.setAll(value);var originalList=item.list.map((function(item){return Object.assign({},item,{active:value})}));item.setList(toConsumableArray_default()(originalList))}})};return Object(jsx_runtime.jsx)("div",{className:"new-price-item",children:Object(jsx_runtime.jsxs)("div",{className:"main-form",children:[Object(jsx_runtime.jsx)("div",{className:"main-window__header",children:Object(jsx_runtime.jsxs)("div",{className:"main-form__title",children:["Прайс-лист",Object(jsx_runtime.jsx)(react_router_dom.a,{className:"main-window__button",to:"/ltd-list",children:"Список ООО"}),Object(jsx_runtime.jsx)(react_router_dom.a,{className:"main-window__button main-window__button--inverted",to:"/price-list/prices/upload",children:"Загрузить прайс-лист"})]})}),Object(jsx_runtime.jsxs)("form",{className:"main-form__form",children:[Object(jsx_runtime.jsx)(LtdListPage_SelectLtd_SelectLtd,{onChange:function onChange(item){return setSelectedLtd(item)}}),Object(jsx_runtime.jsx)(lazyImports.T,{onSelect:function onSelect(result){return loadFile(result.uri,!1)}}),Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsx)("div",{className:"main-form__input_name",children:"Excel-таблица для парсинга"}),(query.get("filename")&&isLoading||isLoading)&&"Сохраняем..."!==isLoading?isLoading:Object(jsx_runtime.jsx)(FileUploader.a,{regex:/.+\.(xlsx|csv)/,uniqueId:"excel-reader",type:"readAsArrayBuffer",defaultValue:query.get("filename")?[{url:"".concat(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).API_BASE_URL,"/api/v1/fileWithoutDB/downloadFile/").concat(query.get("filename"))}]:void 0,onChange:function onChange(result){return processFileBlob(result[0])}})]}),priceList.length>0&&Object(jsx_runtime.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(jsx_runtime.jsx)(Button.a,{text:"Полный .pdf",isLoading:isLoading,className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){return handleOpenPDF(!1)}}),Object(jsx_runtime.jsx)(Button.a,{text:"Краткий .pdf",isLoading:isLoading,className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){return handleOpenPDF(!0)}}),Object(jsx_runtime.jsx)(Button.a,{text:"Полный .xlsx",isLoading:isLoading,className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){return handleDownloadExcel(!1)}}),Object(jsx_runtime.jsx)(Button.a,{text:"Краткий .xlsx",isLoading:isLoading,className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:function onClick(){return handleDownloadExcel(!0)}}),Object(jsx_runtime.jsx)(Button.a,{text:"Сохранить данные",isLoading:isLoading,className:"main-form__submit",onClick:function saveImages(){setIsLoading("Сохраняем данные..."),Promise.all(priceList.map((function(item){return updatePriceGroupByName(item.number,{name:item.number,imgOne:item.groupImg1,imgTwo:item.groupImg2,imgThree:item.groupImg3,imgFour:item.groupImg4,imgFive:item.footerImg})}))).then((function(){return updatePriceGroupByName("titlePage",{name:"titlePage",imgOne:titlePage.img1,imgTwo:titlePage.img2,imgThree:titlePage.img3})})).then((function(){setIsLoading(!1),alert("Данные были успешно сохранены!")}))}})]}),priceList.length>0&&Object(jsx_runtime.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(jsx_runtime.jsxs)("div",{className:"new-price-item__checkbox-container",children:[getSelectAllCheckbox("Выделить все категории",{checked:selectAllCategories,setAll:function setAll(value){return setSelectAllCategories(value)},list:categories,setList:function setList(value){return setCategories(value)}}),getSelectAllCheckbox("Выделить все группы товаров",{checked:selectAllGroups,setAll:function setAll(value){return setSelectAllGroups(value)},list:priceList,setList:function setList(value){return setPriceList(value)}})]}),Object(jsx_runtime.jsxs)("div",{className:"main-form__info-panel",children:[Object(jsx_runtime.jsx)("span",{children:"Дополнительные столбцы: "}),optionalCols.map((function(item,index){return Object(jsx_runtime.jsx)("div",{className:item.active?"main-form__button":"main-form__button main-form__button--inverted",onClick:function onClick(){var temp=optionalCols;temp.splice(index,1,Object.assign({},item,{active:!item.active})),setOptionalCols(toConsumableArray_default()(temp))},children:item.name},index)}))]})]}),priceList.length>0&&Object(jsx_runtime.jsx)("div",{className:"main-form__buttons main-form__buttons--vertical",children:Object(jsx_runtime.jsxs)("div",{className:"main-form__fieldset",children:[Object(jsx_runtime.jsx)("div",{className:"main-form__group-name",children:"Каталог продукции"}),Object(jsx_runtime.jsx)(components_GroupTitlePage,{titlePage:titlePage,setTitlePage:setTitlePage})]})}),function sortCategories(categories){return Object(sorting.a)(categories,{fieldName:"name",direction:"asc"})}(categories).map((function(category,categoryIndex){if(priceList.reduce((function(prev,cur){return cur.category===category.name?prev+1:prev}),0)>0)return Object(jsx_runtime.jsxs)("div",{className:"price-list__category-wrapper",children:[Object(jsx_runtime.jsx)(components_CategoryHeader,{category:category,setCategories:setCategories,categories:categories,categoryIndex:categoryIndex}),category.active&&sortPriceList(priceList).map((function(item,index){if(item.category===category.name)return Object(jsx_runtime.jsx)(components_GroupOfProducts,{item:item,priceList:priceList,setPriceList:setPriceList,index:index})}))]})}))]})]})})};PriceList_PriceList_PriceList.displayName="PriceList",PriceList_PriceList_PriceList.__docgenInfo={description:"",methods:[],displayName:"PriceList"};__webpack_exports__.default=PriceList_PriceList_PriceList;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MainPage/PriceList/PriceList/PriceList.jsx"]={name:"PriceList",docgenInfo:PriceList_PriceList_PriceList.__docgenInfo,path:"src/components/MainPage/PriceList/PriceList/PriceList.jsx"})}}]);