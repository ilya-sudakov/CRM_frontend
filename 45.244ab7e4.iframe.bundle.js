(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{2648:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(282),__webpack_require__(41),__webpack_require__(2)),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(2650),__webpack_require__(1)),InputText=function InputText(_ref){var inputName=_ref.inputName,required=_ref.required,error=_ref.error,type=_ref.type,name=_ref.name,handleInputChange=_ref.handleInputChange,defaultValue=_ref.defaultValue,readOnly=_ref.readOnly,disabled=_ref.disabled,setErrorsArr=_ref.setErrorsArr,errorsArr=_ref.errorsArr;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"input_text__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__input_name",children:inputName+(required?"*":"")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:!0===error?"input_text__input_field input_text__input_field--error":"input_text__input_field",children:"textarea"===type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("textarea",{name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("input",{type:type||"text",name:name,autoComplete:"off",onChange:handleInputChange,value:defaultValue,readOnly:readOnly,disabled:disabled})})]}),error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"input_text__error",onClick:setErrorsArr?function(){return setErrorsArr(Object.assign({},errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,!1)))}:null,children:"Поле не заполнено!"})]})};InputText.displayName="InputText",InputText.__docgenInfo={description:"",methods:[],displayName:"InputText",props:{inputName:{type:{name:"string"},required:!1,description:""},required:{type:{name:"bool"},required:!1,description:""},error:{type:{name:"bool"},required:!1,description:""},type:{type:{name:"string"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},handleInputChange:{type:{name:"func"},required:!1,description:""},defaultValue:{type:{name:"string"},required:!1,description:""},readOnly:{type:{name:"bool"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},setErrorsArr:{type:{name:"func"},required:!1,description:""},errorsArr:{type:{name:"object"},required:!1,description:""}}},__webpack_exports__.a=InputText,InputText.propTypes={inputName:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,required:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,error:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,type:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,name:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,handleInputChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,defaultValue:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,setErrorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,errorsArr:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\Form\\InputText\\InputText.jsx"]={name:"InputText",docgenInfo:InputText.__docgenInfo,path:"src\\utils\\Form\\InputText\\InputText.jsx"})},2650:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2651);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2651:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.input_text{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:20px}.input_text .input_text__error{width:100%;margin-top:1px;font-size:0.75rem;box-sizing:border-box;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.input_text .input_text__input{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;width:100%}.input_text .input_text__input .input_text__input_name{color:#666;padding-right:10px;flex:0 1 calc(20% - 10px);width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{display:flex;justify-content:center;width:calc(90% - 20px);position:relative;min-height:2rem;width:100%}.input_text .input_text__input .input_text__input_field input[type="text"],.input_text .input_text__input .input_text__input_field input[type="password"],.input_text .input_text__input .input_text__input_field input[type="number"],.input_text .input_text__input .input_text__input_field textarea{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;transition:100ms ease-in-out;box-sizing:border-box}.input_text .input_text__input .input_text__input_field input[type="text"]:hover,.input_text .input_text__input .input_text__input_field input[type="password"]:hover,.input_text .input_text__input .input_text__input_field input[type="number"]:hover,.input_text .input_text__input .input_text__input_field textarea:hover{border-color:#888888}.input_text .input_text__input .input_text__input_field input[type="text"]:focus,.input_text .input_text__input .input_text__input_field input[type="password"]:focus,.input_text .input_text__input .input_text__input_field input[type="number"]:focus,.input_text .input_text__input .input_text__input_field textarea:focus{border:1px solid #4293b6}.input_text .input_text__input .input_text__input_field input::-webkit-outer-spin-button,.input_text .input_text__input .input_text__input_field input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input_text .input_text__input .input_text__input_field textarea{min-width:calc(100% - 20px);outline:none;min-height:100px;max-height:150px;resize:vertical}.input_text .input_text__input .input_text__input_field input[type="number"]{-moz-appearance:textfield}.input_text .input_text__input .input_text__input_field--error input[type="text"],.input_text .input_text__input .input_text__input_field--error input[type="number"],.input_text .input_text__input .input_text__input_field--error input[type="password"],.input_text .input_text__input .input_text__input_field--error textarea{border:1px solid #d48282 !important}@media (max-width: 768px){.input_text .input_text__input{flex-wrap:wrap;align-items:flex-start;flex-direction:column}.input_text .input_text__input .input_text__input_name{width:100%;margin-bottom:5px}.input_text .input_text__input .input_text__input_field{width:calc(100% - 0px)}.input_text .input_text__input .input_text__input_field input{padding:10px !important}}\n',""]),module.exports=exports},2666:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return workshops})),__webpack_require__.d(__webpack_exports__,"b",(function(){return requestStatuses})),__webpack_require__.d(__webpack_exports__,"a",(function(){return productsStatuses}));var workshops={requests:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"},lemz:{name:"ЛЭМЗ",title:"ЛЭМЗ",redirectURL:"/lemz/workshop-lemz",ordersRedirectURL:"/lemz/workshop-orders",storageRedirectURL:"/lemz/workshop-storage",type:"lemz",fullName:"ЦехЛЭМЗ"},lepsari:{name:"Лепсари",title:"Лепсари",redirectURL:"/lepsari/workshop-lepsari",ordersRedirectURL:"/lepsari/workshop-orders",storageRedirectURL:"/lepsari/workshop-storage",type:"lepsari",fullName:"ЦехЛепсари"},ligovskiy:{name:"Лиговский",title:"Лиговский",redirectURL:"/ligovskiy/workshop",ordersRedirectURL:"/ligovskiy/workshop-orders",storageRedirectURL:"/ligovskiy/workshop-storage",type:"ligovskiy",fullName:"ЦехЛиговский"},null:{name:"Заявки",title:"",redirectURL:"/requests",type:"requests",fullName:"Заявки"}},requestStatuses=[{name:"Проблема/Материалы",oldName:"Проблема-материалы",className:"materials",access:["ROLE_ADMIN","ROLE_WORKSHOP"],visible:!1},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Отгружено",className:"shipped",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Частично отгружено",className:"shipped-in-parts",access:[]},{name:"Готово к отгрузке",oldName:"Готово",className:"ready",access:["ROLE_ADMIN","ROLE_WORKSHOP"]},{name:"В производстве",className:"in-production",access:[]},{name:"Ожидание",className:"waiting",access:["ROLE_ADMIN","ROLE_MANAGER","ROLE_WORKSHOP"]},{name:"Приоритет",className:"priority",access:["ROLE_ADMIN"]}],productsStatuses=[{name:"В работе",oldName:null,className:"production",access:["ROLE_ADMIN","ROLE_WORKSHOP","ROLE_MANAGER"]},{name:"Завершено",className:"completed",access:["ROLE_ADMIN"]},{name:"Приоритет",className:"defect",access:["ROLE_ADMIN"]}]},2675:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return getClients})),__webpack_require__.d(__webpack_exports__,"j",(function(){return searchClients})),__webpack_require__.d(__webpack_exports__,"d",(function(){return editNextContactDateClient})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getClientsByCategoryAndType})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getClientById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addClient})),__webpack_require__.d(__webpack_exports__,"c",(function(){return editClient})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteClient})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getInfoByINN})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getBIKByINN}));__webpack_require__(2679),__webpack_require__(634),__webpack_require__(241);var axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(992),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(635);function getClients(elements){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/?size="+elements,method:"GET"})}function searchClients(query,fields){var formattedFields=fields.filter((function(cur){return""!==cur&&cur})).join("&");return console.log("formatted",formattedFields,fields),Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"".concat("http://localhost:8443","/api/v1/client/search/").concat(formattedFields&&""!==formattedFields?"".concat(formattedFields,"/"):""),method:"POST",body:JSON.stringify(query)})}function editNextContactDateClient(date){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/date/",method:"POST",body:JSON.stringify(date)})}function getClientsByCategoryAndType(category_type,curPage,itemsPerPage,sortOrder,signal){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/category_type/client/?page="+(curPage-1)+"&sort="+sortOrder.curSort+","+sortOrder[sortOrder.curSort]+"&size="+itemsPerPage,method:"POST",body:JSON.stringify(category_type),signal:signal})}function getClientById(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/"+id,method:"GET"})}function addClient(newClient){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.a)();return axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("".concat("http://localhost:8443","/api/v1/client"),newClient,headers)}function editClient(newClient,id){var headers=Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.a)();return axios__WEBPACK_IMPORTED_MODULE_3___default.a.put("".concat("http://localhost:8443","/api/v1/client/").concat(id),newClient,headers)}function deleteClient(id){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.b)({url:"http://localhost:8443/api/v1/client/"+id,method:"DELETE"})}function getInfoByINN(INN){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.c)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party",method:"POST",body:JSON.stringify(INN)})}function getBIKByINN(INN){return Object(_utilsAPI_jsx__WEBPACK_IMPORTED_MODULE_4__.c)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/bank",method:"POST",body:JSON.stringify(INN)})}},2679:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(18),IndexedObject=__webpack_require__(641),toIndexedObject=__webpack_require__(183),arrayMethodIsStrict=__webpack_require__(991),nativeJoin=[].join,ES3_STRINGS=IndexedObject!=Object,STRICT_METHOD=arrayMethodIsStrict("join",",");$({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD},{join:function join(separator){return nativeJoin.call(toIndexedObject(this),void 0===separator?",":separator)}})},2780:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(638),__webpack_require__(442),__webpack_require__(282),__webpack_require__(41),__webpack_require__(0)),Utils_RequestsAPI_Clients_jsx__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(2781),__webpack_require__(2675)),Utils_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2670),Utils_hooks__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2656),Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(208),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1),SelectClient=function SelectClient(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),closeWindow=_useState2[0],setCloseWindow=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3,2),clients=_useState4[0],setClients=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(0),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5,2),id=_useState6[0],setId=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState7,2),name=_useState8[0],setName=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState10=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){}),[]);var _useSearchBar=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_10__.e)(void 0,[],(function(query){""===query&&setClients([]),query.length>2&&function loadClients(query){setIsLoading(!0),Object(Utils_RequestsAPI_Clients_jsx__WEBPACK_IMPORTED_MODULE_8__.j)({name:query,city:query,type:null},[selectedOption]).then((function(response){return response.json()})).then((function(response){console.log(response),setIsLoading(!1),setClients(response)})).catch((function(error){setIsLoading(!1),console.log(error)}))}(query)}),[{text:"Везде",value:""},{text:"Город",value:"city"}]),searchBar=_useSearchBar.searchBar,selectedOption=_useSearchBar.selectedOption,columns=[{text:"Название",value:"name"},{text:"Сайт",value:"site",link:{getURL:function getURL(site){var _site$split;return site&&(null==site||null===(_site$split=site.split("//"))||void 0===_site$split?void 0:_site$split.length)>1?site:"https://".concat(site)},isOutside:!0,newTab:!0},formatFn:function formatFn(site){return site&&site.split("//").length>1?site.split("//")[1]:site}},{text:"Контакты",value:"contacts",formatFn:function formatContacts(contacts){return(null==contacts?void 0:contacts.length)>0?(""!==contacts[0].name?"".concat(contacts[0].name,", "):"")+contacts[0].phoneNumber:"Не указаны контакт. данные"}},{text:"Комментарий",value:"comment"}],_useFormWindow=Object(Utils_hooks__WEBPACK_IMPORTED_MODULE_10__.b)("Выбор клиента",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:[searchBar,0===clients.length?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{style:{padding:"10px 25px"},children:"Введите не менее 3 символов для начала поиска"}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(Components_Table_Table_jsx__WEBPACK_IMPORTED_MODULE_11__.c,{columns:columns,data:clients,loading:{isLoading:isLoading},onClick:function clickClient(_ref){var id=_ref.id,name=_ref.name;setId(id),setName(name),props.onChange(id),toggleFormWindow(),setCloseWindow(!closeWindow)},options:{fullSize:!0}})]}),[closeWindow]),formWindow=_useFormWindow.formWindow,toggleFormWindow=_useFormWindow.toggleFormWindow;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"select-client",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"select-client__input",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"select-client__input_name main-form__input_name--header",children:[props.inputName+(props.required?"*":""),!props.readonly&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(Utils_Form_SelectFromButton_SelectFromButton_jsx__WEBPACK_IMPORTED_MODULE_9__.a,{text:"Выбрать клиента",onClick:function onClick(){return toggleFormWindow()}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"select-client__input_field",children:(0!==id||props.defaultValue)&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"select-client__searchbar",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("input",{type:"text",className:!0===props.error?"select-client__input select-client__input--error":"select-client__input",value:props.defaultValue&&""===name?props.defaultValue:name,placeholder:"Выберите клиента, нажав на кнопку 'Выбрать клиента'",disabled:!0})})})]}),!0===props.error&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"select-client__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),formWindow]})};SelectClient.displayName="SelectClient",SelectClient.__docgenInfo={description:"",methods:[],displayName:"SelectClient"},__webpack_exports__.a=SelectClient,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Clients\\SelectClients\\SelectClients.jsx"]={name:"SelectClient",docgenInfo:SelectClient.__docgenInfo,path:"src\\components\\MainPage\\Clients\\SelectClients\\SelectClients.jsx"})},2781:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2782);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2782:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-client{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:25px}.select-client .select-client__input{display:flex;width:100%;justify-content:space-between;flex-direction:column;align-items:flex-start}.select-client .select-client__input .select-client__input_name{color:#666;flex:0 1 20%;width:100%}.select-client .select-client__input .select-client__input_name--row{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.select-client .select-client__input .select-client__input_name--row .main-form__link{margin-left:20px}.select-client .select-client__input .select-client__input_field{width:calc(90% - 20px);width:100%}.select-client .select-client__error{width:100%;box-sizing:border-box;margin-top:1px;font-size:0.75rem;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.select-client .select-client__error--hidden{display:none}.select-client .main-form__button{font-size:0.8rem}.select-client .select-client__searchbar{display:flex;flex-direction:row;margin-top:5px;position:relative;min-height:2rem}.select-client .select-client__searchbar .select-client__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;z-index:0;transition:100ms ease-in-out}.select-client .select-client__searchbar .select-client__input:hover{border-color:#888888}.select-client .select-client__searchbar .select-client__input:focus{border:1px solid #4293b6}.select-client .select-client__searchbar .select-client__input--error{border:1px solid #f73434 !important}.select-client .select-client__searchbar .select-client__search_button{border:0;flex:0 1 15%;background-color:#4293b6;color:#fff;border-radius:5px;outline:none;cursor:pointer;padding:5px 10px;font-size:80%;transition:0.2s ease-in-out}.select-client .select-client__searchbar .select-client__search_button:hover{background-color:#519fc0}.select-client .main-window__list{position:relative;width:calc(100% + 30px) !important;margin-left:-15px}.select-client .main-window__list .main-window__list-item{cursor:pointer}.select-client .main-window__list .main-window__list-item span{align-items:center}.select-client .main-window__list .main-window__list-item span:nth-child(1){flex:0 1 15%}.select-client .main-window__list .main-window__list-item span:nth-child(2){flex:0 1 10%;max-width:120px;overflow:hidden;text-overflow:ellipsis}.select-client .main-window__list .main-window__list-item span:nth-child(3){flex:0 1 15%}.select-client .main-window__list .main-window__list-item span:nth-child(4){flex:0 1 30%;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.select-client .searchbar{padding-bottom:10px;margin-bottom:0px}@media (max-width: 768px){.select-client .select-client__input{flex-wrap:wrap;flex-direction:column}.select-client .select-client__input .select-client__input_name{width:100%}.select-client .select-client__input .select-client__input_field{width:100%}.select-client .select-client__input .select-client__input_field input{padding:10px !important}}\n",""]),module.exports=exports},3290:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_17__=(__webpack_require__(41),__webpack_require__(213),__webpack_require__(1586),__webpack_require__(1581),__webpack_require__(441),__webpack_require__(242),__webpack_require__(283),__webpack_require__(243),__webpack_require__(334),__webpack_require__(282),__webpack_require__(638),__webpack_require__(442),__webpack_require__(1583),__webpack_require__(333),__webpack_require__(241),__webpack_require__(0)),Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_20__=(__webpack_require__(3291),__webpack_require__(2657),__webpack_require__(2664)),Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2648),Utils_Form_InputProducts_InputProducts_jsx__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2799),Utils_Form_ErrorMessage_ErrorMessage_jsx__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(996),Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(181),_App_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(214),Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(2682),_workshopVariables_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(2666),_Clients_SelectClients_SelectClients_jsx__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(2780),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(1),ShipRequest=function ShipRequest(props){var _requestInputs$client,_useState=Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)(1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),requestId=_useState2[0],setRequestId=_useState2[1],userContext=Object(react__WEBPACK_IMPORTED_MODULE_17__.useContext)(_App_js__WEBPACK_IMPORTED_MODULE_25__.a),_useState3=Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)([]),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3,2),selectedProducts=_useState4[0],setSelectedProducts=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)({date:"",products:[],codeWord:"",responsible:"",status:"Не готово",shippingDate:"",comment:"",sum:0,clientId:0,client:null}),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5,2),requestInputs=_useState6[0],setRequestInputs=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)({requestProducts:!1}),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState7,2),requestErrors=_useState8[0],setRequestErrors=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)({requestProducts:!0}),_useState10=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState9,2),validInputs=_useState10[0],setValidInputs=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)(!1),_useState12=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState11,2),showError=_useState12[0],setShowError=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_17__.useState)(!1),_useState14=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState13,2),isLoading=_useState14[0],setIsLoading=_useState14[1],validateField=function validateField(fieldName,value){switch(fieldName){case"requestProducts":setValidInputs(Object.assign({},validInputs,{requestProducts:value.length>0}));break;default:void 0!==validInputs[fieldName]&&setValidInputs(Object.assign({},validInputs,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},fieldName,""!==value)))}},checkIfAllProductsAreShipped=function checkIfAllProductsAreShipped(products){var check=!0;return products.map((function(product){if(Number.parseFloat(product.quantityNew)-Number.parseFloat(product.quantity)!=0)return check=!1})),check};return Object(react__WEBPACK_IMPORTED_MODULE_17__.useEffect)((function(){document.title="Отгрузка продукции";var id=props.history.location.pathname.split("ship/")[1];isNaN(Number.parseInt(id))?(alert("Неправильный индекс заявки!"),props.history.push(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_27__.c[props.type].redirectURL)):(setRequestId(id),Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_26__.j)(id).then((function(res){return res.json()})).then((function(oldRequest){setRequestInputs({date:oldRequest.date,products:oldRequest.requestProducts,quantity:oldRequest.quantity,codeWord:oldRequest.codeWord,responsible:oldRequest.responsible,status:oldRequest.status,shippingDate:null!==oldRequest.shippingDate?oldRequest.shippingDate:new Date,comment:oldRequest.comment,factory:oldRequest.factory,sum:oldRequest.sum,client:oldRequest.client,clientId:oldRequest.client?oldRequest.client.id:0}),oldRequest.client&&validateField("clientId",oldRequest.client.id),setSelectedProducts(oldRequest.requestProducts.map((function(product){return Object.assign({},product,{quantityNew:product.quantity})})))})).catch((function(error){console.log(error),alert("Неправильный индекс заявки!"),props.history.push(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_27__.c[props.type].redirectURL)})))}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)("div",{className:"ship-request",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)("div",{className:"main-form",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)("form",{className:"main-form__form",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)("div",{className:"main-form__header main-form__header--full",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)("div",{className:"main-form__title",children:"Отгрузка продукции"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(Utils_Form_ErrorMessage_ErrorMessage_jsx__WEBPACK_IMPORTED_MODULE_23__.a,{message:"Не заполнены все обязательные поля!",showError:showError,setShowError:setShowError}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)("div",{className:"main-form__row",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_20__.a,{inputName:"Дата заявки",selected:Date.parse(requestInputs.date),disabled:!0}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(Utils_Form_InputDate_InputDate_jsx__WEBPACK_IMPORTED_MODULE_20__.a,{inputName:"Дата отгрузки",name:"shippingDate",selected:Date.parse(new Date),disabled:!0})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(Utils_Form_InputProducts_InputProducts_jsx__WEBPACK_IMPORTED_MODULE_22__.a,{inputName:"Продукция",userHasAccess:userContext.userHasAccess,required:!0,onChange:function handleProductsChange(newProducts){validateField("requestProducts",newProducts),setSelectedProducts(newProducts),setRequestErrors(Object.assign({},requestErrors,{requestProducts:!1}))},defaultValue:selectedProducts,error:requestErrors.requestProducts,errorsArr:requestErrors,setErrorsArr:setRequestErrors,customSearch:{display:!1},customSelectedItem:{isMinimized:!0},customLayout:{productName:{showColorPicker:!0,readOnly:!0},packaging:{customName:"Фасовка",readOnly:!0,marginRight:"10px"},quantity:{customName:"Исх. кол-во (шт.)",readOnly:!0},newQuantity:{customName:"Отгружено (шт.)"}}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(Utils_Form_InputText_InputText_jsx__WEBPACK_IMPORTED_MODULE_21__.a,{inputName:"Комментарий",name:"comment",disabled:!0,defaultValue:requestInputs.comment,handleInputChange:function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;validateField(name,value),setRequestInputs(Object.assign({},requestInputs,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,value))),setRequestErrors(Object.assign({},requestErrors,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},name,!1)))}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(_Clients_SelectClients_SelectClients_jsx__WEBPACK_IMPORTED_MODULE_28__.a,{inputName:"Клиент",userHasAccess:userContext.userHasAccess,defaultValue:0!==requestInputs.clientId&&(null===(_requestInputs$client=requestInputs.client)||void 0===_requestInputs$client?void 0:_requestInputs$client.name),readOnly:!0}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)("div",{className:"main-form__buttons main-form__buttons--full",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)("input",{className:"main-form__submit main-form__submit--inverted",type:"submit",onClick:function onClick(event){event.preventDefault();var id=props.history.location.pathname.split("ship/")[1];props.history.push("".concat(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_27__.c[props.type].redirectURL,"#").concat(id))},value:"Вернуться назад"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(Utils_Form_Button_Button_jsx__WEBPACK_IMPORTED_MODULE_24__.a,{text:"Отгрузить продукцию",isLoading:isLoading,className:"main-form__submit",onClick:function handleSubmit(){setIsLoading(!0),function formIsValid(){var check=!0,newErrors=Object.assign({requestProducts:!1});for(var item in validInputs)!1===validInputs[item]&&(check=!1,newErrors=Object.assign(Object.assign({},newErrors,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({},item,!0))));return setRequestErrors(newErrors),!0===check||(setIsLoading(!1),setShowError(!0),!1)}()&&Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_26__.h)(Object.assign({},requestInputs,{status:checkIfAllProductsAreShipped(selectedProducts)?"Отгружено":"Частично отгружено"}),requestId).then((function(){return Promise.all(selectedProducts.map((function(selected){if(0!==Number.parseFloat(selected.quantityNew)&&void 0!==selected.quantityNew){var diff=Number.parseFloat(selected.quantity)-Number.parseFloat(selected.quantityNew);return Object(Utils_RequestsAPI_Requests_jsx__WEBPACK_IMPORTED_MODULE_26__.g)({requestId:requestId,quantity:diff<0?0:diff,status:diff<=0?"completed":selected.status,packaging:selected.packaging,name:selected.name},selected.id)}})))})).then((function(){return props.history.push(_workshopVariables_js__WEBPACK_IMPORTED_MODULE_27__.c[props.type].redirectURL)})).catch((function(error){setIsLoading(!1),console.log(error)}))}})]})]})})})};ShipRequest.displayName="ShipRequest",ShipRequest.__docgenInfo={description:"",methods:[],displayName:"ShipRequest"},__webpack_exports__.default=ShipRequest,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\WorkshopsComponents\\Forms\\ShipRequest\\ShipRequest.jsx"]={name:"ShipRequest",docgenInfo:ShipRequest.__docgenInfo,path:"src\\components\\MainPage\\WorkshopsComponents\\Forms\\ShipRequest\\ShipRequest.jsx"})},3291:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3292);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3292:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}\n",""]),module.exports=exports}}]);