(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{2662:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(18),$reduce=__webpack_require__(2669).left,arrayMethodIsStrict=__webpack_require__(991),CHROME_VERSION=__webpack_require__(444),IS_NODE=__webpack_require__(443);$({target:"Array",proto:!0,forced:!arrayMethodIsStrict("reduce")||!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2668:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultStylesPDF})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createPDF})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getPDFTitleObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getInputElementTextPDF})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getTransportationListPdfText})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getRequestPdfText})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProductsFromRequestsListPdfText}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(213),__webpack_require__(241),__webpack_require__(282),__webpack_require__(988),__webpack_require__(2663),__webpack_require__(1584),__webpack_require__(2704)),pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7__),pdfmake__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2705),pdfmake__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(pdfmake__WEBPACK_IMPORTED_MODULE_8__),_functions_jsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(983),_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(986),defaultStylesPDF={title:{fontSize:18,alignment:"left"},subheader:{fontSize:14,alignment:"left"},regularText:{fontSize:11,alignment:"left"},tableHeader:{fontSize:11,color:"#555",alignment:"left"}},createPDF=function createPDF(data){var print=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,print?pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).print():pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.createPdf(data).open()},getPDFTitleObject=function getPDFTitleObject(name){return{text:"".concat(name,"\n"),alignment:"center",style:"title"}},getInputElementTextPDF=function getInputElementTextPDF(title,value){return{text:[{text:"\n".concat(title,": \n"),style:"regularText",fontSize:12},{text:"".concat(value,"\n\n"),style:"subheader"}]}},getTransportationListPdfText=function getTransportationListPdfText(transportation){var transportationList=[],transportationInfo=[];transportation.map((function(item){return transportationInfo.push([{text:Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.g)(item.date),style:"regularText"},{text:item.cargo,style:"regularText"},{text:item.quantity,style:"regularText"},{text:item.sender,style:"regularText"},{text:item.recipient,style:"regularText"},{text:item.driver,style:"regularText"}])})),transportationList.push({table:{widths:[60,140,40,80,80,"*"],body:[[{text:"Дата",style:"tableHeader"},{text:"Товар",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Откуда",style:"tableHeader"},{text:"Куда",style:"tableHeader"},{text:"Водитель",style:"tableHeader"}]].concat(transportationInfo)}});var dd={info:{title:"Реестр транспортировок"},content:[getPDFTitleObject("Реестр транспортировок")].concat(transportationList),styles:defaultStylesPDF};return pdfmake__WEBPACK_IMPORTED_MODULE_8___default.a.vfs=pdfmake_build_vfs_fonts_js__WEBPACK_IMPORTED_MODULE_7___default.a.pdfMake.vfs,dd},getRequestPdfText=function getRequestPdfText(date,requestProducts,codeWord,workshopName,itemId){var productsArr=Object(_sorting_sorting_js__WEBPACK_IMPORTED_MODULE_10__.a)(requestProducts,{fieldName:"name",direction:"asc"}).map((function(item){return[item.name,item.quantity,item.packaging,"",""]})),dd={info:{title:"Очередь производства №"+itemId},content:[getPDFTitleObject("Очередь производства  №".concat(itemId)),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",getInputElementTextPDF("Дата",Object(_functions_jsx__WEBPACK_IMPORTED_MODULE_9__.g)(date)),{text:"Продукция: ",style:"regularText",fontSize:12,margin:[0,0,0,5]},{table:{widths:["*",70,70,70,70],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"Фасовка",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(productsArr))}},"\n",getInputElementTextPDF("Кодовое слово",codeWord)],styles:defaultStylesPDF};createPDF(dd)},sortRequestProducts=function sortRequestProducts(data){return data.sort((function(a,b){return a[0].localeCompare(b[0],void 0,{numeric:!0})<0?-1:a[0].localeCompare(b[0],void 0,{numeric:!0})>0?1:0}))},getProductsFromRequestsListPdfText=function getProductsFromRequestsListPdfText(products,workshopName){var dd={info:{title:"Очередь производства - список"},content:[getPDFTitleObject("Очередь производства - список"),workshopName?getInputElementTextPDF("Подразделение",workshopName):"\n",sortRequestProducts(Object.entries(products)).map((function(category){if(Object.values(category[1]).length>0)return[{text:[{text:"".concat(category[0]," \n"),fontSize:12,style:"regularText",margin:[5,5,5,5]}]}].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(function formatProducts(products){return[{table:{margin:[0,5,0,5],widths:["*",100,80,80],body:[[{text:"Название",style:"tableHeader"},{text:"Кол-во",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(sortRequestProducts(Object.entries(products)).map((function(product){return[product[0],product[1],"",""]}))))}}]}(category[1])),["\n"])}))],styles:defaultStylesPDF};createPDF(dd)}},2669:function(module,exports,__webpack_require__){var aFunction=__webpack_require__(285),toObject=__webpack_require__(148),IndexedObject=__webpack_require__(639),toLength=__webpack_require__(182),createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction(callbackfn);var O=toObject(that),self=IndexedObject(O),length=toLength(O.length),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}},2674:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/ok.2ad21b54.svg"},2677:function(module,__webpack_exports__,__webpack_require__){"use strict";var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),Assets_sidemenu_plus_inline_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2708),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2694),__webpack_require__(1)),AddToButton=function AddToButton(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"Добавить":_ref$text,_onClick=_ref.onClick;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"add-to-button",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"add-to-button__link",onClick:function onClick(event){event.preventDefault(),_onClick()},children:[text,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Assets_sidemenu_plus_inline_svg__WEBPACK_IMPORTED_MODULE_1__.a,{className:"add-to-button__img add-to-button__img--plus"})]})})};AddToButton.displayName="AddToButton",AddToButton.__docgenInfo={description:"",methods:[],displayName:"AddToButton",props:{text:{defaultValue:{value:"'Добавить'",computed:!1},required:!1},onClick:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=AddToButton,AddToButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\utils\\Form\\AddToButton\\AddToButton.jsx"]={name:"AddToButton",docgenInfo:AddToButton.__docgenInfo,path:"src\\utils\\Form\\AddToButton\\AddToButton.jsx"})},2694:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2695);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2695:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.add-to-button__link{display:flex;align-items:center;transition:100ms ease-in-out;color:#777777 !important;border-radius:3px;cursor:pointer;font-size:0.9rem;padding:2px 8px;padding-right:3px;margin-top:2px;width:fit-content;margin-left:10px}.add-to-button__link .add-to-button__img{width:20px;transition:margin-left 200ms ease-in-out}.add-to-button__link .add-to-button__img--plus{margin-left:7px}.add-to-button__link .add-to-button__img--plus path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.add-to-button__link .add-to-button__img--more path:first-child{transition:fill 200ms ease-in-out;fill:#bbbbbb}.add-to-button__link:hover{color:#333333 !important}.add-to-button__link:hover .add-to-button__img--more{margin-left:8px}.add-to-button__link:hover .add-to-button__img--more path:first-child{fill:#55a1c1}.add-to-button__link:hover .add-to-button__img--plus path:first-child{fill:#55a1c1}\n",""]),module.exports=exports},2720:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return filterEmployeesBySearchQuery})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getEmployeesByWorkshopListPdfText})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getEmployeesListPdfText}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(634),__webpack_require__(282),__webpack_require__(984),__webpack_require__(985),__webpack_require__(242),__webpack_require__(637),__webpack_require__(333),__webpack_require__(241),__webpack_require__(213),__webpack_require__(983)),Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2668),filterEmployeesBySearchQuery=function filterEmployeesBySearchQuery(data,searchQuery){var query=searchQuery.toLowerCase();return data.filter((function(item){return null!==item.name&&(item.lastName.toLowerCase().includes(query)||item.name.toLowerCase().includes(query)||item.middleName.toLowerCase().includes(query)||item.id.toString().includes(query)||item.yearOfBirth&&item.yearOfBirth.toString().includes(query)||item.dateOfBirth&&item.dateOfBirth.toString().includes(query)||item.citizenship.toLowerCase().includes(query)||item.workshop.toLowerCase().includes(query)||item.position.toLowerCase().includes(query)||item.comment.toLowerCase().includes(query)||item.relevance.toLowerCase().includes(query))}))},getEmployeesTablePDF=function getEmployeesTablePDF(employeeInfo){return{table:{widths:["*",70,80,120,100],body:[[{text:"ФИО",style:"tableHeader"},{text:"Дата рождения",style:"tableHeader"},{text:"Гражданство",style:"tableHeader"},{text:"Должность",style:"tableHeader"},{text:"",style:"tableHeader"}]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(employeeInfo))}}},getEmployeesByWorkshopListPdfText=function getEmployeesByWorkshopListPdfText(){var employees=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],workshop=arguments.length>1?arguments[1]:void 0,employeesList=[],employeeInfo=[];employees.map((function(item){employeeInfo.push([Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.p)(item),Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.g)(item.yearOfBirth),item.citizenship,item.position,""])})),employeesList.push(getEmployeesTablePDF(employeeInfo));var dd={info:{title:"Список сотрудников - ".concat(workshop)},content:[Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.d)("Список сотрудников ".concat(workshop,"\n"))].concat(employeesList),styles:Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.b};Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.a)(dd)},getEmployeesListPdfText=function getEmployeesListPdfText(employees,workshops){var employeesList=[];workshops.map((function(workshop){employeesList.push(Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.c)("Подразделение",workshop));var employeeInfo=[];employees.map((function(employee){(workshop===employee.workshop&&"Уволен"!==employee.relevance||"Уволенные"===workshop&&"Уволен"===employee.relevance)&&employeeInfo.push([Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.p)(employee),Object(Utils_functions_jsx__WEBPACK_IMPORTED_MODULE_10__.g)(employee.yearOfBirth),employee.citizenship,employee.position,""])})),employeesList.push(getEmployeesTablePDF(employeeInfo))}));var dd={info:{title:"Список сотрудников"},content:[Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.d)("Список сотрудников")].concat(employeesList),styles:Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.b};Object(Utils_pdfFunctions_js__WEBPACK_IMPORTED_MODULE_11__.a)(dd)}},2784:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2785);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2785:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-employee{width:calc(100% - 20px);display:flex;flex-direction:column;margin-bottom:25px}.select-employee .select-employee__input{display:flex;width:100%;justify-content:space-between;margin-top:5px;flex-direction:column;align-items:flex-start}.select-employee .select-employee__input .select-employee__input_name{color:#666;flex:0 1 calc(20% - 10px);padding-right:10px;width:100%;margin-bottom:5px}.select-employee .select-employee__input .select-employee__input_field{width:100%}.select-employee .main-form__button{font-size:0.8rem;padding:10px 10px}.select-employee__employee-info{border:1px solid #ccc;padding:5px 15px;border-radius:3px;width:100%;box-sizing:border-box;color:#333333;font-size:1rem}.select-employee__employee-info .employee-info__name{font-size:1.1rem}.select-employee__employee-info .employee-info__workshop{font-size:0.95rem}.select-employee__employee-info .employee-info__position{font-size:0.9rem;color:#777777}.select-employee .select-employee__error{width:100%;margin-top:1px;font-size:0.75rem;box-sizing:border-box;border:1px solid #d48282;background-color:#fadada;color:#ad1c1c;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.select-employee .select-employee__error--hidden{display:none}.select-employee .select-employee__searchbar{display:flex;flex-direction:row;position:relative;min-height:2rem}.select-employee .select-employee__searchbar .select-employee__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px;z-index:0;transition:100ms ease-in-out;margin-top:0}.select-employee .select-employee__searchbar .select-employee__input:hover{border-color:#888888}.select-employee .select-employee__searchbar .select-employee__input:focus{border:1px solid #4293b6}.select-employee .select-employee__searchbar .select-employee__input--error{border:1px solid #f73434 !important}.select-employee .select-employee__searchbar .select-employee__search_button{border:0;flex:0 1 15%;background-color:#4293b6;color:#fff;border-top-right-radius:5px;border-bottom-right-radius:5px;outline:none;cursor:pointer;padding:5px 10px;font-size:80%;transition:0.2s ease-in-out}.select-employee .select-employee__searchbar .select-employee__search_button:hover{background-color:#519fc0}.select-employee .tableview-employees{width:100%}@media (max-width: 768px){.select-employee .select-employee__input{flex-wrap:wrap;flex-direction:column;align-items:flex-start}.select-employee .select-employee__input .select-employee__input_name{width:100%;margin-bottom:5px}.select-employee .select-employee__input .select-employee__input_field{width:100%}.select-employee .select-employee__input .select-employee__input_field input{padding:10px !important}}@media (max-width: 500px){.select-employee .select-from-button__link{margin-left:0;padding-left:0}.select-employee .select-employee__input_name{flex-direction:column;justify-content:flex-start;align-items:flex-start}}\n",""]),module.exports=exports},2786:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2787);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2787:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.tableview-select-employees{display:flex;flex-direction:column;width:calc(100% + 30px);margin-left:-15px}.tableview-select-employees .main-window__list-item{cursor:pointer;padding-top:10px;padding-bottom:10px}.tableview-select-employees .main-window__list-item span:nth-child(1){flex:0 1 35%}.tableview-select-employees .main-window__list-item span:nth-child(2){flex:0 1 10%;max-width:150px}.tableview-select-employees .main-window__list-item span:nth-child(3){flex:0 1 20%}.tableview-select-employees .main-window__list-item span:nth-child(4){flex:0 1 30%}@media (max-width: 768px){.tableview-select-employees .main-window__list-item span:nth-child(2){max-width:none}.tableview-select-employees .main-window__list-item .main-window__actions{display:none}}\n",""]),module.exports=exports},2801:function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(23),defineProperty_default=__webpack_require__.n(defineProperty),helpers_typeof=__webpack_require__(105),typeof_default=__webpack_require__.n(helpers_typeof),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(241),__webpack_require__(282),__webpack_require__(41),__webpack_require__(0)),FormWindow=(__webpack_require__(2784),__webpack_require__(335)),SearchBar=__webpack_require__(638),functions=(__webpack_require__(213),__webpack_require__(2786),__webpack_require__(1582),__webpack_require__(983)),PlaceholderLoading=__webpack_require__(2649),jsx_runtime=__webpack_require__(1),TableView_TableView_TableView=function TableView(props){return Object(react.useEffect)((function(){props.setShowWindow&&props.setShowWindow(!1)}),[props.closeWindow]),Object(jsx_runtime.jsx)("div",{className:"tableview-select-employees",children:Object(jsx_runtime.jsx)("div",{className:"main-window",children:Object(jsx_runtime.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)("span",{children:"ФИО"}),Object(jsx_runtime.jsx)("span",{children:"Дата рождения"}),Object(jsx_runtime.jsx)("span",{children:"Подразделение"}),Object(jsx_runtime.jsx)("span",{children:"Должность"})]}),props.isLoading?Object(jsx_runtime.jsx)(PlaceholderLoading.a,{itemClassName:"main-window__list-item",minHeight:"35px",items:10}):props.data.map((function(employee,employee_id){var _employee$dateOfBirth;return"Уволен"!==employee.relevance&&Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item",onClick:function onClick(){props.selectEmployee((null==employee?void 0:employee.lastName)+" "+(null==employee?void 0:employee.name)+" "+(null==employee?void 0:employee.middleName),null==employee?void 0:employee.id,employee),props.setCloseWindow(!props.closeWindow)},children:[Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"ФИО:"}),(null==employee?void 0:employee.lastName)+" "+(null==employee?void 0:employee.name)+" "+(null==employee?void 0:employee.middleName)]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Дата рождения:"}),Object(functions.g)(null!==(_employee$dateOfBirth=null==employee?void 0:employee.dateOfBirth)&&void 0!==_employee$dateOfBirth?_employee$dateOfBirth:null==employee?void 0:employee.yearOfBirth)]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Подразделение:"}),null==employee?void 0:employee.workshop]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Должность:"}),null==employee?void 0:employee.position]})]},employee_id)}))]})})})};TableView_TableView_TableView.displayName="TableView",TableView_TableView_TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"};var SelectEmployee_TableView_TableView=TableView_TableView_TableView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Employees\\SelectEmployee\\TableView\\TableView.jsx"]={name:"TableView",docgenInfo:TableView_TableView_TableView.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Employees\\SelectEmployee\\TableView\\TableView.jsx"});var ControlPanel=__webpack_require__(2655),SelectFromButton=__webpack_require__(2670),useSort=__webpack_require__(2683),Employees_functions=__webpack_require__(2720),useEmployeesList=__webpack_require__(2738),SelectEmployee_SelectEmployee_SelectEmployee=function SelectEmployee(props){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),showWindow=_useState2[0],setShowWindow=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),closeWindow=_useState4[0],setCloseWindow=_useState4[1],_useState5=Object(react.useState)(null),_useState6=slicedToArray_default()(_useState5,2),employee=_useState6[0],setEmployee=_useState6[1],_useState7=Object(react.useState)(""),_useState8=slicedToArray_default()(_useState7,2),searchQuery=_useState8[0],setSearchQuery=_useState8[1],_useState9=Object(react.useState)(""),_useState10=slicedToArray_default()(_useState9,2),fullName=_useState10[0],setFullName=_useState10[1],_useEmployeesList=Object(useEmployeesList.a)(!props.employees),employees=_useEmployeesList.employees,setEmployees=_useEmployeesList.setEmployees,isLoadingEmployees=_useEmployeesList.isLoadingEmployees,_useSort=Object(useSort.a)(employees,{sortOrder:{curSort:"lastName",lastName:"asc"},sortOptions:[{value:"lastName asc",text:"По фамилии (А-Я)"},{value:"lastName desc",text:"По фамилии (Я-А)"}],ignoreURL:!0},[employees]),sortedData=_useSort.sortedData,sortPanel=_useSort.sortPanel;Object(react.useEffect)((function(){if(props.employees&&0===employees.length)return setEmployees(props.employees)}),[props.employees,employees]),Object(react.useEffect)((function(){var _props$defaultValue;"object"===typeof_default()(props.defaultValue)&&null!==(_props$defaultValue=props.defaultValue)&&void 0!==_props$defaultValue&&_props$defaultValue.lastName&&setEmployee(props.defaultValue)}),[props.defaultValue]);return Object(jsx_runtime.jsxs)("div",{className:"select-employee",children:[Object(jsx_runtime.jsxs)("div",{className:"select-employee__input",children:[Object(jsx_runtime.jsxs)("div",{className:"select-employee__input_name main-form__input_name--header",children:["".concat(props.inputName," ").concat(props.required?"*":""),!props.readOnly&&Object(jsx_runtime.jsx)(SelectFromButton.a,{text:"Выбрать сотрудника",onClick:function onClick(){return setShowWindow(!showWindow)}})]}),employee?Object(jsx_runtime.jsxs)("div",{className:"select-employee__employee-info",children:[Object(jsx_runtime.jsx)("div",{className:"employee-info__name",children:"".concat(employee.lastName," ").concat(employee.name," ").concat(employee.middleName)}),Object(jsx_runtime.jsx)("div",{className:"employee-info__workshop",children:employee.workshop}),Object(jsx_runtime.jsx)("div",{className:"employee-info__position",children:employee.position})]}):(props.defaultValue&&"object"!==typeof_default()(props.defaultValue)||fullName)&&Object(jsx_runtime.jsx)("div",{className:"select-employee__input_field",children:Object(jsx_runtime.jsx)("div",{className:"select-employee__searchbar",children:Object(jsx_runtime.jsx)("input",{type:"text",className:!0===props.error?"select-employee__input select-employee__input--error":"select-employee__input",defaultValue:props.defaultValue?props.defaultValue:fullName,placeholder:"Выберите работника, нажав на кнопку 'Выбрать сотрудника'",disabled:!0})})})]}),!0===props.error&&Object(jsx_runtime.jsx)("div",{className:"select-employee__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,defineProperty_default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),Object(jsx_runtime.jsx)(FormWindow.a,{title:"Выбор сотрудника",content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SearchBar.a,{fullSize:!0,setSearchQuery:setSearchQuery,placeholder:"Введите ФИО сотрудника для поиска..."}),Object(jsx_runtime.jsx)(ControlPanel.a,{sorting:sortPanel,itemsCount:"Всего: ".concat(employees.length," записей")}),Object(jsx_runtime.jsx)(SelectEmployee_TableView_TableView,{data:Object(Employees_functions.a)(sortedData,searchQuery),searchQuery:searchQuery,userHasAccess:props.userHasAccess,selectEmployee:function clickEmployee(employeeName,employeeId,employee){setFullName(employeeName),setEmployee(employee),props.handleEmployeeChange(employeeId,employeeName,employee),setShowWindow(!showWindow)},setCloseWindow:setCloseWindow,closeWindow:closeWindow,setShowWindow:setShowWindow,isLoading:isLoadingEmployees})]}),showWindow:showWindow,setShowWindow:setShowWindow})]})};SelectEmployee_SelectEmployee_SelectEmployee.displayName="SelectEmployee",SelectEmployee_SelectEmployee_SelectEmployee.__docgenInfo={description:"",methods:[],displayName:"SelectEmployee"};__webpack_exports__.a=SelectEmployee_SelectEmployee_SelectEmployee;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Employees\\SelectEmployee\\SelectEmployee.jsx"]={name:"SelectEmployee",docgenInfo:SelectEmployee_SelectEmployee_SelectEmployee.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Employees\\SelectEmployee\\SelectEmployee.jsx"})},2846:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2847);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2847:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-work{width:calc(100% - 20px);position:relative}.select-work .main-form__item{width:100%}.select-work .main-form__input_name{margin-bottom:0 !important}.select-work .select-work__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select-work .select-work__overlay--hidden{display:none}.select-work .select-draft{margin-bottom:15px}.select-work .select-draft__input_name{color:#666666;font-size:1rem;margin-bottom:3px}.select-work__selected{width:100%}.select-work .select-work-item{margin-bottom:5px}.select-work .select-work-item__input_field{font-size:0.9rem}.select-work .input_products{width:100%;margin-top:10px;font-size:95%;margin-bottom:5px}.select-work .input_products .input_products__input_name{font-size:85%}.select-work .input_products .select__input{min-height:1.25rem !important}.select-work .input_products .select .select__selected_row input{min-width:100% !important}.select-work .input_products .select__input{box-sizing:content-box;width:calc(100% - 20px);min-width:0 !important}.select-work__selected_item{background-color:#eeeeee;border-radius:3px;padding:0px 15px;margin-top:5px;width:calc(100% - 30px);position:relative;transition:0.2s ease-in-out;background-color:#eeeeee;border:1px solid #cccccc}.select-work__selected_item--minimized{width:calc(100% - 80px)}.select-work__selected_item:first-child{margin-top:5px}.select-work__selected_item .select-work__img{position:absolute;right:-35px;cursor:pointer;top:25%}.select-work__selected_item .select-work__img--new{right:-30px}.select-work__selected_item .select-work__selected_header{display:flex;cursor:pointer;padding:10px 0px}.select-work__selected_item .select-work__selected_header .select-work__selected_name{flex:0 1 33.3%}.select-work__selected_item .select-work__selected_header .select-work__selected_name span{font-size:70%}.select-work__selected_item .select-work__selected_form{transform-origin:0 0;height:100%;width:calc(100%);padding:15px 0;transition:0.2s ease-in-out;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.select-work__selected_item .select-work__selected_form--hidden{transform:scaleY(0);height:0;padding:0}.select-work__selected_item .select-work__selected_form .select-work__item{width:calc(100% - 0px);margin:0 auto;display:flex;justify-content:space-between;margin-top:5px;flex-direction:column;align-items:flex-start}.select-work__selected_item .select-work__selected_form .select-work__item .select-work__input_name{color:#666666;flex:0 1 20%;font-size:85%;margin-bottom:3px;width:100%}.select-work__selected_item .select-work__selected_form .select-work__item .select-work__input_field{flex:0 1 80%;width:100%}.select-work__selected_item .select-work__selected_form .select-work__item .select-work__input_field>input,.select-work__selected_item .select-work__selected_form .select-work__item .select-work__input_field textarea{font-size:80%;width:calc(100% - 20px - 2px);border-radius:3px;min-width:fit-content}.select-work__selected_item .select-work__selected_form .select-work__item .select-work__input_field>textarea{max-width:calc(100% - 22px);min-width:calc(100% - 22px);outline:none;min-height:50px;resize:none;transition:100ms ease-in-out}.select-work__selected_item .select-work__selected_form .select-work__item--comment,.select-work__selected_item .select-work__selected_form .select-work__item--time{position:relative}.select-work__selected_item .select-work__selected_form .select-work__item--comment .select-work__input_name,.select-work__selected_item .select-work__selected_form .select-work__item--time .select-work__input_name{color:#888888;flex:0 1 20%;font-size:80%;position:absolute;top:4px;left:5px;padding:0 5px;border-radius:3px;font-size:0.85rem;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.select-work__selected_item .select-work__selected_form .select-work__item--comment textarea,.select-work__selected_item .select-work__selected_form .select-work__item--comment input,.select-work__selected_item .select-work__selected_form .select-work__item--time textarea,.select-work__selected_item .select-work__selected_form .select-work__item--time input{padding-top:22px;padding-bottom:7px;border:1px solid #cccccc;width:100%;padding:5px 10px;padding-top:22px;padding-bottom:7px;border-radius:3px;font-size:0.9rem;transition:100ms ease-in-out;min-width:0;max-width:100%}.select-work__selected_item .select-work__selected_form .select-work__item--comment textarea:hover,.select-work__selected_item .select-work__selected_form .select-work__item--comment input:hover,.select-work__selected_item .select-work__selected_form .select-work__item--time textarea:hover,.select-work__selected_item .select-work__selected_form .select-work__item--time input:hover{border:1px solid #aaaaaa}.select-work__selected_item .select-work__selected_form .select-work__item--comment textarea:focus,.select-work__selected_item .select-work__selected_form .select-work__item--comment input:focus,.select-work__selected_item .select-work__selected_form .select-work__item--time textarea:focus,.select-work__selected_item .select-work__selected_form .select-work__item--time input:focus{border:1px solid #4293b6}.select-work .main-form__button{font-size:0.8rem;padding:10px 10px}.select-work__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:5px;z-index:2}.select-work__input:focus{border:1px solid #4293b6}@media (max-width: 768px){.select-work{width:100% !important}.select-work .select-work__selected_form .select-work__item{flex-direction:column}.select-work .select-work__selected_form .select-work__item .select-work__input_name{width:100%;margin-bottom:5px}.select-work .select-work__selected_form .select-work__item .select-work__input_field{width:100%;max-width:none}}@media (max-width: 500px){.select-work .add-to-button__link{margin-left:0;padding-left:0}.select-work .main-form__input_name--header{flex-direction:column;align-items:flex-start}.select-work .select-work__selected_form .select-from-button__link{margin-left:0;padding-left:0}}\n",""]),module.exports=exports},2848:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2849);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2849:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-work-item{width:calc(100% - 0px);display:flex;flex-direction:column;justify-content:space-between}.select-work-item--new .select-work-item__input_name{position:absolute;top:-11px;left:6px;z-index:1;font-size:0.8rem !important;background-color:#ffffff;width:fit-content !important;padding:2px 5px}.select-work-item--new input{max-width:none !important;min-width:0 !important}.select-work-item .searchbar{margin-bottom:0}.select-work-item .select-work-item__input{display:flex;width:calc(100% - 0px);justify-content:space-between;position:relative;flex-direction:column;align-items:flex-start}.select-work-item .select-work-item__input .select-work-item__input_name{color:#666;font-size:1rem;flex:0 1 20%;width:100%;margin-bottom:0px}.select-work-item .select-work-item__input .select-work-item__input_field{width:100%;font-size:0.85rem !important}.select-work-item .select-work-item__error{width:80%;align-self:flex-end;margin-top:1px;font-size:0.75rem;background-color:#f73434;color:#ffffff;border-radius:5px;padding:5px 10px;transition:0.2s ease-in-out;cursor:pointer}.select-work-item .select-work-item__error--hidden{display:none}.select-work-item .select-work-item__searchbar{display:flex;flex-direction:row;position:relative;width:calc(100% - 0px);margin-top:5px}.select-work-item .select-work-item__searchbar .select-work-item__input{border:1px solid #bbbbbb;flex:0 1 100%;padding:5px 10px;border-radius:3px;z-index:0;min-width:0 !important}.select-work-item .select-work-item__searchbar .select-work-item__input:focus{border:1px solid #4293b6}.select-work-item .select-work-item__searchbar .select-work-item__input--error{border:1px solid #f73434 !important}.select-work-item .main-form__button{font-size:0.8rem}@media (max-width: 768px){.select-work-item .select-work-item__input{flex-wrap:wrap;flex-direction:column}.select-work-item .select-work-item__input .select-work-item__input_name{width:100%;margin-bottom:5px}.select-work-item .select-work-item__input .select-work-item__input_field{width:100%}}\n",""]),module.exports=exports},2850:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2851);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2851:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.tableview-work{display:flex;flex-direction:column;width:calc(100% + 30px);margin-left:-15px}.tableview-work .main-window__list-item{padding-bottom:10px;padding-top:10px;cursor:pointer}.tableview-work .main-window__list-item span:nth-child(1){flex:0 1 50%}.tableview-work .main-window__list-item span:nth-child(2){flex:0 1 25%}.tableview-work .main-window__list-item .main-window__actions{flex:0 1 10%}@media (max-width: 768px){.tableview-work .main-window__actions{display:none}}\n",""]),module.exports=exports},2852:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2853);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2853:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-draft{width:100%;position:relative;margin-top:5px}.select-draft__buttons{flex-direction:row}.select-draft__buttons .select-draft__search_button{margin-right:5px}.select-draft .select-draft__overlay{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1}.select-draft .select-draft__overlay--hidden{display:none}.select-draft__error{width:calc(100% - 20px);margin-top:1px;font-size:0.75rem;background-color:#f73434;color:#ffffff;border-radius:3px;padding:5px 10px;transition:0.2s ease-in-out}.select-draft__error--hidden{display:none}.select-draft__searchbar{display:flex;flex-direction:column;position:relative}.select-draft__searchbar .select-draft__input{border:1px solid #bbbbbb;width:100%;padding:5px 10px;border-radius:3px !important;z-index:0;font-size:80% !important}.select-draft__searchbar .select-draft__input:focus{border:1px solid #4293b6}.select-draft__searchbar .select-draft__input--error{border:1px solid #f73434 !important}.select-draft__searchbar .select-draft__search_button{border:0;border-radius:3px;width:fit-content;background-color:#4293b6;color:#fff;outline:none;cursor:pointer;padding:10px 10px;font-size:70%;transition:0.2s ease-in-out;margin-bottom:5px}.select-draft__searchbar .select-draft__search_button:hover{background-color:#519fc0}.select-draft__searchbar .tableview_products{width:100%}.select-draft__options{position:absolute;width:100%;max-height:200px;overflow-y:auto;background-color:#fff;display:flex;flex-direction:column;font-size:80%;z-index:2;transform:scaleX(1);transition:0.1s ease-in-out;box-shadow:0 4px 4px rgba(0,0,0,0.22),0 0px 5px rgba(0,0,0,0.24);transform-origin:0 0;padding:4px 0}.select-draft__options--hidden{transform:scaleY(0)}.select-draft__options .select-draft__img{max-width:50px;border-radius:2.5px;margin-right:10px}.select-draft__options .select-draft__option_item{padding:15px 10px;cursor:pointer;background-color:#ffffff;transition:0.1s ease-in-out;display:flex;flex-direction:row;align-items:center}.select-draft__options .select-draft__option_item:hover{color:#fff;background-color:#4293b6}.select-draft .searchbar{margin-bottom:0}.select-draft__selected{display:flex;flex-direction:column}.select-draft__selected_photo{max-width:50px;max-height:50px;margin-right:10px;border-radius:5px}.select-draft__selected_title{margin-top:10px;margin-left:15px;font-size:85%;color:#666}.select-draft__selected_row{display:flex;flex-direction:row;justify-content:space-between;margin-top:12px;font-size:0.9rem}.select-draft__selected_row:first-of-type{margin-top:12px}.select-draft__selected_row .select-draft__selected_item{display:flex;padding:0px 0px;border-radius:3px;width:calc(60% - 30px);margin-right:50px;position:relative;font-size:90%;align-items:center;border:1px solid #bbbbbb;transition:100ms ease-in-out;cursor:pointer;background-color:#ffffff;color:#333333}.select-draft__selected_row .select-draft__selected_item:hover{border-color:#999999}.select-draft__selected_row .select-draft__selected_item:last-child{margin-bottom:0}.select-draft__selected_row .select-draft__selected_item .select-draft__img{position:absolute;left:calc(100% + 10px);width:25px;border-radius:105px}.select-draft__selected_row .select-draft__selected_item .select-draft__selected_name{width:100%;height:fit-content;padding:10px 5px;border:none !important;cursor:pointer}.select-draft__selected_row .select-draft__selected_quantity,.select-draft__selected_row .select-draft__selected_packaging{width:calc(40% - 0px);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;font-size:90%;box-sizing:border-box;position:relative}.select-draft__selected_row .select-draft__selected_quantity .select-draft__input-name,.select-draft__selected_row .select-draft__selected_packaging .select-draft__input-name{position:absolute;top:-7px;left:6px;z-index:1;background-color:#ffffff;padding:0 5px;color:#777777;white-space:nowrap;border-radius:3px}.select-draft__selected_row .select-draft__selected_quantity input[type="text"],.select-draft__selected_row .select-draft__selected_quantity input[type="number"],.select-draft__selected_row .select-draft__selected_quantity textarea,.select-draft__selected_row .select-draft__selected_packaging input[type="text"],.select-draft__selected_row .select-draft__selected_packaging input[type="number"],.select-draft__selected_row .select-draft__selected_packaging textarea{border:1px solid #bbbbbb;font-size:110%;width:100%;min-width:100px;display:flex;padding:10px 10px;border-radius:3px;outline:none;position:relative;align-items:center;transition:100ms ease-in-out;z-index:0;padding-top:10px;box-sizing:border-box;color:#333333;height:auto;max-width:none}.select-draft__selected_row .select-draft__selected_quantity input[type="text"]:focus,.select-draft__selected_row .select-draft__selected_quantity input[type="number"]:focus,.select-draft__selected_row .select-draft__selected_quantity textarea:focus,.select-draft__selected_row .select-draft__selected_packaging input[type="text"]:focus,.select-draft__selected_row .select-draft__selected_packaging input[type="number"]:focus,.select-draft__selected_row .select-draft__selected_packaging textarea:focus{border:1px solid #4293b6}.select-draft__selected .select-draft__selected_item--completed{background-color:#5ea76e}.select-draft__selected .select-draft__selected_item--completed:hover{background-color:#539862}.select-draft__selected .select-draft__selected_item--defect{background-color:#c48681}.select-draft__selected .select-draft__selected_item--defect:hover{background-color:#bc7570}.select-draft__selected .select-draft__selected_item--production{background-color:#87a8b6}.select-draft__selected .select-draft__selected_item--production:hover{background-color:#779dac}.select-draft--new{padding-right:10px;box-sizing:border-box;margin-top:0;margin-bottom:0 !important;display:flex;flex-direction:row-reverse;align-items:flex-start;justify-content:space-between}.select-draft--new button{border-color:transparent;font-size:28px;color:#888;cursor:pointer;background-color:transparent;line-height:1rem;margin-top:4px;margin-right:0 !important}.select-draft--new .select-draft__input_name{position:absolute;top:-11px;left:6px;z-index:1;color:#555555;font-size:0.8rem !important;background-color:#ffffff;width:fit-content !important;padding:2px 5px}.select-draft--new input{max-width:none !important;min-width:0 !important}.select-draft--new .select-draft__selected{margin-top:0px;margin-bottom:10px;margin-right:6px;width:100%}.select-draft--new .select-draft__selected .select-draft__selected_row{align-items:flex-start;margin-top:0}.select-draft--new .select-draft__selected .select-draft__selected_row:not(:first-child){margin-top:8px}.select-draft--new .select-draft__selected_item{width:100%}.select-draft--new .select-draft__selected_item input{font-size:0.9rem !important;height:3rem !important;max-height:1.6rem !important}.select-draft--new .select-draft__img{max-width:21px}.select-draft--new .select-draft__selected_quantity{margin-right:0;width:calc(30%);min-width:110px;max-width:125px}.select-draft--new .select-draft__selected_quantity input{min-width:100% !important;height:2.25rem !important;box-sizing:border-box;border-radius:3px !important}.select-draft--new .select-draft__input_field{font-size:0.85rem}.select-draft--readonly .select-draft__input .select-draft__input_name{border-radius:5px}.select-draft--readonly .select-draft__selected .select-draft__selected_row:first-child{margin-top:0px !important}.select-draft--readonly .select-draft__selected .select-draft__selected_row .select-draft__selected_item .select-draft__selected_name{height:3rem !important;max-height:1.5rem !important}.select-draft--readonly .select-draft__selected .select-draft__selected_row .select-draft__selected_quantity input{height:3rem !important;max-height:2.3rem !important}@media (max-width: 768px){.select-draft{width:100% !important}}@media (max-width: 576px){.select-draft{width:100% !important}.select-draft__selected_row{flex-direction:column;margin-top:20px}.select-draft__selected_row .select-draft__selected_item{width:calc(100% - 40px)}.select-draft__selected_row .select-draft__selected_packaging,.select-draft__selected_row .select-draft__selected_quantity{margin-top:12.5px;width:100%}.select-draft__selected_row .select-draft__selected_packaging input,.select-draft__selected_row .select-draft__selected_quantity input{width:100%}}\n',""]),module.exports=exports},2854:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(2855);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},2855:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-drafts__list{width:calc(100% + 30px);margin-left:-15px}.select-drafts__list .main-window__list .main-window__list-item{cursor:pointer}.select-drafts__list .main-window__list .main-window__list-item span:nth-child(1){flex:0 1 20%}.select-drafts__list .main-window__list .main-window__list-item span:nth-child(2){flex:0 1 20%}.select-drafts__list .main-window__list .main-window__list-item span:nth-child(3){flex:0 1 20%}.select-drafts__list .main-window__list .main-window__list-item span:nth-child(4){flex:0 1 15%}@media (max-width: 768px){.select-drafts__list .main-window__actions{display:none}}\n",""]),module.exports=exports},2856:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return submitWorkData}));var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(284),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(147),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__(441),__webpack_require__(242),__webpack_require__(283),__webpack_require__(243),__webpack_require__(334),__webpack_require__(213),__webpack_require__(41),__webpack_require__(990),__webpack_require__(282),__webpack_require__(1586),__webpack_require__(1581),__webpack_require__(2684)),submitWorkData=function(){var _ref=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee2(worktimeInputs,date,employee,setIsLoading,inputs){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return setIsLoading(!0),_context2.next=3,Promise.all(worktimeInputs.works.map(function(){var _ref2=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee(item){var temp,originalItem;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return console.log(item),temp=Object.assign({day:date.getDate(),month:date.getMonth()+1,year:date.getFullYear(),employeeId:employee.id,comment:item.comment,workListId:item.workId,hours:item.hours}),_context.next=4,Promise.all(worktimeInputs.originalWorks.map((function(originalWork){var item=worktimeInputs.works.find((function(workItem){return workItem.id===originalWork.id}));if(originalWork.id&&void 0===item)return console.log("deleting element",worktimeInputs),Promise.all(originalWork.product.map((function(product){return Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.e)(originalWork.id,product.id)}))).then((function(){return Promise.all(originalWork.draft.map((function(draft){return Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.d)(originalWork.id,draft.partId,draft.partType)})))})).then((function(){return Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.f)(originalWork.id)}))})));case 4:if(!item.isOld){_context.next=16;break}if(!(originalItem=worktimeInputs.originalWorks.find((function(originalWork){return item.id===originalWork.id})))||item.hours===originalItem.hours&&item.comment===originalItem.comment&&item.workName===originalItem.workName){_context.next=9;break}return _context.next=9,Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.g)(temp,item.id);case 9:Promise.all(originalItem.product.map((function(originalProduct){if(void 0===item.product.find((function(product){return product.id===originalProduct.id})))return console.log("delete product",originalProduct),Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.e)(item.id,originalProduct.id)}))),Promise.all(item.product.map((function(product){if(void 0===originalItem.product.find((function(originalProduct){return product.id===originalProduct.id})))return console.log("add product",product),Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.b)(item.id,product.productId,product.quantity,{name:product.name})}))),Promise.all(originalItem.product.map((function(originalProduct){var product=item.product.find((function(product){return product.id===originalProduct.id}));if(void 0!==product&&originalProduct.quantity!==Number.parseFloat(product.quantity))return console.log("edit product",item.id,product,originalProduct),Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.e)(item.id,product.id).then((function(){var _product$productId,_product$product;return Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.b)(item.id,null!==(_product$productId=null==product?void 0:product.productId)&&void 0!==_product$productId?_product$productId:null==product||null===(_product$product=product.product)||void 0===_product$product?void 0:_product$product.id,product.quantity,{name:product.name})}))}))),Promise.all(originalItem.draft.map((function(originalDraft){if(void 0===item.draft.find((function(draft){return draft.id===originalDraft.id})))return console.log("delete draft",originalDraft,originalItem),Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.d)(item.id,originalDraft.partId,originalDraft.partType)}))),Promise.all(item.draft.map((function(draft){if(void 0===originalItem.draft.find((function(originalDraft){return draft.id===originalDraft.id})))return console.log("add draft",draft),Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.a)(item.id,draft.partId,draft.type,draft.quantity,draft.name)}))),Promise.all(originalItem.draft.map((function(originalDraft){var _originalDraft$partTy,_item$draft$find,draft=item.draft.find((function(draft){return draft.id===originalDraft.id}));if(console.log("edit draft opportunity",originalDraft,draft),void 0!==draft&&originalDraft.quantity!==Number.parseFloat(draft.quantity))return console.log("edit draft success",draft),Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.d)(item.id,originalDraft.partId,null!==(_originalDraft$partTy=originalDraft.partType)&&void 0!==_originalDraft$partTy?_originalDraft$partTy:null===(_item$draft$find=item.draft.find((function(item){return draft.partId===item.id})))||void 0===_item$draft$find?void 0:_item$draft$find.type).then((function(){return Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.a)(item.id,draft.partId,draft.partType,draft.quantity,draft.name)}))}))),inputs&&inputs.updateSelectedDaysWork(item);case 16:if(item.isOld||null===item.workId||void 0===item.isOld){_context.next=19;break}return console.log("adding item",item),_context.abrupt("return",Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.c)(temp).then((function(res){return res.json()})).then((function(res){return Promise.all(item.product.map((function(product){return Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.b)(res.id,product.id,product.quantity,{name:product.name})}))),res.id})).then((function(id){return Promise.all(item.draft.map((function(draft){return Object(Utils_RequestsAPI_WorkManaging_WorkControl_jsx__WEBPACK_IMPORTED_MODULE_13__.a)(id,draft.partId,draft.type,draft.quantity,draft.name)})))})).then((function(){return inputs&&inputs.addSelectedDaysWork(item)})).catch((function(error){alert("Ошибка при добавлении записи"),setIsLoading(!1),console.log(error)})));case 19:case"end":return _context.stop()}}),_callee)})));return function(_x6){return _ref2.apply(this,arguments)}}())).then((function(){setIsLoading(!1)}));case 3:return _context2.abrupt("return",_context2.sent);case 4:case"end":return _context2.stop()}}),_callee2)})));return function submitWorkData(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}()},2896:function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(23),defineProperty_default=__webpack_require__.n(defineProperty),toConsumableArray=__webpack_require__(65),toConsumableArray_default=__webpack_require__.n(toConsumableArray),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(2662),__webpack_require__(1586),__webpack_require__(1581),__webpack_require__(241),__webpack_require__(987),__webpack_require__(1583),__webpack_require__(41),__webpack_require__(213),__webpack_require__(242),__webpack_require__(637),__webpack_require__(333),__webpack_require__(0)),select_delete=__webpack_require__(2730),delete_default=__webpack_require__.n(select_delete),FormWindow=(__webpack_require__(2846),__webpack_require__(282),__webpack_require__(2848),__webpack_require__(335)),SearchBar=__webpack_require__(638),WorkList=__webpack_require__(2736),PlaceholderLoading=(__webpack_require__(634),__webpack_require__(984),__webpack_require__(985),__webpack_require__(2850),__webpack_require__(1582),__webpack_require__(2649)),sorting=__webpack_require__(986),jsx_runtime=__webpack_require__(1),TableView_TableView=function TableView(props){return Object(react.useEffect)((function(){props.setShowWindow(!1)}),[props.fullName]),Object(jsx_runtime.jsx)("div",{className:"tableview-work",children:Object(jsx_runtime.jsx)("div",{className:"main-window",children:Object(jsx_runtime.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)("span",{children:"Название"}),Object(jsx_runtime.jsx)("span",{children:"Тип"})]}),props.isLoading?Object(jsx_runtime.jsx)(PlaceholderLoading.a,{itemClassName:"main-window__list-item",minHeight:"2rem",items:15}):function sortProducts(data){return Object(sorting.a)(function searchQuery(data){var query=props.searchQuery.toLowerCase();return data.filter((function(item){return item.work.toLowerCase().includes(query)||item.id.toString().includes(query)}))}(data),{fieldName:"work",direction:"asc"})}(props.data).map((function(work,work_id){return Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item",onClick:function onClick(){props.selectWork(work.work,work.id,work.typeOfWork)},children:[Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Название:"}),work.work]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Тип:"}),work.typeOfWork]})]},work_id)}))]})})})};TableView_TableView.displayName="TableView",TableView_TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"};var SelectWorkItem_TableViewWork_TableView=TableView_TableView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Work\\SelectWorkItem\\TableViewWork\\TableView.jsx"]={name:"TableView",docgenInfo:TableView_TableView.__docgenInfo,path:"src\\components\\MainPage\\Work\\SelectWorkItem\\TableViewWork\\TableView.jsx"});var SelectFromButton=__webpack_require__(2670),SelectWorkItem_SelectWorkItem_SelectWorkItem=function SelectWorkItem(props){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),showWindow=_useState2[0],setShowWindow=_useState2[1],_useState3=Object(react.useState)([]),_useState4=slicedToArray_default()(_useState3,2),works=_useState4[0],setWorks=_useState4[1],_useState5=Object(react.useState)(""),_useState6=slicedToArray_default()(_useState5,2),searchQuery=_useState6[0],setSearchQuery=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1],_useState9=Object(react.useState)(""),_useState10=slicedToArray_default()(_useState9,2),fullName=_useState10[0],setFullName=_useState10[1];Object(react.useEffect)((function(){0===works.length&&loadWorks()}),[]);var loadWorks=function loadWorks(){setIsLoading(!0),Object(WorkList.d)().then((function(res){return res.json()})).then((function(res){setWorks(res),setIsLoading(!1)})).catch((function(error){console.log(error),setIsLoading(!1)}))};return Object(jsx_runtime.jsxs)("div",{className:"select-work-item",children:[Object(jsx_runtime.jsxs)("div",{className:"select-work-item__input",children:[Object(jsx_runtime.jsxs)("div",{className:"select-work-item__input_name main-form__input_name--header",children:[props.inputName+(props.required?"*":""),(void 0===props.readOnly||!props.readOnly)&&Object(jsx_runtime.jsx)(SelectFromButton.a,{text:"Выбрать тип работы",onClick:function onClick(){return setShowWindow(!showWindow)}})]}),(props.defaultValue||fullName)&&Object(jsx_runtime.jsx)("div",{className:"select-work-item__input_field",children:Object(jsx_runtime.jsx)("div",{className:"select-work-item__searchbar",children:Object(jsx_runtime.jsx)("input",{type:"text",className:!0===props.error?"select-work-item__input select-work-item__input--error":"select-work-item__input",value:props.defaultValue?props.defaultValue:fullName,placeholder:"Выберите работу, нажав на кнопку 'Выбрать тип работы'",disabled:!0})})})]}),!0===props.error&&Object(jsx_runtime.jsx)("div",{className:"select-work-item__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,defineProperty_default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),Object(jsx_runtime.jsx)(FormWindow.a,{title:"Выбор работы",windowName:"select-work-item",id:props.id,content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SearchBar.a,{fullSize:!0,setSearchQuery:setSearchQuery,placeholder:"Введите название работы для поиска..."}),Object(jsx_runtime.jsx)(SelectWorkItem_TableViewWork_TableView,{data:works,searchQuery:searchQuery,userHasAccess:props.userHasAccess,selectWork:function clickWork(employeeName,employeeId,newWorkType){setFullName(employeeName),props.handleWorkItemChange(employeeName,employeeId,newWorkType),setShowWindow(!showWindow)},fullName:fullName,isLoading:isLoading,showWindow:showWindow,setShowWindow:setShowWindow})]}),showWindow:showWindow,setShowWindow:setShowWindow})]})};SelectWorkItem_SelectWorkItem_SelectWorkItem.displayName="SelectWorkItem",SelectWorkItem_SelectWorkItem_SelectWorkItem.__docgenInfo={description:"",methods:[],displayName:"SelectWorkItem"};var Work_SelectWorkItem_SelectWorkItem=SelectWorkItem_SelectWorkItem_SelectWorkItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Work\\SelectWorkItem\\SelectWorkItem.jsx"]={name:"SelectWorkItem",docgenInfo:SelectWorkItem_SelectWorkItem_SelectWorkItem.__docgenInfo,path:"src\\components\\MainPage\\Work\\SelectWorkItem\\SelectWorkItem.jsx"});var InputProducts=__webpack_require__(2800),asyncToGenerator=__webpack_require__(284),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),regenerator=__webpack_require__(147),regenerator_default=__webpack_require__.n(regenerator),ok=(__webpack_require__(636),__webpack_require__(442),__webpack_require__(1589),__webpack_require__(441),__webpack_require__(2852),__webpack_require__(2854),__webpack_require__(2674)),ok_default=__webpack_require__.n(ok),TableView_TableView_TableView=function TableView(props){var partTypes={Bench:"Станок",Stamp:"Штамп",Press:"Пресс-форма",Detail:"Деталь"};return Object(react.useEffect)((function(){props.setShowWindow(!1)}),[props.closeWindow]),Object(jsx_runtime.jsx)("div",{className:"select-drafts__list",children:Object(jsx_runtime.jsx)("div",{className:"main-window",children:Object(jsx_runtime.jsxs)("div",{className:"main-window__list main-window__list--full",children:[Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item main-window__list-item--header",children:[Object(jsx_runtime.jsx)("span",{children:"Артикул"}),Object(jsx_runtime.jsx)("span",{children:"Название"}),Object(jsx_runtime.jsx)("span",{children:"Местоположение"}),Object(jsx_runtime.jsx)("span",{children:"Тип"}),Object(jsx_runtime.jsx)("div",{className:"main-window__actions",children:"Действие"})]}),function search(){var re=/[.,\s\-_]/gi,query=props.searchQuery.toLowerCase(),searchArr=query.split(" ");return props.drafts.filter((function(item){var check=!0;return searchArr.map((function(searchWord){!1===item.name.toLowerCase().includes(searchWord.toLowerCase())&&!1===item.number.toLowerCase().replace(re,"").includes(query.replace(re,""))&&(check=!1)})),!0===check}))}().map((function(draft){return Object(jsx_runtime.jsxs)("div",{className:"main-window__list-item",onClick:function onClick(){console.log(draft),props.selectDraft(draft.id,draft.name,draft.type,draft.number),props.setCloseWindow(!props.closeWindow)},children:[Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Артикул:"}),draft.number]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Название:"}),draft.name]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Местоположение:"}),draft.location]}),Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)("div",{className:"main-window__mobile-text",children:"Тип:"}),partTypes[draft.type]]}),Object(jsx_runtime.jsx)("div",{className:"main-window__actions",children:Object(jsx_runtime.jsx)("div",{className:"main-window__action",onClick:function onClick(){props.selectDraft(draft.id,draft.name,draft.type),console.log(props.closeWindow),props.setCloseWindow(!props.closeWindow)},title:"Выбрать деталь",children:Object(jsx_runtime.jsx)("img",{className:"main-window__img",src:ok_default.a,alt:""})})})]},draft.id)}))]})})})};TableView_TableView_TableView.displayName="TableView",TableView_TableView_TableView.__docgenInfo={description:"",methods:[],displayName:"TableView"};var Rigging_SelectDraft_TableView_TableView=TableView_TableView_TableView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Rigging\\SelectDraft\\TableView\\TableView.jsx"]={name:"TableView",docgenInfo:TableView_TableView_TableView.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Rigging\\SelectDraft\\TableView\\TableView.jsx"});var Stamp=__webpack_require__(2714),SelectDraft_SelectDraft_SelectDraft=function SelectDraft(props){var _useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1],_useState3=Object(react.useState)(""),_useState4=slicedToArray_default()(_useState3,2),searchQueryCategory=_useState4[0],setSearchQueryCategory=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),selected=_useState6[0],setSelected=_useState6[1],_useState7=Object(react.useState)([]),_useState8=slicedToArray_default()(_useState7,2),drafts=_useState8[0],setDrafts=_useState8[1],_useState9=Object(react.useState)(!1),_useState10=slicedToArray_default()(_useState9,2),showWindow=_useState10[0],setShowWindow=_useState10[1],_useState11=Object(react.useState)(!1),_useState12=slicedToArray_default()(_useState11,2),closeWindow=_useState12[0],setCloseWindow=_useState12[1],_useState13=Object(react.useState)(!1),_useState14=slicedToArray_default()(_useState13,2),showOptions=_useState14[0],setShowOptions=_useState14[1],_useState15=Object(react.useState)(!1),_useState16=slicedToArray_default()(_useState15,2),defaultValueLoaded=_useState16[0],setDefaultValueLoaded=_useState16[1];function _loadDrafts(){return(_loadDrafts=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var newDrafts;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:props.drafts?setDrafts(toConsumableArray_default()(props.drafts)):(newDrafts=[],Object(Stamp.i)().then((function(res){return res.json()})).then((function(res){return res.map((function(item){return item.stampParts.map((function(stamp){return newDrafts.push(Object.assign({},stamp,{value:stamp.id,label:"".concat(stamp.number,", ").concat(stamp.name),type:"Stamp"}))}))})),setDrafts([].concat(newDrafts))})));case 1:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var clickOnOption=function clickOnOption(event){var value=event.currentTarget.getAttribute("name"),id=event.currentTarget.getAttribute("id"),type=event.currentTarget.getAttribute("type"),number=event.currentTarget.getAttribute("number");setShowOptions(!showOptions);var newDraft={partId:id,name:value,number:number,type:type,quantity:0};setSelected([].concat(toConsumableArray_default()(selected),[newDraft])),props.onChange([].concat(toConsumableArray_default()(selected),[newDraft]))},clickOnSelected=function clickOnSelected(event){var id=event.target.getAttribute("id"),newSelected=selected;newSelected.splice(id,1),setSelected(toConsumableArray_default()(newSelected)),props.onChange(toConsumableArray_default()(newSelected))},handleParamChange=function handleParamChange(event){var value=event.target.value,name=event.target.getAttribute("name"),id=event.target.getAttribute(name+"_id"),newSelected=selected;newSelected=newSelected.map((function(item,index){return Object.assign({},item,defineProperty_default()({},name,index==id?value:item[name]))})),setSelected(toConsumableArray_default()(newSelected)),props.onChange(toConsumableArray_default()(newSelected))},pressEscKey=Object(react.useCallback)((function(event){27===event.keyCode&&setShowOptions(!showOptions)}),[]);return Object(react.useEffect)((function(){return void 0===props.defaultValue||defaultValueLoaded||(setSelected(toConsumableArray_default()(props.defaultValue)),setDefaultValueLoaded(!0)),document.addEventListener("keydown",pressEscKey,!1),0===drafts.length&&function loadDrafts(){return _loadDrafts.apply(this,arguments)}(),function(){document.removeEventListener("keydown",pressEscKey,!1)}}),[props.defaultValue,props.categories,showOptions]),Object(jsx_runtime.jsxs)("div",{className:"select-draft",children:[Object(jsx_runtime.jsxs)("div",{className:"select-draft__input_name main-form__input_name--header",children:["Чертежи",!props.readOnly&&Object(jsx_runtime.jsx)(SelectFromButton.a,{text:"Выбрать чертеж",onClick:function onClick(){return setShowWindow(!showWindow)}})]}),Object(jsx_runtime.jsx)("div",{className:showOptions?"select-draft__overlay":"select-draft__overlay select-draft__overlay--hidden",onClick:function onClick(){return setShowOptions(!showOptions)}}),!props.readOnly&&!props.workshop&&Object(jsx_runtime.jsxs)("div",{className:"select-draft__searchbar",children:[Object(jsx_runtime.jsx)("input",{type:"text",className:!0===props.error?"select-draft__input select-draft__input--error":"select-draft__input",onChange:function handleInputChange(event){setSearchQuery(event.target.value)},onClick:function onClick(){!props.readOnly&&setShowOptions(!showOptions)},placeholder:"Введите артикул чертежа для поиска...",readOnly:props.readOnly||props.workshop}),Object(jsx_runtime.jsx)(FormWindow.a,{title:"Выбор чертежа",content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SearchBar.a,{fullSize:!0,placeholder:"Введите артикул чертежа для поиска...",setSearchQuery:setSearchQueryCategory}),Object(jsx_runtime.jsx)(Rigging_SelectDraft_TableView_TableView,{drafts:drafts,searchQuery:searchQueryCategory,selectDraft:function selectDraft(id,value,type,number){var newDraft={partId:id,type:type,name:value,number:number,quantity:0};setSelected([].concat(toConsumableArray_default()(selected),[newDraft])),props.onChange([].concat(toConsumableArray_default()(selected),[newDraft]))},closeWindow:closeWindow,setCloseWindow:setCloseWindow,setShowWindow:setShowWindow})]}),showWindow:showWindow,setShowWindow:setShowWindow})]}),!0===props.error&&Object(jsx_runtime.jsx)("div",{className:"select-draft__error",onClick:props.setErrorsArr?function(){return props.setErrorsArr(Object.assign({},props.errorsArr,defineProperty_default()({},props.name,!1)))}:null,children:"Поле не заполнено!"}),props.options&&Object(jsx_runtime.jsx)("div",{className:showOptions?"select-draft__options":"select-draft__options select-draft__options--hidden",children:function search(){var re=/[.,\s\-_]/gi,query=searchQuery.toLowerCase(),searchArr=query.split(" ");return(props.drafts?props.drafts:drafts).filter((function(item){var check=!0;return searchArr.map((function(searchWord){!1===item.name.toLowerCase().includes(searchWord.toLowerCase())&&!1===item.number.toLowerCase().replace(re,"").includes(query.replace(re,""))&&(check=!1)})),!0===check}))}().map((function(item,index){return Object(jsx_runtime.jsx)("div",{id:item.id,type:item.type,number:item.number,optionId:index,name:item.name,className:"select-draft__option_item",onClick:clickOnOption,children:Object(jsx_runtime.jsx)("div",{children:item.number+", "+item.name})},index)}))}),Object(jsx_runtime.jsx)("div",{className:"select-draft__selected",children:selected.map((function(item,index){return Object(jsx_runtime.jsxs)("div",{className:"select-draft__selected_row",children:[Object(jsx_runtime.jsxs)("div",{className:"select-draft__selected_item",children:[Object(jsx_runtime.jsx)("input",{type:"text",className:"select-draft__selected_name",name_id:index,name:"name",autoComplete:"off",readOnly:!0,value:"".concat(item.number||"",", ").concat(item.name),onChange:"new"===item.type?handleParamChange:null}),!props.readOnly&&!props.workshop&&Object(jsx_runtime.jsx)("img",{id:index,className:"select-draft__img",src:delete_default.a,alt:"",onClick:clickOnSelected})]}),Object(jsx_runtime.jsxs)("div",{className:"select-draft__selected_quantity",children:[Object(jsx_runtime.jsxs)("span",{className:"select-draft__input-name",children:["Кол-во (шт.)",!props.readOnly&&"*"]}),Object(jsx_runtime.jsx)("input",{quantity_id:index,type:"number",name:"quantity",autoComplete:"off",defaultValue:0!=item.quantity?item.quantity:0,value:item.quantity,onChange:handleParamChange,readOnly:props.readOnly})]})]},index)}))})]})};SelectDraft_SelectDraft_SelectDraft.displayName="SelectDraft",SelectDraft_SelectDraft_SelectDraft.__docgenInfo={description:"",methods:[],displayName:"SelectDraft"};var Rigging_SelectDraft_SelectDraft=SelectDraft_SelectDraft_SelectDraft;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\Dispatcher\\Rigging\\SelectDraft\\SelectDraft.jsx"]={name:"SelectDraft",docgenInfo:SelectDraft_SelectDraft_SelectDraft.__docgenInfo,path:"src\\components\\MainPage\\Dispatcher\\Rigging\\SelectDraft\\SelectDraft.jsx"});var App=__webpack_require__(214),AddToButton=__webpack_require__(2677),useMessageForUser=__webpack_require__(2722),SelectWork_SelectWork_SelectWork=function SelectWork(props){var _props$defaultConfig,_useState=Object(react.useState)(null!==(_props$defaultConfig=props.defaultConfig)&&void 0!==_props$defaultConfig?_props$defaultConfig:[]),_useState2=slicedToArray_default()(_useState,2),selected=_useState2[0],setSelected=_useState2[1],userContext=Object(react.useContext)(App.a),_useState3=Object(react.useState)(0),_useState4=slicedToArray_default()(_useState3,2),selectedIndex=_useState4[0],setSelectedIndex=_useState4[1],_useMessageForUser=Object(useMessageForUser.a)({title:"Удаление элемента",message:"Вы действительно хотите удалить этот элемент?",onClick:function onClick(){return deletePart(selectedIndex)},buttonText:"ОК"}),messageForUser=_useMessageForUser.messageForUser,showMessage=_useMessageForUser.showMessage,setShowMessage=_useMessageForUser.setShowMessage;Object(react.useEffect)((function(){if(void 0!==props.defaultValue){setSelected(toConsumableArray_default()(props.defaultValue));var total=props.defaultValue.reduce((function(sum,cur){return sum+Number.parseFloat(cur.hours)}),0);if(!props.setTotalHours)return;isNaN(total)?props.setTotalHours(0):props.setTotalHours(total)}}),[props.defaultValue,props.options,props.products]);var deletePart=function deletePart(id){var temp=selected;temp.splice(id,1),setSelected(toConsumableArray_default()(temp));var total=temp.reduce((function(sum,cur){return sum+Number.parseFloat(cur.hours)}),0);props.setTotalHours&&(isNaN(total)?props.setTotalHours(0):props.setTotalHours(total),props.handleWorkChange(toConsumableArray_default()(temp)))},handleInputChange=function handleInputChange(event){var id=event.target.getAttribute("index"),name=event.target.getAttribute("name"),value=event.target.value,curSum=selected.reduce((function(sum,cur,curIndex){return Number.parseInt(id)===curIndex?sum:Math.floor(10*(sum+Number.parseFloat(cur.hours)))/10}),0);"hours"===name&&curSum+(value=Number.parseFloat(event.target.value)>12?12:""===event.target.value?0:Number.parseFloat(event.target.value))>12&&(value=Math.floor(10*(12-curSum))/10);var temp=selected,originalItem=selected[id];temp.splice(id,1,Object.assign({},originalItem,defineProperty_default()({},name,value))),props.setTotalHours&&("hours"===name&&(isNaN(curSum)?props.setTotalHours(0):props.setTotalHours(curSum+value)),setSelected(toConsumableArray_default()(temp)),props.handleWorkChange(toConsumableArray_default()(temp)))};return Object(jsx_runtime.jsxs)("div",{className:"select-work",children:[messageForUser,Object(jsx_runtime.jsxs)("div",{className:"main-form__item",children:[Object(jsx_runtime.jsxs)("div",{className:"main-form__input_name main-form__input_name--header",children:["Работы*",!props.readOnly&&!props.noNewItems&&Object(jsx_runtime.jsx)(AddToButton.a,{text:"Добавить работу",onClick:function handleNewPart(){var newPart={product:[],draft:[],workName:"",workType:"",workId:null,hours:0,comment:"",isOld:!1};setSelected([].concat(toConsumableArray_default()(selected),[newPart])),props.handleWorkChange([].concat(toConsumableArray_default()(selected),[newPart]))}})]}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_field",children:Object(jsx_runtime.jsx)("div",{className:"select-work__selected",children:selected.map((function(item,index){return Object(jsx_runtime.jsxs)("div",{className:!props.readOnly&&selected.length>1?"select-work__selected_item select-work__selected_item--minimized":"select-work__selected_item",children:[Object(jsx_runtime.jsxs)("div",{className:"select-work__selected_form",children:[Object(jsx_runtime.jsx)(Work_SelectWorkItem_SelectWorkItem,{inputName:"Выбор работы",required:!0,defaultValue:item.workName,id:index,handleWorkItemChange:function handleWorkItemChange(name,id,type){console.log(name,id,type);var temp=selected,originalItem=selected[index];temp.splice(index,1,Object.assign({},originalItem,{workType:type,workName:name,workId:id})),setSelected(toConsumableArray_default()(temp)),props.handleWorkChange(toConsumableArray_default()(temp))},userHasAccess:userContext.userHasAccess,workItems:props.workItems,readOnly:props.readOnly}),"Продукция"===selected[index].workType||void 0===selected[index].workType||"Продукция"===selected[index].typeOfWork?Object(jsx_runtime.jsx)("div",{className:"select-work__item select-work__item--products",children:Object(jsx_runtime.jsx)("div",{className:"select-work__input_field",children:Object(jsx_runtime.jsx)(InputProducts.a,{inputName:"Продукция",options:!0,defaultValue:item.product,categories:props.categories,products:props.products,numberInput:!0,name:"product",noPackaging:!0,onChange:function onChange(value){var temp=selected,originalItem=selected[index];temp.splice(index,1,Object.assign({},originalItem,{product:value})),setSelected(toConsumableArray_default()(temp)),props.handleWorkChange(toConsumableArray_default()(temp))},userHasAccess:userContext.userHasAccess,searchPlaceholder:"Введите название продукта для поиска..."})})}):"Чертеж"===selected[index].workType?Object(jsx_runtime.jsx)(Rigging_SelectDraft_SelectDraft,{options:!0,defaultValue:item.draft,onChange:function onChange(value){var temp=selected,originalItem=selected[index];temp.splice(index,1,Object.assign({},originalItem,{draft:value})),setSelected(toConsumableArray_default()(temp)),props.handleWorkChange(toConsumableArray_default()(temp))},searchPlaceholder:"Добавьте чертеж нажав на кнопку 'Добавить чертеж'",userHasAccess:userContext.userHasAccess}):null,!props.noComment&&Object(jsx_runtime.jsxs)("div",{className:"select-work__item select-work__item--comment",children:[Object(jsx_runtime.jsx)("div",{className:"select-work__input_name",children:"Комментарий (необязательно)"}),Object(jsx_runtime.jsx)("div",{className:"select-work__input_field",children:Object(jsx_runtime.jsx)("textarea",{type:"text",name:"comment",index:index,autoComplete:"off",onChange:handleInputChange,value:item.comment,readOnly:props.readOnly})})]}),!props.noTime&&Object(jsx_runtime.jsxs)("div",{className:"select-work__item select-work__item--time",children:[Object(jsx_runtime.jsx)("div",{className:"select-work__input_name",children:"Часы"}),Object(jsx_runtime.jsx)("div",{className:"select-work__input_field",children:Object(jsx_runtime.jsx)("input",{type:"number",name:"hours",index:index,autoComplete:"off",onChange:handleInputChange,value:item.hours.toString(),readOnly:props.readOnly})}),!props.readOnly&&selected.length>1&&Object(jsx_runtime.jsx)("img",{index:index,onClick:deletePart,className:"select-work__img select-work__img--new",src:delete_default.a})]})]}),!props.readOnly&&selected.length>1&&Object(jsx_runtime.jsx)("img",{onClick:function onClick(){setSelectedIndex(index),setShowMessage(!showMessage)},className:"select-work__img",src:delete_default.a})]},index)}))})})]})]})};SelectWork_SelectWork_SelectWork.displayName="SelectWork",SelectWork_SelectWork_SelectWork.__docgenInfo={description:"",methods:[],displayName:"SelectWork"};__webpack_exports__.a=SelectWork_SelectWork_SelectWork;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\GeneralPage\\WorkManagement\\SelectWork\\SelectWork.jsx"]={name:"SelectWork",docgenInfo:SelectWork_SelectWork_SelectWork.__docgenInfo,path:"src\\components\\MainPage\\GeneralPage\\WorkManagement\\SelectWork\\SelectWork.jsx"})},3316:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3317);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3317:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,":root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.record-work{--page-items: 2;--min-height: 400px;--item-height: 160px;--buttons-height: 70px}.record-work .main-form__form{overflow-x:hidden;position:relative;overflow-y:hidden;transition:200ms ease-in-out}.record-work .main-form__form .main-form__wrapper{position:absolute;left:20px;top:70px;width:calc(100% * var(--page-items) - 30px);display:flex;flex-direction:row;justify-content:flex-start;justify-self:flex-start;align-self:start;transition:200ms ease-in-out;min-height:100%;min-height:calc(100vh - 200px)}.record-work .main-form__form .main-form__wrapper .main-form__wrapper-item{width:calc(100% / var(--page-items) - 45px);margin-right:45px;min-height:calc(100vh - 200px);height:fit-content}.record-work .main-form__form .main-form__wrapper .main-form__wrapper-item .select__options{max-height:120px}.record-work .main-form__form .main-form__wrapper .main-form__wrapper-item .select-employee{margin-bottom:10px}.record-work .main-form__form .main-form__wrapper .main-form__wrapper-item .select-work-item input:disabled{background-color:#f4f4f4}.record-work .main-form__form .main-form__wrapper .main-form__wrapper-item .select-draft__options{max-height:120px}@media (max-width: 768px){.record-work{--min-height: 725px;--item-height: 180px;--buttons-height: 200px}.record-work .main-form__form .main-form__title{font-size:140%}.record-work .main-form__form .main-form__wrapper .main-form__wrapper-item{width:calc(100% / var(--page-items) - 25px);margin-right:25px}}\n",""]),module.exports=exports},3318:function(module,exports,__webpack_require__){var api=__webpack_require__(48),content=__webpack_require__(3319);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},3319:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,':root{--accent-color--light: #f8f1f1;--accent-color--contrast: #16c79a;--main-color: #4293b6;--main-color--dark: #19456b}.select-work-hours{width:calc(100% - 50px);display:flex;flex-direction:row;padding:25px 0;min-height:250px;padding-left:50px;position:relative}.select-work-hours__panel{background-color:#fff;color:#000;border:1px solid #4293b6;border-radius:5px;padding:25px 15px;cursor:pointer;font-size:100%;transition:0.2s ease-in-out;display:flex;flex-direction:column;justify-content:center;align-items:center;position:absolute;top:0px;right:100px;width:100%;max-width:250px}.select-work-hours__panel div{font-size:90%}.select-work-hours__panel div:nth-child(1){text-align:left;font-weight:bold;font-size:100%;width:100%}.select-work-hours__timeline{position:relative;display:flex;flex-direction:column;padding-left:80px;min-height:100%}.select-work-hours__timeline .select-work-hours__wrapper{display:flex;flex-direction:row}.select-work-hours__timeline .select-work-hours__wrapper--vertical{display:flex;flex-direction:column}.select-work-hours__timeline .select-work-hours__info{background-color:#4293b6;color:#fff;border-radius:3px;padding:10px 10px;cursor:pointer;font-size:80%;transition:0.2s ease-in-out;display:flex;flex-direction:row;justify-content:center;align-items:center;border:1px solid transparent;width:fit-content;min-width:130px;max-width:130px;margin-right:5px;box-sizing:border-box;white-space:nowrap}.select-work-hours__timeline .select-work-hours__info--inverted{background-color:#fff;color:#000;border:1px solid #4293b6}.select-work-hours__timeline .select-work-hours__line{background-color:#dedede;border-bottom-left-radius:5px;border-bottom-right-radius:5px;width:10px;height:100%;min-height:150px;margin-left:60px}.select-work-hours__list{width:100%;padding-top:80px;margin-left:-172px}.select-work-hours__list .select-work-hours__list-item{font-size:90%;margin-bottom:15px;position:relative;transition:100ms ease-in-out;display:flex;flex-direction:column;background-color:#e9e9e9;border:1px solid #cccccc;border-radius:3px;padding:10px 10px;width:100%;max-width:Min(90%, 400px);box-sizing:border-box}.select-work-hours__list .select-work-hours__list-item:hover,.select-work-hours__list .select-work-hours__list-item:focus-within{background-color:#f4f4f4}.select-work-hours__list .select-work-hours__list-item:hover .select-work-hours__work-name,.select-work-hours__list .select-work-hours__list-item:focus-within .select-work-hours__work-name{color:#666666}.select-work-hours__list .select-work-hours__list-item .select-work-hours__work-name{font-weight:500;color:#555555;padding-bottom:0;transition:100ms ease-in-out}.select-work-hours__list .select-work-hours__list-item .select-work-hours__input{margin-top:5px;display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.select-work-hours__list .select-work-hours__list-item .select-work-hours__input span{font-size:90%;color:#444444;padding-right:10px}.select-work-hours__list .select-work-hours__list-item .select-work-hours__input input[type="number"]{border:1px solid #bbbbbb;padding:2.5px 10px;border-radius:3px;outline:none;-moz-appearance:textfield;height:1.25rem;width:calc(60%);max-width:Max(3rem, 50px);font-size:90%}.select-work-hours__list .select-work-hours__list-item .select-work-hours__input input[type="number"]:hover{border-color:#999999}.select-work-hours__list .select-work-hours__list-item .select-work-hours__input input[type="number"]:focus{border:1px solid #4293b6}.select-work-hours__list .select-work-hours__list-item .select-work-hours__input input::-webkit-outer-spin-button,.select-work-hours__list .select-work-hours__list-item .select-work-hours__input input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.select-work-hours__list .select-work-hours__list-item .select-work-hours__products{margin:10px 0;padding-left:20px;font-size:90%}.select-work-hours__list .select-work-hours__list-item .select-work-hours__products li{display:flex;flex-direction:row;align-items:center;margin-bottom:5px}.select-work-hours__list .select-work-hours__list-item .select-work-hours__products li:last-child{margin-bottom:0}.select-work-hours__list .select-work-hours__list-item:last-child{margin-bottom:0}.select-work-hours__list .select-work-hours__list-item .select-work-hours__circle{content:"";position:absolute;top:3.5px;left:-50px;width:27px;height:30px;background-color:#ffffff;z-index:0;transition:100ms ease-in-out}.select-work-hours__list .select-work-hours__list-item:before{content:"";position:absolute;top:8px;left:-44px;width:10px;height:10px;border-radius:999px;border:5px solid #999999;background-color:#fafafa;z-index:1;transition:100ms ease-in-out}.select-work-hours__list .select-work-hours__list-item:after{content:"";position:absolute;top:10px;left:-11px;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-right:10px solid #dfdfdf}@media (max-width: 768px){.select-work-hours{padding-left:0}.select-work-hours .select-work-hours__timeline{padding-left:0}.select-work-hours .select-work-hours__list{width:100%}.select-work-hours .select-work-hours__list .select-work-hours__list-item{max-width:Max(100%, 400px)}}\n',""]),module.exports=exports},3598:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var toConsumableArray=__webpack_require__(65),toConsumableArray_default=__webpack_require__.n(toConsumableArray),defineProperty=__webpack_require__(23),defineProperty_default=__webpack_require__.n(defineProperty),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=(__webpack_require__(333),__webpack_require__(41),__webpack_require__(1583),__webpack_require__(1581),__webpack_require__(213),__webpack_require__(282),__webpack_require__(241),__webpack_require__(2662),__webpack_require__(0)),ErrorMessage=(__webpack_require__(3316),__webpack_require__(2656),__webpack_require__(996)),InputDate=__webpack_require__(2664),SelectEmployee=__webpack_require__(2801),SelectWork=__webpack_require__(2896),functions=(__webpack_require__(1586),__webpack_require__(987),__webpack_require__(242),__webpack_require__(637),__webpack_require__(3318),__webpack_require__(983)),jsx_runtime=__webpack_require__(1),SelectWorkHours_SelectWorkHours_SelectWorkHours=function SelectWorkHours(props){Object(react.useEffect)((function(){}),[props.workArray]);return Object(jsx_runtime.jsxs)("div",{className:"select-work-hours",children:[Object(jsx_runtime.jsxs)("div",{className:"select-work-hours__timeline",children:[Object(jsx_runtime.jsxs)("div",{className:"select-work-hours__wrapper",children:[Object(jsx_runtime.jsx)("div",{className:"select-work-hours__info",children:Object(functions.g)(props.date)}),Object(jsx_runtime.jsxs)("div",{className:"select-work-hours__info select-work-hours__info--inverted",children:["Всего часов:"," ",Math.floor(10*props.workArray.reduce((function(sum,cur){return sum+Number.parseFloat(cur.hours)}),0))/10]})]}),Object(jsx_runtime.jsx)("div",{className:"select-work-hours__line"})]}),Object(jsx_runtime.jsx)("div",{className:"select-work-hours__list",children:props.workArray.map((function(item,index){return Object(jsx_runtime.jsxs)("div",{className:"select-work-hours__list-item",children:[Object(jsx_runtime.jsx)("div",{className:"select-work-hours__circle"}),Object(jsx_runtime.jsx)("span",{className:"select-work-hours__work-name",children:item.workName}),item.product.length>0||item.draft.length>0?Object(jsx_runtime.jsxs)("ul",{className:"select-work-hours__products",children:[item.product.map((function(product){return Object(jsx_runtime.jsx)("li",{children:"".concat(product.name," - ").concat(product.quantity," шт.")},product.id)})),item.draft.map((function(draft){return Object(jsx_runtime.jsx)("li",{children:"".concat(draft.name," - ").concat(draft.quantity," шт.")},draft.id)}))]}):null,Object(jsx_runtime.jsxs)("div",{className:"select-work-hours__input",children:[Object(jsx_runtime.jsx)("span",{children:"Часы* "}),Object(jsx_runtime.jsx)("input",{type:"number",placeholder:"Введите часы...",value:item.hours.toString(),onChange:function onChange(event){return function handleWorkHoursChange(event,index,item){var value;value=event.target.value>12?12:""===event.target.value?0:Number.parseFloat(event.target.value);var curSum=props.workArray.reduce((function(sum,cur,curIndex){return index===curIndex?sum:sum+Number.parseFloat(cur.hours)}),0);curSum+value>12&&(value=Math.floor(10*(12-curSum))/10);var temp=props.workArray;temp.splice(index,1,Object.assign({},item,{hours:value})),props.onChange(toConsumableArray_default()(temp))}(event,index,item)}})]})]},item.id)}))})]})};SelectWorkHours_SelectWorkHours_SelectWorkHours.displayName="SelectWorkHours",SelectWorkHours_SelectWorkHours_SelectWorkHours.__docgenInfo={description:"",methods:[],displayName:"SelectWorkHours"};var WorkManagement_SelectWorkHours_SelectWorkHours=SelectWorkHours_SelectWorkHours_SelectWorkHours;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\GeneralPage\\WorkManagement\\SelectWorkHours\\SelectWorkHours.jsx"]={name:"SelectWorkHours",docgenInfo:SelectWorkHours_SelectWorkHours_SelectWorkHours.__docgenInfo,path:"src\\components\\MainPage\\GeneralPage\\WorkManagement\\SelectWorkHours\\SelectWorkHours.jsx"});var Button=__webpack_require__(181),useProductsList=__webpack_require__(2737),RecordWork_functions=__webpack_require__(2856),hooks=__webpack_require__(2657),WorkControl=__webpack_require__(2684),App=__webpack_require__(214),Employees=__webpack_require__(2709),RecordWork_NewRecordWork=function NewRecordWork(props){var _useState=Object(react.useState)({works:[]}),_useState2=slicedToArray_default()(_useState,2),worktimeInputs=_useState2[0],setWorkTimeInputs=_useState2[1],_useState3=Object(react.useState)({works:!1}),_useState4=slicedToArray_default()(_useState3,2),workTimeErrors=_useState4[0],setWorkTimeErrors=_useState4[1],_useState5=Object(react.useState)({works:!1}),_useState6=slicedToArray_default()(_useState5,2),validInputs=_useState6[0],setValidInputs=_useState6[1],userContext=Object(react.useContext)(App.a),_useState7=Object(react.useState)(!1),_useState8=slicedToArray_default()(_useState7,2),showError=_useState8[0],setShowError=_useState8[1],_useState9=Object(react.useState)(!1),_useState10=slicedToArray_default()(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1],_useState11=Object(react.useState)(null),_useState12=slicedToArray_default()(_useState11,2),curEmployee=_useState12[0],setCurEmployee=_useState12[1],query=Object(hooks.c)().query,_useState13=Object(react.useState)(query.get("date")?new Date(query.get("date")):new Date),_useState14=slicedToArray_default()(_useState13,2),curDate=_useState14[0],setCurDate=_useState14[1],_useProductsList=Object(useProductsList.a)(),products=_useProductsList.products,categories=_useProductsList.categories,_useState15=Object(react.useState)(0),_useState16=slicedToArray_default()(_useState15,2),totalHours=_useState16[0],setTotalHours=_useState16[1],_useState17=Object(react.useState)(0),_useState18=slicedToArray_default()(_useState17,2),curPage=_useState18[0],setCurPage=_useState18[1],_useState19=Object(react.useState)("0px"),_useState20=slicedToArray_default()(_useState19,2),wrapperHeight=_useState20[0],setWrapperHeight=_useState20[1],validateField=function validateField(fieldName,value){switch(fieldName){case"works":setValidInputs(Object.assign({},validInputs,{works:null!==value}));break;default:void 0!==validInputs[fieldName]&&setValidInputs(Object.assign({},validInputs,defineProperty_default()({},fieldName,""!==value)))}},formIsValid=function formIsValid(){var check=!0,newErrors=Object.assign({works:!1});for(var item in validInputs)!1===validInputs[item]&&(check=!1,newErrors=Object.assign(Object.assign({},newErrors,defineProperty_default()({},item,!0))));return setWorkTimeErrors(newErrors),!0===check||(setShowError(!0),!1)},handleSubmit=function handleSubmit(){return 1!==curPage?setCurPage(1):formIsValid?(setIsLoading(!0),Object(RecordWork_functions.a)(worktimeInputs,curDate,curEmployee,setIsLoading).then((function(){return props.history.push("/work-management")}))):void 0};Object(react.useEffect)((function(){document.title="Запись о работе";var abortController=new AbortController,employeeId=query.get("employee")?Number.parseInt(query.get("employee"))!==(null==curEmployee?void 0:curEmployee.id)&&null!==curEmployee?null==curEmployee?void 0:curEmployee.id:query.get("employee"):null==curEmployee?void 0:curEmployee.id;if(employeeId&&curDate&&(query.get("employee")&&null===curEmployee&&(setIsLoading(!0),Object(Employees.d)(query.get("employee")).then((function(res){return res.json()})).then((function(res){return setCurEmployee(res)})).then((function(){return setIsLoading(!1)}))),!(isLoading||worktimeInputs.date===curDate&&worktimeInputs.employeeId===(null==curEmployee?void 0:curEmployee.id))))return console.log(isLoading,curEmployee,curDate,worktimeInputs),setIsLoading(!0),Object(WorkControl.k)(employeeId,curDate.getFullYear(),curDate.getMonth()+1,curDate.getDate()).then((function(_ref){var data=_ref.data,works=data.map((function(item){return{id:item.id,workName:item.workList.work,workId:item.workList.id,workType:item.workList.typeOfWork,hours:item.hours,comment:item.comment,isOld:!0,product:toConsumableArray_default()(item.workControlProduct.map((function(item){return{id:item.id,productId:item.product.id,name:item.product.name,quantity:item.quantity}}))),draft:toConsumableArray_default()(item.partsWorks.map((function(item){return{id:item.id,partId:item.partId,name:item.name,type:item.partType,quantity:item.quantity}})))}}));return console.log(data,works),setWorkTimeInputs(Object.assign({},worktimeInputs,{date:curDate,employeeId:Number.parseInt(employeeId),works:toConsumableArray_default()(works),originalWorks:toConsumableArray_default()(works)})),setIsLoading(!1)})).catch((function(error){console.log(error),alert("Ошибка при загрузке работы!"),props.history.push("/")})),function cancel(){abortController.abort()}}),[curEmployee,curDate]),Object(react.useEffect)((function(){var _document$getElementB;setWrapperHeight((null===(_document$getElementB=document.getElementById("".concat(curPage,"page")))||void 0===_document$getElementB?void 0:_document$getElementB.clientHeight)+"px")}));var handleClickPrevPage=function handleClickPrevPage(){0!==curPage?setCurPage(curPage-1):props.history.push("/")},screenIsMobile=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=768;return Object(jsx_runtime.jsx)("div",{className:"record-work",children:Object(jsx_runtime.jsxs)("div",{className:"main-form",children:[Object(jsx_runtime.jsx)(ErrorMessage.a,{message:"Не заполнены все обязательные поля!",showError:showError,setShowError:setShowError}),Object(jsx_runtime.jsxs)("form",{className:"main-form__form",children:[Object(jsx_runtime.jsx)("div",{className:"main-form__header main-form__header--full",children:Object(jsx_runtime.jsx)("div",{className:"main-form__title",children:"Запись о работе"})}),Object(jsx_runtime.jsx)("div",{style:{height:"calc(".concat(wrapperHeight,")")}}),Object(jsx_runtime.jsxs)("div",{className:"main-form__wrapper",style:{left:"calc(-100% * ".concat(curPage," + (").concat(screenIsMobile?"20px":"35px"," + 15px * ").concat(curPage,"))"),height:"calc(".concat(wrapperHeight,")")},children:[Object(jsx_runtime.jsxs)("div",{className:"main-form__wrapper-item",id:"0page",children:[Object(jsx_runtime.jsx)(InputDate.a,{inputName:"Дата",required:!0,name:"date",selected:curDate,handleDateChange:function handleDateChange(date){setCurDate(date)}}),Object(jsx_runtime.jsx)(SelectEmployee.a,{inputName:"Выбор сотрудника",required:!0,userHasAccess:userContext.userHasAccess,defaultValue:curEmployee,handleEmployeeChange:function handleEmployeeChange(id,name,employee){return setCurEmployee(employee)}}),Object(jsx_runtime.jsx)(SelectWork.a,{handleWorkChange:function handleWorkChange(value){validateField("works",value),setWorkTimeInputs(Object.assign({},worktimeInputs,{works:value})),setWorkTimeErrors(Object.assign({},workTimeErrors,{works:!1}))},userHasAccess:userContext.userHasAccess,defaultValue:worktimeInputs.works,totalHours:totalHours,setTotalHours:setTotalHours,categories:categories,products:products,noTime:!0,noNewItems:!curDate||!curEmployee}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(jsx_runtime.jsxs)("div",{className:"main-form__buttons",children:[Object(jsx_runtime.jsx)(Button.a,{text:"Вернуться назад",isLoading:isLoading,className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:handleClickPrevPage}),worktimeInputs.works.length>0&&worktimeInputs.works.reduce((function(sum,cur){return"Без продукции/чертежа"===cur.workType||"Чертеж"===cur.workType?sum+1:null==cur?void 0:cur.product.length}),0)>0?Object(jsx_runtime.jsx)(Button.a,{text:"Указать часы",isLoading:isLoading,className:"main-form__submit",onClick:handleSubmit}):null]})]}),Object(jsx_runtime.jsxs)("div",{className:"main-form__wrapper-item",id:"1page",children:[Object(jsx_runtime.jsx)(WorkManagement_SelectWorkHours_SelectWorkHours,{workArray:worktimeInputs.works,date:curDate,onChange:function onChange(value){validateField("works",value),setWorkTimeInputs(Object.assign({},worktimeInputs,{works:value})),setWorkTimeErrors(Object.assign({},workTimeErrors,{works:!1}))}}),Object(jsx_runtime.jsx)("div",{className:"main-form__input_hint",children:"* - поля, обязательные для заполнения"}),Object(jsx_runtime.jsxs)("div",{className:"main-form__buttons",children:[Object(jsx_runtime.jsx)(Button.a,{text:"Вернуться назад",isLoading:isLoading,className:"main-form__submit main-form__submit--inverted",inverted:!0,onClick:handleClickPrevPage}),Object(jsx_runtime.jsx)(Button.a,{text:"Сохранить данные",isLoading:isLoading,className:"main-form__submit",onClick:handleSubmit})]})]})]})]})]})})};RecordWork_NewRecordWork.displayName="NewRecordWork",RecordWork_NewRecordWork.__docgenInfo={description:"",methods:[],displayName:"NewRecordWork"};__webpack_exports__.default=RecordWork_NewRecordWork;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MainPage\\GeneralPage\\WorkManagement\\RecordWork\\RecordWork.jsx"]={name:"NewRecordWork",docgenInfo:RecordWork_NewRecordWork.__docgenInfo,path:"src\\components\\MainPage\\GeneralPage\\WorkManagement\\RecordWork\\RecordWork.jsx"})}}]);